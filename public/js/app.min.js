/*! jQuery v1.8.2 jquery.com | jquery.org/license */

/**
 * @license RequireJS text 2.0.7 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/*
 * jQuery UI Widget 1.9.1+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

//     Underscore.js 1.4.4 AMD version
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

/*!
 *  dc 2.0.0-dev
 *  http://nickqizhu.github.io/dc.js/
 *  Copyright 2012 Nick Zhu and other contributors
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

/*!
 * Pusher JavaScript Library v2.1.3
 * http://pusherapp.com/
 *
 * Copyright 2013, Pusher
 * Released under the MIT licence.
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 19.09.11
 * Time: 23:40
 */

/**@license
 *|       __ _____                     ________                              __
 *|      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /
 *|  __ / // // // // // _  // _// // / / // _  // _//     // //  \/ // _ \/ /
 *| /  / // // // // // ___// / / // / / // ___// / / / / // // /\  // // / /__
 *| \___//____ \\___//____//_/ _\_  / /_//____//_/ /_/ /_//_//_/ /_/ \__\_\___/
 *|           \/              /____/                              version {{VER}}
 * http://terminal.jcubic.pl
 *
 * Licensed under GNU LGPL Version 3 license
 * Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>
 *
 * Includes:
 *
 * Storage plugin Distributed under the MIT License
 * Copyright (c) 2010 Dave Schindler
 *
 * jQuery Timers licenced with the WTFPL
 * <http://jquery.offput.ca/every/>
 *
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 *
 * Date: {{DATE}}
 */

/*  js-model JavaScript library, version 0.11.0
 *  (c) 2010-2012 Ben Pickles
 *
 *  Released under MIT license.
 */

/*! pace 0.4.2 */

(function(e,t){function n(e){var t=dt[e]={};return Y.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(mt,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vt.test(r)?Y.parseJSON(r):r}catch(s){}Y.data(e,n,r)}else r=t}return r}function i(e){var t;for(t in e){if(t==="data"&&Y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function s(){return!1}function o(){return!0}function u(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function a(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function f(e,t,n){t=t||0;if(Y.isFunction(t))return Y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return Y.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=Y.grep(e,function(e){return e.nodeType===1});if(Bt.test(t))return Y.filter(t,r,!n);t=Y.filter(t,r)}return Y.grep(e,function(e,r){return Y.inArray(e,t)>=0===n})}function l(e){var t=It.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(t.nodeType!==1||!Y.hasData(e))return;var n,r,i,s=Y._data(e),o=Y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)Y.event.add(t,n,u[n][r])}o.data&&(o.data=Y.extend({},o.data))}function p(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando)}function d(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function v(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=yn.length;while(i--){t=yn[i]+n;if(t in e)return t}return r}function g(e,t){return e=t||e,Y.css(e,"display")==="none"||!Y.contains(e.ownerDocument,e)}function y(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=Y._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&g(n)&&(i[s]=Y._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),!i[s]&&r!=="none"&&Y._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function b(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function w(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=Y.css(e,n+gn[i],!0)),r?(n==="content"&&(s-=parseFloat(nn(e,"padding"+gn[i]))||0),n!=="margin"&&(s-=parseFloat(nn(e,"border"+gn[i]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+gn[i]))||0,n!=="padding"&&(s+=parseFloat(nn(e,"border"+gn[i]+"Width"))||0));return s}function E(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=nn(e,t);if(r<0||r==null)r=e.style[t];if(hn.test(r))return r;i=s&&(Y.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+w(e,t,n||(s?"border":"content"),i)+"px"}function S(e){if(dn[e])return dn[e];var t=Y("<"+e+">").appendTo(R.body),n=t.css("display");t.remove();if(n==="none"||n===""){rn=R.body.appendChild(rn||Y.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!sn||!rn.createElement)sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close();t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)}return dn[e]=n,n}function x(e,t,n,r){var i;if(Y.isArray(t))Y.each(t,function(t,i){n||En.test(e)?r(e,i):x(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&Y.type(t)==="object")for(i in t)x(e+"["+i+"]",t[i],n,r);else r(e,t)}function T(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(tt),u=0,a=o.length;if(Y.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function N(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===jn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=N(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=N(e,n,r,i,"*",o)),u}function C(e,n){var r,i,s=Y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&Y.extend(!0,e,i)}function k(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function L(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Jn=t},0),Jn=Y.now()}function _(e,t){Y.each(t,function(t,n){var r=(er[t]||[]).concat(er["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function D(e,t,n){var r,i=0,s=0,o=Zn.length,u=Y.Deferred().always(function(){delete a.elem}),a=function(){var t=Jn||M(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Jn||M(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=Y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;P(l,f.opts.specialEasing);for(;i<o;i++){r=Zn[i].call(f,e,l,f.opts);if(r)return r}return _(f,l),Y.isFunction(f.opts.start)&&f.opts.start.call(e,f),Y.fx.timer(Y.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function P(e,t){var n,r,i,s,o;for(n in e){r=Y.camelCase(n),i=t[r],s=e[n],Y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=Y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function H(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],v=e.nodeType&&g(e);n.queue||(f=Y._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,Y.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],Y.css(e,"display")==="inline"&&Y.css(e,"float")==="none"&&(!Y.support.inlineBlockNeedsLayout||S(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",Y.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Qn.exec(s)){delete t[r];if(s===(v?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),v?Y(e).show():c.done(function(){Y(e).hide()}),c.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in p)Y.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,v?u[i]:0),p[i]=u[i]||Y.style(e,i),i in u||(u[i]=a.start,v&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function B(e,t,n,r,i){return new B.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=gn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var I,q,R=e.document,U=e.location,z=e.navigator,W=e.jQuery,X=e.$,V=Array.prototype.push,$=Array.prototype.slice,J=Array.prototype.indexOf,K=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,G=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,it=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,ut=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ft=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return(t+"").toUpperCase()},ht=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ht,!1),Y.ready()):R.readyState==="complete"&&(R.detachEvent("onreadystatechange",ht),Y.ready())},pt={};Y.fn=Y.prototype={constructor:Y,init:function(e,n,r){var i,s,o,u;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=rt.exec(e);if(i&&(i[1]||!n)){if(i[1])return n=n instanceof Y?n[0]:n,u=n&&n.nodeType?n.ownerDocument||n:R,e=Y.parseHTML(i[1],u,!0),it.test(i[1])&&Y.isPlainObject(n)&&this.attr.call(e,n,!0),Y.merge(this,e);s=R.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=R,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return Y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Y.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!Y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(s?(s=!1,o=r&&Y.isArray(r)?r:[]):o=r&&Y.isPlainObject(r)?r:{},u[n]=Y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=X),t&&e.jQuery===Y&&(e.jQuery=W),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(e===!0?--Y.readyWait:Y.isReady)return;if(!R.body)return setTimeout(Y.ready,1);Y.isReady=!0;if(e!==!0&&--Y.readyWait>0)return;q.resolveWith(R,[Y]),Y.fn.trigger&&Y(R).trigger("ready").off("ready")},isFunction:function(e){return Y.type(e)==="function"},isArray:Array.isArray||function(e){return Y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||Y.type(e)!=="object"||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Q.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||R,(r=it.exec(e))?[t.createElement(r[1])]:(r=Y.buildFragment([e],t,n?null:[]),Y.merge([],(r.cacheable?Y.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=Y.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(st.test(t.replace(ut,"@").replace(at,"]").replace(ot,"")))return(new Function("return "+t))();Y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ft,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||Y.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:G&&!G.call("ï»¿ ")?function(e){return e==null?"":G.call(e)}:function(e){return e==null?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=Y.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||Y.isWindow(e)?V.call(r,e):Y.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof Y||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||Y.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),Y.isFunction(e)?(i=$.call(arguments,2),s=function(){return e.apply(n,i.concat($.call(arguments)))},s.guid=e.guid=e.guid||Y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)Y.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&Y.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(Y(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!q){q=Y.Deferred();if(R.readyState==="complete")setTimeout(Y.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Y.ready,!1);else{R.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Y.ready);var n=!1;try{n=e.frameElement==null&&R.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!Y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Y.ready()}}()}}return q.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),I=Y(R);var dt={};Y.Callbacks=function(e){e=typeof e=="string"?dt[e]||n(e):Y.extend({},e);var r,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){r=e.memory&&t,i=!0,a=o||0,o=0,u=f.length,s=!0;for(;f&&a<u;a++)if(f[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}s=!1,f&&(l?l.length&&c(l.shift()):r?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function n(t){Y.each(t,function(t,r){var i=Y.type(r);i==="function"&&(!e.unique||!h.has(r))?f.push(r):r&&r.length&&i!=="string"&&n(r)})})(arguments),s?u=f.length:r&&(o=t,c(r))}return this},remove:function(){return f&&Y.each(arguments,function(e,t){var n;while((n=Y.inArray(t,f,n))>-1)f.splice(n,1),s&&(n<=u&&u--,n<=a&&a--)}),this},has:function(e){return Y.inArray(e,f)>-1},empty:function(){return f=[],this},disable:function(){return f=l=r=t,this},disabled:function(){return!f},lock:function(){return l=t,r||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],f&&(!i||l)&&(s?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(n){Y.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](Y.isFunction(o)?function(){var e=o.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?Y.extend(e,r):r}},i={};return r.pipe=r.then,Y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=$.call(arguments),r=n.length,i=r!==1||e&&Y.isFunction(e.promise)?r:0,s=i===1?e:Y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?$.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&Y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),Y.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h=R.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};i=R.createElement("select"),s=i.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:h.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",c)),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),u=R.createDocumentFragment(),u.appendChild(h.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(h);if(h.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})a="on"+f,l=a in h,l||(h.setAttribute(a,"return;"),l=typeof h[a]=="function"),t[f+"Bubbles"]=l;return Y(function(){var n,r,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=R.getElementsByTagName("body")[0];if(!u)return;n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=R.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=r.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&i[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",s=R.createElement("div"),s.style.cssText=r.style.cssText=o,s.style.marginRight=s.style.width="0",r.style.width="1px",r.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),u.removeChild(n),n=r=i=s=null}),u.removeChild(h),n=r=i=s=o=u=h=null,t}();var vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando],!!e&&!i(e)},data:function(e,n,r,i){if(!Y.acceptData(e))return;var s,o,u=Y.expando,a=typeof n=="string",f=e.nodeType,l=f?Y.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=Y.deletedIds.pop()||Y.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=Y.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=Y.extend(l[c],n):l[c].data=Y.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[Y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[Y.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!Y.acceptData(e))return;var r,s,o,u=e.nodeType,a=u?Y.cache:e,f=u?e[Y.expando]:Y.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){Y.isArray(t)||(t in r?t=[t]:(t=Y.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(s=0,o=t.length;s<o;s++)delete r[t[s]];if(!(n?i:Y.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!i(a[f]))return}u?Y.cleanData([e],!0):Y.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null},_data:function(e,t,n){return Y.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,n){var i,s,o,u,a,f=this[0],l=0,c=null;if(e===t){if(this.length){c=Y.data(f);if(f.nodeType===1&&!Y._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")||(u=Y.camelCase(u.substring(5)),r(f,u,c[u]));Y._data(f,"parsedAttrs",!0)}}return c}return typeof e=="object"?this.each(function(){Y.data(this,e)}):(i=e.split(".",2),i[1]=i[1]?"."+i[1]:"",s=i[1]+"!",Y.access(this,function(n){if(n===t)return c=this.triggerHandler("getData"+s,[i[0]]),c===t&&f&&(c=Y.data(f,e),c=r(f,e,c)),c===t&&i[1]?this.data(i[0]):c;i[1]=n,this.each(function(){var t=Y(this);t.triggerHandler("setData"+s,i),Y.data(this,e,n),t.triggerHandler("changeData"+s,i)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y._data(e,t),n&&(!r||Y.isArray(n)?r=Y._data(e,t,Y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Y.queue(e,t),r=n.length,i=n.shift(),s=Y._queueHooks(e,t),o=function(){Y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y._data(e,n)||Y._data(e,n,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,n,!0)})})}}),Y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?Y.queue(this[0],e):n===t?this:this.each(function(){var t=Y.queue(this,e,n);Y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx?Y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=Y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=Y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,Et=/\r/g,St=/^(?:button|input)$/i,xt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,Nt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(tt);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=Y.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(tt);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(wt," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?Y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return Y.isFunction(e)?this.each(function(n){Y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=Y(this),u=t,a=e.split(tt);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&Y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=Y.valHooks[s.type]||Y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(Et,""):r==null?"":r);return}return i=Y.isFunction(e),this.each(function(r){var s,o=Y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":Y.isArray(s)&&(s=Y.map(s,function(e){return e==null?"":e+""})),n=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(Y.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!Y.nodeName(i.parentNode,"optgroup"))){t=Y(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?Y(u[s]).val():o},set:function(e,t){var n=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=Y.inArray(Y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&Y.isFunction(Y.fn[n]))return Y(e)[n](r);if(typeof e.getAttribute=="undefined")return Y.prop(e,n,r);u=a!==1||!Y.isXMLDoc(e),u&&(n=n.toLowerCase(),o=Y.attrHooks[n]||(Nt.test(n)?yt:gt));if(r!==t){if(r===null){Y.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(tt);for(;o<r.length;o++)i=r[o],i&&(n=Y.propFix[i]||i,s=Nt.test(i),s||Y.attr(e,i,""),e.removeAttribute(Ct?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&t==="radio"&&Y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&Y.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null},set:function(e,t,n){if(gt&&Y.nodeName(e,"button"))return gt.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!Y.isXMLDoc(e),o&&(n=Y.propFix[n]||n,s=Y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):xt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var r,i=Y.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Y.removeAttr(e,n):(r=Y.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ct||(bt={name:!0,id:!0,coords:!0},gt=Y.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=R.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),Y.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){t===""&&(t="false"),gt.set(e,t,n)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,n){Y.attrHooks[n]=Y.extend(Y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=Y.inArray(Y(e).val(),t)>=0}})});var kt=/^(?:textarea|input|select)$/i,Lt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,Mt=/^(?:mouse|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){return Y.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=Y._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=Y.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof Y=="undefined"||!!e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=Y.trim(Dt(n)).split(" ");for(f=0;f<n.length;f++){l=Lt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),m=Y.event.special[c]||{},c=(s?m.delegateType:m.bindType)||c,m=Y.event.special[c]||{},p=Y.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&Y.expr.match.needsContext.test(s),namespace:h.join(".")},d),v=a[c];if(!v){v=a[c]=[],v.delegateCount=0;if(!m.setup||m.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?v.splice(v.delegateCount++,0,p):v.push(p),Y.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=Y.hasData(e)&&Y._data(e);if(!m||!(h=m.events))return;t=Y.trim(Dt(t||"")).split(" ");for(s=0;s<t.length;s++){o=Lt.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)Y.event.remove(e,u+t[s],n,r,!0);continue}p=Y.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)v=d[c],(i||a===v.origType)&&(!n||n.guid===v.guid)&&(!f||f.test(v.namespace))&&(!r||r===v.selector||r==="**"&&v.selector)&&(d.splice(c--,1),v.selector&&d.delegateCount--,p.remove&&p.remove.call(e,v));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,m.handle)===!1)&&Y.removeEvent(e,u,m.handle),delete h[u])}Y.isEmptyObject(h)&&(delete m.handle,Y.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o,u,a,f,l,c,h,p,d,v,m=n.type||n,g=[];if(_t.test(m+Y.event.triggered))return;m.indexOf("!")>=0&&(m=m.slice(0,-1),u=!0),m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort());if((!i||Y.event.customEvent[m])&&!Y.event.global[m])return;n=typeof n=="object"?n[Y.expando]?n:new Y.Event(m,n):new Y.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=u,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"";if(!i){o=Y.cache;for(a in o)o[a].events&&o[a].events[m]&&Y.event.trigger(n,r,o[a].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?Y.makeArray(r):[],r.unshift(n),h=Y.event.special[m]||{};if(h.trigger&&h.trigger.apply(i,r)===!1)return;d=[[i,h.bindType||m]];if(!s&&!h.noBubble&&!Y.isWindow(i)){v=h.delegateType||m,f=_t.test(v+m)?i:i.parentNode;for(l=i;f;f=f.parentNode)d.push([f,v]),l=f;l===(i.ownerDocument||R)&&d.push([l.defaultView||l.parentWindow||e,v])}for(a=0;a<d.length&&!n.isPropagationStopped();a++)f=d[a][0],n.type=d[a][1],p=(Y._data(f,"events")||{})[n.type]&&Y._data(f,"handle"),p&&p.apply(f,r),p=c&&f[c],p&&Y.acceptData(f)&&p.apply&&p.apply(f,r)===!1&&n.preventDefault();return n.type=m,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(i.ownerDocument,r)===!1)&&(m!=="click"||!Y.nodeName(i,"a"))&&Y.acceptData(i)&&c&&i[m]&&(m!=="focus"&&m!=="blur"||n.target.offsetWidth!==0)&&!Y.isWindow(i)&&(l=i[c],l&&(i[c]=null),Y.event.triggered=m,i[m](),Y.event.triggered=t,l&&(i[c]=l)),n.result}return},dispatch:function(n){n=Y.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p=(Y._data(this,"events")||{})[n.type]||[],d=p.delegateCount,v=$.call(arguments),m=!n.exclusive&&!n.namespace,g=Y.event.special[n.type]||{},y=[];v[0]=n,n.delegateTarget=this;if(g.preDispatch&&g.preDispatch.call(this,n)===!1)return;if(d&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<d;r++)l=p[r],c=l.selector,u[c]===t&&(u[c]=l.needsContext?Y(c,this).index(s)>=0:Y.find(c,this,null,[s]).length),u[c]&&f.push(l);f.length&&y.push({elem:s,matches:f})}p.length>d&&y.push({elem:this,matches:p.slice(d)});for(r=0;r<y.length&&!n.isPropagationStopped();r++){a=y[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){l=a.matches[i];if(m||!n.namespace&&!l.namespace||n.namespace_re&&n.namespace_re.test(l.namespace))n.data=l.data,n.handleObj=l,o=((Y.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,v),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return g.postDispatch&&g.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||R,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,n,r=e,i=Y.event.fixHooks[e.type]||{},s=i.props?this.props.concat(i.props):this.props;e=Y.Event(r);for(t=s.length;t;)n=s[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||R),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Y.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=Y.extend(new Y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Y.event.trigger(i,null,t):Y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!Y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Y.nodeName(n,"input")||Y.nodeName(n,"button")?n.form:t;r&&!Y._data(r,"_submit_attached")&&(Y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(kt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")Y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)});return!1}Y.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!Y._data(t,"_change_attached")&&(Y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),!kt.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){n++===0&&R.addEventListener(e,r,!0)},teardown:function(){--n===0&&R.removeEventListener(e,r,!0)}}}),Y.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=s;else if(!i)return this;return o===1&&(u=i,i=function(e){return Y().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=s),this.each(function(){Y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Y(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||Y.guid++,r=0,i=function(n){var i=(Y._data(this,"lastToggle"+e.guid)||0)%r;return Y._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Ot.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),Mt.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||M;var i,s,o,u,a=t.nodeType;if(!e||typeof e!="string")return n;if(a!==1&&a!==9)return[];o=E(t);if(!o&&!r)if(i=nt.exec(e))if(u=i[1]){if(a===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&S(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return B.apply(n,j.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&dt&&t.getElementsByClassName)return B.apply(n,j.call(t.getElementsByClassName(u),0)),n}return v(e.replace(G,"$1"),t,n,r,o)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function s(e){return I(function(t){return t=+t,I(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function o(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function u(e,t){var r,i,s,o,u,a,f,l=U[A][e];if(l)return t?0:l.slice(0);u=e,a=[],f=b.preFilter;while(u){if(!r||(i=Z.exec(u)))i&&(u=u.slice(i[0].length)),a.push(s=[]);r=!1;if(i=et.exec(u))s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=i[0].replace(G," ");for(o in b.filter)(i=ft[o].exec(u))&&(!f[o]||(i=f[o](i,M,!0)))&&(s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=o,r.matches=i);if(!r)break}return t?u.length:u?n.error(e):U(e,a).slice(0)}function a(e,t,n){var r=t.dir,i=n&&t.dir==="parentNode",s=P++;return t.first?function(t,n,s){while(t=t[r])if(i||t.nodeType===1)return e(t,n,s)}:function(t,n,o){if(!o){var u,a=D+" "+s+" ",f=a+g;while(t=t[r])if(i||t.nodeType===1){if((u=t[A])===f)return t.sizset;if(typeof u=="string"&&u.indexOf(a)===0){if(t.sizset)return t}else{t[A]=f;if(e(t,n,o))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[r])if(i||t.nodeType===1)if(e(t,n,o))return t}}function f(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function l(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function c(e,t,n,r,i,s){return r&&!r[A]&&(r=c(r)),i&&!i[A]&&(i=c(i,s)),I(function(s,o,u,a){if(s&&i)return;var f,c,h,p=[],v=[],m=o.length,g=s||d(t||"*",u.nodeType?[u]:u,[],s),y=e&&(s||!t)?l(g,p,e,u,a):g,b=n?i||(s?e:m||r)?[]:o:y;n&&n(y,b,u,a);if(r){h=l(b,v),r(h,[],u,a),f=h.length;while(f--)if(c=h[f])b[v[f]]=!(y[v[f]]=c)}if(s){f=e&&b.length;while(f--)if(c=b[f])s[p[f]]=!(o[p[f]]=c)}else b=l(b===o?b.splice(m,b.length):b),i?i(null,o,b,a):B.apply(o,b)})}function h(e){var t,n,r,i=e.length,s=b.relative[e[0].type],o=s||b.relative[" "],u=s?1:0,l=a(function(e){return e===t},o,!0),p=a(function(e){return F.call(t,e)>-1},o,!0),d=[function(e,n,r){return!s&&(r||n!==C)||((t=n).nodeType?l(e,n,r):p(e,n,r))}];for(;u<i;u++)if(n=b.relative[e[u].type])d=[a(f(d),n)];else{n=b.filter[e[u].type].apply(null,e[u].matches);if(n[A]){r=++u;for(;r<i;r++)if(b.relative[e[r].type])break;return c(u>1&&f(d),u>1&&e.slice(0,u-1).join("").replace(G,"$1"),n,u<r&&h(e.slice(u,r)),r<i&&h(e=e.slice(r)),r<i&&e.join(""))}d.push(n)}return f(d)}function p(e,t){var r=t.length>0,i=e.length>0,s=function(o,u,a,f,c){var h,p,d,v=[],m=0,y="0",w=o&&[],E=c!=null,S=C,x=o||i&&b.find.TAG("*",c&&u.parentNode||u),T=D+=S==null?1:Math.E;E&&(C=u!==M&&u,g=s.el);for(;(h=x[y])!=null;y++){if(i&&h){for(p=0;d=e[p];p++)if(d(h,u,a)){f.push(h);break}E&&(D=T,g=++s.el)}r&&((h=!d&&h)&&m--,o&&w.push(h))}m+=y;if(r&&y!==m){for(p=0;d=t[p];p++)d(w,v,u,a);if(o){if(m>0)while(y--)!w[y]&&!v[y]&&(v[y]=H.call(f));v=l(v)}B.apply(f,v),E&&!o&&v.length>0&&m+t.length>1&&n.uniqueSort(f)}return E&&(D=T,C=S),w};return s.el=0,r?I(s):s}function d(e,t,r,i){var s=0,o=t.length;for(;s<o;s++)n(e,t[s],r,i);return r}function v(e,t,n,r,i){var s,o,a,f,l,c=u(e),h=c.length;if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!i&&b.relative[o[1].type]){t=b.find.ID(a.matches[0].replace(at,""),t,i)[0];if(!t)return n;e=e.slice(o.shift().length)}for(s=ft.POS.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(b.relative[f=a.type])break;if(l=b.find[f])if(r=l(a.matches[0].replace(at,""),it.test(o[0].type)&&t.parentNode||t,i)){o.splice(s,1),e=r.length&&o.join("");if(!e)return B.apply(n,j.call(r,0)),n;break}}}return x(e,c)(r,t,i,n,it.test(e)),n}function m(){}var g,y,b,w,E,S,x,T,N,C,k=!0,L="undefined",A=("sizcache"+Math.random()).replace(".",""),O=String,M=e.document,_=M.documentElement,D=0,P=0,H=[].pop,B=[].push,j=[].slice,F=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},I=function(e,t){return e[A]=t==null||t,e},q=function(){var e={},t=[];return I(function(n,r){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n]=r},e)},R=q(),U=q(),z=q(),W="[\\x20\\t\\r\\n\\f]",X="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=X.replace("w","w#"),$="([*^$|!~]?=)",J="\\["+W+"*("+X+")"+W+"*(?:"+$+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+W+"*\\]",K=":("+X+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+J+")|[^:]|\\\\.)*|.*))\\)|)",Q=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",G=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=new RegExp("^"+W+"*,"+W+"*"),et=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),tt=new RegExp(K),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rt=/^:not/,it=/[\x20\t\r\n\f]*[+~]/,st=/:not\($/,ot=/h\d/i,ut=/input|select|textarea|button/i,at=/\\(?!\\)/g,ft={ID:new RegExp("^#("+X+")"),CLASS:new RegExp("^\\.("+X+")"),NAME:new RegExp("^\\[name=['\"]?("+X+")['\"]?\\]"),TAG:new RegExp("^("+X.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+K),POS:new RegExp(Q,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+Q,"i")},lt=function(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),ht=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"}),pt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),vt=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",_.insertBefore(e,_.firstChild);var t=M.getElementsByName&&M.getElementsByName(A).length===2+M.getElementsByName(A+0).length;return y=!M.getElementById(A),_.removeChild(e),t});try{j.call(_.childNodes,0)[0].nodeType}catch(mt){j=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},w=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=w(t);return n},E=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},S=n.contains=_.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:_.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=E(e);return r||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):r||pt?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:I,match:ft,attrHandle:ht?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==L&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==L&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==L&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:ct?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:vt&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},CLASS:dt&&function(e,t,n){if(typeof t.getElementsByClassName!==L&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;if(ft.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])tt.test(t)&&(n=u(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:y?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var n=typeof t.getAttributeNode!==L&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=R[A][e];return t||(t=R(e,new RegExp("(^|"+W+")"+e+"("+W+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")}},ATTR:function(e,t,r){return function(i,s){var o=n.attr(i,e);return o==null?t==="!=":t?(o+="",t==="="?o===r:t==="!="?o!==r:t==="^="?r&&o.indexOf(r)===0:t==="*="?r&&o.indexOf(r)>-1:t==="$="?r&&o.substr(o.length-r.length)===r:t==="~="?(" "+o+" ").indexOf(r)>-1:t==="|="?o===r||o.substr(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var r,i=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return i[A]?i(t):i.length>1?(r=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?I(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=F.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,r)}):i}},pseudos:{not:I(function(e){var t=[],n=[],r=x(e.replace(G,"$1"));return r[A]?I(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:I(function(e){return function(t){return n(e,t).length>0}}),contains:I(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:i("submit"),reset:i("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return ut.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:s(function(e,t,n){return[0]}),last:s(function(e,t,n){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:s(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},T=_.compareDocumentPosition?function(e,t){return e===t?(N=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return N=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a)return o(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return o(i[l],s[l]);return l===n?o(e,s[l],-1):o(i[l],t,1)},[0,0].sort(T),k=!N,n.uniqueSort=function(e){var t,n=1;N=k,e.sort(T);if(N)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},x=n.compile=function(e,t){var n,r=[],i=[],s=z[A][e];if(!s){t||(t=u(e)),n=t.length;while(n--)s=h(t[n]),s[A]?r.push(s):i.push(s);s=z(e,p(i,r))}return s},M.querySelectorAll&&function(){var e,t=v,r=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],o=[":active",":focus"],a=_.matchesSelector||_.mozMatchesSelector||_.webkitMatchesSelector||_.oMatchesSelector||_.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=new RegExp(s.join("|")),v=function(e,n,i,o,a){if(!o&&!a&&(!s||!s.test(e))){var f,l,c=!0,h=A,p=n,d=n.nodeType===9&&e;if(n.nodeType===1&&n.nodeName.toLowerCase()!=="object"){f=u(e),(c=n.getAttribute("id"))?h=c.replace(r,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",l=f.length;while(l--)f[l]=h+f[l].join("");p=it.test(e)&&n.parentNode||n,d=f.join(",")}if(d)try{return B.apply(i,j.call(p.querySelectorAll(d),0)),i}catch(v){}finally{c||n.removeAttribute("id")}}return t(e,n,i,o,a)},a&&(lt(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),o.push("!=",K)}catch(n){}}),o=new RegExp(o.join("|")),n.matchesSelector=function(t,r){r=r.replace(i,"='$1']");if(!E(t)&&!o.test(r)&&(!s||!s.test(r)))try{var u=a.call(t,r);if(u||e||t.document&&t.document.nodeType!==11)return u}catch(f){}return n(r,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=m.prototype=b.pseudos,b.setFilters=new m,n.attr=Y.attr,Y.find=n,Y.expr=n.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=n.uniqueSort,Y.text=n.getText,Y.isXMLDoc=n.isXML,Y.contains=n.contains}(e);var Pt=/Until$/,Ht=/^(?:parents|prev(?:Until|All))/,Bt=/^.[^:#\[\.,]*$/,jt=Y.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return Y(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(Y.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,Y.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=Y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1),"not",e)},filter:function(e){return this.pushStack(f(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?jt.test(e)?Y(e,this.context).index(this[0])>=0:Y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=jt.test(e)||typeof e!="string"?Y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:Y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?Y.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),r=Y.merge(this.get(),n);return this.pushStack(u(n[0])||u(r[0])?r:Y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Y.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Y.dir(e,"previousSibling",n)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(n,r){var i=Y.map(this,t,n);return Pt.test(e)||(r=n),r&&typeof r=="string"&&(i=Y.filter(r,i)),i=this.length>1&&!Ft[e]?Y.unique(i):i,this.length>1&&Ht.test(e)&&(i=i.reverse()),this.pushStack(i,e,$.call(arguments).join(","))}}),Y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!Y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,Xt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+It+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/\/(java|ecma)script/i,Yt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=l(R),tn=en.appendChild(R.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Y.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(n){Y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||Y.filter(e,[n]).length)!t&&n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),Y.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&Y.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(qt,""):t;if(typeof e=="string"&&!Vt.test(e)&&(Y.support.htmlSerialize||!Jt.test(e))&&(Y.support.leadingWhitespace||!Rt.test(e))&&!Zt[(zt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ut,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var n=Y(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],h=this.length;if(!Y.support.checkClone&&h>1&&typeof f=="string"&&Qt.test(f))return this.each(function(){Y(this).domManip(e,n,r)});if(Y.isFunction(f))return this.each(function(i){var s=Y(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=Y.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&Y.nodeName(s,"tr");for(u=i.cacheable||h-1;a<h;a++)r.call(n&&Y.nodeName(this[a],"table")?c(this[a],"tbody"):this[a],a===u?o:Y.clone(o,!0,!0))}o=s=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Yt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,n,r){var i,s,o,u=e[0];return n=n||R,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof u=="string"&&u.length<512&&n===R&&u.charAt(0)==="<"&&!$t.test(u)&&(Y.support.checkClone||!Qt.test(u))&&(Y.support.html5Clone||!Jt.test(u))&&(s=!0,i=Y.fragments[u],o=i!==t),i||(i=n.createDocumentFragment(),Y.clean(e,n,i,r),s&&(Y.fragments[u]=o&&i)),{fragment:i,cacheable:s}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(n){var r,i=0,s=[],o=Y(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),Y(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),Y.extend({clone:function(e,t,n){var r,i,s,o;Y.support.html5Clone||Y.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild));if((!Y.support.noCloneEvent||!Y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!Y.isXMLDoc(e)){p(e,o),r=d(e),i=d(o);for(s=0;r[s];++s)i[s]&&p(r[s],i[s])}if(t){h(e,o);if(n){r=d(e),i=d(o);for(s=0;r[s];++s)h(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i,s,o,u,a,f,c,h,p,d,m,g,y=t===R&&en,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=R;for(i=0;(o=e[i])!=null;i++){typeof o=="number"&&(o+="");if(!o)continue;if(typeof o=="string")if(!Xt.test(o))o=t.createTextNode(o);else{y=y||l(t),c=t.createElement("div"),y.appendChild(c),o=o.replace(Ut,"<$1></$2>"),u=(zt.exec(o)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,f=a[0],c.innerHTML=a[1]+o+a[2];while(f--)c=c.lastChild;if(!Y.support.tbody){h=Wt.test(o),p=u==="table"&&!h?c.firstChild&&c.firstChild.childNodes:a[1]==="<table>"&&!h?c.childNodes:[];for(s=p.length-1;s>=0;--s)Y.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!Y.support.leadingWhitespace&&Rt.test(o)&&c.insertBefore(t.createTextNode(Rt.exec(o)[0]),c.firstChild),o=c.childNodes,c.parentNode.removeChild(c)}o.nodeType?b.push(o):Y.merge(b,o)}c&&(o=c=y=null);if(!Y.support.appendChecked)for(i=0;(o=b[i])!=null;i++)Y.nodeName(o,"input")?v(o):typeof o.getElementsByTagName!="undefined"&&Y.grep(o.getElementsByTagName("input"),v);if(n){m=function(e){if(!e.type||Gt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(i=0;(o=b[i])!=null;i++)if(!Y.nodeName(o,"script")||!m(o))n.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(g=Y.grep(Y.merge([],o.getElementsByTagName("script")),m),b.splice.apply(b,[i+1,0].concat(g)),i+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=Y.expando,a=Y.cache,f=Y.support.deleteExpando,l=Y.event.special;for(;(i=e[o])!=null;o++)if(t||Y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?Y.event.remove(i,s):Y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,Y.deletedIds.push(r))}}}}),function(){var e,t;Y.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Y.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Y.browser=t,Y.sub=function(){function e(t,n){return new e.fn.init(t,n)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function n(n,r){return r&&r instanceof Y&&!(r instanceof e)&&(r=e(r)),Y.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,sn,on=/alpha\([^)]*\)/i,un=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,fn=/^(none|table(?!-c[ea]).+)/,ln=/^margin/,cn=new RegExp("^("+Z+")(.*)$","i"),hn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+Z+")","i"),dn={},vn={position:"absolute",visibility:"hidden",display:"block"},mn={letterSpacing:0,fontWeight:400},gn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Y.fn.toggle;Y.fn.extend({css:function(e,n){return Y.access(this,function(e,n,r){return r!==t?Y.style(e,n,r):Y.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n=typeof e=="boolean";return Y.isFunction(e)&&Y.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:g(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=Y.camelCase(n),f=e.style;n=Y.cssProps[a]||(Y.cssProps[a]=m(f,a)),u=Y.cssHooks[n]||Y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=pn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(Y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!Y.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=Y.camelCase(n);return n=Y.cssProps[a]||(Y.cssProps[a]=m(e.style,a)),u=Y.cssHooks[n]||Y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=nn(e,n)),s==="normal"&&n in mn&&(s=mn[n]),r||i!==t?(o=parseFloat(s),r||Y.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?nn=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!Y.contains(t.ownerDocument,t)&&(r=Y.style(t,n)),hn.test(r)&&ln.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:R.documentElement.currentStyle&&(nn=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),hn.test(i)&&!an.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&fn.test(nn(e,"display"))?Y.swap(e,vn,function(){return E(e,t,r)}):E(e,t,r)},set:function(e,n,r){return b(e,n,r?w(e,t,r,Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box"):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return un.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&Y.trim(s.replace(on,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=on.test(s)?s.replace(on,i):s+" "+i}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return nn(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return hn.test(r)?Y(e).position()[t]+"px":r}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!Y.support.reliableHiddenOffsets&&(e.style&&e.style.display||nn(e,"display"))==="none"},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+gn[r]+t]=i[r]||i[r-2]||i[0];return s}},ln.test(e)||(Y.cssHooks[e+t].set=b)});var wn=/%20/g,En=/\[\]$/,Sn=/\r?\n/g,xn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tn=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tn.test(this.nodeName)||xn.test(this.type))}).map(function(e,t){var n=Y(this).val();return n==null?null:Y.isArray(n)?Y.map(n,function(e,n){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Y.param=function(e,n){var r,i=[],s=function(e,t){t=Y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=Y.ajaxSettings&&Y.ajaxSettings.traditional);if(Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){s(this.name,this.value)});else for(r in e)x(r,e[r],n,s);return i.join("&").replace(wn,"+")};var Nn,Cn,kn=/#.*$/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Mn=/^\/\//,_n=/\?/,Dn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Pn=/([?&])_=[^&]*/,Hn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=Y.fn.load,jn={},Fn={},In=["*/"]+["*"];try{Cn=U.href}catch(qn){Cn=R.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Hn.exec(Cn.toLowerCase())||[],Y.fn.load=function(e,n,r){if(typeof e!="string"&&Bn)return Bn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),Y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),Y.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?Y("<div>").append(e.replace(Dn,"")).find(i):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,r,i,s){return Y.isFunction(r)&&(s=s||i,i=r,r=t),Y.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),Y.extend({getScript:function(e,n){return Y.get(e,t,n,"script")},getJSON:function(e,t,n){return Y.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),C(e,t),e},ajaxSettings:{url:Cn,isLocal:An.test(Nn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":In},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(jn),ajaxTransport:T(Fn),ajax:function(e,n){function r(e,n,r,o){var f,c,y,b,E,x=n;if(w===2)return;w=2,a&&clearTimeout(a),u=t,s=o||"",S.readyState=e>0?4:0,r&&(b=k(h,S,r));if(e>=200&&e<300||e===304)h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(Y.lastModified[i]=E),E=S.getResponseHeader("Etag"),E&&(Y.etag[i]=E)),e===304?(x="notmodified",f=!0):(f=L(h,b),x=f.state,c=f.data,y=f.error,f=!y);else{y=x;if(!x||e)x="error",e<0&&(e=0)}S.status=e,S.statusText=(n||x)+"",f?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,l&&d.trigger("ajax"+(f?"Success":"Error"),[S,h,f?c:y]),m.fireWith(p,[S,x]),l&&(d.trigger("ajaxComplete",[S,h]),--Y.active||Y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=Y.ajaxSetup({},n),p=h.context||h,d=p!==h&&(p.nodeType||p instanceof Y)?Y(p):Y.event,v=Y.Deferred(),m=Y.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return w===2?s:null},getResponseHeader:function(e){var n;if(w===2){if(!o){o={};while(n=Ln.exec(s))o[n[1].toLowerCase()]=n[2]}n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||E,u&&u.abort(e),r(0,e),this}};v.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(w<2)for(t in e)g[t]=[g[t],e[t]];else t=e[S.status],S.always(t)}return this},h.url=((e||h.url)+"").replace(kn,"").replace(Mn,Nn[1]+"//"),h.dataTypes=Y.trim(h.dataType||"*").toLowerCase().split(tt),h.crossDomain==null&&(f=Hn.exec(h.url.toLowerCase())||!1,h.crossDomain=f&&f.join(":")+(f[3]?"":f[1]==="http:"?80:443)!==Nn.join(":")+(Nn[3]?"":Nn[1]==="http:"?80:443)),h.data&&h.processData&&typeof h.data!="string"&&(h.data=Y.param(h.data,h.traditional)),N(jn,h,n,S);if(w===2)return S;l=h.global,h.type=h.type.toUpperCase(),h.hasContent=!On.test(h.type),l&&Y.active++===0&&Y.event.trigger("ajaxStart");if(!h.hasContent){h.data&&(h.url+=(_n.test(h.url)?"&":"?")+h.data,delete h.data),i=h.url;if(h.cache===!1){var x=Y.now(),T=h.url.replace(Pn,"$1_="+x);h.url=T+(T===h.url?(_n.test(h.url)?"&":"?")+"_="+x:"")}}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(i=i||h.url,Y.lastModified[i]&&S.setRequestHeader("If-Modified-Since",Y.lastModified[i]),Y.etag[i]&&S.setRequestHeader("If-None-Match",Y.etag[i])),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+In+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)S.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&w!==2){E="abort";for(c in{success:1,error:1,complete:1})S[c](h[c]);u=N(Fn,h,n,S);if(!u)r(-1,"No Transport");else{S.readyState=1,l&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,u.send(y,r)}catch(C){if(!(w<2))throw C;r(-1,C)}}return S}return S.abort()},active:0,lastModified:{},etag:{}});var Rn=[],Un=/\?/,zn=/(=)\?(?=&|$)|\?\?/,Wn=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Y.expando+"_"+Wn++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&zn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=Y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(zn,"$1"+s):h?n.data=a.replace(zn,"$1"+s):l&&(n.url+=(Un.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||Y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Rn.push(s)),u&&Y.isFunction(o)&&o(u[0]),u=o=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(i,s){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Xn,Vn=e.ActiveXObject?function(){for(var e in Xn)Xn[e](0,1)}:!1,$n=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||O()}:A,function(e){Y.extend(Y.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Y.ajaxSettings.xhr()),Y.support.ajax&&Y.ajaxTransport(function(n){if(!n.crossDomain||Y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=Y.noop,Vn&&delete Xn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++$n,Vn&&(Xn||(Xn={},Y(e).unload(Vn)),Xn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Jn,Kn,Qn=/^(?:toggle|show|hide)$/,Gn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Yn=/queueHooks$/,Zn=[H],er={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Gn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(Y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=Y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,Y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};Y.Animation=Y.extend(D,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),Y.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(Y.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=Y.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[Y.cssProps[e.prop]]!=null||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var n=Y.fn[t];Y.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&Y.isFunction(r)&&Y.isFunction(i)?n.apply(this,arguments):this.animate(j(t,!0),r,i,s)}}),Y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Y.isEmptyObject(e),s=Y.speed(t,n,r),o=function(){var t=D(this,Y.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=Y.timers,o=Y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Yn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&Y.dequeue(this,e)})}}),Y.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Y.speed=function(e,t,n){var r=e&&typeof e=="object"?Y.extend({},e):{complete:n||!n&&t||Y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Y.isFunction(t)&&t};r.duration=Y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in Y.fx.speeds?Y.fx.speeds[r.duration]:Y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){Y.isFunction(r.old)&&r.old.call(this),r.queue&&Y.dequeue(this,r.queue)},r},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=B.prototype.init,Y.fx.tick=function(){var e,t=Y.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!Kn&&(Kn=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(Kn),Kn=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?Y.offset.bodyOffset(l):(n=c.documentElement,Y.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=F(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},Y.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,n+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Y.css(e,"position");r==="static"&&(e.style.position="relative");var i=Y(e),s=i.offset(),o=Y.css(e,"top"),u=Y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&Y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),Y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},Y.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Y.css(e,"marginTop"))||0,n.left-=parseFloat(Y.css(e,"marginLeft"))||0,r.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||R.body;while(e&&!tr.test(e.nodeName)&&Y.css(e,"position")==="static")e=e.offsetParent;return e||R.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Y.fn[e]=function(i){return Y.access(this,function(e,i,s){var o=F(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?Y(o).scrollLeft():s,r?s:Y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,n){Y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){Y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return Y.access(this,function(n,r,i){var s;return Y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?Y.css(n,r,i,u):Y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=Y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})})(window),jQuery.fn.highlight=function(){$(this).each(function(){var e=$(this);$("<div/>").width(e.outerWidth()).height(e.outerHeight()).css({position:"absolute",left:e.offset().left,top:e.offset().top,"background-color":"#ffff99",opacity:".7","z-index":"9999999"}).appendTo("body").fadeOut(1e3).queue(function(){$(this).remove()})})},function(e){var t=function(){var e=function(){};return e.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){r||(this.context=t,this.buffer=[]);if(!this.includes("",e)){if(r)return e;this.send(e);return}e=this.render_pragmas(e);var i=this.render_section(e,t,n);if(r)return this.render_tags(i,t,n,r);this.render_tags(i,t,n,r)},send:function(e){e!=""&&this.buffer.push(e)},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return e.replace(n,function(e,n,r){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};t.pragmas[n]={};if(r){var i=r.split("=");t.pragmas[n][i[0]]=i[1]}return""})},render_partial:function(e,t,n){e=this.trim(e);if(!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return typeof t[e]!="object"?this.render(n[e],t,n,!0):this.render(n[e],t[e],n,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return e;var r=this,i=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return e.replace(i,function(e,i,s,o){var u=r.find(s,t);if(i=="^")return!u||r.is_array(u)&&u.length===0?r.render(o,t,n,!0):"";if(i=="#")return r.is_array(u)?r.map(u,function(e){return r.render(o,r.create_context(e),n,!0)}).join(""):r.is_object(u)?r.render(o,r.create_context(u),n,!0):typeof u=="function"?u.call(t,o,function(e){return r.render(e,t,n,!0)}):u?r.render(o,t,n,!0):""})},render_tags:function(e,t,n,r){var i=this,s=function(){return new RegExp(i.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+i.ctag+"+","g")},o=s(),u=function(e,r,u){switch(r){case"!":return"";case"=":return i.set_delimiters(u),o=s(),"";case">":return i.render_partial(u,t,n);case"{":return i.find(u,t);default:return i.escape(i.find(u,t))}},a=e.split("\n");for(var f=0;f<a.length;f++)a[f]=a[f].replace(o,u,this),r||this.send(a[f]);if(r)return a.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||e===0||e}e=this.trim(e);var r;return n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]),typeof r=="function"?r.apply(t):r!==undefined?r:""},includes:function(e,t){return t.indexOf(this.otag+e)!=-1},escape:function(e){return e=String(e===null?"":e),e.replace(/&(?!\w+;)|["<>\\]/g,function(e){switch(e){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return e}})},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&typeof e=="object"},is_array:function(e){return Object.prototype.toString.call(e)==="[object Array]"},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},map:function(e,t){if(typeof e.map=="function")return e.map(t);var n=[],r=e.length;for(var i=0;i<r;i++)n.push(t(e[i]));return n}},{name:"mustache.js",version:"0.3.1-dev",to_html:function(t,n,r,i){var s=new e;i&&(s.send=i),s.render(t,n,r);if(!i)return s.buffer.join("\n")},escape:function(t){return(new e).escape(t)}}}();e.mustache=function(e,n,r){return t.to_html(e,n,r)},e.mustache.escape=function(e){return t.escape(e)}}(jQuery),function(e,t){(function(n){typeof define=="function"&&define.amd?define("sammy",["jquery"],n):e.sammy=t.Sammy=n(e)})(function(e){var n,r="([^/]+)",i=/:([\w\d]+)/g,s=/\?([^#]*)?$/,o=function(e){return Array.prototype.slice.call(e)},u=function(e){return Object.prototype.toString.call(e)==="[object Function]"},a=function(e){return Object.prototype.toString.call(e)==="[object Array]"},f=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},l=function(e){return decodeURIComponent((e||"").replace(/\+/g," "))},c=encodeURIComponent,h=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return function(){return this.route.apply(this,[e].concat(Array.prototype.slice.call(arguments)))}},d={},v=!!t.history&&!!history.pushState,m=[];return n=function(){var t=o(arguments),r,i;n.apps=n.apps||{};if(t.length===0||t[0]&&u(t[0]))return n.apply(n,["body"].concat(t));if(typeof (i=t.shift())=="string")return r=n.apps[i]||new n.Application,r.element_selector=i,t.length>0&&e.each(t,function(e,t){r.use(t)}),r.element_selector!=i&&delete n.apps[i],n.apps[r.element_selector]=r,r},n.VERSION="0.7.4",n.addLogger=function(e){m.push(e)},n.log=function(){var t=o(arguments);t.unshift("["+Date()+"]"),e.each(m,function(e,r){r.apply(n,t)})},typeof t.console!="undefined"?u(t.console.log.apply)?n.addLogger(function(){t.console.log.apply(t.console,arguments)}):n.addLogger(function(){t.console.log(arguments)}):typeof console!="undefined"&&n.addLogger(function(){console.log.apply(console,arguments)}),e.extend(n,{makeArray:o,isFunction:u,isArray:a}),n.Object=function(t){return e.extend(this,t||{})},e.extend(n.Object.prototype,{escapeHTML:h,h:h,toHash:function(){var t={};return e.each(this,function(e,n){u(n)||(t[e]=n)}),t},toHTML:function(){var t="";return e.each(this,function(e,n){u(n)||(t+="<strong>"+e+"</strong> "+n+"<br />")}),t},keys:function(e){var t=[];for(var n in this)(!u(this[n])||!e)&&t.push(n);return t},has:function(t){return this[t]&&e.trim(this[t].toString())!==""},join:function(){var e=o(arguments),t=e.shift();return e.join(t)},log:function(){n.log.apply(n,arguments)},toString:function(t){var n=[];return e.each(this,function(e,r){(!u(r)||t)&&n.push('"'+e+'": '+r.toString())}),"Sammy.Object: {"+n.join(",")+"}"}}),n.targetIsThisWindow=function(n){var r=e(n.target).attr("target");return!r||r===t.name||r==="_self"?!0:r==="_blank"?!1:r==="top"&&t===t.top?!0:!1},n.DefaultLocationProxy=function(e,t){this.app=e,this.is_native=!1,this.has_history=v,this._startPolling(t)},n.DefaultLocationProxy.fullPath=function(e){var t=e.toString().match(/^[^#]*(#.+)$/),n=t?t[1]:"";return[e.pathname,e.search,n].join("")},e.extend(n.DefaultLocationProxy.prototype,{bind:function(){var r=this,i=this.app,s=n.DefaultLocationProxy;e(t).bind("hashchange."+this.app.eventNamespace(),function(e,n){r.is_native===!1&&!n&&(r.is_native=!0,t.clearInterval(s._interval),s._interval=null),i.trigger("location-changed")}),v&&!i.disable_push_state&&(e(t).bind("popstate."+this.app.eventNamespace(),function(e){i.trigger("location-changed")}),e(document).delegate("a","click.history-"+this.app.eventNamespace(),function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;var o=s.fullPath(this);if(this.hostname==t.location.hostname&&i.lookupRoute("get",o)&&n.targetIsThisWindow(e))return e.preventDefault(),r.setLocation(o),!1})),s._bindings||(s._bindings=0),s._bindings++},unbind:function(){e(t).unbind("hashchange."+this.app.eventNamespace()),e(t).unbind("popstate."+this.app.eventNamespace()),e(document).undelegate("a","click.history-"+this.app.eventNamespace()),n.DefaultLocationProxy._bindings--,n.DefaultLocationProxy._bindings<=0&&(t.clearInterval(n.DefaultLocationProxy._interval),n.DefaultLocationProxy._interval=null)},getLocation:function(){return n.DefaultLocationProxy.fullPath(t.location)},setLocation:function(e){/^([^#\/]|$)/.test(e)&&(v&&!this.app.disable_push_state?e="/"+e:e="#!/"+e);if(e!=this.getLocation()){if(!(v&&!this.app.disable_push_state&&/^\//.test(e)))return t.location=e;history.pushState({path:e},t.title,e),this.app.trigger("location-changed")}},_startPolling:function(r){var i=this;if(!n.DefaultLocationProxy._interval){r||(r=10);var s=function(){var r=i.getLocation();(typeof n.DefaultLocationProxy._last_location=="undefined"||r!=n.DefaultLocationProxy._last_location)&&t.setTimeout(function(){e(t).trigger("hashchange",[!0])},0),n.DefaultLocationProxy._last_location=r};s(),n.DefaultLocationProxy._interval=t.setInterval(s,r)}}}),n.Application=function(e){var t=this;this.routes={},this.listeners=new n.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10),this.context_prototype=function(){n.EventContext.apply(this,arguments)},this.context_prototype.prototype=new n.EventContext,u(e)&&e.apply(this,[this]),this._location_proxy||this.setLocationProxy(new n.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(e,n){t.log(t.toString(),e.cleaned_type,n||{})})},n.Application.prototype=e.extend({},n.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(t){return t?e(this.element_selector).find(t):e(this.element_selector)},use:function(){var e=o(arguments),t=e.shift(),r=t||"";try{e.unshift(this),typeof t=="string"&&(r="Sammy."+t,t=n[t]),t.apply(this,e)}catch(i){typeof t=="undefined"?this.error("Plugin Error: called use() but plugin ("+r.toString()+") is not defined",i):u(t)?this.error("Plugin Error",i):this.error("Plugin Error: called use() but '"+r.toString()+"' is not a function",i)}return this},setLocationProxy:function(e){var t=this._location_proxy;this._location_proxy=e,this.isRunning()&&(t&&t.unbind(),this._location_proxy.bind())},log:function(){n.log.apply(n,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(t,n){var s=this,o=[],a,f,l=Array.prototype.slice.call(arguments,2);l.length===0&&u(n)&&(n=t,l=[n],t="any"),t=t.toLowerCase();if(n.constructor==String){i.lastIndex=0;while((f=i.exec(n))!==null)o.push(f[1]);n=new RegExp(n.replace(i,r)+"$")}return e.each(l,function(e,t){typeof t=="string"&&(l[e]=s[t])}),a=function(e){var t={verb:e,path:n,callback:l,param_names:o};s.routes[e]=s.routes[e]||[],s.routes[e].push(t)},t==="any"?e.each(this.ROUTE_VERBS,function(e,t){a(t)}):a(t),this},get:p("get"),post:p("post"),put:p("put"),del:p("delete"),any:p("any"),mapRoutes:function(t){var n=this;return e.each(t,function(e,t){n.route.apply(n,t)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(e,t,n){var r=this;typeof n=="undefined"&&(n=t);var i=function(){var e,t,i;e=arguments[0],i=arguments[1],i&&i.context?(t=i.context,delete i.context):t=new r.context_prototype(r,"bind",e.type,i,e.target),e.cleaned_type=e.type.replace(r.eventNamespace(),""),n.apply(t,[e,i])};return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i),this.isRunning()&&this._listen(e,i),this},trigger:function(e,t){return this.$element().trigger([e,this.eventNamespace()].join("."),[t]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(e,t){return u(e)&&(t=e,e={}),this.befores.push([e,t]),this},after:function(e){return this.bind("event-context-after",e)},around:function(e){return this.arounds.push(e),this},onComplete:function(e){return this._onComplete=e,this},isRunning:function(){return this._running},helpers:function(t){return e.extend(this.context_prototype.prototype,t),this},helper:function(e,t){return this.context_prototype.prototype[e]=t,this},run:function(r){if(this.isRunning())return!1;var i=this;return e.each(this.listeners.toHash(),function(t,n){e.each(n,function(e,n){i._listen(t,n)})}),this.trigger("run",{start_url:r}),this._running=!0,this.last_location=null,!/\#(.+)/.test(this.getLocation())&&typeof r!="undefined"&&this.setLocation(r),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){i._checkLocation()}),this.bind("submit",function(t){if(!n.targetIsThisWindow(t))return!0;var r=i._checkFormSubmission(e(t.target).closest("form"));return r===!1?t.preventDefault():!1}),e(t).bind("unload",function(){i.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var t=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(t.eventNamespace()),e.each(this.listeners.toHash(),function(n,r){e.each(r,function(e,r){t._unlisten(n,r)})}),this._running=!1,this},destroy:function(){return this.unload(),delete n.apps[this.element_selector],this},bindToAllEvents:function(t){var n=this;return e.each(this.APP_EVENTS,function(e,r){n.bind(r,t)}),e.each(this.listeners.keys(!0),function(r,i){e.inArray(i,n.APP_EVENTS)==-1&&n.bind(i,t)}),this},routablePath:function(e){return e.replace(s,"")},lookupRoute:function(e,t){var n=this,r=!1,i=0,s,o;if(typeof this.routes[e]!="undefined"){s=this.routes[e].length;for(;i<s;i++){o=this.routes[e][i];if(n.routablePath(t).match(o.path)){r=o;break}}}return r},runRoute:function(t,n,r,i){var s=this,o=this.lookupRoute(t,n),u,a,f,c,h,p,d,v,m;this.debug&&this.log("runRoute",[t,n].join(" ")),this.trigger("run-route",{verb:t,path:n,params:r}),typeof r=="undefined"&&(r={}),e.extend(r,this._parseQueryString(n));if(o){this.trigger("route-found",{route:o}),(v=o.path.exec(this.routablePath(n)))!==null&&(v.shift(),e.each(v,function(e,t){o.param_names[e]?r[o.param_names[e]]=l(t):(r.splat||(r.splat=[]),r.splat.push(l(t)))})),u=new this.context_prototype(this,t,n,r,i),f=this.arounds.slice(0),h=this.befores.slice(0),d=[u],r.splat&&(d=d.concat(r.splat)),a=function(){var e,t,n;while(h.length>0){p=h.shift();if(s.contextMatchesOptions(u,p[0])){e=p[1].apply(u,[u]);if(e===!1)return!1}}return s.last_route=o,u.trigger("event-context-before",{context:u}),typeof o.callback=="function"&&(o.callback=[o.callback]),o.callback&&o.callback.length&&(t=-1,n=function(){t++,o.callback[t]?e=o.callback[t].apply(u,d):s._onComplete&&typeof (s._onComplete==="function")&&s._onComplete(u)},d.push(n),n()),u.trigger("event-context-after",{context:u}),e},e.each(f.reverse(),function(e,t){var n=a;a=function(){return t.apply(u,[n])}});try{m=a()}catch(g){this.error(["500 Error",t,n].join(" "),g)}return m}return this.notFound(t,n)},contextMatchesOptions:function(t,n,r){var i=n;if(typeof i=="string"||f(i))i={path:i};typeof r=="undefined"&&(r=!0);if(e.isEmptyObject(i))return!0;if(a(i.path)){var s,o,u,l;s=[];for(o=0,l=i.path.length;o<l;o+=1)u=e.extend({},i,{path:i.path[o]}),s.push(this.contextMatchesOptions(t,u));var c=e.inArray(!0,s)>-1?!0:!1;return r?c:!c}if(i.only)return this.contextMatchesOptions(t,i.only,!0);if(i.except)return this.contextMatchesOptions(t,i.except,!1);var h=!0,p=!0;return i.path&&(f(i.path)||(i.path=new RegExp(i.path.toString()+"$")),h=i.path.test(t.path)),i.verb&&(typeof i.verb=="string"?p=i.verb===t.verb:p=i.verb.indexOf(t.verb)>-1),r?p&&h:!p||!h},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(e){return this._location_proxy.setLocation(e)},swap:function(e,t){var n=this.$element().html(e);return u(t)&&t(e),n},templateCache:function(e,t){return typeof t!="undefined"?d[e]=t:d[e]},clearTemplateCache:function(){return d={}},notFound:function(e,t){var n=this.error(["404 Not Found",e,t].join(" "));return e==="get"?n:!0},error:function(e,t){t||(t=new Error),t.message=[e,t.message].join(" "),this.trigger("error",{message:t.message,error:t});if(this.raise_errors)throw t;this.log(t.message,t)},_checkLocation:function(){var e,t;e=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=e)this.last_location=["get",e],t=this.runRoute("get",e);return t},_getFormVerb:function(t){var n=e(t),r,i;i=n.find('input[name="_method"]'),i.length>0&&(r=i.val()),r||(r=n[0].getAttribute("method"));if(!r||r==="")r="get";return e.trim(r.toString().toLowerCase())},_checkFormSubmission:function(t){var n,r,i,s,o;return this.trigger("check-form-submission",{form:t}),n=e(t),r=n.attr("action")||"",i=this._getFormVerb(n),this.debug&&this.log("_checkFormSubmission",n,r,i),i==="get"?(s=this._serializeFormParams(n),s!==""&&(r+="?"+s),this.setLocation(r),o=!1):(s=e.extend({},this._parseFormParams(n)),o=this.runRoute(i,r,s,t.get(0))),typeof o=="undefined"?!1:o},_serializeFormParams:function(e){var t="",n=e.serializeArray(),r;if(n.length>0){t=this._encodeFormPair(n[0].name,n[0].value);for(r=1;r<n.length;r++)t=t+"&"+this._encodeFormPair(n[r].name,n[r].value)}return t},_encodeFormPair:function(e,t){return c(e)+"="+c(t)},_parseFormParams:function(e){var t={},n=e.serializeArray(),r;for(r=0;r<n.length;r++)t=this._parseParamPair(t,n[r].name,n[r].value);return t},_parseQueryString:function(e){var t={},n,r,i,o;n=e.match(s);if(n&&n[1]){r=n[1].split("&");for(o=0;o<r.length;o++)i=r[o].split("="),t=this._parseParamPair(t,l(i[0]),l(i[1]||""))}return t},_parseParamPair:function(e,t,n){return typeof e[t]!="undefined"?a(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n,e},_listen:function(e,t){return this.$element().bind([e,this.eventNamespace()].join("."),t)},_unlisten:function(e,t){return this.$element().unbind([e,this.eventNamespace()].join("."),t)}}),n.RenderContext=function(e){this.event_context=e,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},n.RenderContext.prototype=e.extend({},n.Object.prototype,{then:function(e){if(!u(e)){if(!(typeof e=="string"&&e in this.event_context))return this;var n=this.event_context[e];e=function(e){return n.apply(this.event_context,[e])}}var r=this;return this.waiting?this.callbacks.push(e):(this.wait(),t.setTimeout(function(){var t=e.apply(r,[r.content,r.previous_content]);t!==!1&&r.next(t)},0)),this},wait:function(){this.waiting=!0},next:function(e){this.waiting=!1,typeof e!="undefined"&&(this.previous_content=this.content,this.content=e),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(t,n,r){var i=this;return this.then(function(){var s,o,a,f;u(n)?(r=n,n={}):n=e.extend({},n),r&&this.then(r);if(typeof t=="string")return a=t.match(/\.json$/)||n.json,s=a?n.cache===!0:n.cache!==!1,i.next_engine=i.event_context.engineFor(t),delete n.cache,delete n.json,n.engine&&(i.next_engine=n.engine,delete n.engine),s&&(o=this.event_context.app.templateCache(t))?o:(this.wait(),e.ajax(e.extend({url:t,data:{},dataType:a?"json":"text",type:"get",success:function(e){s&&i.event_context.app.templateCache(t,e),i.next(e)}},n)),!1);if(t.nodeType)return t.innerHTML;if(t.selector)return i.next_engine=t.attr("data-engine"),n.clone===!1?t.remove()[0].innerHTML.toString():t[0].innerHTML.toString()})},loadPartials:function(e){var t;if(e){this.partials=this.partials||{};for(t in e)(function(t,n){t.load(e[n]).then(function(e){this.partials[n]=e})})(this,t)}return this},render:function(e,t,n,r){return u(e)&&!t?this.then(e):(u(t)?(r=n,n=t,t=null):n&&!u(n)&&(r=n,n=null),this.loadPartials(r).load(e).interpolate(t,e).then(n))},partial:function(e,t,n,r){return u(n)?this.render(e,t,r).swap(n):u(t)?this.render(e,{},n).swap(t):this.render(e,t,n).swap()},send:function(){var e=this,t=o(arguments),n=t.shift();return a(t[0])&&(t=t[0]),this.then(function(r){return t.push(function(t){e.next(t)}),e.wait(),n.apply(n,t),!1})},collect:function(t,n,r){var i=this,s=function(){u(t)&&(n=t,t=this.content);var r=[],s=!1;return e.each(t,function(e,t){var o=n.apply(i,[e,t]);return o.jquery&&o.length==1&&(o=o[0],s=!0),r.push(o),o}),s?r:r.join("")};return r?s():this.then(s)},renderEach:function(t,n,r,i){return a(n)&&(i=r,r=n,n=null),this.load(t).then(function(s){var o=this;r||(r=a(this.previous_content)?this.previous_content:[]);if(!i)return this.collect(r,function(e,r){var i={},o=this.next_engine||t;return n?i[n]=r:i=r,this.event_context.interpolate(s,i,o)},!0);e.each(r,function(e,r){var u={},a=this.next_engine||t;n?u[n]=r:u=r,i(r,o.event_context.interpolate(s,u,a))})})},interpolate:function(e,t,n){var r=this;return this.then(function(i,s){!e&&s&&(e=s),this.next_engine&&(t=this.next_engine,this.next_engine=!1);var o=r.event_context.interpolate(i,e,t,this.partials);return n?s+o:o})},swap:function(e){return this.then(function(t){return this.event_context.swap(t,e),t}).trigger("changed",{})},appendTo:function(t){return this.then(function(n){e(t).append(n)}).trigger("changed",{})},prependTo:function(t){return this.then(function(n){e(t).prepend(n)}).trigger("changed",{})},replace:function(t){return this.then(function(n){e(t).html(n)}).trigger("changed",{})},trigger:function(e,t){return this.then(function(n){return typeof t=="undefined"&&(t={content:n}),this.event_context.trigger(e,t),n})}}),n.EventContext=function(e,t,r,i,s){this.app=e,this.verb=t,this.path=r,this.params=new n.Object(i),this.target=s},n.EventContext.prototype=e.extend({},n.Object.prototype,{$element:function(){return this.app.$element(o(arguments).shift())},engineFor:function(e){var t=this,n;if(u(e))return e;e=(e||t.app.template_engine).toString();if(n=e.match(/\.([^\.\?\#]+)$/))e=n[1];return e&&u(t[e])?t[e]:t.app.template_engine?this.engineFor(t.app.template_engine):function(e,t){return e}},interpolate:function(e,t,n,r){return this.engineFor(n).apply(this,[e,t,r])},render:function(e,t,r,i){return(new n.RenderContext(this)).render(e,t,r,i)},renderEach:function(e,t,r,i){return(new n.RenderContext(this)).renderEach(e,t,r,i)},load:function(e,t,r){return(new n.RenderContext(this)).load(e,t,r)},loadPartials:function(e){return(new n.RenderContext(this)).loadPartials(e)},partial:function(e,t,r,i){return(new n.RenderContext(this)).partial(e,t,r,i)},send:function(){var e=new n.RenderContext(this);return e.send.apply(e,arguments)},redirect:function(){var t,n=o(arguments),r=this.app.getLocation(),i=n.length;if(i>1){var s=0,u=[],a=[],f={},l=!1;for(;s<i;s++)typeof n[s]=="string"?u.push(n[s]):(e.extend(f,n[s]),l=!0);t=u.join("/");if(l){for(var c in f)a.push(this.app._encodeFormPair(c,f[c]));t+="?"+a.join("&")}}else t=n[0];this.trigger("redirect",{to:t}),this.app.last_location=[this.verb,this.path],this.app.setLocation(t),(new RegExp(t)).test(r)&&this.app.trigger("location-changed")},trigger:function(e,t){return typeof t=="undefined"&&(t={}),t.context||(t.context=this),this.app.trigger(e,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(e,t){return this.app.swap(e,t)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(t){return e.parseJSON(t)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),n})}(jQuery,window),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h={},p=e.config&&e.config()||{};t={version:"2.0.7",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,e))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),this.Handlebars={},function(e){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}(this.Handlebars);var handlebars=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();Handlebars.Parser=handlebars,Handlebars.parse=function(e){return e.constructor===Handlebars.AST.ProgramNode?e:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e))},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r,i){e(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s===".."||s==="."||s==="this"){if(t.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);s===".."?n++:this.isScoped=!0}else t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=e.length===1&&!this.isScoped&&n===0,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<errorProps.length;n++)this[errorProps[n]]=t[errorProps[n]]},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(o=i.length;this.i<o;this.i++)s=i[this.i],s.opcode==="DECLARE"?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(r)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,s=this.environment.depths.list.length;i<s;i++)r.push("depth"+this.environment.depths.list[i]);var o=this.mergeSource();if(!this.isChild){var u=Handlebars.COMPILER_REVISION,a=Handlebars.REVISION_CHANGES[u];o="this.compilerInfo = ["+u+",'"+a+"'];\n"+o}if(e)return r.push(o),Function.apply(this,r);var f="function "+(this.name||"")+"("+r.join(",")+") {\n  "+o+"}";return Handlebars.log(Handlebars.logger.DEBUG,f+"\n\n"),f},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",r=this.isInline(),i;if(r){var s=this.popStack(!0);if(s instanceof n)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];i instanceof n?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();return!e&&r instanceof n?r.value:(t||this.stackSlot--,r)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,r=t[t.length-1];return!e&&r instanceof n?r.value:r},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),i=t.RESERVED_WORDS={};for(var s=0,o=r.length;s<o;s++)i[r[s]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var i=e.call(t,Handlebars,n,r.helpers,r.partials,r.data),s=t.compilerInfo||[],o=s[0]||1,u=Handlebars.COMPILER_REVISION;if(o!==u){if(o<u){var a=Handlebars.REVISION_CHANGES[u],f=Handlebars.REVISION_CHANGES[o];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+f+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return i}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){var o={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e,{data:s!==undefined}),i[t](n,o)}},Handlebars.template=Handlebars.VM.template,define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),define("hbs",["text","handlebars"],function(e,t){var n={},r='define("{{pluginName}}!{{moduleName}}", ["handlebars"], function(handlebars) {return handlebars.template({{{fn}}})});',i,s=function(r,i,s,o){e.get(i.toUrl(r),function(e){o.isBuild?(n[r]=e,s()):s(t.compile(e))})},o=function(e,s,o){s in n&&(i||(i=t.compile(r)),o(i({pluginName:e,moduleName:s,fn:t.precompile(n[s])})))};return{load:s,write:o}}),define("hbs!tpl/modals/alerts.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c0">\n	<div class="header">\n		<h3>Alerts</h3>\n	</div>\n  <div>\n      \n  </div>\n</div>'})}),function(e){var t={init:function(t){var n={top:"auto",autoOpen:!1,overlayOpacity:.5,overlayColor:"#000",overlayClose:!0,overlayParent:"body",closeOnEscape:!0,closeButtonClass:".close",onOpen:!1,onClose:!1,zIndex:function(){return 1+Math.max.apply(Math,e("*").map(function(){return e(this).css("z-index")}).filter(function(){return e.isNumeric(this)}).map(function(){return parseInt(this,10)}))},updateZIndexOnOpen:!0};return t=e.extend(n,t),this.each(function(){var n=t,r=e('<div class="lean-overlay"></div>'),i=e(this);r.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex(),top:0,left:0,height:"100%",width:"100%",background:n.overlayColor,opacity:n.overlayOpacity,overflow:"auto"}).appendTo(n.overlayParent),i.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex()+1,left:"50%",top:parseInt(n.top,10)>-1?n.top+"px":"50%"}),i.bind("openModal",function(){var e=n.updateZIndexOnOpen?n.zIndex():parseInt(r.css("z-index"),10),t=e+1;i.css({display:"block","margin-left":-(i.outerWidth()/2)+"px","margin-top":(parseInt(n.top,10)>-1?0:-(i.outerHeight()/2))+"px","z-index":t}),r.css({"z-index":e,display:"block"}),n.onOpen&&typeof n.onOpen=="function"&&n.onOpen(i[0])}),i.bind("closeModal",function(){i.css("display","none"),r.css("display","none"),n.onClose&&typeof n.onClose=="function"&&n.onClose(i[0])}),r.click(function(){n.overlayClose&&i.trigger("closeModal")}),e(document).keydown(function(e){n.closeOnEscape&&e.keyCode===27&&i.trigger("closeModal")}),i.on("click",n.closeButtonClass,function(e){i.trigger("closeModal"),e.preventDefault()}),n.autoOpen&&i.trigger("openModal")})}};e.fn.easyModal=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.easyModal")}}(jQuery),define("jquery.easyModal",function(){}),function(e){typeof define=="function"&&define.amd?define("jquery.ui.widget",["jquery"],e):e(jQuery)}(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}),define("controllers/launchpad",["jquery","sammy","hbs!tpl/modals/alerts.html","jquery.easyModal","jquery.ui.widget"],function(e,t,n){function r(t){e("#menu nav a").each(function(){e(this).attr("data")&&(this.href="/#/"+t+"/"+e(this).attr("data"))})}console.log("Loaded dash");var e=e||e(function(e){e=e});return{start:function(){console.log("starting dash"),e("#modals:first").append(n({},{partials:{}})),e(".modal.c0").easyModal({top:200,overlay:.2});var r=t(function(){e(document).click(function(t){console.log(e(t.target)),console.log("Action: "+e(t.target).attr("action"));var n=e(t.target).attr("action");switch(n){case"user.logout":SP.logout();break;case"download":e(".modal.c0").trigger("openModal")}}),e("button").on("click",function(){e(this).attr("data")=="submit-c1"&&e(".modal.c1").trigger("closeModal")}),e("form").submit(function(e){return e.preventDefault(),!1})});return r.run(),!0}}}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),d3=function(){function p(e){return e!=null&&!isNaN(e)}function v(e){return e.length}function g(e){var t=1;while(e*t%1)t*=10;return t}function y(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function b(){}function S(){}function x(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function T(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=N.length;n<r;++n){var i=N[n]+t;if(i in e)return i}}function C(){}function k(){}function L(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new b;return r.on=function(r,i){var s=n.get(r),o;return arguments.length<2?s&&s.on:(s&&(s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function A(){e.event.preventDefault()}function O(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function M(t){var n=new k,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=L(n);return n.of=function(r,i){return function(s){try{var o=s.sourceEvent=e.event;s.target=t,e.event=s,n[s.type].apply(r,i)}finally{e.event=o}}},n}function P(e){return D(e,I),e}function q(e){return typeof e=="function"?e:function(){return H(e,this)}}function R(e){return typeof e=="function"?e:function(){return B(e,this)}}function z(t,n){function r(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=e.ns.qualify(t),n==null?t.local?i:r:typeof n=="function"?t.local?a:u:t.local?o:s}function W(e){return e.trim().replace(/\s+/g," ")}function X(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function V(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=e.trim().split(/\s+/).map($);var n=e.length;return typeof t=="function"?i:r}function $(e){var t=X(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",W(i+" "+e))):n.setAttribute("class",W(i.replace(t," ")))}}function J(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function K(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function Q(t){return typeof t=="function"?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function G(e){return{__data__:e}}function Y(e){return function(){return F(this,e)}}function Z(t){return arguments.length||(t=e.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function et(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function tt(e){return D(e,nt),e}function rt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0),i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function it(){var e=this.__transition__;e&&++e.active}function ot(t,r,i){function f(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function l(){var e=u(r,n(arguments));f.call(this),this.addEventListener(t,this[s]=e,e.$=i),e._=r}function c(){var n=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$),delete this[i]}}var s="__on"+t,o=t.indexOf("."),u=at;o>0&&(t=t.substring(0,o));var a=ut.get(t);return a&&(t=a,u=ft),o?r?l:f:r?C:c}function at(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function ft(e,t){var n=at(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function ht(){var t=".dragsuppress-"+ ++ct,n="click"+t,r=e.select(s).on("touchmove"+t,A).on("dragstart"+t,A).on("selectstart"+t,A);if(lt){var o=i.style,u=o[lt];o[lt]="none"}return function(e){r.on(t,null),lt&&(o[lt]=u);if(e){function i(){r.on(n,null)}r.on(n,function(){A(),i()},!0),setTimeout(i,0)}}}function dt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(pt<0&&(s.scrollX||s.scrollY)){r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();pt=!o.f&&!o.e,r.remove()}return pt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function St(e){return e>0?1:e<0?-1:0}function xt(e){return e>1?0:e<-1?vt:Math.acos(e)}function Tt(e){return e>1?gt:e<-1?-gt:Math.asin(e)}function Nt(e){return((e=Math.exp(e))-1/e)/2}function Ct(e){return((e=Math.exp(e))+1/e)/2}function kt(e){return((e=Math.exp(2*e))-1)/(e+1)}function Lt(e){return(e=Math.sin(e/2))*e}function Ht(){}function Bt(e,t,n){return new jt(e,t,n)}function jt(e,t,n){this.h=e,this.s=t,this.l=n}function It(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,sn(o(e+120),o(e),o(e-120))}function qt(e,t,n){return new Rt(e,t,n)}function Rt(e,t,n){this.h=e,this.c=t,this.l=n}function zt(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),Wt(n,Math.cos(e*=wt)*t,Math.sin(e)*t)}function Wt(e,t,n){return new Xt(e,t,n)}function Xt(e,t,n){this.l=e,this.a=t,this.b=n}function Gt(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=Zt(i)*$t,r=Zt(r)*Jt,s=Zt(s)*Kt,sn(tn(3.2404542*i-1.5371385*r-.4985314*s),tn(-0.969266*i+1.8760108*r+.041556*s),tn(.0556434*i-.2040259*r+1.0572252*s))}function Yt(e,t,n){return e>0?qt(Math.atan2(n,t)*Et,Math.sqrt(t*t+n*n),e):qt(NaN,NaN,e)}function Zt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function en(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function tn(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function nn(e){return sn(e>>16,e>>8&255,e&255)}function rn(e){return nn(e)+""}function sn(e,t,n){return new on(e,t,n)}function on(e,t,n){this.r=e,this.g=t,this.b=n}function an(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function fn(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(pn(u[0]),pn(u[1]),pn(u[2]))}}return(a=dn.get(e))?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function ln(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):(o=NaN,u=a>0&&a<1?0:o),Bt(o,u,a)}function cn(e,t,n){e=hn(e),t=hn(t),n=hn(n);var r=en((.4124564*e+.3575761*t+.1804375*n)/$t),i=en((.2126729*e+.7151522*t+.072175*n)/Jt),s=en((.0193339*e+.119192*t+.9503041*n)/Kt);return Wt(116*i-16,500*(r-i),200*(i-s))}function hn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pn(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function vn(e){return typeof e=="function"?e:function(){return e}}function mn(e){return e}function gn(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),yn(t,n,e,r)}}function yn(t,r,i,o){function h(){var e=l.status,t;if(!e&&l.responseText||e>=200&&e<300||e===304){try{t=i.call(u,l)}catch(n){a.error.call(u,n);return}a.load.call(u,t)}else a.error.call(u,l)}var u={},a=e.dispatch("beforesend","progress","load","error"),f={},l=new XMLHttpRequest,c=null;return s.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=h:l.onreadystatechange=function(){l.readyState>3&&h()},l.onprogress=function(t){var n=e.event;e.event=t;try{a.progress.call(u,l)}finally{e.event=n}},u.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?f[e]:(t==null?delete f[e]:f[e]=t+"",u)},u.mimeType=function(e){return arguments.length?(r=e==null?null:e+"",u):r},u.responseType=function(e){return arguments.length?(c=e,u):c},u.response=function(e){return i=e,u},["get","post"].forEach(function(e){u[e]=function(){return u.send.apply(u,[e].concat(n(arguments)))}}),u.send=function(e,n,i){arguments.length===2&&typeof n=="function"&&(i=n,n=null),l.open(e,t,!0),r!=null&&!("accept"in f)&&(f.accept=r+",*/*");if(l.setRequestHeader)for(var s in f)l.setRequestHeader(s,f[s]);return r!=null&&l.overrideMimeType&&l.overrideMimeType(r),c!=null&&(l.responseType=c),i!=null&&u.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(u,l),l.send(n==null?null:n),u},u.abort=function(){return l.abort(),u},e.rebind(u,a,"on"),o==null?u:u.get(bn(o))}function bn(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Cn(){var e=kn(),t=Ln()-e;t>24?(isFinite(t)&&(clearTimeout(xn),xn=setTimeout(Cn,t)),Sn=0):(Sn=1,Nn(Cn))}function kn(){var e=Date.now();Tn=wn;while(Tn)e>=Tn.t&&(Tn.f=Tn.c(e-Tn.t)),Tn=Tn.n;return e}function Ln(){var e,t=wn,n=Infinity;while(t)t.f?t=e?e.n=t.n:wn=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return En=e,n}function Pn(e,t){var n=Math.pow(10,m(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function jn(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Fn(e){return e+""}function Rn(){}function zn(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Wn(e,t){e&&Vn.hasOwnProperty(e.type)&&Vn[e.type](e,t)}function $n(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Jn(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)$n(e[n],t,1);t.polygonEnd()}function Yn(){function s(e,t){e*=wt,t=t*wt/2+vt/4;var s=e-n,o=Math.cos(t),u=Math.sin(t),a=i*u,f=r*o+a*Math.cos(s),l=a*Math.sin(s);Qn.add(Math.atan2(l,f)),n=e,r=o,i=u}var e,t,n,r,i;Gn.point=function(o,u){Gn.point=s,n=(e=o)*wt,r=Math.cos(u=(t=u)*wt/2+vt/4),i=Math.sin(u)},Gn.lineEnd=function(){s(e,t)}}function Zn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function er(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nr(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function rr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ir(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function sr(e){return[Math.atan2(e[1],e[0]),Tt(e[2])]}function or(e,t){return m(e[0]-t[0])<yt&&m(e[1]-t[1])<yt}function br(e,t){e*=wt;var n=Math.cos(t*=wt);wr(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function wr(e,t,n){++ur,fr+=(e-fr)/ur,lr+=(t-lr)/ur,cr+=(n-cr)/ur}function Er(){function r(r,i){r*=wt;var s=Math.cos(i*=wt),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);ar+=f,hr+=f*(e+(e=o)),pr+=f*(t+(t=u)),dr+=f*(n+(n=a)),wr(e,t,n)}var e,t,n;yr.point=function(i,s){i*=wt;var o=Math.cos(s*=wt);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(s),yr.point=r,wr(e,t,n)}}function Sr(){yr.point=br}function xr(){function s(e,t){e*=wt;var s=Math.cos(t*=wt),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-xt(p)/h,v=Math.atan2(h,p);vr+=d*f,mr+=d*l,gr+=d*c,ar+=v,hr+=v*(n+(n=o)),pr+=v*(r+(r=u)),dr+=v*(i+(i=a)),wr(n,r,i)}var e,t,n,r,i;yr.point=function(o,u){e=o,t=u,yr.point=s,o*=wt;var a=Math.cos(u*=wt);n=a*Math.cos(o),r=a*Math.sin(o),i=Math.sin(u),wr(n,r,i)},yr.lineEnd=function(){s(e,t),yr.lineEnd=Sr,yr.point=br}}function Tr(){return!0}function Nr(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(or(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a=new kr(n,e,null,!0),f=new kr(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new kr(r,e,null,!1),f=new kr(r,null,a,!0),a.o=f,s.push(a),o.push(f)}),o.sort(t),Cr(s),Cr(o);if(!s.length)return;for(var u=0,a=n,f=o.length;u<f;++u)o[u].e=a=!a;var l=s[0],c,h;for(;;){var p=l,d=!0;while(p.v)if((p=p.n)===l)return;c=p.z,i.lineStart();do{p.v=p.o.v=!0;if(p.e){if(d)for(var u=0,f=c.length;u<f;++u)i.point((h=c[u])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((h=c[u])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}function Cr(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function kr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Lr(t,n,r,i){return function(s,o){function l(e,n){var r=s(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function c(e,t){var n=s(e,t);u.point(n[0],n[1])}function h(){f.point=c,u.lineStart()}function p(){f.point=l,u.lineEnd()}function b(e,t){y.push([e,t]);var n=s(e,t);m.point(n[0],n[1])}function w(){m.lineStart(),y=[]}function E(){b(y[0][0],y[0][1]),m.lineEnd();var e=m.clean(),t=v.buffer(),n,r=t.length;y.pop(),g.push(y),y=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,s;o.lineStart();while(++i<r)o.point((s=n[i])[0],s[1]);o.lineEnd();return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),d.push(t.filter(Ar))}var u=n(o),a=s.invert(i[0],i[1]),f={point:l,lineStart:h,lineEnd:p,polygonStart:function(){f.point=b,f.lineStart=w,f.lineEnd=E,d=[],g=[],o.polygonStart()},polygonEnd:function(){f.point=l,f.lineStart=h,f.lineEnd=p,d=e.merge(d);var t=_r(a,g);d.length?Nr(d,Mr,t,r,o):t&&(o.lineStart(),r(null,null,1,o),o.lineEnd()),o.polygonEnd(),d=g=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}},d,v=Or(),m=n(v),g,y;return f}}function Ar(e){return e.length>1}function Or(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:C,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Mr(e,t){return((e=e.x)[0]<0?e[1]-gt-yt:gt-e[1])-((t=t.x)[0]<0?t[1]-gt-yt:gt-t[1])}function _r(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;Qn.reset();for(var u=0,a=t.length;u<a;++u){var f=t[u],l=f.length;if(!l)continue;var c=f[0],h=c[0],p=c[1]/2+vt/4,d=Math.sin(p),v=Math.cos(p),g=1;for(;;){g===l&&(g=0),e=f[g];var y=e[0],b=e[1]/2+vt/4,w=Math.sin(b),E=Math.cos(b),S=y-h,x=m(S)>vt,T=d*w;Qn.add(Math.atan2(T*Math.sin(S),v*E+T*Math.cos(S))),s+=x?S+(S>=0?mt:-mt):S;if(x^h>=n^y>=n){var N=tr(Zn(c),Zn(e));ir(N);var C=tr(i,N);ir(C);var k=(x^S>=0?-1:1)*Tt(C[2]);if(r>k||r===k&&(N[0]||N[1]))o+=x^S>=0?1:-1}if(!(g++))break;h=y,d=w,v=E,c=e}}return(s<-yt||s<yt&&Qn<0)^o&1}function Pr(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?vt:-vt,a=m(s-t);m(a-vt)<yt?(e.point(t,n=(n+o)/2>0?gt:-gt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=vt&&(m(t-r)<yt&&(t-=r*yt),m(s-u)<yt&&(s-=u*yt),n=Hr(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Hr(e,t,n,r){var i,s,o=Math.sin(e-n);return m(o)>yt?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Br(e,t,n,r){var i;if(e==null)i=n*gt,r.point(-vt,i),r.point(0,i),r.point(vt,i),r.point(vt,0),r.point(vt,-i),r.point(0,-i),r.point(-vt,-i),r.point(-vt,0),r.point(-vt,i);else if(m(e[0]-t[0])>yt){var s=e[0]<t[0]?vt:-vt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function jr(e){function s(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,f,l;return{lineStart:function(){f=o=!1,l=1},point:function(c,h){var p=[c,h],d,v=s(c,h),m=n?v?0:a(c,h):v?a(c+(c<0?vt:-vt),h):0;!t&&(f=o=v)&&e.lineStart();if(v!==o){d=u(t,p);if(or(t,d)||or(p,d))p[0]+=yt,p[1]+=yt,v=s(p[0],p[1])}if(v!==o)l=0,v?(e.lineStart(),d=u(p,t),e.point(d[0],d[1])):(d=u(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^v){var g;!(m&i)&&(g=u(p,t,!0))&&(l=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!or(t,p))&&e.point(p[0],p[1]),t=p,o=v,i=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(f&&o)<<1}}}function u(e,n,r){var i=Zn(e),s=Zn(n),o=[1,0,0],u=tr(i,s),a=er(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=tr(o,u),d=rr(o,c),v=rr(u,h);nr(d,v);var g=p,y=er(d,g),b=er(g,g),w=y*y-b*(er(d,d)-1);if(w<0)return;var E=Math.sqrt(w),S=rr(g,(-y-E)/b);nr(S,d),S=sr(S);if(!r)return S;var x=e[0],T=n[0],N=e[1],C=n[1],k;T<x&&(k=x,x=T,T=k);var L=T-x,A=m(L-vt)<yt,O=A||L<yt;!A&&C<N&&(k=N,N=C,C=k);if(O?A?N+C>0^S[1]<(m(S[0]-x)<yt?N:C):N<=S[1]&&S[1]<=C:L>vt^(x<=S[0]&&S[0]<=T)){var M=rr(g,(-y+E)/b);return nr(M,d),[S,sr(M)]}}function a(t,r){var i=n?e:vt-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}var t=Math.cos(e),n=t>0,r=m(t)>yt,i=Ei(e,6*wt);return Lr(s,o,i,n?[0,-e]:[-vt,e-vt])}function Fr(e,t,n,r){return function(i){var s=i.a,o=i.b,u=s.x,a=s.y,f=o.x,l=o.y,c=0,h=1,p=f-u,d=l-a,v;v=e-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=n-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=t-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=r-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0&&(i.a={x:u+c*p,y:a+c*d}),h<1&&(i.b={x:u+h*p,y:a+h*d}),i}}function qr(t,n,r,i){function s(e,i){return m(e[0]-t)<yt?i>0?0:3:m(e[0]-r)<yt?i>0?2:1:m(e[1]-n)<yt?i>0?1:0:i>0?3:2}function o(e,t){return u(e.x,t.x)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(a){function m(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s)f=o[s],a[1]<=r?f[1]>r&&g(a,f,e)>0&&++t:f[1]<=r&&g(a,f,e)<0&&--t,a=f;return t!==0}function g(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function y(e,o,a,f){var l=0,c=0;if(e==null||(l=s(e,a))!==(c=s(o,a))||u(e,o)<0^a>0){do f.point(l===0||l===3?t:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function b(e,s){return t<=e&&e<=r&&n<=s&&s<=i}function w(e,t){b(e,t)&&a.point(e,t)}function A(){v.point=M,p&&p.push(d=[]),k=!0,C=!1,T=N=NaN}function O(){h&&(M(E,S),x&&C&&l.rejoin(),h.push(l.buffer())),v.point=w,C&&a.lineEnd()}function M(e,t){e=Math.max(-Ir,Math.min(Ir,e)),t=Math.max(-Ir,Math.min(Ir,t));var n=b(e,t);p&&d.push([e,t]);if(k)E=e,S=t,x=n,k=!1,n&&(a.lineStart(),a.point(e,t));else if(n&&C)a.point(e,t);else{var r={a:{x:T,y:N},b:{x:e,y:t}};c(r)?(C||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),L=!1):n&&(a.lineStart(),a.point(e,t),L=!1)}T=e,N=t,C=n}var f=a,l=Or(),c=Fr(t,n,r,i),h,p,d,v={point:w,lineStart:A,lineEnd:O,polygonStart:function(){a=l,h=[],p=[],L=!0},polygonEnd:function(){a=f,h=e.merge(h);var n=m([t,i]),r=L&&n,s=h.length;if(r||s)a.polygonStart(),r&&(a.lineStart(),y(null,null,1,a),a.lineEnd()),s&&Nr(h,o,n,y,a),a.polygonEnd();h=p=d=null}},E,S,x,T,N,C,k,L;return v}}function Rr(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Ur(e){var t=0,n=vt/3,r=pi(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*vt/180,n=e[1]*vt/180):[t/vt*180,n/vt*180]},i}function zr(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;return o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,Tt((i-(e*e+n*n)*r*r)/(2*r))]},o}function $r(){function i(e,t){Xr+=r*e-n*t,n=e,r=t}var e,t,n,r;Vr.point=function(s,o){Vr.point=i,e=n=s,t=r=o},Vr.lineEnd=function(){i(e,t)}}function Zr(e,t){e<Jr&&(Jr=e),e>Qr&&(Qr=e),t<Kr&&(Kr=t),t>Gr&&(Gr=t)}function ei(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=ti(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=ti(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function ti(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function ri(e,t){fr+=e,lr+=t,++cr}function ii(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);hr+=o*(e+n)/2,pr+=o*(t+r)/2,dr+=o,ri(e=n,t=r)}var e,t;ni.point=function(r,i){ni.point=n,ri(e=r,t=i)}}function si(){ni.point=ri}function oi(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);hr+=o*(n+e)/2,pr+=o*(r+t)/2,dr+=o,o=r*e-n*t,vr+=o*(n+e),mr+=o*(r+t),gr+=o*3,ri(n=e,r=t)}var e,t,n,r;ni.point=function(s,o){ni.point=i,ri(e=n=s,t=r=o)},ni.lineEnd=function(){i(e,t)}}function ui(e){function r(n,r){e.moveTo(n,r),e.arc(n,r,t,0,mt)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:C};return n}function ai(e){function i(e){return(r?o:s)(e)}function s(t){return ci(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function o(t){function y(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){h=NaN,g.point=w,t.lineStart()}function w(n,i){var s=Zn([n,i]),o=e(n,i);u(h,p,c,d,v,m,h=o[0],p=o[1],c=n,d=s[0],v=s[1],m=s[2],r,t),t.point(h,p)}function E(){g.point=y,t.lineEnd()}function S(){b(),g.point=x,g.lineEnd=T}function x(e,t){w(n=e,i=t),s=h,o=p,a=d,f=v,l=m,g.point=w}function T(){u(h,p,c,d,v,m,s,o,n,a,f,l,r,t),g.lineEnd=E,E()}var n,i,s,o,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=S},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};return g}function u(r,i,s,o,a,f,l,c,h,p,d,v,g,y){var b=l-r,w=c-i,E=b*b+w*w;if(E>4*t&&g--){var S=o+p,x=a+d,T=f+v,N=Math.sqrt(S*S+x*x+T*T),C=Math.asin(T/=N),k=m(m(T)-1)<yt?(s+h)/2:Math.atan2(x,S),L=e(k,C),A=L[0],O=L[1],M=A-r,_=O-i,D=w*M-b*_;if(D*D/E>t||m((b*M+w*_)/E-.5)>.3||o*p+a*d+f*v<n)u(r,i,s,o,a,f,A,O,k,S/=N,x/=N,T,g,y),y.point(A,O),u(A,O,k,S,x,T,l,c,h,p,d,v,g,y)}}var t=.5,n=Math.cos(30*wt),r=16;return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function fi(e){var t=ai(function(t,n){return e([t*Et,n*Et])});return function(e){return di(t(e))}}function li(e){this.stream=e}function ci(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function hi(e){return pi(function(){return e})()}function pi(t){function E(e){return e=i(e[0]*wt,e[1]*wt),[e[0]*o+d,v-e[1]*o]}function S(e){return e=i.invert((e[0]-d)/o,(v-e[1])/o),e&&[e[0]*Et,e[1]*Et]}function x(){i=Rr(r=gi(c,h,p),n);var e=n(f,l);return d=u-e[0]*o,v=a+e[1]*o,T()}function T(){return w&&(w.valid=!1,w=null),E}var n,r,i,s=ai(function(e,t){return e=n(e,t),[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=Dr,g=mn,y=null,b=null,w;return E.stream=function(e){return w&&(w.valid=!1),w=di(m(r,s(g(e)))),w.valid=!0,w},E.clipAngle=function(e){return arguments.length?(m=e==null?(y=e,Dr):jr((y=+e)*wt),T()):y},E.clipExtent=function(e){return arguments.length?(b=e,g=e?qr(e[0][0],e[0][1],e[1][0],e[1][1]):mn,T()):b},E.scale=function(e){return arguments.length?(o=+e,x()):o},E.translate=function(e){return arguments.length?(u=+e[0],a=+e[1],x()):[u,a]},E.center=function(e){return arguments.length?(f=e[0]%360*wt,l=e[1]%360*wt,x()):[f*Et,l*Et]},E.rotate=function(e){return arguments.length?(c=e[0]%360*wt,h=e[1]%360*wt,p=e.length>2?e[2]%360*wt:0,x()):[c*Et,h*Et,p*Et]},e.rebind(E,s,"precision"),function(){return n=t.apply(this,arguments),E.invert=n.invert&&S,x()}}function di(e){return ci(e,function(t,n){e.point(t*wt,n*wt)})}function vi(e,t){return[e,t]}function mi(e,t){return[e>vt?e-mt:e<-vt?e+mt:e,t]}function gi(e,t,n){return e?t||n?Rr(bi(e),wi(t,n)):bi(e):t||n?wi(t,n):mi}function yi(e){return function(t,n){return t+=e,[t>vt?t-mt:t<-vt?t+mt:t,n]}}function bi(e){var t=yi(e);return t.invert=yi(-e),t}function wi(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),Tt(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);return o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),Tt(l*n-u*r)]},o}function Ei(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;if(i!=null){i=Si(n,i),s=Si(n,s);if(o>0?i<s:i>s)i+=o*mt}else i=e+o*mt,s=e-.5*a;for(var f,l=i;o>0?l>s:l<s;l-=a)u.point((f=sr([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function Si(e,t){var n=Zn(t);n[0]-=e,ir(n);var r=xt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-yt)%(2*Math.PI)}function xi(t,n,r){var i=e.range(t,n-yt,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function Ti(t,n,r){var i=e.range(t,n-yt,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function Ni(e){return e.source}function Ci(e){return e.target}function ki(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Lt(r-t)+i*o*Lt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Et,Math.atan2(o,Math.sqrt(r*r+i*i))*Et]}:function(){return[e*Et,t*Et]};return d.distance=h,d}function Oi(){function r(r,i){var s=Math.sin(i*=wt),o=Math.cos(i),u=m((r*=wt)-e),a=Math.cos(u);Li+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a),e=r,t=s,n=o}var e,t,n;Ai.point=function(i,s){e=i*wt,t=Math.sin(s*=wt),n=Math.cos(s),Ai.point=r},Ai.lineEnd=function(){Ai.point=Ai.lineEnd=C}}function Mi(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function Pi(e,t){function o(e,t){var n=m(m(t)-gt)<yt?0:s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(vt/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;return i?(o.invert=function(e,t){var n=s-t,r=St(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-gt]},o):ji}function Hi(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return m(r)<yt?vi:(s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-St(r)*Math.sqrt(e*e+n*n)]},s)}function ji(e,t){return[e,Math.log(Math.tan(vt/4+t/2))]}function Fi(e){var t=hi(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=vt*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o},t.clipExtent(null)}function Ri(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function Ui(e){return e[0]}function zi(e){return e[1]}function Wi(e,t,n,r){var i,s,o,u,a,f,l;return i=r[e],s=i[0],o=i[1],i=r[t],u=i[0],a=i[1],i=r[n],f=i[0],l=i[1],(l-o)*(u-s)-(a-o)*(f-s)>0}function Vi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function $i(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Ji(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function ns(){xs(this),this.edge=this.site=this.circle=null}function rs(e){var t=Yi.pop()||new ns;return t.site=e,t}function is(e){ds(e),Gi.remove(e),Yi.push(e),xs(e)}function ss(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];is(e);var a=s;while(a.circle&&m(n-a.circle.x)<yt&&m(r-a.circle.cy)<yt)s=a.P,u.unshift(a),is(a),a=s;u.unshift(a),ds(a);var f=o;while(f.circle&&m(n-f.circle.x)<yt&&m(r-f.circle.cy)<yt)o=f.N,u.push(f),is(f),f=o;u.push(f),ds(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],ws(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=ys(a.site,f.site,null,i),ps(a),ps(f)}function os(e){var t=e.x,n=e.y,r,i,s,o,u=Gi._;while(u){s=us(u,n)-t;if(s>yt)u=u.L;else{o=t-as(u,n);if(!(o>yt)){s>-yt?(r=u.P,i=u):o>-yt?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}var a=rs(e);Gi.insert(r,a);if(!r&&!i)return;if(r===i){ds(r),i=rs(r.site),Gi.insert(a,i),a.edge=i.edge=ys(r.site,a.site),ps(r),ps(i);return}if(!i){a.edge=ys(r.site,a.site);return}ds(r),ds(i);var f=r.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=i.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};ws(i.edge,f,d,w),a.edge=ys(f,e,null,w),i.edge=ys(e,d,null,w),ps(r),ps(i)}function us(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function as(e,t){var n=e.N;if(n)return us(n,t);var r=e.site;return r.y===t?r.x:Infinity}function fs(e){this.site=e,this.edges=[]}function ls(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s,o,u,a,f=Qi,l=f.length,c,h,p,d,v,g;while(l--){c=f[l];if(!c||!c.prepare())continue;p=c.edges,d=p.length,h=0;while(h<d){g=p[h].end(),u=g.x,a=g.y,v=p[++h%d].start(),s=v.x,o=v.y;if(m(u-s)>yt||m(a-o)>yt)p.splice(h,0,new Es(bs(c.site,g,m(u-t)<yt&&i-a>yt?{x:t,y:m(s-t)<yt?o:i}:m(a-i)<yt&&n-u>yt?{x:m(o-i)<yt?s:n,y:i}:m(u-n)<yt&&a-r>yt?{x:n,y:m(s-n)<yt?o:r}:m(a-r)<yt&&u-t>yt?{x:m(o-r)<yt?s:t,y:r}:null),c.site,null)),++d}}}function cs(e,t){return t.angle-e.angle}function hs(){xs(this),this.x=this.y=this.arc=this.site=this.cy=null}function ps(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(h>=-bt)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=ts.pop()||new hs;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;var y=null,b=es._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}es.insert(y,g),y||(Zi=g)}function ds(e){var t=e.circle;t&&(t.P||(Zi=t.N),es.remove(t),ts.push(t),xs(t),e.circle=null)}function vs(e){var t=Ki,n=Fr(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!ms(i,e)||!n(i)||m(i.a.x-i.b.x)<yt&&m(i.a.y-i.b.y)<yt)i.a=i.b=null,t.splice(r,1)}}function ms(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],s=t[1][0],o=t[0][1],u=t[1][1],a=e.l,f=e.r,l=a.x,c=a.y,h=f.x,p=f.y,d=(l+h)/2,v=(c+p)/2,m,g;if(p===c){if(d<i||d>=s)return;if(l>h){if(!r)r={x:d,y:o};else if(r.y>=u)return;n={x:d,y:u}}else{if(!r)r={x:d,y:u};else if(r.y<o)return;n={x:d,y:o}}}else{m=(l-h)/(p-c),g=v-m*d;if(m<-1||m>1)if(l>h){if(!r)r={x:(o-g)/m,y:o};else if(r.y>=u)return;n={x:(u-g)/m,y:u}}else{if(!r)r={x:(u-g)/m,y:u};else if(r.y<o)return;n={x:(o-g)/m,y:o}}else if(c<p){if(!r)r={x:i,y:m*i+g};else if(r.x>=s)return;n={x:s,y:m*s+g}}else{if(!r)r={x:s,y:m*s+g};else if(r.x<i)return;n={x:i,y:m*i+g}}}return e.a=r,e.b=n,!0}function gs(e,t){this.l=e,this.r=t,this.a=this.b=null}function ys(e,t,n,r){var i=new gs(e,t);return Ki.push(i),n&&ws(i,e,t,n),r&&ws(i,t,e,r),Qi[e.i].edges.push(new Es(i,e,t)),Qi[t.i].edges.push(new Es(i,t,e)),i}function bs(e,t,n){var r=new gs(e,null);return r.a=t,r.b=n,Ki.push(r),r}function ws(e,t,n,r){!e.a&&!e.b?(e.a=r,e.l=t,e.r=n):e.l===n?e.b=r:e.a=r}function Es(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ss(){this._=null}function xs(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ts(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ns(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Cs(e){while(e.L)e=e.L;return e}function ks(e,t){var n=e.sort(Ls).pop(),r,i,s;Ki=[],Qi=new Array(e.length),Gi=new Ss,es=new Ss;for(;;){s=Zi;if(n&&(!s||n.y<s.y||n.y===s.y&&n.x<s.x)){if(n.x!==r||n.y!==i)Qi[n.i]=new fs(n),os(n),r=n.x,i=n.y;n=e.pop()}else{if(!s)break;ss(s.arc)}}t&&(vs(t),ls(t));var o={cells:Qi,edges:Ki};return Gi=es=Ki=Qi=null,o}function Ls(e,t){return t.y-e.y||t.x-e.x}function Os(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Ms(e){return e.x}function _s(e){return e.y}function Ds(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ps(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&Ps(e,a[0],n,r,o,u),a[1]&&Ps(e,a[1],o,r,i,u),a[2]&&Ps(e,a[2],n,u,o,s),a[3]&&Ps(e,a[3],o,u,i,s)}}function Hs(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,s=t.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+an(Math.round(r+o*e))+an(Math.round(i+u*e))+an(Math.round(s+a*e))}}function Bs(e,t){var n={},r={},i;for(i in e)i in t?n[i]=qs(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function js(e,t){return t-=e=+e,function(n){return e+t*n}}function Fs(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;e+="",t+="",Is.lastIndex=0;for(r=0;n=Is.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=Is.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=Is.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=js(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?(l=a[0].x,function(e){return l(e)+""}):function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}}function qs(t,n){var r=e.interpolators.length,i;while(--r>=0&&!(i=e.interpolators[r](t,n)));return i}function Rs(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(qs(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function Xs(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Vs(e){return function(t){return 1-e(1-t)}}function $s(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Js(e){return e*e}function Ks(e){return e*e*e}function Qs(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Gs(e){return function(t){return Math.pow(t,e)}}function Ys(e){return 1-Math.cos(e*gt)}function Zs(e){return Math.pow(2,10*(e-1))}function eo(e){return 1-Math.sqrt(1-e*e)}function to(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/mt*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*mt/t)}}function no(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function ro(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function io(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,s=t.l,o=n.h-r,u=n.c-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return zt(r+o*e,i+u*e,s+a*e)+""}}function so(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,s=t.l,o=n.h-r,u=n.s-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return It(r+o*e,i+u*e,s+a*e)+""}}function oo(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,s=t.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return Gt(r+o*e,i+u*e,s+a*e)+""}}function uo(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ao(e){var t=[e.a,e.b],n=[e.c,e.d],r=lo(t),i=fo(t,n),s=lo(co(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Et,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Et:0}function fo(e,t){return e[0]*t[0]+e[1]*t[1]}function lo(e){var t=Math.sqrt(fo(e,e));return t&&(e[0]/=t,e[1]/=t),t}function co(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function po(t,n){var r=[],i=[],s,o=e.transform(t),u=e.transform(n),a=o.translate,f=u.translate,l=o.rotate,c=u.rotate,h=o.skew,p=u.skew,d=o.scale,v=u.scale;return a[0]!=f[0]||a[1]!=f[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:js(a[0],f[0])},{i:3,x:js(a[1],f[1])})):f[0]||f[1]?r.push("translate("+f+")"):r.push(""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:js(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),h!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:js(h,p)}):p&&r.push(r.pop()+"skewX("+p+")"),d[0]!=v[0]||d[1]!=v[1]?(s=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:s-4,x:js(d[0],v[0])},{i:s-2,x:js(d[1],v[1])})):(v[0]!=1||v[1]!=1)&&r.push(r.pop()+"scale("+v+")"),s=i.length,function(e){var t=-1,n;while(++t<s)r[(n=i[t]).i]=n.x(e);return r.join("")}}function vo(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function mo(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function go(e){var t=e.source,n=e.target,r=bo(t,n),i=[t];while(t!==r)t=t.parent,i.push(t);var s=i.length;while(n!==r)i.splice(s,0,n),n=n.parent;return i}function yo(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function bo(e,t){if(e===t)return e;var n=yo(e),r=yo(t),i=n.pop(),s=r.pop(),o=null;while(i===s)o=i,i=n.pop(),s=r.pop();return o}function wo(e){e.fixed|=2}function Eo(e){e.fixed&=-7}function So(e){e.fixed|=4,e.px=e.x,e.py=e.y}function xo(e){e.fixed&=-5}function To(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;To(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ko(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Mo,t}function Lo(e){return e.children}function Ao(e){return e.value}function Oo(e,t){return t.value-e.value}function Mo(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Do(e){return e.x}function Po(e){return e.y}function Ho(e,t,n){e.y0=t,e.y=n}function Fo(t){return e.range(t.length)}function Io(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function qo(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function Ro(e){return e.reduce(Uo,0)}function Uo(e,t){return e+t[1]}function zo(e,t){return Wo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Wo(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function Xo(t){return[e.min(t),e.max(t)]}function Vo(e,t){return e.parent==t.parent?1:2}function $o(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Jo(e){var t=e.children,n;return t&&(n=t.length)?t[n-1]:e._tree.thread}function Ko(e,t){var n=e.children;if(n&&(i=n.length)){var r,i,s=-1;while(++s<i)t(r=Ko(n[s],t),e)>0&&(e=r)}return e}function Qo(e,t){return e.x-t.x}function Go(e,t){return t.x-e.x}function Yo(e,t){return e.depth-t.depth}function Zo(e,t){function n(e,r){var i=e.children;if(i&&(a=i.length)){var s,o=null,u=-1,a;while(++u<a)s=i[u],n(s,o),o=s}t(e,r)}n(e,null)}function eu(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i]._tree,s.prelim+=t,s.mod+=t,t+=s.shift+(n+=s.change)}function tu(e,t,n){e=e._tree,t=t._tree;var r=n/(t.number-e.number);e.change+=r,t.change-=r,t.shift+=n,t.prelim+=n,t.mod+=n}function nu(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function ru(e,t){return e.value-t.value}function iu(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function su(e,t){e._pack_next=t,t._pack_prev=e}function ou(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function uu(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(au),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],cu(o,u,a),p(a),iu(o,a),o._pack_prev=a,iu(a,u),u=o._pack_next;for(f=3;f<h;f++){cu(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(ou(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(ou(c,a))break;d?(v<m||v==m&&u.r<o.r?su(o,u=l):su(o=c,u),f--):(iu(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(fu)}function au(e){e._pack_next=e._pack_prev=e}function fu(e){delete e._pack_next,delete e._pack_prev}function lu(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)lu(i[s],t,n,r)}}function cu(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function hu(t){return 1+e.max(t,function(e){return e.y})}function pu(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function du(e){var t=e.children;return t&&t.length?du(t[0]):e}function vu(e){var t=e.children,n;return t&&(n=t.length)?vu(t[n-1]):e}function mu(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function gu(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function yu(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function bu(e){return e.rangeExtent?e.rangeExtent():yu(e.range())}function wu(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Eu(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Su(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:xu}function Tu(t,n,r,i){var s=[],o=[],u=0,a=Math.min(t.length,n.length)-1;t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++u<=a)s.push(r(t[u-1],t[u])),o.push(i(n[u-1],n[u]));return function(n){var r=e.bisect(t,n,1,a)-1;return o[r](s[r](n))}}function Nu(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?Tu:wu,a=r?mo:vo;return i=o(e,t,a,n),s=o(t,e,a,qs),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(uo)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return Au(e,t)},u.tickFormat=function(t,n){return Ou(e,t,n)},u.nice=function(t){return ku(e,t),o()},u.copy=function(){return Nu(e,t,n,r)},o()}function Cu(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function ku(e,t){return Eu(e,Su(Lu(e,t)[2]))}function Lu(e,t){t==null&&(t=10);var n=yu(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function Au(t,n){return e.range.apply(e,Lu(t,n))}function Ou(t,n,r){var i=Lu(t,n);return e.format(r?r.replace(Hn,function(e,t,n,r,s,o,u,a,f,l){return[t,n,r,s,o,u,a,f||"."+Du(l,i),l].join("")}):",."+_u(i[2])+"f")}function _u(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Du(e,t){var n=_u(t[2]);return e in Mu?Math.abs(n-_u(Math.max(Math.abs(t[0]),Math.abs(t[1]))))+ +(e!=="e"):n-(e==="%")*2}function Pu(t,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(s(e))}return u.invert=function(e){return o(t.invert(e))},u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(s)),u):i},u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(s)),u):n},u.nice=function(){var e=Eu(i.map(s),r?Math:Bu);return t.domain(e),i=e.map(o),u},u.ticks=function(){var e=yu(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t},u.tickFormat=function(t,n){if(!arguments.length)return Hu;arguments.length<2?n=Hu:typeof n!="function"&&(n=e.format(n));var i=Math.max(.1,t/u.ticks().length),a=r?(f=1e-12,Math.ceil):(f=-1e-12,Math.floor),f;return function(e){return e/o(a(s(e)+f))<=i?n(e):""}},u.copy=function(){return Pu(t.copy(),n,r,i)},Cu(u,t)}function ju(e,t,n){function s(t){return e(r(t))}var r=Fu(t),i=Fu(1/t);return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),s):n},s.ticks=function(e){return Au(n,e)},s.tickFormat=function(e,t){return Ou(n,e,t)},s.nice=function(e){return s.domain(ku(n,e))},s.exponent=function(o){return arguments.length?(r=Fu(t=o),i=Fu(1/t),e.domain(n.map(r)),s):t},s.copy=function(){return ju(e.copy(),t,n)},Cu(s,e)}function Fu(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Iu(t,n){function o(e){return i[((r.get(e)||n.t==="range"&&r.set(e,t.push(e)))-1)%i.length]}function u(n,r){return e.range(t.length).map(function(e){return n+r*e})}var r,i,s;return o.domain=function(e){if(!arguments.length)return t;t=[],r=new b;var i=-1,s=e.length,u;while(++i<s)r.has(u=e[i])||r.set(u,t.push(u));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(i=e,s=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=(f-a)/(Math.max(1,t.length-1)+r);return i=u(t.length<2?(a+f)/2:a+l*r/2,l),s=0,n={t:"rangePoints",a:arguments},o},o.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=(c-l)/(t.length-r+2*a);return i=u(l+h*a,h),f&&i.reverse(),s=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=Math.floor((c-l)/(t.length-r+2*a)),p=c-l-(t.length-r)*h;return i=u(l+Math.round(p/2),h),f&&i.reverse(),s=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return s},o.rangeExtent=function(){return yu(n.a[0])},o.copy=function(){return Iu(t,n)},o.domain(t)}function Wu(t,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=e.quantile(t,i/o);return s}function s(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}var r;return s.domain=function(n){return arguments.length?(t=n.filter(function(e){return!isNaN(e)}).sort(e.ascending),i()):t},s.range=function(e){return arguments.length?(n=e,i()):n},s.quantiles=function(){return r},s.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},s.copy=function(){return Wu(t,n)},i()}function Xu(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/r+e,[t,t+1/r]},s.copy=function(){return Xu(e,t,n)},o()}function Vu(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return Vu(t,n)},r}function $u(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Au(e,t)},t.tickFormat=function(t,n){return Ou(e,t,n)},t.copy=function(){return $u(e)},t}function Qu(e){return e.innerRadius}function Gu(e){return e.outerRadius}function Yu(e){return e.startAngle}function Zu(e){return e.endAngle}function ea(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=vn(t),p=vn(n);while(++f<l)r.call(this,c=s[f],f)?a.push([+h.call(this,c,f),+p.call(this,c,f)]):a.length&&(d(),a=[]);return a.length&&d(),u.length?u.join(""):null}var t=Ui,n=zi,r=Tr,i=na,s=i.key,o=.7;return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(typeof e=="function"?s=i=e:s=(i=ta.get(e)||na).key,u):s},u.tension=function(e){return arguments.length?(o=e,u):o},u}function na(e){return e.join("L")}function ra(e){return na(e)+"Z"}function ia(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function sa(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function oa(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ua(e,t){return e.length<4?na(e):e[1]+la(e.slice(1,e.length-1),ca(e,t))}function aa(e,t){return e.length<3?na(e):e[0]+la((e.push(e[0]),e),ca([e[e.length-2]].concat(e,[e[1]]),t))}function fa(e,t){return e.length<3?na(e):e[0]+la(e,ca(e,t))}function la(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return na(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function ca(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function ha(e){if(e.length<3)return na(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",ma(ba,o),",",ma(ba,u)];e.push(e[n-1]);while(++t<=n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),wa(a,o,u);return e.pop(),a.push("L",r),a.join("")}function pa(e){if(e.length<4)return na(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(ma(ba,s)+","+ma(ba,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),wa(t,s,o);return t.join("")}function da(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[ma(ba,o),",",ma(ba,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),wa(t,o,u);return t.join("")}function va(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o)}return ha(e)}function ma(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function wa(e,t,n){e.push("C",ma(ga,t),",",ma(ga,n),",",ma(ya,t),",",ma(ya,n),",",ma(ba,t),",",ma(ba,n))}function Ea(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Sa(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Ea(i,s);while(++t<n)r[t]=(o+(o=Ea(i=s,s=e[t+1])))/2;return r[t]=o,r}function xa(e){var t=[],n,r,i,s,o=Sa(e),u=-1,a=e.length-1;while(++u<a)n=Ea(e[u],e[u+1]),m(n)<yt?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function Ta(e){return e.length<3?na(e):e[0]+la(e,xa(e))}function Na(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+Ju,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function Ca(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=vn(t),y=vn(r),b=t===n?function(){return E}:vn(n),w=r===i?function(){return S}:vn(i),E,S;while(++d<v)s.call(this,m=u[d],d)?(h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]),p.push([+b.call(this,m,d),+w.call(this,m,d)])):h.length&&(x(),h=[],p=[]);return h.length&&x(),c.length?c.join(""):null}var t=Ui,n=Ui,r=0,i=zi,s=Tr,o=na,u=o.key,a=o,f="L",l=.7;return c.x=function(e){return arguments.length?(t=n=e,c):n},c.x0=function(e){return arguments.length?(t=e,c):t},c.x1=function(e){return arguments.length?(n=e,c):n},c.y=function(e){return arguments.length?(r=i=e,c):i},c.y0=function(e){return arguments.length?(r=e,c):r},c.y1=function(e){return arguments.length?(i=e,c):i},c.defined=function(e){return arguments.length?(s=e,c):s},c.interpolate=function(e){return arguments.length?(typeof e=="function"?u=o=e:u=(o=ta.get(e)||na).key,a=o.reverse||o,f=o.closed?"M":"L",c):u},c.tension=function(e){return arguments.length?(l=e,c):l},c}function ka(e){return e.radius}function La(e){return[e.x,e.y]}function Aa(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Ju;return[n*Math.cos(r),n*Math.sin(r)]}}function Oa(){return 64}function Ma(){return"circle"}function _a(e){var t=Math.sqrt(e/vt);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Ba(e,t){return D(e,ja),e.id=t,e}function Ra(e,t,n,r){var i=e.id;return et(e,typeof n=="function"?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Ua(e){return e==null&&(e=""),function(){this.textContent=e}}function za(t,n,r,i){var s=t.__transition__||(t.__transition__={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new b,time:u,ease:i.ease,delay:i.delay,duration:i.duration},++s.count,e.timer(function(i){function d(i){if(s.active>r)return m();s.active=r,o.event&&o.event.start.call(t,a,n),o.tween.forEach(function(e,r){(r=r.call(t,a,n))&&p.push(r)}),e.timer(function(){return h.c=v(i||1)?Tr:v,1},0,u)}function v(e){if(s.active!==r)return m();var i=e/c,u=f(i),l=p.length;while(l>0)p[--l].call(t,u);if(i>=1)return o.event&&o.event.end.call(t,a,n),m()}function m(){return--s.count?delete s[r]:delete t.__transition__,1}var a=t.__data__,f=o.ease,l=o.delay,c=o.duration,h=Tn,p=[];h.t=l+u;if(l<=i)return d(i-l);h.c=d},0,u)}}function Va(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function $a(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Za(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ff(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Ga(n-1)),1),n}function s(e,n){return t(e=new Ga(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r)n(o)%s||u.push(new Date(+o)),t(o,1);else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{Ga=Za;var r=new Za;return r._=e,o(r,t,n)}finally{Ga=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=lf(e);return a.floor=a,a.round=lf(r),a.ceil=lf(i),a.offset=lf(s),a.range=u,e}function lf(e){return function(t,n){try{Ga=Za;var r=new Za;return r._=t,e(r,n)._}finally{Ga=Date}}}function cf(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.substring(s,i)),(u=Nf[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=Cf[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o),s=i+1}return r.push(e.substring(s,i)),r.join("")}var t=e.length;return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=hf(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=n.Z!=null&&Ga!==Za,s=new(i?Za:Ga);return"j"in n?s.setFullYear(n.y,0,n.j):"w"in n&&("W"in n||"U"in n)?(s.setFullYear(n.y,0,1),s.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(s.getDay()+5)%7:n.w+n.U*7-(s.getDay()+6)%7)):s.setFullYear(n.y,n.m,n.d),s.setHours(n.H+Math.floor(n.Z/100),n.M+n.Z%100,n.S,n.L),i?s._:s},n.toString=function(){return e},n}function hf(e,t,n,r){var i,s,o,u=0,a=t.length,f=n.length;while(u<a){if(r>=f)return-1;i=t.charCodeAt(u++);if(i===37){o=t.charAt(u++),s=kf[o in Nf?t.charAt(u++):o];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function pf(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function df(e){var t=new b,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function vf(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function Lf(e,t,n){yf.lastIndex=0;var r=yf.exec(t.substring(n));return r?(e.w=bf.get(r[0].toLowerCase()),n+r[0].length):-1}function Af(e,t,n){mf.lastIndex=0;var r=mf.exec(t.substring(n));return r?(e.w=gf.get(r[0].toLowerCase()),n+r[0].length):-1}function Of(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Mf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function _f(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Df(e,t,n){Sf.lastIndex=0;var r=Sf.exec(t.substring(n));return r?(e.m=xf.get(r[0].toLowerCase()),n+r[0].length):-1}function Pf(e,t,n){wf.lastIndex=0;var r=wf.exec(t.substring(n));return r?(e.m=Ef.get(r[0].toLowerCase()),n+r[0].length):-1}function Hf(e,t,n){return hf(e,Cf.c.toString(),t,n)}function Bf(e,t,n){return hf(e,Cf.x.toString(),t,n)}function jf(e,t,n){return hf(e,Cf.X.toString(),t,n)}function Ff(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function If(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.y=Rf(+r[0]),n+r[0].length):-1}function qf(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=+t,n+5):-1}function Rf(e){return e+(e>68?1900:2e3)}function Uf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function zf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Wf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Xf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Vf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function $f(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Jf(e,t,n){Kf.lastIndex=0;var r=Kf.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Qf(e,t,n){var r=Gf.get(t.substring(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}function Yf(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(m(t)/60),i=m(t)%60;return n+vf(r,"0",2)+vf(i,"0",2)}function Zf(e,t,n){Tf.lastIndex=0;var r=Tf.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function el(e){function n(e){try{Ga=Za;var n=new Ga;return n._=e,t(n)}finally{Ga=Date}}var t=cf(e);return n.parse=function(e){try{Ga=Za;var n=t.parse(e);return n&&n._}finally{Ga=Date}},n.toString=t.toString,n}function nl(e){return e.toISOString()}function rl(t,n,r){function i(e){return t(e)}function s(t,r){var i=t[1]-t[0],s=i/r,o=e.bisect(ol,s);return o==ol.length?[n.year,Lu(t.map(function(e){return e/31536e6}),r)[2]]:o?n[s/ol[o-1]<ol[o]/s?o-1:o]:[ll,Lu(t,r)[2]]}return i.invert=function(e){return il(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(il)},i.nice=function(e,t){function u(n){return!isNaN(n)&&!e.range(n,il(+n+1),t).length}var n=i.domain(),r=yu(n),o=e==null?s(r,10):typeof e=="number"&&s(r,e);return o&&(e=o[0],t=o[1]),i.domain(Eu(n,t>1?{floor:function(t){while(u(t=e.floor(t)))t=il(t-1);return t},ceil:function(t){while(u(t=e.ceil(t)))t=il(+t+1);return t}}:e))},i.ticks=function(e,t){var n=yu(i.domain()),r=e==null?s(n,10):typeof e=="number"?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],il(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return r},i.copy=function(){return rl(t.copy(),n,r)},Cu(i,t)}function il(e){return new Date(e)}function sl(e){return function(t){var n=e.length-1,r=e[n];while(!r[1](t))r=e[--n];return r[0](t)}}function dl(e){return JSON.parse(e.responseText)}function vl(e){var t=r.createRange();return t.selectNode(r.body),t.createContextualFragment(e.responseText)}var e={version:"3.3.9"};Date.now||(Date.now=function(){return+(new Date)});var t=[].slice,n=function(e){return t.call(e)},r=document,i=r.documentElement,s=window;try{n(i.childNodes)[0].nodeType}catch(o){n=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}try{r.createElement("div").style.setProperty("opacity",0,"")}catch(u){var a=s.Element.prototype,f=a.setAttribute,l=a.setAttributeNS,c=s.CSSStyleDeclaration.prototype,h=c.setProperty;a.setAttribute=function(e,t){f.call(this,e,t+"")},a.setAttributeNS=function(e,t,n){l.call(this,e,t,n+"")},c.setProperty=function(e,t,n){h.call(this,e,t+"",n)}}e.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},e.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&!((i=e[n])!=null&&i<=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&!((i=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},e.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&!((i=o=e[n])!=null&&i<=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&!((i=o=t.call(e,e[n],n))!=null&&i<=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},e.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},e.mean=function(e,t){var n=e.length,r,i=0,s=-1,o=0;if(arguments.length===1)while(++s<n)p(r=e[s])&&(i+=(r-i)/++o);else while(++s<n)p(r=t.call(e,e[s],s))&&(i+=(r-i)/++o);return o?i:undefined},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},e.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(p),t.length?e.quantile(t.sort(e.ascending),.5):undefined},e.bisector=function(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e.call(t,t[s],s)<n?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;n<e.call(t,t[s],s)?i=s:r=s+1}return r}}};var d=e.bisector(function(e){return e});e.bisectLeft=d.left,e.bisect=e.bisectRight=d.right,e.shuffle=function(e){var t=e.length,n,r;while(t)r=Math.random()*t--|0,n=e[t],e[t]=e[r],e[r]=n;return e},e.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},e.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],s=new Array(n<0?0:n);while(t<n)s[t]=[r=i,i=e[++t]];return s},e.zip=function(){if(!(s=arguments.length))return[];for(var t=-1,n=e.min(arguments,v),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=arguments[i][t];return r},e.transpose=function(t){return e.zip.apply(e,t)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s};var m=Math.abs;e.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=g(m(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r},e.map=function(e){var t=new b;if(e instanceof b)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},y(b,{has:function(e){return w+e in this},get:function(e){return this[w+e]},set:function(e,t){return this[w+e]=t},remove:function(e){return e=w+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===E&&e.call(this,t.substring(1),this[t])}});var w="\0",E=w.charCodeAt(0);e.nest=function(){function o(e,r,u){if(u>=n.length)return s?s.call(t,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new b,v;while(++a<f)(v=d.get(c=l(h=r[a])))?v.push(h):d.set(c,[h]);return e?(h=e(),p=function(t,n){h.set(t,o(e,n,u))}):(h={},p=function(t,n){h[t]=o(e,n,u)}),d.forEach(p),h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];return e.forEach(function(e,n){i.push({key:e,values:u(n,t)})}),s?i.sort(function(e,t){return s(e.key,t.key)}):i}var t={},n=[],r=[],i,s;return t.map=function(e,t){return o(t,e,0)},t.entries=function(t){return u(o(e.map,t,0),0)},t.key=function(e){return n.push(e),t},t.sortKeys=function(e){return r[n.length-1]=e,t},t.sortValues=function(e){return i=e,t},t.rollup=function(e){return s=e,t},t},e.set=function(e){var t=new S;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},y(S,{has:function(e){return w+e in this},add:function(e){return this[w+e]=!0,e},remove:function(e){return e=w+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===E&&e.call(this,t.substring(1))}}),e.behavior={},e.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=x(e,t,t[i]);return e};var N=["webkit","ms","moz","Moz","o","O"];e.dispatch=function(){var e=new k,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=L(e);return e},k.prototype.on=function(e,t){var n=e.indexOf("."),r="";n>=0&&(r=e.substring(n+1),e=e.substring(0,n));if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(_,"\\$&")};var _=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,D={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},H=function(e,t){return t.querySelector(e)},B=function(e,t){return t.querySelectorAll(e)},j=i[T(i,"matchesSelector")],F=function(e,t){return j.call(e,t)};typeof Sizzle=="function"&&(H=function(e,t){return Sizzle(e,t)[0]||null},B=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},F=Sizzle.matchesSelector),e.selection=function(){return st};var I=e.selection.prototype=[];I.select=function(e){var t=[],n,r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a,o)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return P(t)},I.selectAll=function(e){var t=[],r,i;e=R(e);for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a])t.push(r=n(e.call(i,i.__data__,a,s))),r.parentNode=i;return P(t)};var U={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:U,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),U.hasOwnProperty(n)?{space:U[n],local:e}:e}},I.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=e.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},I.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=e.trim().split(/^|\s+/g)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!X(e[i]).test(t))return!1}return!0}for(t in e)this.each(V(t,e[t]));return this}return this.each(V(e,t))},I.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.each(J(n,e[n],t));return this}if(r<2)return s.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(J(e,t,n))},I.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))},I.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},I.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},I.append=function(e){return e=Q(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},I.insert=function(e,t){return e=Q(e),t=q(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},I.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},I.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var v=new b,m=new b,g=[],y;for(r=-1;++r<i;)y=t.call(p=e[r],p.__data__,r),v.has(y)?h[r]=p:v.set(y,p),g.push(y);for(r=-1;++r<s;)y=t.call(n,d=n[r],r),(p=v.get(y))?(l[r]=p,p.__data__=d):m.has(y)||(c[r]=G(d)),m.set(y,d),v.remove(y);for(r=-1;++r<i;)v.has(g[r])&&(h[r]=e[r])}else{for(r=-1;++r<o;)p=e[r],d=n[r],p?(p.__data__=d,l[r]=p):c[r]=G(d);for(;r<s;++r)c[r]=G(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l,c.parentNode=l.parentNode=h.parentNode=e.parentNode,u.push(c),a.push(l),f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=tt([]),a=P([]),f=P([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);return a.enter=function(){return u},a.exit=function(){return f},a},I.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},I.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return P(t)},I.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},I.sort=function(e){e=Z.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},I.each=function(e){return et(this,function(t,n,r){e.call(t,t.__data__,n,r)})},I.call=function(e){var t=n(arguments);return e.apply(t[0]=this,t),this},I.empty=function(){return!this.node()},I.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},I.size=function(){var e=0;return this.each(function(){++e}),e};var nt=[];e.selection.enter=tt,e.selection.enter.prototype=nt,nt.append=I.append,nt.empty=I.empty,nt.node=I.node,nt.call=I.call,nt.size=I.size,nt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u)),r.__data__=o.__data__):n.push(null)}return P(t)},nt.insert=function(e,t){return arguments.length<2&&(t=rt(this)),I.insert.call(this,e,t)},I.transition=function(){var e=Ia||++Fa,t=[],n,r,i=qa||{time:Date.now(),ease:Qs,delay:0,duration:250};for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(r=u[a])&&za(r,a,e,i),n.push(r)}return Ba(t,e)},I.interrupt=function(){return this.each(it)},e.select=function(e){var t=[typeof e=="string"?H(e,r):e];return t.parentNode=i,P([t])},e.selectAll=function(e){var t=n(typeof e=="string"?B(e,r):e);return t.parentNode=i,P([t])};var st=e.select(i);I.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(ot(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ot(e,t,n))};var ut=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});ut.forEach(function(e){"on"+e in r&&ut.remove(e)});var lt="onselectstart"in r?null:T(i.style,"userSelect"),ct=0;e.mouse=function(e){return dt(e,O())};var pt=/WebKit/.test(s.navigator.userAgent)?-1:0;e.touches=function(e,t){return arguments.length<2&&(t=O().touches),t?n(t).map(function(t){var n=dt(e,t);return n.identifier=t.identifier,n}):[]},e.behavior.drag=function(){function o(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function u(){return e.event.changedTouches[0].identifier}function a(t,n){return e.touches(t).filter(function(e){return e.identifier===n})[0]}function f(r,i,o,u){return function(){function b(){var e=i(f,h),t=e[0]-d[0],n=e[1]-d[1];v|=t|n,d=e,l({type:"drag",x:e[0]+m[0],y:e[1]+m[1],dx:t,dy:n})}function w(){g.on(o+"."+p,null).on(u+"."+p,null),y(v&&e.event.target===c),l({type:"dragend"})}var a=this,f=a.parentNode,l=t.of(a,arguments),c=e.event.target,h=r(),p=h==null?"drag":"drag-"+h,d=i(f,h),v=0,m,g=e.select(s).on(o+"."+p,b).on(u+"."+p,w),y=ht();n?(m=n.apply(a,arguments),m=[m.x-d[0],m.y-d[1]]):m=[0,0],l({type:"dragstart"})}}var t=M(o,"drag","dragstart","dragend"),n=null,r=f(C,e.mouse,"mousemove","mouseup"),i=f(u,a,"touchmove","touchend");return o.origin=function(e){return arguments.length?(n=e,o):n},e.rebind(o,t,"on")};var vt=Math.PI,mt=2*vt,gt=vt/2,yt=1e-6,bt=yt*yt,wt=vt/180,Et=180/vt,At=Math.SQRT2,Ot=2,Mt=4;e.interpolateZoom=function(e,t){function y(e){var t=e*g;if(m){var s=Ct(d),o=i/(Ot*c)*(s*kt(At*t+d)-Nt(d));return[n+o*a,r+o*f,i*s/Ct(At*t+d)]}return[n+e*a,r+e*f,i*Math.exp(At*t)]}var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c=Math.sqrt(l),h=(u*u-i*i+Mt*l)/(2*i*Ot*c),p=(u*u-i*i-Mt*l)/(2*u*Ot*c),d=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(p*p+1)-p),m=v-d,g=(m||Math.log(u/i))/At;return y.duration=g*1e3,y},e.behavior.zoom=function(){function y(e){e.on(u,k).on(Pt+".zoom",O).on(a,_).on("dblclick.zoom",D).on(c,L)}function b(e){return[(e[0]-t.x)/t.k,(e[1]-t.y)/t.k]}function w(e){return[e[0]*t.k+t.x,e[1]*t.k+t.y]}function E(e){t.k=Math.max(o[0],Math.min(o[1],e))}function S(e,n){n=w(n),t.x+=e[0]-n[0],t.y+=e[1]-n[1]}function x(){v&&v.domain(d.range().map(function(e){return(e-t.x)/t.k}).map(d.invert)),g&&g.domain(m.range().map(function(e){return(e-t.y)/t.k}).map(m.invert))}function T(e){e({type:"zoomstart"})}function N(e){x(),e({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function C(e){e({type:"zoomend"})}function k(){function c(){i=1,S(e.mouse(t),u),N(n)}function h(){o.on(a,s===t?_:null).on(f,null),l(i&&e.event.target===r),C(n)}var t=this,n=p.of(t,arguments),r=e.event.target,i=0,o=e.select(s).on(a,c).on(f,h),u=b(e.mouse(t)),l=ht();it.call(t),T(n)}function L(){function y(){var r=e.touches(n);return a=t.k,r.forEach(function(e){e.identifier in i&&(i[e.identifier]=b(e))}),r}function w(){var n=e.event.changedTouches;for(var s=0,u=n.length;s<u;++s)i[n[s].identifier]=null;var a=y(),f=Date.now();if(a.length===1){if(f-h<500){var l=a[0],c=i[l.identifier];E(t.k*2),S(l,c),A(),N(r)}h=f}else if(a.length>1){var l=a[0],p=a[1],d=l[0]-p[0],v=l[1]-p[1];o=d*d+v*v}}function x(){var t=e.touches(n),s,u,f,l;for(var c=0,p=t.length;c<p;++c,l=null){f=t[c];if(l=i[f.identifier]){if(u)break;s=f,u=l}}if(l){var d=(d=f[0]-s[0])*d+(d=f[1]-s[1])*d,v=o&&Math.sqrt(d/o);s=[(s[0]+f[0])/2,(s[1]+f[1])/2],u=[(u[0]+l[0])/2,(u[1]+l[1])/2],E(v*a)}h=null,S(s,u),N(r)}function O(){if(e.event.touches.length){var t=e.event.changedTouches;for(var n=0,s=t.length;n<s;++n)delete i[t[n].identifier];for(var o in i)return void y()}v.on(l,null).on(d,null),m.on(u,k).on(c,L),g(),C(r)}var n=this,r=p.of(n,arguments),i={},o=0,a,f=e.event.changedTouches[0].identifier,l="touchmove.zoom-"+f,d="touchend.zoom-"+f,v=e.select(s).on(l,x).on(d,O),m=e.select(n).on(u,null).on(c,w),g=ht();it.call(n),w(),T(r)}function O(){var i=p.of(this,arguments);l?clearTimeout(l):(it.call(this),T(i)),l=setTimeout(function(){l=null,C(i)},50),A();var s=r||e.mouse(this);n||(n=b(s)),E(Math.pow(2,Dt()*.002)*t.k),S(s,n),N(i)}function _(){n=null}function D(){var n=p.of(this,arguments),r=e.mouse(this),i=b(r),s=Math.log(t.k)/Math.LN2;T(n),E(Math.pow(2,e.event.shiftKey?Math.ceil(s)-1:Math.floor(s)+1)),S(r,i),N(n),C(n)}var t={x:0,y:0,k:1},n,r,i=[960,500],o=_t,u="mousedown.zoom",a="mousemove.zoom",f="mouseup.zoom",l,c="touchstart.zoom",h,p=M(y,"zoomstart","zoom","zoomend"),d,v,m,g;return y.event=function(n){n.each(function(){var n=p.of(this,arguments),r=t;Ia?e.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},T(n)}).tween("zoom:zoom",function(){var s=i[0],o=i[1],u=s/2,a=o/2,f=e.interpolateZoom([(u-t.x)/t.k,(a-t.y)/t.k,s/t.k],[(u-r.x)/r.k,(a-r.y)/r.k,s/r.k]);return function(e){var r=f(e),i=s/r[2];this.__chart__=t={x:u-r[0]*i,y:a-r[1]*i,k:i},N(n)}}).each("end.zoom",function(){C(n)}):(this.__chart__=t,T(n),N(n),C(n))})},y.translate=function(e){return arguments.length?(t={x:+e[0],y:+e[1],k:t.k},x(),y):[t.x,t.y]},y.scale=function(e){return arguments.length?(t={x:t.x,y:t.y,k:+e},x(),y):t.k},y.scaleExtent=function(e){return arguments.length?(o=e==null?_t:[+e[0],+e[1]],y):o},y.center=function(e){return arguments.length?(r=e&&[+e[0],+e[1]],y):r},y.size=function(e){return arguments.length?(i=e&&[+e[0],+e[1]],y):i},y.x=function(e){return arguments.length?(v=e,d=e.copy(),t={x:0,y:0,k:1},y):v},y.y=function(e){return arguments.length?(g=e,m=e.copy(),t={x:0,y:0,k:1},y):g},e.rebind(y,p,"on")};var _t=[0,Infinity],Dt,Pt="onwheel"in r?(Dt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Dt=function(){return e.event.wheelDelta},"mousewheel"):(Dt=function(){return-e.event.detail},"MozMousePixelScroll");Ht.prototype.toString=function(){return this.rgb()+""},e.hsl=function(e,t,n){return arguments.length===1?e instanceof jt?Bt(e.h,e.s,e.l):fn(""+e,ln,Bt):Bt(+e,+t,+n)};var Ft=jt.prototype=new Ht;Ft.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),Bt(this.h,this.s,this.l/e)},Ft.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),Bt(this.h,this.s,e*this.l)},Ft.rgb=function(){return It(this.h,this.s,this.l)},e.hcl=function(t,n,r){return arguments.length===1?t instanceof Rt?qt(t.h,t.c,t.l):t instanceof Xt?Yt(t.l,t.a,t.b):Yt((t=cn((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):qt(+t,+n,+r)};var Ut=Rt.prototype=new Ht;Ut.brighter=function(e){return qt(this.h,this.c,Math.min(100,this.l+Vt*(arguments.length?e:1)))},Ut.darker=function(e){return qt(this.h,this.c,Math.max(0,this.l-Vt*(arguments.length?e:1)))},Ut.rgb=function(){return zt(this.h,this.c,this.l).rgb()},e.lab=function(t,n,r){return arguments.length===1?t instanceof Xt?Wt(t.l,t.a,t.b):t instanceof Rt?zt(t.l,t.c,t.h):cn((t=e.rgb(t)).r,t.g,t.b):Wt(+t,+n,+r)};var Vt=18,$t=.95047,Jt=1,Kt=1.08883,Qt=Xt.prototype=new Ht;Qt.brighter=function(e){return Wt(Math.min(100,this.l+Vt*(arguments.length?e:1)),this.a,this.b)},Qt.darker=function(e){return Wt(Math.max(0,this.l-Vt*(arguments.length?e:1)),this.a,this.b)},Qt.rgb=function(){return Gt(this.l,this.a,this.b)},e.rgb=function(e,t,n){return arguments.length===1?e instanceof on?sn(e.r,e.g,e.b):fn(""+e,sn,It):sn(~~e,~~t,~~n)};var un=on.prototype=new Ht;un.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?sn(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),sn(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(r/e))))},un.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),sn(~~(e*this.r),~~(e*this.g),~~(e*this.b))},un.hsl=function(){return ln(this.r,this.g,this.b)},un.toString=function(){return"#"+an(this.r)+an(this.g)+an(this.b)};var dn=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});dn.forEach(function(e,t){dn.set(e,nn(t))}),e.functor=vn,e.xhr=gn(mn),e.dsv=function(t,n){function s(t,r,i){arguments.length<3&&(i=r,r=null);var s=e.xhr(t,n,i);return s.row=function(e){return arguments.length?s.response((r=e)==null?o:u(e)):r},s.row(r)}function o(e){return s.parse(e.responseText)}function u(e){return function(t){return s.parse(t.responseText,e)}}function a(e){return e.map(f).join(t)}function f(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var r=new RegExp('["'+t+"\n]"),i=t.charCodeAt(0);return s.parse=function(e,t){var n;return s.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},s.parseRows=function(e,t){function c(){if(u>=o)return r;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);return a===13?(l=!0,e.charCodeAt(s+2)===10&&++u):a===10&&(l=!0),e.substring(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(a!==i)continue;return e.substring(t,u-f)}return e.substring(t)}var n={},r={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==r){var h=[];while(f!==n&&f!==r)h.push(f),f=c();if(t&&!(h=t(h,a++)))continue;s.push(h)}return s},s.format=function(e){if(Array.isArray(e[0]))return s.formatRows(e);var n=new S,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(f).join(t)].concat(e.map(function(e){return r.map(function(t){return f(e[t])}).join(t)})).join("\n")},s.formatRows=function(e){return e.map(a).join("\n")},s},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var wn,En,Sn,xn,Tn,Nn=s[T(s,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};En?En.n=s:wn=s,En=s,Sn||(xn=clearTimeout(xn),Sn=1,Nn(Cn))},e.timer.flush=function(){kn(),Ln()};var An=".",On=",",Mn=[3,3],_n="$",Dn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(Pn);e.formatPrefix=function(t,n){var r=0;return t&&(t<0&&(t*=-1),n&&(t=e.round(t,jn(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r<=0?r+1:r-1)/3)*3))),Dn[8+r/3]},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},e.format=function(t){var n=Hn.exec(t),r=n[1]||" ",i=n[2]||">",s=n[3]||"",o=n[4]||"",u=n[5],a=+n[6],f=n[7],l=n[8],c=n[9],h=1,p="",d=!1;l&&(l=+l.substring(1));if(u||r==="0"&&i==="=")u=r="0",i="=",f&&(a-=Math.floor((a-1)/4));switch(c){case"n":f=!0,c="g";break;case"%":h=100,p="%",c="f";break;case"p":h=100,p="%",c="r";break;case"b":case"o":case"x":case"X":o==="#"&&(o="0"+c.toLowerCase());case"c":case"d":d=!0,l=0;break;case"s":h=-1,c="r"}o==="#"?o="":o==="$"&&(o=_n),c=="r"&&!l&&(c="g");if(l!=null)if(c=="g")l=Math.max(1,Math.min(21,l));else if(c=="e"||c=="f")l=Math.max(0,Math.min(20,l));c=Bn.get(c)||Fn;var v=u&&f;return function(t){if(d&&t%1)return"";var n=t<0||t===0&&1/t<0?(t=-t,"-"):s;if(h<0){var m=e.formatPrefix(t,l);t=m.scale(t),p=m.symbol}else t*=h;t=c(t,l);var g=t.lastIndexOf("."),y=g<0?t:t.substring(0,g),b=g<0?"":An+t.substring(g+1);!u&&f&&(y=In(y));var w=o.length+y.length+b.length+(v?0:n.length),E=w<a?(new Array(w=a-w+1)).join(r):"";return v&&(y=In(E+y)),n+=o,t=y+b,(i==="<"?n+t+E:i===">"?E+n+t:i==="^"?E.substring(0,w>>=1)+n+t+E.substring(w):n+(v?t:E+t))+p}};var Hn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Bn=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,jn(t,n))).toFixed(Math.max(0,Math.min(20,jn(t*(1+1e-15),n))))}}),In=mn;if(Mn){var qn=Mn.length;In=function(e){var t=e.length,n=[],r=0,i=Mn[0];while(t>0&&i>0)n.push(e.substring(t-=i,t+i)),i=Mn[r=(r+1)%qn];return n.reverse().join(On)}}e.geo={},Rn.prototype={s:0,t:0,add:function(e){zn(e,this.t,Un),zn(Un.s,this.s,this),this.s?this.t+=Un.t:this.s=Un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Un=new Rn;e.geo.stream=function(e,t){e&&Xn.hasOwnProperty(e.type)?Xn[e.type](e,t):Wn(e,t)};var Xn={Feature:function(e,t){Wn(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Wn(n[r].geometry,t)}},Vn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$n(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)$n(n[r],t,0)},Polygon:function(e,t){Jn(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Jn(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Wn(n[r],t)}};e.geo.area=function(t){return Kn=0,e.geo.stream(t,Gn),Kn};var Kn,Qn=new Rn,Gn={sphere:function(){Kn+=4*vt},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Qn.reset(),Gn.lineStart=Yn},polygonEnd:function(){var e=2*Qn;Kn+=e<0?4*vt+e:e,Gn.lineStart=Gn.lineEnd=Gn.point=C}};e.geo.bounds=function(){function p(e,s){l.push(c=[t=e,r=e]),s<n&&(n=s),s>i&&(i=s)}function d(e,o){var u=Zn([e*wt,o*wt]);if(a){var f=tr(a,u),l=[f[1],-f[0],0],c=tr(l,f);ir(c),c=sr(c);var h=e-s,d=h>0?1:-1,v=c[0]*Et*d,g=m(h)>180;if(g^(d*s<v&&v<d*e)){var y=c[1]*Et;y>i&&(i=y)}else if(v=(v+360)%360-180,g^(d*s<v&&v<d*e)){var y=-c[1]*Et;y<n&&(n=y)}else o<n&&(n=o),o>i&&(i=o);g?e<s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e)}else p(e,o);a=u,s=e}function v(){h.point=d}function g(){c[0]=t,c[1]=r,h.point=p,a=null}function y(e,t){if(a){var n=e-s;f+=m(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Gn.point(e,t),d(e,t)}function b(){Gn.lineStart()}function w(){y(o,u),Gn.lineEnd(),m(f)>yt&&(t=-(r=180)),c[0]=t,c[1]=r,a=null}function E(e,t){return(t-=e)<0?t+360:t}function S(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var t,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=w,f=0,Gn.polygonStart()},polygonEnd:function(){Gn.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=g,Qn<0?(t=-(r=180),n=-(i=90)):f>yt?i=90:f<-yt&&(n=-90),c[0]=t,c[1]=r}};return function(s){i=r=-(t=n=Infinity),l=[],e.geo.stream(s,h);var o=l.length;if(o){l.sort(S);for(var u=1,a=l[0],f,p=[a];u<o;++u)f=l[u],x(f[0],a)||x(f[1],a)?(E(a[0],f[1])>E(a[0],a[1])&&(a[1]=f[1]),E(f[0],a[1])>E(a[0],a[1])&&(a[0]=f[0])):p.push(a=f);var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u)f=p[u],(v=E(a[1],f[0]))>d&&(d=v,t=f[0],r=a[1])}return l=c=null,t===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}(),e.geo.centroid=function(t){ur=ar=fr=lr=cr=hr=pr=dr=vr=mr=gr=0,e.geo.stream(t,yr);var n=vr,r=mr,i=gr,s=n*n+r*r+i*i;if(s<bt){n=hr,r=pr,i=dr,ar<yt&&(n=fr,r=lr,i=cr),s=n*n+r*r+i*i;if(s<bt)return[NaN,NaN]}return[Math.atan2(r,n)*Et,Tt(i/Math.sqrt(s))*Et]};var ur,ar,fr,lr,cr,hr,pr,dr,vr,mr,gr,yr={sphere:C,point:br,lineStart:Er,lineEnd:Sr,polygonStart:function(){yr.lineStart=xr},polygonEnd:function(){yr.lineStart=Er}},Dr=Lr(Tr,Pr,Br,[-vt,-vt/2]),Ir=1e9;e.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=qr(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return Ur(zr)}).raw=zr,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];return i=null,(o(t,n),i)||(u(t,n),i)||a(t,n),i}var t=e.geo.albers(),n=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;return f.invert=function(e){var i=t.scale(),s=t.translate(),o=(e[0]-s[0])/i,u=(e[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:t).invert(e)},f.stream=function(e){var i=t.stream(e),s=n.stream(e),o=r.stream(e);return{point:function(e,t){i.point(e,t),s.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),s.sphere(),o.sphere()},lineStart:function(){i.lineStart(),s.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),s.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),s.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),s.polygonEnd(),o.polygonEnd()}}},f.precision=function(e){return arguments.length?(t.precision(e),n.precision(e),r.precision(e),f):t.precision()},f.scale=function(e){return arguments.length?(t.scale(e),n.scale(e*.35),r.scale(e),f.translate(t.translate())):t.scale()},f.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),l=+e[0],c=+e[1];return o=t.translate(e).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point,u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+yt,c+.12*i+yt],[l-.214*i-yt,c+.234*i-yt]]).stream(s).point,a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+yt,c+.166*i+yt],[l-.115*i-yt,c+.234*i-yt]]).stream(s).point,f},f.scale(1070)};var Wr,Xr,Vr={point:C,lineStart:C,lineEnd:C,polygonStart:function(){Xr=0,Vr.lineStart=$r},polygonEnd:function(){Vr.lineStart=Vr.lineEnd=Vr.point=C,Wr+=m(Xr/2)}},Jr,Kr,Qr,Gr,Yr={point:Zr,lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},ni={point:ri,lineStart:ii,lineEnd:si,polygonStart:function(){ni.lineStart=oi},polygonEnd:function(){ni.point=ri,ni.lineStart=ii,ni.lineEnd=si}};e.geo.path=function(){function u(n){if(n){typeof t=="function"&&s.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=i(s);e.geo.stream(n,o)}return s.result()}function a(){return o=null,u}var t=4.5,n,r,i,s,o;return u.area=function(t){return Wr=0,e.geo.stream(t,i(Vr)),Wr},u.centroid=function(t){return fr=lr=cr=hr=pr=dr=vr=mr=gr=0,e.geo.stream(t,i(ni)),gr?[vr/gr,mr/gr]:dr?[hr/dr,pr/dr]:cr?[fr/cr,lr/cr]:[NaN,NaN]},u.bounds=function(t){return Qr=Gr=-(Jr=Kr=Infinity),e.geo.stream(t,i(Yr)),[[Jr,Kr],[Qr,Gr]]},u.projection=function(e){return arguments.length?(i=(n=e)?e.stream||fi(e):mn,a()):n},u.context=function(e){return arguments.length?(s=(r=e)==null?new ei:new ui(e),typeof t!="function"&&s.pointRadius(t),a()):r},u.pointRadius=function(e){return arguments.length?(t=typeof e=="function"?e:(s.pointRadius(+e),+e),u):t},u.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(e){return{stream:function(t){var n=new li(t);for(var r in e)n[r]=e[r];return n}}},li.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=hi,e.geo.projectionMutator=pi,(e.geo.equirectangular=function(){return hi(vi)}).raw=vi.invert=vi,e.geo.rotation=function(e){function t(t){return t=e(t[0]*wt,t[1]*wt),t[0]*=Et,t[1]*=Et,t}return e=gi(e[0]%360*wt,e[1]*wt,e.length>2?e[2]*wt:0),t.invert=function(t){return t=e.invert(t[0]*wt,t[1]*wt),t[0]*=Et,t[1]*=Et,t},t},mi.invert=vi,e.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=gi(-t[0]*wt,-t[1]*wt,0).invert,i=[];return r(null,null,1,{point:function(e,t){i.push(e=n(e,t)),e[0]*=Et,e[1]*=Et}}),{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(r=Ei((t=+e)*wt,n*wt),i):t},i.precision=function(e){return arguments.length?(r=Ei(t*wt,(n=+e)*wt),i):n},i.angle(90)},e.geo.distance=function(e,t){var n=(t[0]-e[0])*wt,r=e[1]*wt,i=t[1]*wt,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)},e.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:w()}}function w(){return e.range(Math.ceil(i/c)*c,r,c).map(v).concat(e.range(Math.ceil(a/h)*h,u,h).map(g)).concat(e.range(Math.ceil(n/f)*f,t,f).filter(function(e){return m(e%c)>yt}).map(p)).concat(e.range(Math.ceil(o/l)*l,s,l).filter(function(e){return m(e%h)>yt}).map(d))}var t,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,g,y=2.5;return b.lines=function(){return w().map(function(e){return{type:"LineString",coordinates:e}})},b.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(g(u).slice(1),v(r).reverse().slice(1),g(a).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.majorExtent(e).minorExtent(e):b.minorExtent()},b.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],a=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),a>u&&(e=a,a=u,u=e),b.precision(y)):[[i,a],[r,u]]},b.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],s=+e[1][1],n>t&&(e=n,n=t,t=e),o>s&&(e=o,o=s,s=e),b.precision(y)):[[n,o],[t,s]]},b.step=function(e){return arguments.length?b.majorStep(e).minorStep(e):b.minorStep()},b.majorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],b):[c,h]},b.minorStep=function(e){return arguments.length?(f=+e[0],l=+e[1],b):[f,l]},b.precision=function(e){return arguments.length?(y=+e,p=xi(o,s,90),d=Ti(n,t,y),v=xi(a,u,90),g=Ti(i,r,y),b):y},b.majorExtent([[-180,-90+yt],[180,90-yt]]).minorExtent([[-180,-80-yt],[180,80+yt]])},e.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),i||r.apply(this,arguments)]}}var t=Ni,n,r=Ci,i;return s.distance=function(){return e.geo.distance(n||t.apply(this,arguments),i||r.apply(this,arguments))},s.source=function(e){return arguments.length?(t=e,n=typeof e=="function"?null:e,s):t},s.target=function(e){return arguments.length?(r=e,i=typeof e=="function"?null:e,s):r},s.precision=function(){return arguments.length?s:0},s},e.geo.interpolate=function(e,t){return ki(e[0]*wt,e[1]*wt,t[0]*wt,t[1]*wt)},e.geo.length=function(t){return Li=0,e.geo.stream(t,Ai),Li};var Li,Ai={sphere:C,point:C,lineStart:Oi,lineEnd:C,polygonStart:C,polygonEnd:C},_i=Mi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return hi(_i)}).raw=_i;var Di=Mi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},mn);(e.geo.azimuthalEquidistant=function(){return hi(Di)}).raw=Di,(e.geo.conicConformal=function(){return Ur(Pi)}).raw=Pi,(e.geo.conicEquidistant=function(){return Ur(Hi)}).raw=Hi;var Bi=Mi(function(e){return 1/e},Math.atan);(e.geo.gnomonic=function(){return hi(Bi)}).raw=Bi,ji.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-gt]},(e.geo.mercator=function(){return Fi(ji)}).raw=ji;var Ii=Mi(function(){return 1},Math.asin);(e.geo.orthographic=function(){return hi(Ii)}).raw=Ii;var qi=Mi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(e.geo.stereographic=function(){return hi(qi)}).raw=qi,Ri.invert=function(e,t){return[Math.atan2(Nt(e),Math.cos(t)),Tt(Math.sin(t)/Ct(e))]},(e.geo.transverseMercator=function(){return Fi(Ri)}).raw=Ri,e.geom={},e.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=vn(t),i=vn(n),s=e.length,o,u=s-1,a=[],f=[],l,c,h,p=0,d,v,m,g,y,b,w,E;if(r===Ui&&n===zi)o=e;else for(c=0,o=[];c<s;++c)o.push([+r.call(this,l=e[c],c),+i.call(this,l,c)]);for(c=1;c<s;++c)if(o[c][1]<o[p][1]||o[c][1]==o[p][1]&&o[c][0]<o[p][0])p=c;for(c=0;c<s;++c){if(c===p)continue;v=o[c][1]-o[p][1],d=o[c][0]-o[p][0],a.push({angle:Math.atan2(v,d),index:c})}a.sort(function(e,t){return e.angle-t.angle}),w=a[0].angle,b=a[0].index,y=0;for(c=1;c<u;++c){h=a[c].index;if(w==a[c].angle){d=o[b][0]-o[p][0],v=o[b][1]-o[p][1],m=o[h][0]-o[p][0],g=o[h][1]-o[p][1];if(d*d+v*v>=m*m+g*g){a[c].index=-1;continue}a[y].index=-1}w=a[c].angle,y=c,b=h}f.push(p);for(c=0,h=0;c<2;++h)a[h].index>-1&&(f.push(a[h].index),c++);E=f.length;for(;h<u;++h){if(a[h].index<0)continue;while(!Wi(f[E-2],f[E-1],a[h].index,o))--E;f[E++]=a[h].index}var S=[];for(c=E-1;c>=0;--c)S.push(e[f[c]]);return S}var t=Ui,n=zi;return arguments.length?r(e):(r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r)},e.geom.polygon=function(e){return D(e,Xi),e};var Xi=e.geom.polygon.prototype=[];Xi.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t)n=r,r=this[e],i+=n[1]*r[0]-n[0]*r[1];return i*.5},Xi.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n)s=o,o=this[t],u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return[r*e,i*e]},Xi.clip=function(e){var t,n=Ji(e),r=-1,i=this.length-Ji(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice(),e.length=0,a=this[r],f=t[(o=t.length-n)-1],s=-1;while(++s<o)l=t[s],Vi(l,u,a)?(Vi(f,u,a)||e.push($i(f,l,u,a)),e.push(l)):Vi(f,u,a)&&e.push($i(f,l,u,a)),f=l;n&&e.push(e[0]),u=a}return e};var Ki,Qi,Gi,Yi=[],Zi,es,ts=[];fs.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--)n=e[t].edge,(!n.b||!n.a)&&e.splice(t,1);return e.sort(cs),e.length},Es.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ss.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Cs(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Ts(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Ns(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Ns(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Ts(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=Cs(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,Ts(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,Ns(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,Ts(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,Ns(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,Ts(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,Ns(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}},e.geom.voronoi=function(e){function o(e){var t=new Array(e.length),n=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1];return ks(u(e),s).cells.forEach(function(s,u){var a=s.edges,f=s.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=n&&f.x<=i&&f.y>=r&&f.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];l.point=e[u]}),t}function u(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/yt)*yt,y:Math.round(i(e,t)/yt)*yt,i:t}})}var t=Ui,n=zi,r=t,i=n,s=As;return e?o(e):(o.links=function(e){return ks(u(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return ks(u(e)).cells.forEach(function(n,r){var i=n.site,s=n.edges.sort(cs),o=-1,u=s.length,a,f,l=s[u-1].edge,c=l.l===i?l.r:l.l;while(++o<u)a=l,f=c,l=s[o].edge,c=l.l===i?l.r:l.l,r<f.i&&r<c.i&&Os(i,f,c)<0&&t.push([e[r],e[f.i],e[c.i]])}),t},o.x=function(e){return arguments.length?(r=vn(t=e),o):t},o.y=function(e){return arguments.length?(i=vn(n=e),o):n},o.clipExtent=function(e){return arguments.length?(s=e==null?As:e,o):s===As?null:s},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):s===As?null:s&&s[1]},o)};var As=[[-1e6,-1e6],[1e6,1e6]];e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(e,t,n,r,i){function a(e){function T(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(m(a-n)+m(f-r)<.01)N(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null,N(e,l,a,f,i,s,o,u),N(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else N(e,t,n,r,i,s,o,u)}function N(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=(c<<1)+l;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=Ds()),l?i=a:o=a,c?s=f:u=f,T(e,t,n,r,i,s,o,u)}var a,f=vn(s),l=vn(o),c,h,p,d,v,g,y,b;if(t!=null)v=t,g=n,y=r,b=i;else{y=b=-(v=g=Infinity),c=[],h=[],d=e.length;if(u)for(p=0;p<d;++p)a=e[p],a.x<v&&(v=a.x),a.y<g&&(g=a.y),a.x>y&&(y=a.x),a.y>b&&(b=a.y),c.push(a.x),h.push(a.y);else for(p=0;p<d;++p){var w=+f(a=e[p],p),E=+l(a,p);w<v&&(v=w),E<g&&(g=E),w>y&&(y=w),E>b&&(b=E),c.push(w),h.push(E)}}var S=y-v,x=b-g;S>x?b=g+S:y=v+x;var C=Ds();C.add=function(e){T(C,e,+f(e,++p),+l(e,p),v,g,y,b)},C.visit=function(e){Ps(e,C,v,g,y,b)},p=-1;if(t==null){while(++p<d)T(C,e[p],c[p],h[p],v,g,y,b);--p}else e.forEach(C.add);return c=h=e=a=null,C}var s=Ui,o=zi,u;return(u=arguments.length)?(s=Ms,o=_s,u===3&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(o=e,a):o},a.extent=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):t==null?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):t==null?null:[r-t,i-n]},a)},e.interpolateRgb=Hs,e.interpolateObject=Bs,e.interpolateNumber=js,e.interpolateString=Fs;var Is=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;e.interpolate=qs,e.interpolators=[function(e,t){var n=typeof t;return(n==="string"?dn.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Hs:Fs:t instanceof Ht?Hs:n==="object"?Array.isArray(t)?Rs:Bs:js)(e,t)}],e.interpolateArray=Rs;var Us=function(){return mn},zs=e.map({linear:Us,poly:Gs,quad:function(){return Js},cubic:function(){return Ks},sin:function(){return Ys},exp:function(){return Zs},circle:function(){return eo},elastic:to,back:no,bounce:function(){return ro}}),Ws=e.map({"in":mn,out:Vs,"in-out":$s,"out-in":function(e){return $s(Vs(e))}});e.ease=function(e){var n=e.indexOf("-"),r=n>=0?e.substring(0,n):e,i=n>=0?e.substring(n+1):"in";return r=zs.get(r)||Us,i=Ws.get(i)||mn,Xs(i(r.apply(null,t.call(arguments,1))))},e.interpolateHcl=io,e.interpolateHsl=so,e.interpolateLab=oo,e.interpolateRound=uo,e.transform=function(t){var n=r.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new ao(t?t.matrix:ho)})(t)},ao.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ho={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=po,e.layout={},e.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(go(e[n]));return t}},e.layout.chord=function(){function l(){var t={},l=[],h=e.range(s),p=[],d,v,m,g,y;n=[],r=[],d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v),p.push(e.range(s)),d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])}),a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})}),d=(mt-o*s)/d,v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;t[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:(v-m)/d},v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=t[g+"-"+y],N=t[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},n,r,i,s,o=0,u,a,f;return t.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,t):i},t.padding=function(e){return arguments.length?(o=e,n=r=null,t):o},t.sortGroups=function(e){return arguments.length?(u=e,n=r=null,t):u},t.sortSubgroups=function(e){return arguments.length?(a=e,n=null,t):a},t.sortChords=function(e){return arguments.length?(f=e,n&&c(),t):f},t.chords=function(){return n||l(),n},t.groups=function(){return r||l(),r},t},e.layout.force=function(){function g(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=1/Math.sqrt(s*s+o*o);if((i-n)*u<c){var a=t.charge*u*u;return e.px-=s*a,e.py-=o*a,!0}if(t.point&&isFinite(u)){var a=t.pointCharge*u*u;e.px-=s*a,e.py-=o*a}}return!t.charge}}function y(n){n.px=e.event.x,n.py=e.event.y,t.resume()}var t={},n=e.dispatch("start","tick","end"),r=[1,1],i,s,o=.9,u=No,a=Co,f=-30,l=.1,c=.8,h=[],p=[],d,v,m;return t.tick=function(){if((s*=.99)<.005)return n.end({type:"end",alpha:s=0}),!0;var t=h.length,i=p.length,u,a,c,y,b,w,E,S,x;for(a=0;a<i;++a){c=p[a],y=c.source,b=c.target,S=b.x-y.x,x=b.y-y.y;if(w=S*S+x*x)w=s*v[a]*((w=Math.sqrt(w))-d[a])/w,S*=w,x*=w,b.x-=S*(E=y.weight/(b.weight+y.weight)),b.y-=x*E,y.x+=S*(E=1-E),y.y+=x*E}if(E=s*l){S=r[0]/2,x=r[1]/2,a=-1;if(E)while(++a<t)c=h[a],c.x+=(S-c.x)*E,c.y+=(x-c.y)*E}if(f){To(u=e.geom.quadtree(h),s,m),a=-1;while(++a<t)(c=h[a]).fixed||u.visit(g(c))}a=-1;while(++a<t)c=h[a],c.fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*o,c.y-=(c.py-(c.py=c.y))*o);n.tick({type:"tick",alpha:s})},t.nodes=function(e){return arguments.length?(h=e,t):h},t.links=function(e){return arguments.length?(p=e,t):p},t.size=function(e){return arguments.length?(r=e,t):r},t.linkDistance=function(e){return arguments.length?(u=typeof e=="function"?e:+e,t):u},t.distance=t.linkDistance,t.linkStrength=function(e){return arguments.length?(a=typeof e=="function"?e:+e,t):a},t.friction=function(e){return arguments.length?(o=+e,t):o},t.charge=function(e){return arguments.length?(f=typeof e=="function"?e:+e,t):f},t.gravity=function(e){return arguments.length?(l=+e,t):l},t.theta=function(e){return arguments.length?(c=+e,t):c},t.alpha=function(r){return arguments.length?(r=+r,s?r>0?s=r:s=0:r>0&&(n.start({type:"start",alpha:s=r}),e.timer(t.tick)),t):s},t.start=function(){function g(t,r){if(!l){l=new Array(n);for(o=0;o<n;++o)l[o]=[];for(o=0;o<u;++o){var i=p[o];l[i.source.index].push(i.target),l[i.target.index].push(i.source)}}var s=l[e],o=-1,u=s.length,a;while(++o<u)if(!isNaN(a=s[o][t]))return a;return Math.random()*r}var e,n=h.length,i=p.length,s=r[0],o=r[1],l,c;for(e=0;e<n;++e)(c=h[e]).index=e,c.weight=0;for(e=0;e<i;++e)c=p[e],typeof c.source=="number"&&(c.source=h[c.source]),typeof c.target=="number"&&(c.target=h[c.target]),++c.source.weight,++c.target.weight;for(e=0;e<n;++e)c=h[e],isNaN(c.x)&&(c.x=g("x",s)),isNaN(c.y)&&(c.y=g("y",o)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);d=[];if(typeof u=="function")for(e=0;e<i;++e)d[e]=+u.call(this,p[e],e);else for(e=0;e<i;++e)d[e]=u;v=[];if(typeof a=="function")for(e=0;e<i;++e)v[e]=+a.call(this,p[e],e);else for(e=0;e<i;++e)v[e]=a;m=[];if(typeof f=="function")for(e=0;e<n;++e)m[e]=+f.call(this,h[e],e);else for(e=0;e<n;++e)m[e]=f;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){i||(i=e.behavior.drag().origin(mn).on("dragstart.force",wo).on("drag.force",y).on("dragend.force",Eo));if(!arguments.length)return i;this.on("mouseover.force",So).on("mouseout.force",xo).call(i)},e.rebind(t,n,"on")};var No=20,Co=1;e.layout.hierarchy=function(){function r(i,o,u){var a=t.call(s,i,o);i.depth=o,u.push(i);if(a&&(l=a.length)){var f=-1,l,c=i.children=new Array(l),h=0,p=o+1,d;while(++f<l)d=c[f]=r(a[f],p,u),d.parent=i,h+=d.value;e&&c.sort(e),n&&(i.value=h)}else delete i.children,n&&(i.value=+n.call(s,i,o)||0);return i}function i(e,t){var r=e.children,o=0;if(r&&(a=r.length)){var u=-1,a,f=t+1;while(++u<a)o+=i(r[u],f)}else n&&(o=+n.call(s,e,t)||0);return n&&(e.value=o),o}function s(e){var t=[];return r(e,0,t),t}var e=Oo,t=Lo,n=Ao;return s.sort=function(t){return arguments.length?(e=t,s):e},s.children=function(e){return arguments.length?(t=e,s):t},s.value=function(e){return arguments.length?(n=e,s):n},s.revalue=function(e){return i(e,0),e},s},e.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=n,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u)r(a=s[o],t,f=a.value*n,i),t+=f}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(e,s){var o=t.call(this,e,s);return r(o[0],0,n[0],n[1]/i(o[0])),o}var t=e.layout.hierarchy(),n=[1,1];return s.size=function(e){return arguments.length?(n=e,s):n},ko(s,t)},e.layout.pie=function(){function s(o){var u=o.map(function(e,n){return+t.call(s,e,n)}),a=+(typeof r=="function"?r.apply(this,arguments):r),f=((typeof i=="function"?i.apply(this,arguments):i)-a)/e.sum(u),l=e.range(o.length);n!=null&&l.sort(n===_o?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])});var c=[];return l.forEach(function(e){var t;c[e]={data:o[e],value:t=u[e],startAngle:a,endAngle:a+=t*f}}),c}var t=Number,n=_o,r=0,i=mt;return s.value=function(e){return arguments.length?(t=e,s):t},s.sort=function(e){return arguments.length?(n=e,s):n},s.startAngle=function(e){return arguments.length?(r=e,s):r},s.endAngle=function(e){return arguments.length?(i=e,s):i},s};var _o={};e.layout.stack=function(){function u(a,f){var l=a.map(function(e,n){return t.call(u,e,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=e.permute(l,h),c=e.permute(c,h);var p=r.call(u,c,f),d=l.length,v=l[0].length,m,g,y;for(g=0;g<v;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<d;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var t=mn,n=Fo,r=Io,i=Ho,s=Do,o=Po;return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(e){return arguments.length?(n=typeof e=="function"?e:Bo.get(e)||Fo,u):n},u.offset=function(e){return arguments.length?(r=typeof e=="function"?e:jo.get(e)||Io,u):r},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var Bo=e.map({"inside-out":function(t){var n=t.length,r,i,s=t.map(qo),o=t.map(Ro),u=e.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r)i=u[r],a<f?(a+=o[i],l.push(i)):(f+=o[i],c.push(i));return c.reverse().concat(l)},reverse:function(t){return e.range(t.length).reverse()},"default":Fo}),jo=e.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0,c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:Io});e.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=t?1:1/h,v;while(++o<p)c=u[o]=[],c.dx=l[o+1]-(c.x=l[o]),c.y=0;if(p>0){o=-1;while(++o<h)v=a[o],v>=f[0]&&v<=f[1]&&(c=u[e.bisect(l,v,1,p)-1],c.y+=d,c.push(s[o]))}return u}var t=!0,n=Number,r=Xo,i=zo;return s.value=function(e){return arguments.length?(n=e,s):n},s.range=function(e){return arguments.length?(r=vn(e),s):r},s.bins=function(e){return arguments.length?(i=typeof e=="number"?function(t){return Wo(t,e)}:vn(e),s):i},s.frequency=function(e){return arguments.length?(t=!!e,s):t},s},e.layout.tree=function(){function s(e,s){function a(e,t){var r=e.children,i=e._tree;if(r&&(s=r.length)){var s,o=r[0],u,f=o,c,h=-1;while(++h<s)c=r[h],a(c,u),f=l(c,u,f),u=c;eu(e);var p=.5*(o._tree.prelim+c._tree.prelim);t?(i.prelim=t._tree.prelim+n(e,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+n(e,t))}function f(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var r=-1,i;t+=e._tree.mod;while(++r<i)f(n[r],t)}}function l(e,t,r){if(t){var i=e,s=e,o=t,u=e.parent.children[0],a=i._tree.mod,f=s._tree.mod,l=o._tree.mod,c=u._tree.mod,h;while(o=Jo(o),i=$o(i),o&&i)u=$o(u),s=Jo(s),s._tree.ancestor=e,h=o._tree.prelim+l-i._tree.prelim-a+n(o,i),h>0&&(tu(nu(o,e,r),e,h),a+=h,f+=h),l+=o._tree.mod,a+=i._tree.mod,c+=u._tree.mod,f+=s._tree.mod;o&&!Jo(s)&&(s._tree.thread=o,s._tree.mod+=l-f),i&&!$o(u)&&(u._tree.thread=i,u._tree.mod+=a-c,r=e)}return r}var o=t.call(this,e,s),u=o[0];Zo(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),a(u),f(u,-u._tree.prelim);var c=Ko(u,Go),h=Ko(u,Qo),p=Ko(u,Yo),d=c.x-n(c,h)/2,v=h.x+n(h,c)/2,m=p.depth||1;return Zo(u,i?function(e){e.x*=r[0],e.y=e.depth*r[1],delete e._tree}:function(e){e.x=(e.x-d)/(v-d)*r[0],e.y=e.depth/m*r[1],delete e._tree}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Vo,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},ko(s,t)},e.layout.pack=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0,Zo(u,function(e){e.r=+l(e.value)}),Zo(u,uu);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;Zo(u,function(e){e.r+=c}),Zo(u,uu),Zo(u,function(e){e.r-=c})}return lu(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t=e.layout.hierarchy().sort(ru),n=0,r=[1,1],i;return s.size=function(e){return arguments.length?(r=e,s):r},s.radius=function(e){return arguments.length?(i=e==null||typeof e=="function"?e:+e,s):i},s.padding=function(e){return arguments.length?(n=+e,s):n},ko(s,t)},e.layout.cluster=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a,f=0;Zo(u,function(e){var t=e.children;t&&t.length?(e.x=pu(t),e.y=hu(t)):(e.x=a?f+=n(e,a):0,e.y=0,a=e)});var l=du(u),c=vu(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Zo(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Vo,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},ko(s,t)},e.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value),r.area=0;while((v=i.length)>0)r.push(o=i[v-1]),r.area+=o.area,a!=="squarify"||(f=p(r,h))<=u?(i.pop(),u=f):(r.area-=r.pop().area,d(r,h,n,!1),h=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(d(r,h,n,!0),r.length=r.area=0),t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value),o.area=0;while(i=r.pop())o.push(i),o.area+=i.area,i.z!=null&&(d(o,i.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function v(e){var n=u||t(e),i=n[0];return i.x=0,i.y=0,i.dx=r[0],i.dy=r[1],u&&t.revalue(i),l([i],i.dx*i.dy/i.value),(u?h:c)(i),o&&(u=n),n}var t=e.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=mu,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?mu(t):gu(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return gu(t,e)}if(!arguments.length)return i;var r;return s=(i=e)==null?mu:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(o=e,u=null,v):o},v.ratio=function(e){return arguments.length?(f=e,v):f},v.mode=function(e){return arguments.length?(a=e+"",v):a},ko(v,t)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t/e}}},e.scale={};var xu={floor:mn,ceil:mn};e.scale.linear=function(){return Nu([0,1],[0,1],qs,!1)};var Mu={s:1,g:1,p:1,r:1,e:1};e.scale.log=function(){return Pu(e.scale.linear().domain([0,1]),10,!0,[1,10])};var Hu=e.format(".0e"),Bu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return ju(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return Iu([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(qu)},e.scale.category20=function(){return e.scale.ordinal().range(Ru)},e.scale.category20b=function(){return e.scale.ordinal().range(Uu)},e.scale.category20c=function(){return e.scale.ordinal().range(zu)};var qu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(rn),Ru=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(rn),Uu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(rn),zu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(rn);e.scale.quantile=function(){return Wu([],[])},e.scale.quantize=function(){return Xu(0,1,[0,1])},e.scale.threshold=function(){return Vu([.5],[0,1])},e.scale.identity=function(){return $u([0,1])},e.svg={},e.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+Ju,u=r.apply(this,arguments)+Ju,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<vt?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=Ku?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=Qu,t=Gu,n=Yu,r=Zu;return i.innerRadius=function(t){return arguments.length?(e=vn(t),i):e},i.outerRadius=function(e){return arguments.length?(t=vn(e),i):t},i.startAngle=function(e){return arguments.length?(n=vn(e),i):n},i.endAngle=function(e){return arguments.length?(r=vn(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+Ju;return[Math.cos(s)*i,Math.sin(s)*i]},i};var Ju=-gt,Ku=mt-yt;e.svg.line=function(){return ea(mn)};var ta=e.map({linear:na,"linear-closed":ra,step:ia,"step-before":sa,"step-after":oa,basis:ha,"basis-open":pa,"basis-closed":da,bundle:va,cardinal:fa,"cardinal-open":ua,"cardinal-closed":aa,monotone:Ta});ta.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ga=[0,2/3,1/3,0],ya=[0,1/3,2/3,0],ba=[0,1/6,2/3,1/6];e.svg.line.radial=function(){var e=ea(Na);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},sa.reverse=oa,oa.reverse=sa,e.svg.area=function(){return Ca(mn)},e.svg.area.radial=function(){var e=Ca(Na);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+Ju,l=i.call(e,u,o)+Ju;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>vt)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=Ni,t=Ci,n=ka,r=Yu,i=Zu;return s.radius=function(e){return arguments.length?(n=vn(e),s):n},s.source=function(t){return arguments.length?(e=vn(t),s):e},s.target=function(e){return arguments.length?(t=vn(e),s):t},s.startAngle=function(e){return arguments.length?(r=vn(e),s):r},s.endAngle=function(e){return arguments.length?(i=vn(e),s):i},s},e.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=Ni,t=Ci,n=La;return r.source=function(t){return arguments.length?(e=vn(t),r):e},r.target=function(e){return arguments.length?(t=vn(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=La,r=t.projection;return t.projection=function(e){return arguments.length?r(Aa(n=e)):n},t},e.svg.symbol=function(){function n(n,r){return(Da.get(e.call(this,n,r))||_a)(t.call(this,n,r))}var e=Ma,t=Oa;return n.type=function(t){return arguments.length?(e=vn(t),n):e},n.size=function(e){return arguments.length?(t=vn(e),n):t},n};var Da=e.map({circle:_a,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ha)),n=t*Ha;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Pa),n=t*Pa/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Pa),n=t*Pa/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});e.svg.symbolTypes=Da.keys();var Pa=Math.sqrt(3),Ha=Math.tan(30*wt),ja=[],Fa=0,Ia,qa;ja.call=I.call,ja.empty=I.empty,ja.node=I.node,ja.size=I.size,e.transition=function(e){return arguments.length?Ia?e.transition():e:st.transition()},e.transition.prototype=ja,ja.select=function(e){var t=this.id,n=[],r,i,s;e=q(e);for(var o=-1,u=this.length;++o<u;){n.push(r=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(s=a[f])&&(i=e.call(s,s.__data__,f,o))?("__data__"in s&&(i.__data__=s.__data__),za(i,f,t,s.__transition__[t]),r.push(i)):r.push(null)}return Ba(n,t)},ja.selectAll=function(e){var t=this.id,n=[],r,i,s,o,u;e=R(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(s=l[c]){u=s.__transition__[t],i=e.call(s,s.__data__,c,a),n.push(r=[]);for(var p=-1,d=i.length;++p<d;)(o=i[p])&&za(o,p,t,u),r.push(o)}return Ba(n,t)},ja.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=Y(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return Ba(t,this.id)},ja.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):et(this,t==null?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},ja.attr=function(t,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r=t=="transform"?po:qs,i=e.ns.qualify(t);return Ra(this,"attr."+t,n,i.local?a:u)},ja.attrTween=function(t,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?s:i)},ja.style=function(e,t,n){function i(){this.style.removeProperty(e)}function o(t){return t==null?i:(t+="",function(){var r=s.getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=qs(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ra(this,"style."+e,t,o)},ja.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,s.getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},ja.text=function(e){return Ra(this,"text",e,Ua)},ja.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},ja.ease=function(t){var n=this.id;return arguments.length<1?this.node().__transition__[n].ease:(typeof t!="function"&&(t=e.ease.apply(e,arguments)),et(this,function(e){e.__transition__[n].ease=t}))},ja.delay=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},ja.duration=function(e){var t=this.id;return et(this,typeof e=="function"?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},ja.each=function(t,n){var r=this.id;if(arguments.length<2){var i=qa,s=Ia;Ia=r,et(this,function(e,n,i){qa=e.__transition__[r],t.call(e,e.__data__,n,i)}),qa=i,Ia=s}else et(this,function(i){var s=i.__transition__[r];(s.event||(s.event=e.dispatch("start","end"))).on(t,n)});return this},ja.transition=function(){var e=this.id,t=++Fa,n=[],r,i,s,o;for(var u=0,a=this.length;u<a;u++){n.push(r=[]);for(var i=this[u],f=0,l=i.length;f<l;f++){if(s=i[f])o=Object.create(s.__transition__[e]),o.delay+=o.duration,za(s,f,t,o);r.push(s)}}return Ba(n,t)},e.svg.axis=function(){function f(f){f.each(function(){var f=e.select(this),l=this.__chart__||t,c=this.__chart__=t.copy(),h=u==null?c.ticks?c.ticks.apply(c,o):c.domain():u,p=a==null?c.tickFormat?c.tickFormat.apply(c,o):mn:a,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",yt),m=e.transition(d.exit()).style("opacity",yt).remove(),g=e.transition(d).style("opacity",1),y,b=bu(c),w=f.selectAll(".domain").data([0]),E=(w.enter().append("path").attr("class","domain"),e.transition(w));v.append("line"),v.append("text");var S=v.select("line"),x=g.select("line"),T=d.select("text").text(p),N=v.select("text"),C=g.select("text");switch(n){case"bottom":y=Va,S.attr("y2",r),N.attr("y",Math.max(r,0)+s),x.attr("x2",0).attr("y2",r),C.attr("x",0).attr("y",Math.max(r,0)+s),T.attr("dy",".71em").style("text-anchor","middle"),E.attr("d","M"+b[0]+","+i+"V0H"+b[1]+"V"+i);break;case"top":y=Va,S.attr("y2",-r),N.attr("y",-(Math.max(r,0)+s)),x.attr("x2",0).attr("y2",-r),C.attr("x",0).attr("y",-(Math.max(r,0)+s)),T.attr("dy","0em").style("text-anchor","middle"),E.attr("d","M"+b[0]+","+ -i+"V0H"+b[1]+"V"+ -i);break;case"left":y=$a,S.attr("x2",-r),N.attr("x",-(Math.max(r,0)+s)),x.attr("x2",-r).attr("y2",0),C.attr("x",-(Math.max(r,0)+s)).attr("y",0),T.attr("dy",".32em").style("text-anchor","end"),E.attr("d","M"+ -i+","+b[0]+"H0V"+b[1]+"H"+ -i);break;case"right":y=$a,S.attr("x2",r),N.attr("x",Math.max(r,0)+s),x.attr("x2",r).attr("y2",0),C.attr("x",Math.max(r,0)+s).attr("y",0),T.attr("dy",".32em").style("text-anchor","start"),E.attr("d","M"+i+","+b[0]+"H0V"+b[1]+"H"+i)}if(c.rangeBand){var k=c.rangeBand()/2,L=function(e){return c(e)+k};v.call(y,L),g.call(y,L)}else v.call(y,l),g.call(y,c),m.call(y,c)})}var t=e.scale.linear(),n=Wa,r=6,i=6,s=3,o=[10],u=null,a;return f.scale=function(e){return arguments.length?(t=e,f):t},f.orient=function(e){return arguments.length?(n=e in Xa?e+"":Wa,f):n},f.ticks=function(){return arguments.length?(o=arguments,f):o},f.tickValues=function(e){return arguments.length?(u=e,f):u},f.tickFormat=function(e){return arguments.length?(a=e,f):a},f.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],f):r},f.innerTickSize=function(e){return arguments.length?(r=+e,f):r},f.outerTickSize=function(e){return arguments.length?(i=+e,f):i},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.tickSubdivide=function(){return arguments.length&&f},f};var Wa="bottom",Xa={top:1,right:1,bottom:1,left:1};e.svg.brush=function(){function h(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),i=t.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(c,mn);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ja[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",h.empty()?"none":null);var o=e.transition(t),u=e.transition(i),a;n&&(a=bu(n),u.attr("x",a[0]).attr("width",a[1]-a[0]),d(o)),r&&(a=bu(r),u.attr("y",a[0]).attr("height",a[1]-a[0]),v(o)),p(o)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+o[+/^s/.test(e)]+")"})}function d(e){e.select(".extent").attr("x",i[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function v(e){e.select(".extent").attr("y",o[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1]-o[0])}function m(){function M(){e.event.keyCode==32&&(S||(T=null,N[0]-=i[1],N[1]-=o[1],S=2),A())}function _(){e.event.keyCode==32&&S==2&&(N[0]+=i[1],N[1]+=o[1],S=0,A())}function D(){var t=e.mouse(c),s=!1;C&&(t[0]+=C[0],t[1]+=C[1]),S||(e.event.altKey?(T||(T=[(i[0]+i[1])/2,(o[0]+o[1])/2]),N[0]=i[+(t[0]<T[0])],N[1]=o[+(t[1]<T[1])]):T=null),w&&P(t,n,0)&&(d(y),s=!0),E&&P(t,r,1)&&(v(y),s=!0),s&&(p(y),g({type:"brush",mode:S?"move":"resize"}))}function P(e,t,n){var r=bu(t),s=r[0],c=r[1],h=N[n],p=n?o:i,d=p[1]-p[0],v,m;S&&(s-=h,c-=d+h),v=(n?l:f)?Math.max(s,Math.min(c,e[n])):e[n],S?m=(v+=h)+d:(T&&(h=Math.max(s,Math.min(c,2*T[n]-v))),h<v?(m=v,v=h):m=h);if(p[0]!=v||p[1]!=m)return n?a=null:u=null,p[0]=v,p[1]=m,!0}function H(){D(),y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),e.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),g({type:"brushend"})}var c=this,m=e.select(e.event.target),g=t.of(c,arguments),y=e.select(c),b=m.datum(),w=!/^(n|s)$/.test(b)&&n,E=!/^(e|w)$/.test(b)&&r,S=m.classed("extent"),x=ht(),T,N=e.mouse(c),C,k=e.select(s).on("keydown.brush",M).on("keyup.brush",_);e.event.changedTouches?k.on("touchmove.brush",D).on("touchend.brush",H):k.on("mousemove.brush",D).on("mouseup.brush",H),y.interrupt().selectAll("*").interrupt();if(S)N[0]=i[0]-N[0],N[1]=o[0]-N[1];else if(b){var L=+/w$/.test(b),O=+/^n/.test(b);C=[i[1-L]-N[0],o[1-O]-N[1]],N[0]=i[L],N[1]=o[O]}else e.event.altKey&&(T=N.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",m.style("cursor")),g({type:"brushstart"}),D()}var t=M(h,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],o=[0,0],u,a,f=!0,l=!0,c=Ka[0];return h.event=function(n){n.each(function(){var n=t.of(this,arguments),r={x:i,y:o,i:u,j:a},s=this.__chart__||r;this.__chart__=r,Ia?e.select(this).transition().each("start.brush",function(){u=s.i,a=s.j,i=s.x,o=s.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=Rs(i,r.x),t=Rs(o,r.y);return u=a=null,function(s){i=r.x=e(s),o=r.y=t(s),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=r.i,a=r.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},h.x=function(e){return arguments.length?(n=e,c=Ka[!n<<1|!r],h):n},h.y=function(e){return arguments.length?(r=e,c=Ka[!n<<1|!r],h):r},h.clamp=function(e){return arguments.length?(n&&r?(f=!!e[0],l=!!e[1]):n?f=!!e:r&&(l=!!e),h):n&&r?[f,l]:n?f:r?l:null},h.extent=function(e){var t,s,f,l,c;if(!arguments.length)return n&&(u?(t=u[0],s=u[1]):(t=i[0],s=i[1],n.invert&&(t=n.invert(t),s=n.invert(s)),s<t&&(c=t,t=s,s=c))),r&&(a?(f=a[0],l=a[1]):(f=o[0],l=o[1],r.invert&&(f=r.invert(f),l=r.invert(l)),l<f&&(c=f,f=l,l=c))),n&&r?[[t,f],[s,l]]:n?[t,s]:r&&[f,l];if(n){t=e[0],s=e[1],r&&(t=t[0],s=s[0]),u=[t,s],n.invert&&(t=n(t),s=n(s)),s<t&&(c=t,t=s,s=c);if(t!=i[0]||s!=i[1])i=[t,s]}if(r){f=e[0],l=e[1],n&&(f=f[1],l=l[1]),a=[f,l],r.invert&&(f=r(f),l=r(l)),l<f&&(c=f,f=l,l=c);if(f!=o[0]||l!=o[1])o=[f,l]}return h},h.clear=function(){return h.empty()||(i=[0,0],o=[0,0],u=a=null),h},h.empty=function(){return!!n&&i[0]==i[1]||!!r&&o[0]==o[1]},e.rebind(h,t,"on")};var Ja={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ka=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Qa=e.time={},Ga=Date,Ya=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Za.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ef.setUTCDate.apply(this._,arguments)},setDay:function(){ef.setUTCDay.apply(this._,arguments)},setFullYear:function(){ef.setUTCFullYear.apply(this._,arguments)},setHours:function(){ef.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ef.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ef.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ef.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ef.setUTCSeconds.apply(this._,arguments)},setTime:function(){ef.setTime.apply(this._,arguments)}};var ef=Date.prototype,tf="%a %b %e %X %Y",nf="%m/%d/%Y",rf="%H:%M:%S",sf=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],of=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],uf=["January","February","March","April","May","June","July","August","September","October","November","December"],af=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Qa.year=ff(function(e){return e=Qa.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Qa.years=Qa.year.range,Qa.years.utc=Qa.year.utc.range,Qa.day=ff(function(e){var t=new Ga(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Qa.days=Qa.day.range,Qa.days.utc=Qa.day.utc.range,Qa.dayOfYear=function(e){var t=Qa.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)},Ya.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=Qa[e]=ff(function(e){return(e=Qa.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Qa.year(e).getDay();return Math.floor((Qa.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Qa[e+"s"]=n.range,Qa[e+"s"].utc=n.utc.range,Qa[e+"OfYear"]=function(e){var n=Qa.year(e).getDay();return Math.floor((Qa.dayOfYear(e)+(n+t)%7)/7)}}),Qa.week=Qa.sunday,Qa.weeks=Qa.sunday.range,Qa.weeks.utc=Qa.sunday.utc.range,Qa.weekOfYear=Qa.sundayOfYear,Qa.format=cf;var mf=pf(sf),gf=df(sf),yf=pf(of),bf=df(of),wf=pf(uf),Ef=df(uf),Sf=pf(af),xf=df(af),Tf=/^%/,Nf={"-":"",_:" ",0:"0"},Cf={a:function(e){return of[e.getDay()]},A:function(e){return sf[e.getDay()]},b:function(e){return af[e.getMonth()]},B:function(e){return uf[e.getMonth()]},c:cf(tf),d:function(e,t){return vf(e.getDate(),t,2)},e:function(e,t){return vf(e.getDate(),t,2)},H:function(e,t){return vf(e.getHours(),t,2)},I:function(e,t){return vf(e.getHours()%12||12,t,2)},j:function(e,t){return vf(1+Qa.dayOfYear(e),t,3)},L:function(e,t){return vf(e.getMilliseconds(),t,3)},m:function(e,t){return vf(e.getMonth()+1,t,2)},M:function(e,t){return vf(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return vf(e.getSeconds(),t,2)},U:function(e,t){return vf(Qa.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return vf(Qa.mondayOfYear(e),t,2)},x:cf(nf),X:cf(rf),y:function(e,t){return vf(e.getFullYear()%100,t,2)},Y:function(e,t){return vf(e.getFullYear()%1e4,t,4)},Z:Yf,"%":function(){return"%"}},kf={a:Lf,A:Af,b:Df,B:Pf,c:Hf,d:zf,e:zf,H:Xf,I:Xf,j:Wf,L:Jf,m:Uf,M:Vf,p:Qf,S:$f,U:Mf,w:Of,W:_f,x:Bf,X:jf,y:If,Y:Ff,Z:qf,"%":Zf},Kf=/^\s*\d+/,Gf=e.map({am:0,pm:1});cf.utc=el;var tl=el("%Y-%m-%dT%H:%M:%S.%LZ");cf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?nl:tl,nl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},nl.toString=tl.toString,Qa.second=ff(function(e){return new Ga(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()}),Qa.seconds=Qa.second.range,Qa.seconds.utc=Qa.second.utc.range,Qa.minute=ff(function(e){return new Ga(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()}),Qa.minutes=Qa.minute.range,Qa.minutes.utc=Qa.minute.utc.range,Qa.hour=ff(function(e){var t=e.getTimezoneOffset()/60;return new Ga((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()}),Qa.hours=Qa.hour.range,Qa.hours.utc=Qa.hour.utc.range,Qa.month=ff(function(e){return e=Qa.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Qa.months=Qa.month.range,Qa.months.utc=Qa.month.utc.range;var ol=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ul=[[Qa.second,1],[Qa.second,5],[Qa.second,15],[Qa.second,30],[Qa.minute,1],[Qa.minute,5],[Qa.minute,15],[Qa.minute,30],[Qa.hour,1],[Qa.hour,3],[Qa.hour,6],[Qa.hour,12],[Qa.day,1],[Qa.day,2],[Qa.week,1],[Qa.month,1],[Qa.month,3],[Qa.year,1]],al=[[cf("%Y"),Tr],[cf("%B"),function(e){return e.getMonth()}],[cf("%b %d"),function(e){return e.getDate()!=1}],[cf("%a %d"),function(e){return e.getDay()&&e.getDate()!=1}],[cf("%I %p"),function(e){return e.getHours()}],[cf("%I:%M"),function(e){return e.getMinutes()}],[cf(":%S"),function(e){return e.getSeconds()}],[cf(".%L"),function(e){return e.getMilliseconds()}]],fl=sl(al);ul.year=Qa.year,Qa.scale=function(){return rl(e.scale.linear(),ul,fl)};var ll={range:function(t,n,r){return e.range(+t,+n,r).map(il)}},cl=ul.map(function(e){return[e[0].utc,e[1]]}),hl=[[el("%Y"),Tr],[el("%B"),function(e){return e.getUTCMonth()}],[el("%b %d"),function(e){return e.getUTCDate()!=1}],[el("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],[el("%I %p"),function(e){return e.getUTCHours()}],[el("%I:%M"),function(e){return e.getUTCMinutes()}],[el(":%S"),function(e){return e.getUTCSeconds()}],[el(".%L"),function(e){return e.getUTCMilliseconds()}]],pl=sl(hl);return cl.year=Qa.year.utc,Qa.scale.utc=function(){return rl(e.scale.linear(),cl,pl)},e.text=gn(function(e){return e.responseText}),e.json=function(e,t){return yn(e,"application/json",dl,t)},e.html=function(e,t){return yn(e,"text/html",vl,t)},e.xml=gn(function(e){return e.responseXML}),e}(),define("d3",function(){}),function(e){function t(e){return e}function n(e,t){for(var n=0,r=t.length,i=new Array(r);n<r;++n)i[n]=e[t[n]];return i}function i(e){function t(t,n,r,i){while(r<i){var s=r+i>>>1;e(t[s])<n?r=s+1:i=s}return r}function n(t,n,r,i){while(r<i){var s=r+i>>>1;n<e(t[s])?i=s:r=s+1}return r}return n.right=n,n.left=t,n}function o(e){function t(e,t,n){var i=n-t,s=(i>>>1)+1;while(--s>0)r(e,s,i,t);return e}function n(e,t,n){var i=n-t,s;while(--i>0)s=e[t],e[t]=e[t+i],e[t+i]=s,r(e,1,i,t);return e}function r(t,n,r,i){var s=t[--i+n],o=e(s),u;while((u=n<<1)<=r){u<r&&e(t[i+u])>e(t[i+u+1])&&u++;if(o<=e(t[i+u]))break;t[i+n]=t[i+u],n=u}t[i+n]=s}return t.sort=n,t}function a(e){function n(n,r,i,s){var o=new Array(s=Math.min(i-r,s)),u,a,f,l;for(a=0;a<s;++a)o[a]=n[r++];t(o,0,s);if(r<i){u=e(o[0]);do if(f=e(l=n[r])>u)o[0]=l,u=e(t(o,0,s)[0]);while(++r<i)}return o}var t=o(e);return n}function l(e){function t(t,n,r){for(var i=n+1;i<r;++i){for(var s=i,o=t[i],u=e(o);s>n&&e(t[s-1])>u;--s)t[s]=t[s-1];t[s]=o}return t}return t}function h(e){function n(e,n,i){return(i-n<p?t:r)(e,n,i)}function r(t,r,i){var s=(i-r)/6|0,o=r+s,u=i-1-s,a=r+i-1>>1,f=a-s,l=a+s,c=t[o],h=e(c),p=t[f],d=e(p),v=t[a],m=e(v),g=t[l],y=e(g),b=t[u],w=e(b),E;h>d&&(E=c,c=p,p=E,E=h,h=d,d=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E),h>m&&(E=c,c=v,v=E,E=h,h=m,m=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),h>y&&(E=c,c=g,g=E,E=h,h=y,y=E),m>y&&(E=v,v=g,g=E,E=m,m=y,y=E),d>w&&(E=p,p=b,b=E,E=d,d=w,w=E),d>m&&(E=p,p=v,v=E,E=d,d=m,m=E),y>w&&(E=g,g=b,b=E,E=y,y=w,w=E);var S=p,x=d,T=g,N=y;t[o]=c,t[f]=t[r],t[a]=v,t[l]=t[i-1],t[u]=b;var C=r+1,k=i-2,L=x<=N&&x>=N;if(L)for(var A=C;A<=k;++A){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>x)for(;;){var _=e(t[k]);if(_>x){k--;continue}if(_<x){t[A]=t[C],t[C++]=t[k],t[k--]=O;break}t[A]=t[k],t[k--]=O;break}}else for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<x)A!==C&&(t[A]=t[C],t[C]=O),++C;else if(M>N)for(;;){var _=e(t[k]);if(_>N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}t[r]=t[C-1],t[C-1]=S,t[i-1]=t[k+1],t[k+1]=T,n(t,r,C-1),n(t,k+2,i);if(L)return t;if(C<o&&k>u){var D,_;while((D=e(t[C]))<=x&&D>=x)++C;while((_=e(t[k]))<=N&&_>=N)--k;for(var A=C;A<=k;A++){var O=t[A],M=e(O);if(M<=x&&M>=x)A!==C&&(t[A]=t[C],t[C]=O),C++;else if(M<=N&&M>=N)for(;;){var _=e(t[k]);if(_<=N&&_>=N){k--;if(k<A)break;continue}_<x?(t[A]=t[C],t[C++]=t[k],t[k--]=O):(t[A]=t[k],t[k--]=O);break}}}return n(t,C,k+1)}var t=l(e);return n}function b(e){return new Array(e)}function w(e,t){return function(n){var r=n.length;return[e.left(n,t,0,r),e.right(n,t,0,r)]}}function E(e,t){var n=t[0],r=t[1];return function(t){var i=t.length;return[e.left(t,n,0,i),e.left(t,r,0,i)]}}function S(e){return[0,e.length]}function x(){return null}function T(){return 0}function N(e){return e+1}function C(e){return e-1}function k(e){return function(t,n){return t+ +e(n)}}function L(e){return function(t,n){return t-e(n)}}function A(){function m(t){var n=s,r=t.length;return r&&(i=i.concat(t),l=g(l,s+=r),p.forEach(function(e){e(t,n,r)})),e}function b(){var e=O(s,s),t=[];for(var n=0,r=0;n<s;++n)l[n]?e[n]=r++:t.push(n);c.forEach(function(e){e(0,[],t)}),v.forEach(function(t){t(e)});for(var n=0,r=0,o;n<s;++n)if(o=l[n])n!==r&&(l[r]=o,i[r]=i[n]),++r;i.length=r;while(s>r)l[--s]=0}function A(e){function z(t,r,i){P=t.map(e),H=B(M(i),0,i),P=n(P,H);var o=j(P),u=o[0],a=o[1],f;if(F)for(f=0;f<i;++f)F(P[f],f)||(l[H[f]+r]|=m);else{for(f=0;f<u;++f)l[H[f]+r]|=m;for(f=a;f<i;++f)l[H[f]+r]|=m}if(!r){A=P,D=H,R=u,U=a;return}var c=A,h=D,p=0,d=0;A=new Array(s),D=O(s,s);for(f=0;p<r&&d<i;++f)c[p]<P[d]?(A[f]=c[p],D[f]=h[p++]):(A[f]=P[d],D[f]=H[d++]+r);for(;p<r;++p,++f)A[f]=c[p],D[f]=h[p];for(;d<i;++d,++f)A[f]=P[d],D[f]=H[d]+r;o=j(A),R=o[0],U=o[1]}function W(e,t,n){I.forEach(function(e){e(P,H,t,n)}),P=H=null}function X(e){for(var t=0,n=0,r;t<s;++t)l[r=D[t]]&&(t!==n&&(A[n]=A[t]),D[n]=e[r],++n);A.length=n;while(n<s)D[n++]=0;var i=j(A);R=i[0],U=i[1]}function V(e){var t=e[0],n=e[1];if(F)return F=null,Y(function(e,r){return t<=r&&r<n}),R=t,U=n,d;var r,i,s,o=[],u=[];if(t<R)for(r=t,i=Math.min(R,n);r<i;++r)l[s=D[r]]^=m,o.push(s);else if(t>R)for(r=R,i=Math.min(t,U);r<i;++r)l[s=D[r]]^=m,u.push(s);if(n>U)for(r=Math.max(t,U),i=n;r<i;++r)l[s=D[r]]^=m,o.push(s);else if(n<U)for(r=Math.max(R,n),i=U;r<i;++r)l[s=D[r]]^=m,u.push(s);return R=t,U=n,c.forEach(function(e){e(m,o,u)}),d}function $(e){return e==null?Q():Array.isArray(e)?K(e):typeof e=="function"?G(e):J(e)}function J(e){return V((j=w(r,e))(A))}function K(e){return V((j=E(r,e))(A))}function Q(){return V((j=S)(A))}function G(e){return j=S,Y(F=e),R=0,U=s,d}function Y(e){var t,n,r,i=[],o=[];for(t=0;t<s;++t)!(l[n=D[t]]&m)^(r=e(A[t],t))&&(r?(l[n]&=b,i.push(n)):(l[n]|=m,o.push(n)));c.forEach(function(e){e(m,i,o)})}function Z(e){var t=[],n=U,r;while(--n>=R&&e>0)l[r=D[n]]||(t.push(i[r]),--e);return t}function et(e){var t=[],n=R,r;while(n<U&&e>0)l[r=D[n]]||(t.push(i[r]),--e),n++;return t}function tt(e){function j(t,n,o,a){function F(){++p===h&&(v=y(v,f<<=1),u=y(u,f),h=_(f))}var d=r,v=O(p,h),m=E,w=M,S=p,T=0,N=0,C,k,L,A,D,j;B&&(m=w=x),r=new Array(p),p=0,u=S>1?g(u,s):O(s,h),S&&(L=(k=d[0]).key);while(N<a&&!((A=e(t[N]))>=A))++N;while(N<a){if(k&&L<=A){D=k,j=L,v[T]=p;if(k=d[++T])L=k.key}else D={key:A,value:w()},j=A;r[p]=D;while(!(A>j)){u[C=n[N]+o]=p,l[C]&b||(D.value=m(D.value,i[C]));if(++N>=a)break;A=e(t[N])}F()}while(T<S)r[v[T]=p]=d[T++],F();if(p>T)for(T=0;T<o;++T)u[T]=v[u[T]];C=c.indexOf(P),p>1?(P=R,H=z):(p===1?(P=U,H=W):(P=x,H=x),u=null),c[C]=P}function F(){if(p>1){var e=p,t=r,n=O(e,e);for(var i=0,o=0;i<s;++i)l[i]&&(n[u[o]=u[i]]=1,++o);r=[],p=0;for(i=0;i<e;++i)n[i]&&(n[i]=p++,r.push(t[i]));if(p>1)for(var i=0;i<o;++i)u[i]=n[u[i]];else u=null;c[c.indexOf(P)]=p>1?(H=z,P=R):p===1?(H=W,P=U):H=P=x}else if(p===1){for(var i=0;i<s;++i)if(l[i])return;r=[],p=0,c[c.indexOf(P)]=P=H=x}}function R(e,t,n){if(e===m||B)return;var s,o,a,f;for(s=0,a=t.length;s<a;++s)l[o=t[s]]&b||(f=r[u[o]],f.value=E(f.value,i[o]));for(s=0,a=n.length;s<a;++s)(l[o=n[s]]&b)===e&&(f=r[u[o]],f.value=S(f.value,i[o]))}function U(e,t,n){if(e===m||B)return;var s,o,u,a=r[0];for(s=0,u=t.length;s<u;++s)l[o=t[s]]&b||(a.value=E(a.value,i[o]));for(s=0,u=n.length;s<u;++s)(l[o=n[s]]&b)===e&&(a.value=S(a.value,i[o]))}function z(){var e,t;for(e=0;e<p;++e)r[e].value=M();for(e=0;e<s;++e)l[e]&b||(t=r[u[e]],t.value=E(t.value,i[e]))}function W(){var e,t=r[0];t.value=M();for(e=0;e<s;++e)l[e]&b||(t.value=E(t.value,i[e]))}function X(){return B&&(H(),B=!1),r}function V(e){var t=d(X(),0,r.length,e);return w.sort(t,0,t.length)}function $(e,t,r){return E=e,S=t,M=r,B=!0,n}function J(){return $(N,C,T)}function K(e){return $(k(e),L(e),T)}function Q(e){function t(t){return e(t.value)}return d=a(t),w=o(t),n}function G(){return Q(t)}function Y(){return p}function Z(){var e=c.indexOf(P);return e>=0&&c.splice(e,1),e=I.indexOf(j),e>=0&&I.splice(e,1),e=v.indexOf(F),e>=0&&v.splice(e,1),n}var n={top:V,all:X,reduce:$,reduceCount:J,reduceSum:K,order:Q,orderNatural:G,size:Y,dispose:Z,remove:Z};q.push(n);var r,u,f=8,h=_(f),p=0,d,w,E,S,M,P=x,H=x,B=!0;return arguments.length<1&&(e=t),c.push(P),I.push(j),v.push(F),j(A,D,0,s),J().orderNatural()}function nt(){var e=tt(x),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e}function rt(){q.forEach(function(e){e.dispose()});var e=p.indexOf(z);e>=0&&p.splice(e,1),e=p.indexOf(W),e>=0&&p.splice(e,1),e=v.indexOf(X),e>=0&&v.splice(e,1);for(e=0;e<s;++e)l[e]&=b;return u&=b,d}var d={filter:$,filterExact:J,filterRange:K,filterFunction:G,filterAll:Q,top:Z,bottom:et,group:tt,groupAll:nt,dispose:rt,remove:rt},m=~u&-~u,b=~m,A,D,P,H,B=h(function(e){return P[e]}),j=S,F,I=[],q=[],R=0,U=0;p.unshift(z),p.push(W),v.push(X),u|=m;if(f>=32?!m:u&(1<<f)-1)l=y(l,f<<=1);return z(i,0,s),W(i,0,s),d}function D(){function a(e,r){var o;if(u)return;for(o=r;o<s;++o)l[o]||(t=n(t,i[o]))}function f(e,s,o){var a,f,c;if(u)return;for(a=0,c=s.length;a<c;++a)l[f=s[a]]||(t=n(t,i[f]));for(a=0,c=o.length;a<c;++a)l[f=o[a]]===e&&(t=r(t,i[f]))}function h(){var e;t=o();for(e=0;e<s;++e)l[e]||(t=n(t,i[e]))}function d(t,i,s){return n=t,r=i,o=s,u=!0,e}function v(){return d(N,C,T)}function m(e){return d(k(e),L(e),T)}function g(){return u&&(h(),u=!1),t}function y(){var t=c.indexOf(f);return t>=0&&c.splice(t),t=p.indexOf(a),t>=0&&p.splice(t),e}var e={reduce:d,reduceCount:v,reduceSum:m,value:g,dispose:y,remove:y},t,n,r,o,u=!0;return c.push(f),p.push(a),a(i,0,s),v()}function P(){return s}var e={add:m,remove:b,dimension:A,groupAll:D,size:P},i=[],s=0,u=0,f=8,l=d(0),c=[],p=[],v=[];return arguments.length?m(arguments[0]):e}function O(e,t){return(t<257?d:t<65537?v:m)(e)}function M(e){var t=O(e,e);for(var n=-1;++n<e;)t[n]=n;return t}function _(e){return e===8?256:e===16?65536:4294967296}A.version="1.3.5",A.permute=n;var r=A.bisect=i(t);r.by=i;var s=A.heap=o(t);s.by=o;var u=A.heapselect=a(t);u.by=a;var f=A.insertionsort=l(t);f.by=l;var c=A.quicksort=h(t);c.by=h;var p=32,d=b,v=b,m=b,g=t,y=t;typeof Uint8Array!="undefined"&&(d=function(e){return new Uint8Array(e)},v=function(e){return new Uint16Array(e)},m=function(e){return new Uint32Array(e)},g=function(e,t){if(e.length>=t)return e;var n=new e.constructor(t);return n.set(e),n},y=function(e,t){var n;switch(t){case 16:n=v(e.length);break;case 32:n=m(e.length);break;default:throw new Error("invalid array width!")}return n.set(e),n}),e.crossfilter=A}(this),define("crossfilter",function(){}),dc=function(){var e={version:"2.0.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};e.chartRegistry=function(){function n(n){return n||(n=e.constants.DEFAULT_CHART_GROUP),t[n]||(t[n]=[]),n}var t={};return{has:function(e){for(var n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(e,r){r=n(r),t[r].push(e)},clear:function(e){e?delete t[e]:t={}},list:function(e){return e=n(e),t[e]}}}(),e.registerChart=function(t,n){e.chartRegistry.register(t,n)},e.hasChart=function(t){return e.chartRegistry.has(t)},e.deregisterAllCharts=function(t){e.chartRegistry.clear(t)},e.filterAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].filterAll()},e.renderAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].render();e._renderlet!==null&&e._renderlet(t)},e.redrawAll=function(t){var n=e.chartRegistry.list(t);for(var r=0;r<n.length;++r)n[r].redraw();e._renderlet!==null&&e._renderlet(t)},e.disableTransitions=!1,e.transition=function(t,n,r){if(n<=0||n===undefined||e.disableTransitions)return t;var i=t.transition().duration(n);return typeof r=="function"&&r(i),i},e.units={},e.units.integers=function(e,t){return Math.abs(t-e)},e.units.ordinal=function(e,t,n){return n},e.units.fp={},e.units.fp.precision=function(t){var n=function(t,r){var i=Math.abs((r-t)/n.resolution);return e.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return n.resolution=t,n},e.round={},e.round.floor=function(e){return Math.floor(e)},e.round.ceil=function(e){return Math.ceil(e)},e.round.round=function(e){return Math.round(e)},e.override=function(e,t,n){var r=e[t];e["_"+t]=r,e[t]=n},e.renderlet=function(t){return arguments.length?(e._renderlet=t,e):e._renderlet},e.instanceOfChart=function(e){return e instanceof Object&&e.__dc_flag__&&!0},e.errors={},e.errors.Exception=function(e){var t=e||"Unexpected internal error";this.message=t,this.toString=function(){return t}},e.errors.InvalidStateException=function(){e.errors.Exception.apply(this,arguments)},e.dateFormat=d3.time.format("%m/%d/%Y"),e.printers={},e.printers.filters=function(t){var n="";for(var r=0;r<t.length;++r)r>0&&(n+=", "),n+=e.printers.filter(t[r]);return n},e.printers.filter=function(t){var n="";return t&&(t instanceof Array?t.length>=2?n="["+e.utils.printSingleValue(t[0])+" -> "+e.utils.printSingleValue(t[1])+"]":t.length>=1&&(n=e.utils.printSingleValue(t[0])):n=e.utils.printSingleValue(t)),n},e.pluck=function(e,t){return function(r,i){return t?t.call(this,r[e],i):r[e]}},e.utils={},e.utils.printSingleValue=function(t){var n=""+t;return t instanceof Date?n=e.dateFormat(t):typeof t=="string"?n=t:e.utils.isFloat(t)?n=e.utils.printSingleValue.fformat(t):e.utils.isInteger(t)&&(n=Math.round(t)),n},e.utils.printSingleValue.fformat=d3.format(".2f"),e.utils.add=function(e,t){typeof t=="string"&&(t=t.replace("%",""));if(e instanceof Date){typeof t=="string"&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()+t),n}if(typeof t=="string"){var r=+t/100;return e>0?e*(1+r):e*(1-r)}return e+t},e.utils.subtract=function(e,t){typeof t=="string"&&(t=t.replace("%",""));if(e instanceof Date){typeof t=="string"&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()-t),n}if(typeof t=="string"){var r=+t/100;return e<0?e*(1+r):e*(1-r)}return e-t},e.utils.GroupStack=function(){function i(t){e[t]||(e[t]=[])}var e=[[]],t=[],n,r;this.setDataPoint=function(t,n,r){i(t),e[t][n]=r},this.getDataPoint=function(t,n){i(t);var r=e[t][n];return r===undefined&&(r=0),r},this.addGroup=function(e,r){return r||(r=n),t.push([e,r]),t.length-1},this.addNamedGroup=function(e,n,r){var i=this.addGroup(e,r);return t[i].name=n,n},this.getGroupByIndex=function(e){return t[e][0]},this.getAccessorByIndex=function(e){return t[e][1]},this.getNameOfVisibleByIndex=function(e){if(e===-1){if(!r)return;e++}var n=t.filter(function(e){return!e.hidden});return n[e].name},this.size=function(){return t.length},this.clear=function(){e=[],t=[]},this.setDefaultAccessor=function(e){n=e},this.getDataLayers=function(){return e},this.clearDataLayers=function(){e=[[]]},this.showGroups=function(e,t){t&&(r=!1),this.toggleGroups(e,!1)},this.hideGroups=function(e,t){t&&(r=!0),this.toggleGroups(e,!0)},this.toggleGroups=function(e,n){for(var r=0;r<t.length;++r)t[r].name===e&&(t[r].hidden=n)},this.setTitle=function(e,n){for(var r=0;r<t.length;++r)t[r].name===e&&(t[r].title=n)},this.getTitle=function(e){for(var n=0;n<t.length;++n)if(t[n].name===e)return t[n].title},this.toLayers=function(){var n=[];for(var i=0;i<e.length;++i){if(i===0&&r)continue;if(i>0&&t[i-1].hidden)continue;var s={index:i,points:[]},o=e[i];for(var u=0;u<o.length;++u)s.points.push(o[u]);n.push(s)}return n}},e.utils.isNumber=function(e){return e===+e},e.utils.isFloat=function(e){return e===+e&&e!==(e|0)},e.utils.isInteger=function(e){return e===+e&&e===(e|0)},e.utils.isNegligible=function(t){return t===undefined||t<e.constants.NEGLIGIBLE_NUMBER&&t>-e.constants.NEGLIGIBLE_NUMBER},e.utils.clamp=function(e,t,n){return e<t?t:e>n?n:e};var t=0;return e.utils.uniqueId=function(){return++t},e.utils.groupMax=function(t,n){var r=d3.max(t.all(),n);return e.utils.isNegligible(r)&&(r=0),r},e.utils.groupMin=function(t,n){var r=d3.min(t.all(),n);return e.utils.isNegligible(r)&&(r=0),r},e.utils.nameToId=function(e){return e.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},e.utils.appendOrSelect=function(e,t){var n=e.select(t);return n.empty()&&(n=e.append(t)),n},e.utils.createLegendable=function(e,t,n,r){var i={name:e._getGroupName(t,n),data:t};return r&&(i.color=r),e.dashStyle&&e.dashStyle()&&(i.dashstyle=e.dashStyle()),i},e.utils.safeNumber=function(t){return e.utils.isNumber(+t)?+t:0},e.events={current:null},e.events.trigger=function(t,n){if(!n){t();return}e.events.current=t,setTimeout(function(){t==e.events.current&&t()},n)},e.baseChart=function(t){function _(e,t,n){var r=e.chartID(),i="__names__";if(!n||n==e.valueAccessor())n="default";t[i]||(t[i]={}),t[i][r]||(t[i][r]={a:[],n:[]});var s=t[i][r].a.indexOf(n);return s==-1&&(s=t[i][r].a.length,t[i][r].a[s]=n,t[i][r].n[s]={name:""}),t[i][r].n[s]}function D(){return o=t.root().append("svg").attr("width",t.width()).attr("height",t.height()),o}function P(n){if(!t[n]||!t[n]())throw new e.errors.InvalidStateException("Mandatory attribute chart."+n+" is missing on chart[#"+t.anchorName()+"]")}function H(e){A.splice(A.indexOf(e),1),F(),t._invokeFilteredListener(e)}function B(e){A.push(e),F(),t._invokeFilteredListener(e)}function j(){A=[],F(),t._invokeFilteredListener(null)}function F(){if(t.dimension()&&t.dimension().filter){var e=O(t.dimension(),A);A=e?e:A}}function I(){for(var e=0;e<x.length;++e)x[e](t)}t.__dc_flag__=e.utils.uniqueId();var n,r,i,s,o,u=200,a=function(e){var t=e&&e.getBoundingClientRect&&e.getBoundingClientRect().width;return t&&t>u?t:u},f=a,l=200,c=function(e){var t=e&&e.getBoundingClientRect&&e.getBoundingClientRect().height;return t&&t>l?t:l},h=c,p=e.pluck("key"),d=e.pluck("value"),v=e.pluck("key"),m=e.pluck("key"),g,y=!1,b=function(e){return t.keyAccessor()(e)+": "+t.valueAccessor()(e)},w=!1,E=750,S=e.printers.filters,x=[],T=["dimension","group"],N=e.constants.DEFAULT_CHART_GROUP,C=function(){},k={preRender:C,postRender:C,preRedraw:C,postRedraw:C,filtered:C,zoomed:C},L,A=[],O=function(e,t){return e.filter(null),t.length===0?e.filter(null):e.filterFunction(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.isFiltered&&r.isFiltered(e))return!0;if(r==e)return!0}return!1}),t},M=function(e){return e.all()};return t.width=function(e){return arguments.length?(f=d3.functor(e||a),t):f(s.node())},t.height=function(e){return arguments.length?(h=d3.functor(e||c),t):h(s.node())},t.minWidth=function(e){return arguments.length?(u=e,t):u},t.minHeight=function(e){return arguments.length?(l=e,t):l},t.dimension=function(e){return arguments.length?(n=e,t.expireCache(),t):n},t.data=function(e){return arguments.length?(M=d3.functor(e),t.expireCache(),t):M.call(t,r)},t.group=function(e,n){return arguments.length?(r=e,t.expireCache(),typeof n=="string"&&t._setGroupName(r,n),t):r},t._getGroupName=function(e,n){return _(t,e,n).name},t._setGroupName=function(e,n,r){_(t,e,r).name=n},t.ordering=function(e){return arguments.length?(m=e,g=crossfilter.quicksort.by(m),t.expireCache(),t):m},t.computeOrderedGroups=function(e){return e.length<=1?e:(g||(g=crossfilter.quicksort.by(m)),g(e,0,e.length))},t.filterAll=function(){return t.filter(null)},t.dataSet=function(){return n!==undefined&&r!==undefined},t.select=function(e){return s.select(e)},t.selectAll=function(e){return s?s.selectAll(e):null},t.anchor=function(n,r){return arguments.length?(e.instanceOfChart(n)?(i=n.anchor(),s=n.root()):(i=n,s=d3.select(i),s.classed(e.constants.CHART_CLASS,!0),e.registerChart(t,r)),N=r,t):i},t.anchorName=function(){var e=t.anchor();return e&&e.id?e.id:e&&e.replace?e.replace("#",""):""+t.chartID()},t.root=function(e){return arguments.length?(s=e,t):s},t.svg=function(e){return arguments.length?(o=e,t):o},t.resetSvg=function(){return t.select("svg").remove(),D()},t.filterPrinter=function(e){return arguments.length?(S=e,t):S},t.turnOnControls=function(){return s&&(t.selectAll(".reset").style("display",null),t.selectAll(".filter").text(S(t.filters())).style("display",null)),t},t.turnOffControls=function(){return s&&(t.selectAll(".reset").style("display","none"),t.selectAll(".filter").style("display","none").text(t.filter())),t},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t._mandatoryAttributes=function(e){return arguments.length?(T=e,t):T},t.render=function(){k.preRender(t),T&&T.forEach(P);var e=t.doRender();return L&&L.render(),t.activateRenderlets("postRender"),e},t.activateRenderlets=function(e){t.transitionDuration()>0&&o?o.transition().duration(t.transitionDuration()).each("end",function(){I(),e&&k[e](t)}):(I(),e&&k[e](t))},t.redraw=function(){k.preRedraw(t);var e=t.doRedraw();return t.activateRenderlets("postRedraw"),e},t._invokeFilteredListener=function(e){e!==undefined&&k.filtered(t,e)},t._invokeZoomedListener=function(){k.zoomed(t)},t.hasFilter=function(e){return arguments.length?A.indexOf(e)>=0:A.length>0},t.replaceFilter=function(e){A=[],t.filter(e)},t.filter=function(e){return arguments.length?(e instanceof Array&&e[0]instanceof Array?(e[0].forEach(function(e){t.hasFilter(e)?A.splice(A.indexOf(e),1):A.push(e)}),F(),t._invokeFilteredListener(e)):e===null?j():t.hasFilter(e)?H(e):B(e),s!==null&&t.hasFilter()?t.turnOnControls():t.turnOffControls(),t):A.length>0?A[0]:null},t.filters=function(){return A},t.highlightSelected=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!0),d3.select(t).classed(e.constants.DESELECTED_CLASS,!1)},t.fadeDeselected=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!1),d3.select(t).classed(e.constants.DESELECTED_CLASS,!0)},t.resetHighlight=function(t){d3.select(t).classed(e.constants.SELECTED_CLASS,!1),d3.select(t).classed(e.constants.DESELECTED_CLASS,!1)},t.onClick=function(n){var r=t.keyAccessor()(n);e.events.trigger(function(){t.filter(r),e.redrawAll(t.chartGroup())})},t.filterHandler=function(e){return arguments.length?(O=e,t):O},t.doRender=function(){return t},t.doRedraw=function(){return t},t.legendables=function(){return[]},t.legendHighlight=function(e){},t.legendReset=function(e){},t.legendToggle=function(e){},t.isLegendableHidden=function(e){return!1},t.keyAccessor=function(e){return arguments.length?(p=e,t):p},t.valueAccessor=function(e){return arguments.length?(d=e,t):d},t.label=function(e){return arguments.length?(v=e,y=!0,t):v},t.renderLabel=function(e){return arguments.length?(y=e,t):y},t.title=function(e){return arguments.length?(b=e,w=!0,t):b},t.renderTitle=function(e){return arguments.length?(w=e,t):w},t.renderlet=function(e){return x.push(e),t},t.chartGroup=function(e){return arguments.length?(N=e,t):N},t.expireCache=function(){return t},t.legend=function(e){return arguments.length?(L=e,L.parent(t),t):L},t.on=function(e,n){return k[e]=n,t},t.chartID=function(){return t.__dc_flag__},t},e.marginable=function(e){var t={top:10,right:50,bottom:30,left:30};return e.margins=function(n){return arguments.length?(t=n,e):t},e.effectiveWidth=function(){return e.width()-e.margins().left-e.margins().right},e.effectiveHeight=function(){return e.height()-e.margins().top-e.margins().bottom},e},e.coordinateGridChart=function(t){function U(e){if(t.elasticX()&&!t.isOrdinal())c.domain([t.xAxisMin(),t.xAxisMax()]);else if(t.isOrdinal()&&c.domain().length===0){var n=t.computeOrderedGroups(t.data());c.domain(n.map(t.keyAccessor()))}t.isOrdinal()?c.rangeBands([0,t.xAxisLength()],R,q):c.range([0,t.xAxisLength()]),p=p.scale(t.x()).orient("bottom"),z(e)}function z(r){var s=r.selectAll("g."+i);if(A){s.empty()&&(s=r.insert("g",":first-child").attr("class",n+" "+i).attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var o=p.tickValues()?p.tickValues():c.ticks(p.ticks()[0]),u=s.selectAll("line").data(o),a=u.enter().append("line").attr("x1",function(e){return c(e)}).attr("y1",t.xAxisY()-t.margins().top).attr("x2",function(e){return c(e)}).attr("y2",0).attr("opacity",0);e.transition(a,t.transitionDuration()).attr("opacity",1),e.transition(u,t.transitionDuration()).attr("x1",function(e){return c(e)}).attr("y1",t.xAxisY()-t.margins().top).attr("x2",function(e){return c(e)}).attr("y2",0),u.exit().remove()}else s.selectAll("line").remove()}function W(e){if(b===undefined||t.elasticY())b=d3.scale.linear(),b.domain([t.yAxisMin(),t.yAxisMax()]).rangeRound([t.yAxisHeight(),0]);b.range([t.yAxisHeight(),0]),w=w.scale(b).orient("left"),X(e)}function X(i){var s=i.selectAll("g."+r);if(L){var o=w.tickValues()?w.tickValues():b.ticks(w.ticks()[0]);s.empty()&&(s=i.insert("g",":first-child").attr("class",n+" "+r).attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var u=s.selectAll("line").data(o),a=u.enter().append("line").attr("x1",1).attr("y1",function(e){return b(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return b(e)}).attr("opacity",0);e.transition(a,t.transitionDuration()).attr("opacity",1),e.transition(u,t.transitionDuration()).attr("x1",1).attr("y1",function(e){return b(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return b(e)}),u.exit().remove()}else s.selectAll("line").remove()}function V(){return t.xAxisY()-t.margins().top}function $(){return t.anchorName()+"-clip"}function J(){var n=e.utils.appendOrSelect(a,"defs"),r=e.utils.appendOrSelect(n,"clipPath").attr("id",$()),i=I*2;e.utils.appendOrSelect(r,"rect").attr("width",t.xAxisLength()+i).attr("height",t.yAxisHeight()+i)}function K(e){U(t.g()),W(t.g()),t.plotData(),(t.elasticX()||O||e)&&t.renderXAxis(t.g()),(t.elasticY()||e)&&t.renderYAxis(t.g()),e?t.renderBrush(t.g()):t.redrawBrush(t.g())}function Q(){F?t._enableMouseZoom():t._disableMouseZoom()}function G(){O=!0,D&&(t.x().domain(Y(t.x().domain(),h)),B&&t.x().domain(Y(t.x().domain(),B.x().domain())));var n=t.x().domain(),r=e.filters.RangedFilter(n[0],n[1]);t.replaceFilter(r),t.rescale(),t.redraw(),B&&!Z(t.filter(),B.filter())&&e.events.trigger(function(){B.replaceFilter(r),B.redraw()}),t._invokeZoomedListener(),e.events.trigger(function(){e.redrawAll(t.chartGroup())},e.constants.EVENT_DELAY),O=!Z(n,h)}function Y(e,t){var n=[];return n[0]=d3.max([e[0],t[0]]),n[1]=d3.min([e[1],t[1]]),n}function Z(e,t){return!e&&!t?!0:e.length===0&&t.length===0?!0:e&&t&&e[0].valueOf()===t[0].valueOf()&&e[1].valueOf()===t[1].valueOf()?!0:!1}function et(e){return e instanceof Array&&e.length>1}var n="grid-line",r="horizontal",i="vertical",s="y-axis-label",o="x-axis-label",u=12;t=e.colorChart(e.marginable(e.baseChart(t))),t.colors(d3.scale.category10()),t._mandatoryAttributes().push("x");var a,f,l,c,h,p=d3.svg.axis(),d=e.units.integers,v=0,m=!1,g,y=0,b,w=d3.svg.axis(),E=0,S=!1,x,T=0,N=d3.svg.brush(),C=!0,k,L=!1,A=!1,O=!1,M,_=[1,Infinity],D=!0,P=d3.behavior.zoom().on("zoom",G),H=d3.behavior.zoom().on("zoom",null),B,j,F=!1,I=0,q=.5,R=0;return t.rescale=function(){M=undefined},t.rangeChart=function(e){return arguments.length?(B=e,B.focusChart(t),t):B},t.zoomScale=function(e){return arguments.length?(_=e,t):_},t.zoomOutRestrict=function(e){return arguments.length?(_[0]=e?1:0,D=e,t):D},t._generateG=function(e){return e===undefined?a=t.svg():a=e,f=a.append("g"),l=f.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url(#"+$()+")"),f},t.g=function(e){return arguments.length?(f=e,t):f},t.mouseZoomable=function(e){return arguments.length?(F=e,t):F},t.chartBodyG=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(c=e,h=c.domain(),t):c},t.xOriginalDomain=function(){return h},t.xUnits=function(e){return arguments.length?(d=e,t):d},t.xAxis=function(e){return arguments.length?(p=e,t):p},t.elasticX=function(e){return arguments.length?(m=e,t):m},t.xAxisPadding=function(e){return arguments.length?(v=e,t):v},t.xUnitCount=function(){if(M===undefined){var e=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());e instanceof Array?M=e.length:M=e}return M},t.isOrdinal=function(){return t.xUnits()===e.units.ordinal},t.renderXAxis=function(n){var r=n.selectAll("g.x");r.empty()&&(r=n.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t.xAxisY()+")"));var i=n.selectAll("text."+o);i.empty()&&t.xAxisLabel()&&(i=n.append("text").attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-y)+")").attr("class",o).attr("text-anchor","middle").text(t.xAxisLabel())),t.xAxisLabel()&&i.text()!=t.xAxisLabel()&&axisYLab.text(t.xAxisLabel()),e.transition(r,t.transitionDuration()).call(p)},t.xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(g=e,t.margins().bottom-=y,y=n===undefined?u:n,t.margins().bottom+=y,t):g},t.renderYAxis=function(n){var r=n.selectAll("g.y");r.empty()&&(r=n.append("g").attr("class","axis y").attr("transform","translate("+t.yAxisX()+","+t.margins().top+")"));var i=n.selectAll("text."+s);i.empty()&&t.yAxisLabel()&&(i=n.append("text").attr("transform","translate("+T+","+(t.margins().top+t.yAxisHeight()/2)+"),rotate(-90)").attr("class",s).attr("text-anchor","middle").text(t.yAxisLabel())),t.yAxisLabel()&&i.text()!=t.yAxisLabel()&&i.text(t.yAxisLabel()),e.transition(r,t.transitionDuration()).call(w)},t.yAxisX=function(){return t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(x=e,t.margins().left-=T,T=n===undefined?u:n,t.margins().left+=T,t):x},t.y=function(e){return arguments.length?(b=e,t):b},t.yAxis=function(e){return arguments.length?(w=e,t):w},t.elasticY=function(e){return arguments.length?(S=e,t):S},t.renderHorizontalGridLines=function(e){return arguments.length?(L=e,t):L},t.renderVerticalGridLines=function(e){return arguments.length?(A=e,t):A},t.xAxisMin=function(){var n=d3.min(t.data(),function(e){return t.keyAccessor()(e)});return e.utils.subtract(n,v)},t.xAxisMax=function(){var n=d3.max(t.data(),function(e){return t.keyAccessor()(e)});return e.utils.add(n,v)},t.yAxisMin=function(){var n=d3.min(t.data(),function(e){return t.valueAccessor()(e)});return e.utils.subtract(n,E)},t.yAxisMax=function(){var n=d3.max(t.data(),function(e){return t.valueAccessor()(e)});return e.utils.add(n,E)},t.yAxisPadding=function(e){return arguments.length?(E=e,t):E},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(e){return arguments.length?(k=e,t):k},t._rangeBandPadding=function(e){return arguments.length?(R=e,t):R},t._outerRangeBandPadding=function(e){return arguments.length?(q=e,t):q},e.override(t,"filter",function(e){return arguments.length?(t._filter(e),e?t.brush().extent(e):t.brush().clear(),t):t._filter()}),t.brush=function(e){return arguments.length?(N=e,t):N},t.renderBrush=function(e){t.isOrdinal()&&(C=!1);if(C){N.on("brush",t._brushing),N.on("brushstart",t._disableMouseZoom),N.on("brushend",Q);var n=e.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")").call(N.x(t.x()));n.selectAll("rect").attr("height",V()),n.selectAll(".resize").append("path").attr("d",t.resizeHandlePath),t.hasFilter()&&t.redrawBrush(e)}},t.extendBrush=function(){var e=N.extent();return t.round()&&(e[0]=e.map(t.round())[0],e[1]=e.map(t.round())[1],f.select(".brush").call(N.extent(e))),e},t.brushIsEmpty=function(e){return N.empty()||!e||e[1]<=e[0]},t._brushing=function(){var n=t.extendBrush();t.redrawBrush(f);if(t.brushIsEmpty(n))e.events.trigger(function(){t.filter(null),e.redrawAll(t.chartGroup())},e.constants.EVENT_DELAY);else{var r=e.filters.RangedFilter(n[0],n[1]);e.events.trigger(function(){t.replaceFilter(r),e.redrawAll(t.chartGroup())},e.constants.EVENT_DELAY)}},t.redrawBrush=function(e){if(C){t.filter()&&t.brush().empty()&&t.brush().extent(t.filter());var n=e.select("g.brush");n.call(t.brush().x(t.x())),n.selectAll("rect").attr("height",V())}t.fadeDeselectedArea()},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(e){var t=+(e=="e"),n=t?1:-1,r=V()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},t.clipPadding=function(e){return arguments.length?(I=e,t):I},t._preprocessData=function(){},t.doRender=function(){return t.resetSvg(),t._preprocessData(),t._generateG(),J(),K(!0),Q(),t},t.doRedraw=function(){return t._preprocessData(),K(!1),t},t._enableMouseZoom=function(){P.x(t.x()).scaleExtent(_).size([t.width(),t.height()]),t.root().call(P)},t._disableMouseZoom=function(){t.root().call(H)},t.focus=function(e){et(e)?t.x().domain(e):t.x().domain(h),P.x(t.x()),G()},t.refocused=function(){return O},t.focusChart=function(n){return arguments.length?(j=n,t.on("filtered",function(t){Z(t.filter(),j.filter())||e.events.trigger(function(){j.focus(t.filter())})}),t):j},t.brushOn=function(e){return arguments.length?(C=e,t):C},t},e.colorChart=function(e){var t=d3.scale.category20c(),n=function(t){return e.keyAccessor()(t)},r=function(n){return t(n,e)};return e.colors=function(n){return arguments.length?(n instanceof Array?t=d3.scale.quantize().range(n):t=n,e):t},e.ordinalColors=function(t){return e.colors(d3.scale.ordinal().range(t))},e.linearColors=function(t){return e.colors(d3.scale.linear().range(t).interpolate(d3.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(n=t,e):n},e.colorDomain=function(n){return arguments.length?(t.domain(n),e):t.domain()},e.calculateColorDomain=function(){var n=[d3.min(e.data(),e.colorAccessor()),d3.max(e.data(),e.colorAccessor())];t.domain(n)},e.getColor=function(e,t){return r(n(e,t))},e.colorCalculator=function(t){return arguments.length?(r=t,e):r},e},e.stackableChart=function(t){function l(){var e=[];if(t.x()){var n=t.x().domain(),r;if(t.isOrdinal()){var i=d3.set(n);r=function(e){return i.has(e.x)}}else r=function(e){return e.x>=n[0]&&e.x<=n[n.length-1]};t.stackLayers().forEach(function(t){t.points.forEach(function(t){r(t)&&e.push(t)})})}else t.stackLayers().forEach(function(t){e=e.concat(t.points)});return e}function c(e,r){e.all().forEach(function(e,i){var s=t.getKeyAccessorByIndex(r)(e),o=t.getValueAccessorByIndex(r)(e);n.setDataPoint(r,i,{data:e,x:s,y:o,layer:r})})}var n=new e.utils.GroupStack,r=d3.layout.stack().offset("zero").order("default").values(function(e){return e.points}),i,s,o,u,a=[],f=!1;return t.stack=function(e,r,i){return arguments.length||n.clear(),n.setDefaultAccessor(t.valueAccessor()),typeof r=="string"?(t._setGroupName(e,r,i),n.addNamedGroup(e,r,i)):(i=r,n.addGroup(e,i)),t.expireCache(),t},t.hidableStacks=function(e){return arguments.length?(f=e,t):f},t.hideStack=function(e){n.hideGroups(e,t._getGroupName(t.group())==e)},t.showStack=function(e){n.showGroups(e,t._getGroupName(t.group())==e)},t.expireCache=function(){return i=null,s=null,o=null,u=null,t},t.allGroups=function(){if(i===null){i=[],i.push(t.group());for(var e=0;e<n.size();++e)i.push(n.getGroupByIndex(e))}return i},t.allValueAccessors=function(){if(s===null){s=[],s.push(t.valueAccessor());for(var e=0;e<n.size();++e)s.push(n.getAccessorByIndex(e))}return s},t.getValueAccessorByIndex=function(e){return t.allValueAccessors()[e]},t.yAxisMin=function(){var n,r=l();return n=d3.min(r,function(e){return e.y+e.y0<e.y0?e.y+e.y0:e.y0}),n=e.utils.subtract(n,t.yAxisPadding()),n},t.yAxisMax=function(){var n,r=l();return n=d3.max(r,function(e){return e.y+e.y0}),n=e.utils.add(n,t.yAxisPadding()),n},t.allKeyAccessors=function(){if(o===null){o=[],o.push(t.keyAccessor());for(var e=0;e<n.size();++e)o.push(t.keyAccessor())}return o},t.getKeyAccessorByIndex=function(e){return t.allKeyAccessors()[e]},t.xAxisMin=function(){var n=t.allGroups().reduce(function(n,r,i){var s=e.utils.groupMin(r,t.getKeyAccessorByIndex(i));return n===null||n>s?s:n},null);return e.utils.subtract(n,t.xAxisPadding())},t.xAxisMax=function(){var n=t.allGroups().reduce(function(n,r,i){var s=e.utils.groupMax(r,t.getKeyAccessorByIndex(i));return n===null||n<s?s:n},null);return e.utils.add(n,t.xAxisPadding())},t.calculateDataPointMatrixForAll=function(){n.clearDataLayers(),t.allGroups().forEach(c)},t.getChartStack=function(){return n},e.override(t,"valueAccessor",function(e){return arguments.length?(t.expireCache(),t._valueAccessor(e)):t._valueAccessor()}),e.override(t,"keyAccessor",function(e){return arguments.length?(t.expireCache(),t._keyAccessor(e)):t._keyAccessor()}),e.override(t,"title",function(e,r){if(!e)return t._title();var i=t.group()&&e===t._getGroupName(t.group());return typeof e=="function"?t._title(e):r?i?t._title(r):(n.setTitle(e,r),t):i?t._title():n.getTitle(e)}),t.getTitleOfVisibleByIndex=function(e){return t.title(n.getNameOfVisibleByIndex(e-1))||t.title()},t.stackLayout=function(e){return arguments.length?(r=e,t):r},t.stackLayers=function(e){if(!arguments.length){if(u===null){t.calculateDataPointMatrixForAll();var r=n.toLayers();if(r.length===0)return[];u=t.stackLayout()(r)}return u}u=e},t._layerColorAccessor=function(e){return e.layer===undefined?e.index:e.layer},t.colorAccessor(t._layerColorAccessor),t.legendables=function(){return t.allGroups().map(function(n,r){return e.utils.createLegendable(t,n,t.getValueAccessorByIndex(r),t.colorCalculator()(r))})},t.isLegendableHidden=function(e){return a.indexOf(e.name)!==-1},t.legendToggle=function(e){if(f){var n;(n=a.indexOf(e.name))!==-1?(a.splice(n,1),t.showStack(e.name)):(a.push(e.name),t.hideStack(e.name))}t.render()},t},e.abstractBubbleChart=function(t){var n=.3,r=10;t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,t=e.colorChart(t),t.renderLabel(!0),t.renderTitle(!1),t.data(function(e){return e.top(Infinity)});var i=d3.scale.linear().domain([0,100]),s=function(e){return e.r};t.r=function(e){return arguments.length?(i=e,t):i},t.radiusValueAccessor=function(e){return arguments.length?(s=e,t):s},t.rMin=function(){var e=d3.min(t.data(),function(e){return t.radiusValueAccessor()(e)});return e},t.rMax=function(){var e=d3.max(t.data(),function(e){return t.radiusValueAccessor()(e)});return e},t.bubbleR=function(e){var n=t.radiusValueAccessor()(e),r=t.r()(n);if(isNaN(r)||n<=0)r=0;return r};var o=function(e){return t.label()(e)},u=function(e){return t.bubbleR(e)>r?1:0};t.doRenderLabel=function(n){if(t.renderLabel()){var r=n.select("text");r.empty()&&(r=n.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick)),r.attr("opacity",0).text(o),e.transition(r,t.transitionDuration()).attr("opacity",u)}},t.doUpdateLabels=function(n){if(t.renderLabel()){var r=n.selectAll("text").text(o);e.transition(r,t.transitionDuration()).attr("opacity",u)}};var a=function(e){return t.title()(e)};return t.doRenderTitles=function(e){if(t.renderTitle()){var n=e.select("title");n.empty()&&e.append("title").text(a)}},t.doUpdateTitles=function(e){t.renderTitle()&&e.selectAll("title").text(a)},t.minRadiusWithLabel=function(e){return arguments.length?(r=e,t):r},t.maxBubbleRelativeSize=function(e){return arguments.length?(n=e,t):n},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.resetHighlight(this)})},t.isSelectedNode=function(e){return t.hasFilter(e.key)},t.onClick=function(n){var r=n.key;e.events.trigger(function(){t.filter(r),e.redrawAll(t.chartGroup())})},t},e.pieChart=function(t,n){function c(){s=s?s:d3.min([l.width(),l.height()])/2;var e=T(),t=C(),n=t(l.data());if(u){var r=u.selectAll("g."+i).data(n);h(r,e,n),y(n,e),S(r),x()}}function h(e,t,n){var r=p(e);d(r,t),v(r),g(n,t)}function p(e){var t=e.enter().append("g").attr("class",function(e,t){return i+" _"+t});return t}function d(e,t){var n=e.append("path").attr("fill",M).on("click",_).attr("d",function(e,n){return D(e,n,t)});n.transition().duration(l.transitionDuration()).attrTween("d",A)}function v(e){l.renderTitle()&&e.append("title").text(function(e){return l.title()(e)})}function m(t,n){e.transition(t,l.transitionDuration()).attr("transform",function(e){return P(e,n)}).attr("text-anchor","middle").text(function(e){var t=e.data;return L(t)||k(e)?"":l.label()(e.data)})}function g(e,t){if(l.renderLabel()){var n=u.selectAll("text."+i).data(e);n.exit().remove();var r=n.enter().append("text").attr("class",function(e,t){var n=i+" _"+t;return f&&(n+=" external"),n}).on("click",_);m(r,t)}}function y(e,t){b(e,t),w(e,t),E(e)}function b(t,n){var r=u.selectAll("g."+i).data(t).select("path").attr("d",function(e,t){return D(e,t,n)});e.transition(r,l.transitionDuration(),function(e){e.attrTween("d",A)}).attr("fill",M)}function w(e,t){if(l.renderLabel()){var n=u.selectAll("text."+i).data(e);m(n,t)}}function E(e){l.renderTitle()&&u.selectAll("g."+i).data(e).select("title").text(function(e){return l.title()(e.data)})}function S(e){e.exit().remove()}function x(){l.hasFilter()?l.selectAll("g."+i).each(function(e){N(e)?l.highlightSelected(this):l.fadeDeselected(this)}):l.selectAll("g."+i).each(function(e){l.resetHighlight(this)})}function T(){return d3.svg.arc().outerRadius(s).innerRadius(o)}function N(e){return l.hasFilter(l.cappedKeyAccessor(e.data))}function C(){return d3.layout.pie().sort(null).value(l.cappedValueAccessor)}function k(e){var t=e.endAngle-e.startAngle;return isNaN(t)||t<a}function L(e){return l.cappedValueAccessor(e)===0}function A(e){e.innerRadius=o;var t=this._current;O(t)&&(t={startAngle:0,endAngle:0});var n=d3.interpolate(t,e);return this._current=n(0),function(e){return D(n(e),0,T())}}function O(e){return!e||isNaN(e.startAngle)||isNaN(e.endAngle)}function M(e,t){return l.getColor(e.data,t)}function _(e,t){l.onClick(e.data,t)}function D(e,t,n){var r=n(e,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function P(e,t){var n;return f?n=d3.svg.arc().outerRadius(s+f).innerRadius(s+f).centroid(e):n=t.centroid(e),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}function H(e,t){l.selectAll("g.pie-slice").each(function(n){e.name==n.data.key&&d3.select(this).classed("highlight",t)})}var r=.5,i="pie-slice",s,o=0,u,a=r,f,l=e.capped(e.colorChart(e.baseChart({})));return l.colorAccessor(l.cappedKeyAccessor),l.title(function(e){return l.cappedKeyAccessor(e)+": "+l.cappedValueAccessor(e)}),l.slicesCap=l.cap,l.label(l.cappedKeyAccessor),l.renderLabel(!0),l.transitionDuration(350),l.doRender=function(){return l.resetSvg(),u=l.svg().append("g").attr("transform","translate("+l.cx()+","+l.cy()+")"),c(),l},l.innerRadius=function(e){return arguments.length?(o=e,l):o},l.radius=function(e){return arguments.length?(s=e,l):s},l.cx=function(){return l.width()/2},l.cy=function(){return l.height()/2},l.doRedraw=function(){return c(),l},l.minAngleForLabel=function(e){return arguments.length?(a=e,l):a},l.externalLabels=function(e){return arguments.length===0?f:(e?f=e:f=undefined,l)},l.legendables=function(){return l.data().map(function(e,t){var n={name:e.key,data:e.value,others:e.others};return n.color=l.getColor(e,t),n})},l.getColor=function(e,t){return l.colorCalculator()(l.colorAccessor()(e,t))},l.legendHighlight=function(e){H(e,!0)},l.legendReset=function(e){H(e,!1)},l.legendToggle=function(e){l.onClick({key:e.name,others:e.others})},l.anchor(t,n)},e.barChart=function(t,n){function f(t){return e.utils.safeNumber(Math.abs(s.y()(t.y+t.y0)-s.y()(t.y0)))}function l(t,n,r){var i=t.selectAll("rect.bar").data(r.points,e.pluck("data",s.keyAccessor()));i.enter().append("rect").attr("class","bar").attr("fill",s.getColor),s.renderTitle()&&i.append("title").text(e.pluck("data",s.getTitleOfVisibleByIndex(n))),s.isOrdinal()&&i.on("click",h),e.transition(i,s.transitionDuration()).attr("x",function(t){var n=s.x()(t.x);return u&&(n-=a/2),s.isOrdinal()&&(n+=o/2),e.utils.safeNumber(n)}).attr("y",function(t){var n=s.y()(t.y+t.y0);return t.y<0&&(n-=f(t)),e.utils.safeNumber(n)}).attr("width",a).attr("height",function(e){return f(e)}).attr("fill",s.getColor).select("title").text(e.pluck("data",s.getTitleOfVisibleByIndex(n))),e.transition(i.exit(),s.transitionDuration()).attr("height",0).remove()}function c(){if(a===undefined){var e=s.xUnitCount();s.isOrdinal()&&!o?a=Math.floor(s.x().rangeBand()):o?a=Math.floor((s.xAxisLength()-(e-1)*o)/e):a=Math.floor(s.xAxisLength()/(1+s.barPadding())/e);if(a==Infinity||isNaN(a)||a<r)a=r}}function h(e){s.onClick(e.data)}var r=1,i=2,s=e.stackableChart(e.coordinateGridChart({})),o=i,u=!1,a;return e.override(s,"rescale",function(){s._rescale(),a=undefined}),s.plotData=function(){var e=s.chartBodyG().selectAll("g.stack").data(s.stackLayers());c(),e.enter().append("g").attr("class",function(e,t){return"stack _"+t}),e.each(function(e,t){var n=d3.select(this);l(n,t,e)}),s.stackLayers(null)},s.fadeDeselectedArea=function(){var t=s.chartBodyG().selectAll("rect.bar"),n=s.brush().extent();if(s.isOrdinal())s.hasFilter()?(t.classed(e.constants.SELECTED_CLASS,function(e){return s.hasFilter(s.keyAccessor()(e.data))}),t.classed(e.constants.DESELECTED_CLASS,function(e){return!s.hasFilter(s.keyAccessor()(e.data))})):(t.classed(e.constants.SELECTED_CLASS,!1),t.classed(e.constants.DESELECTED_CLASS,!1));else if(!s.brushIsEmpty(n)){var r=n[0],i=n[1];t.classed(e.constants.DESELECTED_CLASS,function(e){var t=s.keyAccessor()(e.data);return t<r||t>=i})}else t.classed(e.constants.DESELECTED_CLASS,!1)},s.centerBar=function(e){return arguments.length?(u=e,s):u},s.barPadding=function(e){return arguments.length?(s._rangeBandPadding(e),o=0,s):s._rangeBandPadding()},s.outerPadding=s._outerRangeBandPadding,s.gap=function(e){return arguments.length?(o=e,s):o},s.extendBrush=function(){var e=s.brush().extent();return s.round()&&!u&&(e[0]=e.map(s.round())[0],e[1]=e.map(s.round())[1],s.chartBodyG().select(".brush").call(s.brush().extent(e))),e},s.legendHighlight=function(e){s.isLegendableHidden(e)||(s.select(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!0),s.select(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!0))},s.legendReset=function(e){s.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!1),s.selectAll(".chart-body").selectAll("rect.bar").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!1)},e.override(s,"xAxisMax",function(){var e=this._xAxisMax();if("resolution"in s.xUnits()){var t=s.xUnits().resolution;e+=t}return e}),s.anchor(t,n)},e.lineChart=function(t,n){function b(t,n){var r=d3.svg.line().x(function(e){return f.x()(e.x)}).y(function(e){return f.y()(e.y+e.y0)}).interpolate(v).tension(m);g&&r.defined(g);var i=t.append("path").attr("class","line").attr("stroke",f.getColor).attr("fill",f.getColor);y&&i.attr("stroke-dasharray",y),e.transition(n.select("path.line"),f.transitionDuration()).attr("d",function(e){return E(r(e.points))})}function w(t,n){if(l){var r=d3.svg.area().x(function(e){return f.x()(e.x)}).y(function(e){return f.y()(e.y+e.y0)}).y0(function(e){return f.y()(e.y0)}).interpolate(v).tension(m);g&&r.defined(g),t.append("path").attr("class","area").attr("fill",f.getColor).attr("d",function(e){return E(r(e.points))}),e.transition(n.select("path.area"),f.transitionDuration()).attr("d",function(e){return E(r(e.points))})}}function E(e){return!e||e.indexOf("NaN")>=0?"M0,0":e}function S(t,n){if(!f.brushOn()){var r=i+"-list",o=t.select("g."+r);o.empty()&&(o=t.append("g").attr("class",r)),n.each(function(t,n){var r=d3.select(this),u=r.datum().points;g&&(u=u.filter(g));var a=o.select("g."+i+"._"+n);a.empty()&&(a=o.append("g").attr("class",i+" _"+n)),x(a);var l=a.selectAll("circle."+s).data(u);l.enter().append("circle").attr("class",s).attr("r",C()).attr("fill",f.getColor).style("fill-opacity",p).style("stroke-opacity",d).on("mousemove",function(e){var t=d3.select(this);T(t),N(t,a)}).on("mouseout",function(e){var t=d3.select(this);k(t),L(a)}).append("title").text(e.pluck("data",f.getTitleOfVisibleByIndex(n))),l.attr("cx",function(t){return e.utils.safeNumber(f.x()(t.x))}).attr("cy",function(t){return e.utils.safeNumber(f.y()(t.y+t.y0))}).select("title").text(e.pluck("data",f.getTitleOfVisibleByIndex(n))),l.exit().remove()})}}function x(e){var t=e.select("path."+o).empty()?e.append("path").attr("class",o):e.select("path."+o);t.style("display","none").attr("stroke-dasharray","5,5");var n=e.select("path."+u).empty()?e.append("path").attr("class",u):e.select("path."+u);n.style("display","none").attr("stroke-dasharray","5,5")}function T(e){return e.style("fill-opacity",.8),e.style("stroke-opacity",.8),e.attr("r",c),e}function N(e,t){var n=e.attr("cx"),r=e.attr("cy");t.select("path."+o).style("display","").attr("d","M0 "+r+"L"+n+" "+r),t.select("path."+u).style("display","").attr("d","M"+n+" "+f.yAxisHeight()+"L"+n+" "+r)}function C(){return h||c}function k(e){e.style("fill-opacity",p).style("stroke-opacity",d).attr("r",C())}function L(e){e.select("path."+o).style("display","none"),e.select("path."+u).style("display","none")}var r=5,i="dc-tooltip",s="dot",o="yRef",u="xRef",a=1e-6,f=e.stackableChart(e.coordinateGridChart({})),l=!1,c=r,h=null,p=a,d=a,v="linear",m=.7,g,y;return f.transitionDuration(500),f.plotData=function(){var e=f.chartBodyG(),t=e.selectAll("g.stack-list");t.empty()&&(t=e.append("g").attr("class","stack-list"));var n=t.selectAll("g.stack").data(f.stackLayers()),r=n.enter().append("g").attr("class",function(e,t){return"stack _"+t});b(r,n),w(r,n),S(e,n),f.stackLayers(null)},f.interpolate=function(e){return arguments.length?(v=e,f):v},f.tension=function(e){return arguments.length?(m=e,f):m},f.defined=function(e){return arguments.length?(g=e,f):g},f.dashStyle=function(e){return arguments.length?(y=e,f):y},f.renderArea=function(e){return arguments.length?(l=e,f):l},f.dotRadius=function(e){return arguments.length?(c=e,f):c},f.renderDataPoints=function(e){return arguments.length?(e?(p=e.fillOpacity||.8,d=e.strokeOpacity||.8,h=e.radius||2):(p=a,d=a,h=null),f):{fillOpacity:p,strokeOpacity:d,radius:h}},f.legendHighlight=function(e){f.isLegendableHidden(e)||(f.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!0),f.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!0))},f.legendReset=function(e){f.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")==e.color}).classed("highlight",!1),f.selectAll(".chart-body").selectAll("path").filter(function(){return d3.select(this).attr("fill")!=e.color}).classed("fadeout",!1)},f.anchor(t,n)},e.dataCount=function(t,n){var r=d3.format(",d"),i=e.baseChart({});return i.doRender=function(){return i.selectAll(".total-count").text(r(i.dimension().size())),i.selectAll(".filter-count").text(r(i.group().value())),i},i.doRedraw=function(){return i.doRender()},i.anchor(t,n)},e.dataTable=function(t,n){function h(){var e=u.root().selectAll("tbody").data(p(),function(e){return u.keyAccessor()(e)}),t=e.enter().append("tbody");return t.append("tr").attr("class",o).append("td").attr("class",r).attr("colspan",f.length).html(function(e){return u.keyAccessor()(e)}),e.exit().remove(),t}function p(){var e=u.dimension().top(a);return d3.nest().key(u.group()).sortKeys(c).entries(e.sort(function(e,t){return c(l(e),l(t))}))}function d(e){var t=e.order().selectAll("tr."+i).data(function(e){return e.values}),n=t.enter().append("tr").attr("class",i);return f.forEach(function(e,t){n.append("td").attr("class",s+" _"+t).html(e)}),t.exit().remove(),t}var r="dc-table-label",i="dc-table-row",s="dc-table-column",o="dc-table-group",u=e.baseChart({}),a=25,f=[],l=function(e){return e},c=d3.ascending;return u.doRender=function(){return u.selectAll("tbody").remove(),d(h()),u},u.doRedraw=function(){return u.doRender()},u.size=function(e){return arguments.length?(a=e,u):a},u.columns=function(e){return arguments.length?(f=e,u):f},u.sortBy=function(e){return arguments.length?(l=e,u):l},u.order=function(e){return arguments.length?(c=e,u):c},u.anchor(t,n)},e.bubbleChart=function(t,n){function o(t){var n=t.enter().append("g");n.attr("class",r.BUBBLE_NODE_CLASS).attr("transform",s).append("circle").attr("class",function(e,t){return r.BUBBLE_CLASS+" _"+t}).on("click",r.onClick).attr("fill",r.getColor).attr("r",0),e.transition(t,r.transitionDuration()).selectAll("circle."+r.BUBBLE_CLASS).attr("r",function(e){return r.bubbleR(e)}).attr("opacity",function(e){return r.bubbleR(e)>0?1:0}),r.doRenderLabel(n),r.doRenderTitles(n)}function u(t){e.transition(t,r.transitionDuration()).attr("transform",s).selectAll("circle."+r.BUBBLE_CLASS).attr("fill",r.getColor).attr("r",function(e){return r.bubbleR(e)}).attr("opacity",function(e){return r.bubbleR(e)>0?1:0}),r.doUpdateLabels(t),r.doUpdateTitles(t)}function a(e){e.exit().remove()}function f(e){var t=r.x()(r.keyAccessor()(e));return isNaN(t)&&(t=0),t}function l(e){var t=r.y()(r.valueAccessor()(e));return isNaN(t)&&(t=0),t}var r=e.abstractBubbleChart(e.coordinateGridChart({})),i=!1;r.transitionDuration(750);var s=function(e){return"translate("+f(e)+","+l(e)+")"};return r.elasticRadius=function(e){return arguments.length?(i=e,r):i},r.plotData=function(){i&&r.r().domain([r.rMin(),r.rMax()]),r.r().range([r.MIN_RADIUS,r.xAxisLength()*r.maxBubbleRelativeSize()]);var e=r.chartBodyG().selectAll("g."+r.BUBBLE_NODE_CLASS).data(r.data(),r.keyAccessor());o(e),u(e),a(e),r.fadeDeselectedArea()},r.renderBrush=function(e){},r.redrawBrush=function(e){r.fadeDeselectedArea()},r.anchor(t,n)},e.compositeChart=function(t,n){function a(e,t){e._generateG(i.g()),e.g().attr("class",r+" _"+t)}function f(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].yAxisMin());return e}function l(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].yAxisMax());return e}function c(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].xAxisMin());return e}function h(){var e=[];for(var t=0;t<s.length;++t)e.push(s[t].xAxisMax());return e}var r="sub",i=e.coordinateGridChart({}),s=[],o=!1,u=!0;return i._mandatoryAttributes([]),i.transitionDuration(500),e.override(i,"_generateG",function(){var e=this.__generateG();for(var t=0;t<s.length;++t){var n=s[t];a(n,t),n.dimension()||n.dimension(i.dimension()),n.group()||n.group(i.group()),n.chartGroup(i.chartGroup()),n.svg(i.svg()),n.xUnits(i.xUnits()),n.transitionDuration(i.transitionDuration()),n.brushOn(i.brushOn())}return e}),i.plotData=function(){for(var e=0;e<s.length;++e){var t=s[e];t.g()||a(t,e),o&&t.colors(i.colors()),t.x(i.x()),t.y(i.y()),t.xAxis(i.xAxis()),t.yAxis(i.yAxis()),t.plotData(),t.activateRenderlets()}},i.fadeDeselectedArea=function(){for(var e=0;e<s.length;++e){var t=s[e];t.brush(i.brush()),t.fadeDeselectedArea()}},i.compose=function(e){return s=e,s.forEach(function(e,t){e.height(i.height()),e.width(i.width()),e.margins(i.margins()),u&&e.title(i.title()),o&&e.colorAccessor()===e._layerColorAccessor&&e.colorCalculator(function(){return e.colors()(t)})}),i},i.children=function(){return s},i.shareColors=function(e){return arguments.length?(o=e,i):o},i.shareTitle=function(e){return arguments.length?(u=e,i):u},i.yAxisMin=function(){return d3.min(f())},i.yAxisMax=function(){return e.utils.add(d3.max(l()),i.yAxisPadding())},i.xAxisMin=function(){return e.utils.subtract(d3.min(c()),i.xAxisPadding())},i.xAxisMax=function(){return e.utils.add(d3.max(h()),i.xAxisPadding())},i.legendables=function(){var t=[];return s.forEach(function(n,r){o&&n.colors(i.colors());var s=n.legendables();s.length?t.push.apply(t,s):t.push(e.utils.createLegendable(n,n.group(),n.valueAccessor(),n.colorCalculator()(r)))}),t},i.legendHighlight=function(e){for(var t=0;t<s.length;++t){var n=s[t];n.legendHighlight(e)}},i.legendReset=function(e){for(var t=0;t<s.length;++t){var n=s[t];n.legendReset(e)}},i.anchor(t,n)},e.seriesChart=function(t,n){function f(e,t){return d3.ascending(r.keyAccessor()(e),r.keyAccessor()(t))}function l(e){i[e].g()&&i[e].g().remove(),delete i[e]}function c(){Object.keys(i).map(l),i={}}var r=e.compositeChart(t,n),i={},s=e.lineChart,o,u=d3.ascending,a=f;return r._mandatoryAttributes().push("seriesAccessor","chart"),r.shareColors(!0),r._preprocessData=function(){var e=[],t,f=d3.nest().key(o);u&&f.sortKeys(u),a&&f.sortValues(a);var c=f.entries(r.data()),h=c.map(function(o,u){var a=i[o.key]||s.call(r,r,n,o.key,u);return i[o.key]||(t=!0),i[o.key]=a,e.push(o.key),a.dimension(r.dimension()).group({all:d3.functor(o.values)},o.key).keyAccessor(r.keyAccessor()).valueAccessor(r.valueAccessor()).colorCalculator(function(){return a.colors()(o.key)})});Object.keys(i).filter(function(t){return e.indexOf(t)===-1}).forEach(function(e){l(e),t=!0}),r._compose(h),t&&r.legend()&&r.legend().render()},r.chart=function(e){return arguments.length?(s=e,c(),r):s},r.seriesAccessor=function(e){return arguments.length?(o=e,c(),r):o},r.seriesSort=function(e){return arguments.length?(u=e,c(),r):u},r.valueSort=function(e){return arguments.length?(a=e,c(),r):a},r._compose=r.compose,delete r.compose,r},e.geoChoroplethChart=function(t,n){function u(e){var t=a();if(f(e)){var n=l(e);m(n,e,t),g(n,e,t)}}function a(){var e={},t=r.data();for(var n=0;n<t.length;++n)e[r.keyAccessor()(t[n])]=r.valueAccessor()(t[n]);return e}function f(e){return v(e).keyAccessor}function l(t){var n=r.svg().selectAll(c(t)).classed("selected",function(e){return h(t,e)}).classed("deselected",function(e){return p(t,e)}).attr("class",function(n){var r=v(t).name,i=e.utils.nameToId(v(t).keyAccessor(n)),s=r+" "+i;return h(t,n)&&(s+=" selected"),p(t,n)&&(s+=" deselected"),s});return n}function c(e){return"g.layer"+e+" g."+v(e).name}function h(e,t){return r.hasFilter()&&r.hasFilter(d(e,t))}function p(e,t){return r.hasFilter()&&!r.hasFilter(d(e,t))}function d(e,t){return v(e).keyAccessor(t)}function v(e){return o[e]}function m(t,n,i){var s=t.select("path").attr("fill",function(e){var t=d3.select(this).attr("fill");return t?t:"none"}).on("click",function(e){return r.onClick(e,n)});e.transition(s,r.transitionDuration()).attr("fill",function(e,t){return r.getColor(i[v(n).keyAccessor(e)],t)})}function g(e,t,n){r.renderTitle()&&e.selectAll("title").text(function(e){var i=d(t,e),s=n[i];return r.title()({key:i,value:s})})}var r=e.colorChart(e.baseChart({}));r.colorAccessor(function(e,t){return e||0});var i=d3.geo.path(),s,o=[];return r.doRender=function(){r.resetSvg();for(var e=0;e<o.length;++e){var t=r.svg().append("g").attr("class","layer"+e),n=t.selectAll("g."+v(e).name).data(v(e).data).enter().append("g").attr("class",v(e).name);n.append("path").attr("fill","white").attr("d",i),n.append("title"),u(e)}s=!1},r.onClick=function(t,n){var i=v(n).keyAccessor(t);e.events.trigger(function(){r.filter(i),e.redrawAll(r.chartGroup())})},r.doRedraw=function(){for(var e=0;e<o.length;++e)u(e),s&&r.svg().selectAll("g."+v(e).name+" path").attr("d",i);s=!1},r.overlayGeoJson=function(e,t,n){for(var i=0;i<o.length;++i)if(o[i].name==t)return o[i].data=e,o[i].keyAccessor=n,r;return o.push({name:t,data:e,keyAccessor:n}),r},r.projection=function(e){return i.projection(e),s=!0,r},r.geoJsons=function(){return o},r.removeGeoJson=function(e){var t=[];for(var n=0;n<o.length;++n){var i=o[n];i.name!=e&&t.push(i)}return o=t,r},r.anchor(t,n)},e.bubbleOverlay=function(t,n){function f(){return u=o.select("g."+r),u.empty()&&(u=o.svg().append("g").attr("class",r)),u}function l(){var t=c();a.forEach(function(n){var r=h(n,t),i=r.select("circle."+s);i.empty()&&(i=r.append("circle").attr("class",s).attr("r",0).attr("fill",o.getColor).on("click",o.onClick)),e.transition(i,o.transitionDuration()).attr("r",function(e){return o.bubbleR(e)}),o.doRenderLabel(r),o.doRenderTitles(r)})}function c(){var e={};return o.data().forEach(function(t){e[o.keyAccessor()(t)]=t}),e}function h(t,n){var r=i+" "+e.utils.nameToId(t.name),s=u.select("g."+e.utils.nameToId(t.name));return s.empty()&&(s=u.append("g").attr("class",r).attr("transform","translate("+t.x+","+t.y+")")),s.datum(n[t.name]),s}function p(){var t=c();a.forEach(function(n){var r=h(n,t),i=r.select("circle."+s);e.transition(i,o.transitionDuration()).attr("r",function(e){return o.bubbleR(e)}).attr("fill",o.getColor),o.doUpdateLabels(r),o.doUpdateTitles(r)})}var r="bubble-overlay",i="node",s="bubble",o=e.abstractBubbleChart(e.baseChart({})),u,a=[];return o.transitionDuration(750),o.radiusValueAccessor(function(e){return e.value}),o.point=function(e,t,n){return a.push({name:e,x:t,y:n}),o},o.doRender=function(){return u=f(),o.r().range([o.MIN_RADIUS,o.width()*o.maxBubbleRelativeSize()]),l(),o.fadeDeselectedArea(),o},o.doRedraw=function(){return p(),o.fadeDeselectedArea(),o},o.debug=function(t){if(t){var n=o.select("g."+e.constants.DEBUG_GROUP_CLASS);n.empty()&&(n=o.svg().append("g").attr("class",e.constants.DEBUG_GROUP_CLASS));var r=n.append("text").attr("x",10).attr("y",20);n.append("rect").attr("width",o.width()).attr("height",o.height()).on("mousemove",function(){var e=d3.mouse(n.node()),t=e[0]+", "+e[1];r.text(t)})}else o.selectAll(".debug").remove();return o},o.anchor(t,n),o},e.rowChart=function(t,n){function p(){if(!f||l){var e=d3.extent(h,a.cappedValueAccessor);e[0]>0&&(e[0]=0),f=d3.scale.linear().domain(e).range([0,a.effectiveWidth()])}c.scale(f)}function d(){var t=r.select("g.axis");p(),t.empty()&&(t=r.append("g").attr("class","axis").attr("transform","translate(0, "+a.effectiveHeight()+")")),e.transition(t,a.transitionDuration()).call(c)}function v(){r.selectAll("g.tick").select("line.grid-line").remove(),r.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-a.effectiveHeight()})}function m(){h=a.data(),d(),v();var e=r.selectAll("g."+u).data(h);g(e),y(e),b(e)}function g(e){var t=e.enter().append("g").attr("class",function(e,t){return u+" _"+t});t.append("rect").attr("width",0),E(t),S(e)}function y(e){e.exit().remove()}function b(t){var n=h.length,r=(a.effectiveHeight()-(n+1)*o)/n,i=t.attr("transform",function(e,t){return"translate(0,"+((t+1)*o+t*r)+")"}).select("rect").attr("height",r).attr("fill",a.getColor).on("click",x).classed("deselected",function(e){return a.hasFilter()?!N(e):!1}).classed("selected",function(e){return a.hasFilter()?N(e):!1});e.transition(i,a.transitionDuration()).attr("width",function(e){var t=f(0)==-Infinity?f(1):f(0);return Math.abs(t-f(a.valueAccessor()(e)))}).attr("transform",T),w(t),S(t)}function w(e){a.renderTitle()&&(e.selectAll("title").remove(),e.append("title").text(a.title()))}function E(e){a.renderLabel()&&e.append("text").on("click",x)}function S(t){if(a.renderLabel()){var n=t.select("text").attr("x",i).attr("y",s).on("click",x).attr("class",function(e,t){return u+" _"+t}).text(function(e){return a.label()(e)});e.transition(n,a.transitionDuration()).attr("transform",T)}}function x(e){a.onClick(e)}function T(e){var t=f(a.cappedValueAccessor(e)),n=f(0),r=t>n?n:t;return"translate("+r+",0)"}function N(e){return a.hasFilter(a.cappedKeyAccessor(e))}var r,i=10,s=15,o=5,u="row",a=e.capped(e.marginable(e.colorChart(e.baseChart({})))),f,l,c=d3.svg.axis().orient("bottom"),h;return a.rowsCap=a.cap,a.doRender=function(){return a.resetSvg(),r=a.svg().append("g").attr("transform","translate("+a.margins().left+","+a.margins().top+")"),m(),a},a.title(function(e){return a.cappedKeyAccessor(e)+": "+a.cappedValueAccessor(e)}),a.label(a.cappedKeyAccessor),a.x=function(e){return arguments.length?(f=e,a):f},a.doRedraw=function(){return m(),a},a.xAxis=function(){return c},a.gap=function(e){return arguments.length?(o=e,a):o},a.elasticX=function(e){return arguments.length?(l=e,a):l},a.labelOffsetX=function(e){return arguments.length?(i=e,a):i},a.labelOffsetY=function(e){return arguments.length?(s=e,a):s},a.anchor(t,n)},e.legend=function(){function c(){return o+s}var e=2,t={},n,r=0,i=0,s=12,o=5,u=!1,a=560,f=70,l;return t.parent=function(e){return arguments.length?(n=e,t):n},t.render=function(){n.svg().select("g.dc-legend").remove(),l=n.svg().append("g").attr("class","dc-legend").attr("transform","translate("+r+","+i+")");var t=l.selectAll("g.dc-legend-item").data(n.legendables()).enter().append("g").attr("class","dc-legend-item").classed("fadeout",function(e){return n.isLegendableHidden(e)}).on("mouseover",function(e){n.legendHighlight(e)}).on("mouseout",function(e){n.legendReset(e)}).on("click",function(e){n.legendToggle(e)});n.legendables().some(function(e){return e.dashstyle})?t.append("line").attr("x1",0).attr("y1",s/2).attr("x2",s).attr("y2",s/2).attr("stroke-width",2).attr("stroke-dasharray",function(e){return e.dashstyle}).attr("stroke",function(e){return e.color}):t.append("rect").attr("width",s).attr("height",s).attr("fill",function(e){return e.color}),t.append("text").text(function(e){return e.name}).attr("x",s+e).attr("y",function(){return s/2+(this.clientHeight?this.clientHeight:13)/2-2});var o=0,h=0;t.attr("transform",function(e,t){if(u){var n="translate("+o+","+h*c()+")";return o+f>=a?(++h,o=0):o+=f,n}return"translate(0,"+t*c()+")"})},t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=e,t):i},t.gap=function(e){return arguments.length?(o=e,t):o},t.itemHeight=function(e){return arguments.length?(s=e,t):s},t.horizontal=function(e){return arguments.length?(u=e,t):u},t.legendWidth=function(e){return arguments.length?(a=e,t):a},t.itemWidth=function(e){return arguments.length?(f=e,t):f},t},e.capped=function(t){var n=Infinity,r="Others",i=function(e){var n=d3.sum(e,t.valueAccessor()),i=t.group().all(),s=d3.sum(i,t.valueAccessor()),o=e.map(t.keyAccessor()),u=i.map(t.keyAccessor()),a=d3.set(o),f=u.filter(function(e){return!a.has(e)});return s>n?e.concat([{others:f,key:r,value:s-n}]):e};return t.cappedKeyAccessor=function(e,n){return e.others?e.key:t.keyAccessor()(e,n)},t.cappedValueAccessor=function(e,n){return e.others?e.value:t.valueAccessor()(e,n)},t.data(function(e){if(n==Infinity)return t.computeOrderedGroups(e.all());var r=e.top(n);return r=t.computeOrderedGroups(r),i?i(r):r}),t.cap=function(e){return arguments.length?(n=e,t):n},t.othersLabel=function(e){return arguments.length?(r=e,t):r},t.othersGrouper=function(e){return arguments.length?(i=e,t):i},e.override(t,"onClick",function(e){e.others&&t.filter([e.others]),t._onClick(e)}),t},e.scatterPlot=function(t,n){var r=e.coordinateGridChart({}),i=function(e){return"translate("+r.x()(r.keyAccessor()(e))+","+r.y()(r.valueAccessor()(e))+")"},s=3;return r.transitionDuration(0),r.plotData=function(){var t=r.chartBodyG().selectAll("circle.symbol").data(r.data());t.enter().append("circle").attr("class","symbol").attr("fill",r.getColor(0)).attr("transform",i),e.transition(t,r.transitionDuration()).attr("transform",i).attr("r",s),e.transition(t.filter(function(e){return r.valueAccessor()(e)===0}),r.transitionDuration()).attr("r",0).remove(),e.transition(t.exit(),r.transitionDuration()).attr("r",0).remove()},r.symbolSize=function(e){return arguments.length?(s=e,r):s},r.anchor(t,n)},e.numberDisplay=function(t,n){var r="number-display",i=d3.format(".2s"),s=e.baseChart({});return s._mandatoryAttributes(["group"]),s.value=function(){return s.data()},s.data(function(e){var t=e.value?e.value():e.top(1)[0];return s.valueAccessor()(t)}),s.transitionDuration(250),s.doRender=function(){var e=s.value(),t=s.selectAll("."+r);return t.empty()&&(t=t.data([0]).enter().append("span").attr("class",r)),t.transition().duration(s.transitionDuration()).ease("quad-out-in").tween("text",function(){var t=d3.interpolateNumber(this.lastValue||0,e);return this.lastValue=e,function(e){this.textContent=s.formatNumber()(t(e))}}),s},s.doRedraw=function(){return s.doRender()},s.formatNumber=function(e){return arguments.length?(i=e,s):i},s.anchor(t,n)},e.heatMap=function(t,n){function p(t,n){var r=f.selectAll(".box-group").filter(function(e){return e.key[t]==n}),i=r.filter(function(e){return!f.hasFilter(e.key)});e.events.trigger(function(){i.empty()?r.each(function(e){f.filter(e.key)}):i.each(function(e){f.filter(e.key)}),e.redrawAll(f.chartGroup())})}function d(e,t,n){return!t||n[t-1]!=e}var r=6.75,i,s,o,u=r,a=r,f=e.colorChart(e.marginable(e.baseChart({})));f._mandatoryAttributes(["group"]),f.title(f.colorAccessor());var l=function(e){p(0,e)},c=function(e){p(1,e)},h=function(t){var n=t.key;e.events.trigger(function(){f.filter(n),e.redrawAll(f.chartGroup())})};return e.override(f,"filter",function(t){return t?f._filter(e.filters.TwoDimensionalFilter(t)):f._filter()}),f.rows=function(e){if(arguments.length)return o=e,f;if(o)return o;var t=f.data().map(f.valueAccessor());return t.sort(d3.ascending),d3.scale.ordinal().domain(t.filter(d))},f.cols=function(e){if(arguments.length)return s=e,f;if(s)return s;var t=f.data().map(f.keyAccessor());return t.sort(d3.ascending),d3.scale.ordinal().domain(t.filter(d))},f.doRender=function(){return f.resetSvg(),i=f.svg().append("g").attr("class","heatmap").attr("transform","translate("+f.margins().left+","+f.margins().top+")"),f.doRedraw()},f.doRedraw=function(){var t=f.rows(),n=f.cols(),r=t.domain().length,s=n.domain().length,o=Math.floor(f.effectiveWidth()/s),l=Math.floor(f.effectiveHeight()/r);n.rangeRoundBands([0,f.effectiveWidth()]),t.rangeRoundBands([f.effectiveHeight(),0]);var c=i.selectAll("g.box-group").data(f.data(),function(e,t){return f.keyAccessor()(e,t)+"\0"+f.valueAccessor()(e,t)}),h=c.enter().append("g").attr("class","box-group");h.append("rect").attr("class","heat-box").attr("fill","white").on("click",f.boxOnClick()),h.append("title").text(f.title()),e.transition(c.selectAll("rect"),f.transitionDuration()).attr("x",function(e,t){return n(f.keyAccessor()(e,t))}).attr("y",function(e,n){return t(f.valueAccessor()(e,n))}).attr("rx",u).attr("ry",a).attr("fill",f.getColor).attr("width",o).attr("height",l),c.exit().remove();var p=i.selectAll("g.cols");p.empty()&&(p=i.append("g").attr("class","cols axis")),p.selectAll("text").data(n.domain()).enter().append("text").attr("x",function(e){return n(e)+o/2}).style("text-anchor","middle").attr("y",f.effectiveHeight()).attr("dy",12).on("click",f.xAxisOnClick()).text(function(e){return e});var d=i.selectAll("g.rows");d.empty()&&(d=i.append("g").attr("class","rows axis")),d.selectAll("text").data(t.domain()).enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",f.yAxisOnClick()).text(function(e){return e}),e.transition(d.selectAll("text"),f.transitionDuration()).text(function(e){return e}).attr("y",function(e){return t(e)+l/2}),f.hasFilter()?f.selectAll("g.box-group").each(function(e){f.isSelectedNode(e)?f.highlightSelected(this):f.fadeDeselected(this)}):f.selectAll("g.box-group").each(function(e){f.resetHighlight(this)})},f.boxOnClick=function(e){return arguments.length?(h=e,f):h},f.xAxisOnClick=function(e){return arguments.length?(l=e,f):l},f.yAxisOnClick=function(e){return arguments.length?(c=e,f):c},f.xBorderRadius=function(e){return arguments.length&&(u=e),u},f.yBorderRadius=function(e){return arguments.length&&(a=e),a},f.isSelectedNode=function(e){return f.hasFilter(e.key)},f.anchor(t,n)},function(){function e(e){return[0,e.length-1]}function t(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}d3.box=function(){function l(e){e.each(function(e,t){e=e.map(o).sort(d3.ascending);var l=d3.select(this),c=e.length,h=e[0],p=e[c-1],d=e.quartiles=a(e),v=u&&u.call(this,e,t),m=v&&v.map(function(t){return e[t]}),g=v?d3.range(0,v[0]).concat(d3.range(v[1]+1,c)):d3.range(c),y=d3.scale.linear().domain(s&&s.call(this,e,t)||[h,p]).range([r,0]),b=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(y.range());this.__chart__=y;var w=l.selectAll("line.center").data(m?[m]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",n/2).attr("y1",function(e){return b(e[0])}).attr("x2",n/2).attr("y2",function(e){return b(e[1])}).style("opacity",1e-6).transition().duration(i).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}),w.transition().duration(i).style("opacity",1).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}),w.exit().transition().duration(i).style("opacity",1e-6).attr("y1",function(e){return y(e[0])}).attr("y2",function(e){return y(e[1])}).remove();var E=l.selectAll("rect.box").data([d]);E.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(e){return b(e[2])}).attr("width",n).attr("height",function(e){return b(e[0])-b(e[2])}).transition().duration(i).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])}),E.transition().duration(i).attr("y",function(e){return y(e[2])}).attr("height",function(e){return y(e[0])-y(e[2])});var S=l.selectAll("line.median").data([d[1]]);S.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",n).attr("y2",b).transition().duration(i).attr("y1",y).attr("y2",y),S.transition().duration(i).attr("y1",y).attr("y2",y);var x=l.selectAll("line.whisker").data(m||[]);x.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",n).attr("y2",b).style("opacity",1e-6).transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1),x.transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1),x.exit().transition().duration(i).attr("y1",y).attr("y2",y).style("opacity",1e-6).remove();var T=l.selectAll("circle.outlier").data(g,Number);T.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",n/2).attr("cy",function(t){return b(e[t])}).style("opacity",1e-6).transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1),T.transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1),T.exit().transition().duration(i).attr("cy",function(t){return y(e[t])}).style("opacity",1e-6).remove();var N=f||y.tickFormat(8),C=l.selectAll("text.box").data(d);C.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return t&1?6:-6}).attr("x",function(e,t){return t&1?n:0}).attr("y",b).attr("text-anchor",function(e,t){return t&1?"start":"end"}).text(N).transition().duration(i).attr("y",y),C.transition().duration(i).text(N).attr("y",y);var k=l.selectAll("text.whisker").data(m||[]);k.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",n).attr("y",b).text(N).style("opacity",1e-6).transition().duration(i).attr("y",y).style("opacity",1),k.transition().duration(i).text(N).attr("y",y).style("opacity",1),k.exit().transition().duration(i).attr("y",y).style("opacity",1e-6).remove()}),d3.timer.flush()}var n=1,r=1,i=0,s=null,o=Number,u=e,a=t,f=null;return l.width=function(e){return arguments.length?(n=e,l):n},l.height=function(e){return arguments.length?(r=e,l):r},l.tickFormat=function(e){return arguments.length?(f=e,l):f},l.duration=function(e){return arguments.length?(i=e,l):i},l.domain=function(e){return arguments.length?(s=e==null?e:d3.functor(e),l):s},l.value=function(e){return arguments.length?(o=e,l):o},l.whiskers=function(e){return arguments.length?(u=e,l):u},l.quartiles=function(e){return arguments.length?(a=e,l):a},l}}(),e.boxPlot=function(t,n){function c(t){var n=t.enter().append("g");n.attr("class","box").attr("transform",l).call(u).on("click",function(t){r.filter(t.key),e.redrawAll(r.chartGroup())})}function h(t){e.transition(t,r.transitionDuration()).attr("transform",l).call(u).each(function(){d3.select(this).select("rect.box").attr("fill",r.getColor)})}function p(e){e.exit().remove().call(u)}function d(e){return function(t){var n=t.quartiles[0],r=t.quartiles[2],i=(r-n)*e,s=-1,o=t.length;while(t[++s]<n-i);while(t[--o]>r+i);return[s,o]}}var r=e.coordinateGridChart({}),i=1.5,s=d,o=s(i),u=d3.box(),a=null,f=function(e,t){return r.isOrdinal()?r.x().rangeBand():e/(1+r.boxPadding())/t};r.yAxisPadding(12),r.x(d3.scale.ordinal()),r.xUnits(e.units.ordinal),r.data(function(e){return e.all().map(function(e){return e.map=function(t){return t.call(e,e)},e})}),r.boxPadding=r._rangeBandPadding,r.boxPadding(.8),r.outerPadding=r._outerRangeBandPadding,r.outerPadding(.5),r.boxWidth=function(e){return arguments.length?(f=d3.functor(e),r):f};var l=function(e,t){var n=r.x()(r.keyAccessor()(e,t));return"translate("+n+",0)"};return r.plotData=function(){var e=f(r.effectiveWidth(),r.xUnitCount());u.whiskers(o).width(e).height(r.effectiveHeight()).value(r.valueAccessor()).domain(r.y().domain()).duration(r.transitionDuration()).tickFormat(a);var t=r.chartBodyG().selectAll("g.box").data(r.data());c(t),h(t),p(t),r.fadeDeselectedArea()},r.fadeDeselectedArea=function(){r.hasFilter()?r.selectAll("g.box").each(function(e){r.isSelectedNode(e)?r.highlightSelected(this):r.fadeDeselected(this)}):r.selectAll("g.box").each(function(){r.resetHighlight(this)})},r.isSelectedNode=function(e){return r.hasFilter(e.key)},r.yAxisMin=function(){var t=d3.min(r.data(),function(e){return d3.min(r.valueAccessor()(e))});return e.utils.subtract(t,r.yAxisPadding())},r.yAxisMax=function(){var t=d3.max(r.data(),function(e){return d3.max(r.valueAccessor()(e))});return e.utils.add(t,r.yAxisPadding())},r.tickFormat=function(e){return arguments.length?(a=e,r):a},r.anchor(t,n)},e}(),dc.filters={},dc.filters.RangedFilter=function(e,t){var n=Array(e,t);return n.isFiltered=function(e){return e>=this[0]&&e<this[1]},n},dc.filters.TwoDimensionalFilter=function(e){var t=e;return t.isFiltered=function(e){return e.length&&e.length==t.length&&e[0]==t[0]&&e[1]==t[1]},t},define("dc",["d3","crossfilter"],function(e){return function(){var t,n;return t||e.dc}}(this)),function(){function e(t,n){(t===null||t===void 0)&&e.warn("Warning","You must pass your app key when you instantiate Pusher.");var n=n||{},r=this;this.key=t,this.config=e.Util.extend(e.getGlobalConfig(),n.cluster?e.getClusterConfig(n.cluster):{},n),this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new e.Timeline(this.key,this.sessionID,{features:e.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e.Timeline.INFO,version:e.VERSION}),this.config.disableStats||(this.timelineSender=new e.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline"})),this.connection=new e.ConnectionManager(this.key,e.Util.extend({getStrategy:function(t){return e.StrategyBuilder.build(e.getDefaultStrategy(r.config),e.Util.extend({},r.config,t))},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=e.event.indexOf("pusher_internal:")===0;if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||r.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),e.isReady&&r.connect()}var t=e.prototype;e.instances=[],e.isReady=!1,e.debug=function(){e.log&&e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){var t=e.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(t):window.console.log&&window.console.log(t)),e.log&&e.log(t)},e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},t.channel=function(e){return this.channels.find(e)},t.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),n=this.timelineSender;this.timelineSenderTimer=new e.PeriodicTimer(6e4,function(){n.send(t)})}},t.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.bind=function(e,t){return this.global_emitter.bind(e,t),this},t.bind_all=function(e){return this.global_emitter.bind_all(e),this},t.subscribeAll=function(){for(var e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.subscribe=function(e){return e=this.channels.add(e,this),this.connection.state==="connected"&&e.subscribe(),e},t.unsubscribe=function(e){e=this.channels.remove(e),this.connection.state==="connected"&&e.unsubscribe()},t.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},t.isEncrypted=function(){return e.Util.getDocumentLocation().protocol==="https:"?!0:Boolean(this.config.encrypted)},this.Pusher=e}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},extend:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t],r;for(r in n)e[r]=n[r]&&n[r].constructor&&n[r].constructor===Object?Pusher.Util.extend(e[r]||{},n[r]):n[r]}return e},stringify:function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):window.JSON===void 0?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},keys:function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},apply:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},objectApply:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},map:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n},mapObject:function(e,t){var n={},r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t(e[r]));return n},filter:function(e,t){for(var t=t||function(e){return!!e},n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n},filterObject:function(e,t){var t=t||function(e){return!!e},n={},r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e,n)&&(n[r]=e[r]);return n},flatten:function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t},any:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},all:function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}},getDocument:function(){return document},getDocumentLocation:function(){return Pusher.Util.getDocument().location},getLocalStorage:function(){try{return window.localStorage}catch(e){}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(e){return e.isSupported()}))}}}.call(this),function(){Pusher.VERSION="2.1.3",Pusher.PROTOCOL=6,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",Pusher.dependency_suffix=".min",Pusher.getDefaultStrategy=function(e){return[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],[":best_connected_ever",":ws_loop",[":delayed",2e3,[":sockjs_loop"]]],[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":sockjs_loop"]]],[":sockjs_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}.call(this),function(){function e(e){var t=function(t){Error.call(this,t),this.name=e};return Pusher.Util.extend(t.prototype,Error.prototype),t}Pusher.Errors={BadEventName:e("BadEventName"),UnsupportedTransport:e("UnsupportedTransport"),UnsupportedStrategy:e("UnsupportedStrategy"),TransportPriorityTooLow:e("TransportPriorityTooLow"),TransportClosed:e("TransportClosed")}}.call(this),function(){function e(e){this.callbacks=new t,this.global_callbacks=[],this.failThrough=e}function t(){this._callbacks={}}var n=e.prototype;n.bind=function(e,t){return this.callbacks.add(e,t),this},n.bind_all=function(e){return this.global_callbacks.push(e),this},n.unbind=function(e,t){return this.callbacks.remove(e,t),this},n.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n](t);else this.failThrough&&this.failThrough(e,t);return this},t.prototype.get=function(e){return this._callbacks[this._prefix(e)]},t.prototype.add=function(e,t){var n=this._prefix(e);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(t)},t.prototype.remove=function(e,t){if(this.get(e)){var n=Pusher.Util.arrayIndexOf(this.get(e),t);if(n!==-1){var r=this._callbacks[this._prefix(e)].slice(0);r.splice(n,1),this._callbacks[this._prefix(e)]=r}}},t.prototype._prefix=function(e){return"_"+e},Pusher.EventsDispatcher=e}.call(this),function(){function e(e){this.options=e,this.loading={},this.loaded={}}function t(e,t){Pusher.Util.getDocument().addEventListener?e.addEventListener("load",t,!1):e.attachEvent("onreadystatechange",function(){(e.readyState==="loaded"||e.readyState==="complete")&&t()})}function n(e,n){var r=Pusher.Util.getDocument(),i=r.getElementsByTagName("head")[0],r=r.createElement("script");r.setAttribute("src",e),r.setAttribute("type","text/javascript"),r.setAttribute("async",!0),t(r,function(){setTimeout(n,0)}),i.appendChild(r)}var r=e.prototype;r.load=function(e,t){var r=this;this.loaded[e]?t():this.loading[e]&&this.loading[e].length>0?this.loading[e].push(t):(this.loading[e]=[t],n(this.getPath(e),function(){r.loaded[e]=!0;if(r.loading[e]){for(var t=0;t<r.loading[e].length;t++)r.loading[e][t]();delete r.loading[e]}}))},r.getRoot=function(e){var t=Pusher.Util.getDocumentLocation().protocol;return(e&&e.encrypted||t==="https:"?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},r.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},Pusher.DependencyLoader=e}.call(this),function(){function e(){Pusher.ready()}function t(e){document.body?e():setTimeout(function(){t(e)},0)}function n(){t(e)}Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix}),!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.JSON?n():Pusher.Dependencies.load("json2",n)}(),function(){function e(e,t){var n=this;this.timeout=setTimeout(function(){n.timeout!==null&&(t(),n.timeout=null)},e)}var t=e.prototype;t.isRunning=function(){return this.timeout!==null},t.ensureAborted=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},Pusher.Timer=e}.call(this),function(){function e(e,t){var n=this;this.interval=setInterval(function(){n.interval!==null&&t()},e)}var t=e.prototype;t.isRunning=function(){return this.interval!==null},t.ensureAborted=function(){this.interval&&(clearInterval(this.interval),this.interval=null)},Pusher.PeriodicTimer=e}.call(this),function(){for(var e=String.fromCharCode,t=0;t<64;t++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t);var n=function(t){var n=t.charCodeAt(0);return n<128?t:n<2048?e(192|n>>>6)+e(128|n&63):e(224|n>>>12&15)+e(128|n>>>6&63)+e(128|n&63)},r=function(e){var t=[0,2,1][e.length%3],e=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>12&63),t>=2?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6&63),t>=1?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63)].join("")},i=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,r)};Pusher.Base64={encode:function(e){return i(e.replace(/[^\x00-\x7F]/g,n))}}}.call(this),function(){function e(e){this.options=e}function t(e){return Pusher.Util.mapObject(e,function(e){return typeof e=="object"&&(e=JSON.stringify(e)),encodeURIComponent(Pusher.Base64.encode(e.toString()))})}e.send=function(e,t){var n=new Pusher.JSONPRequest({url:e.url,receiver:e.receiverName,tagPrefix:e.tagPrefix}),r=e.receiver.register(function(e,r){n.cleanup(),t(e,r)});return n.send(r,e.data,function(t){var n=e.receiver.unregister(r);n&&n(t)})};var n=e.prototype;n.send=function(e,n,r){if(this.script)return!1;var i=this.options.tagPrefix||"_pusher_jsonp_",n=Pusher.Util.extend({},n,{receiver:this.options.receiver}),n=Pusher.Util.map(Pusher.Util.flatten(t(Pusher.Util.filterObject(n,function(e){return e!==void 0}))),Pusher.Util.method("join","=")).join("&");this.script=document.createElement("script"),this.script.id=i+e,this.script.src=this.options.url+"/"+e+"?"+n,this.script.type="text/javascript",this.script.charset="UTF-8",this.script.onerror=this.script.onload=r,this.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)&&(i=this.options.receiver||"Pusher.JSONP.receive",this.errorScript=document.createElement("script"),this.errorScript.text=i+"("+e+", true);",this.script.async=this.errorScript.async=!1);var s=this;return this.script.onreadystatechange=function(){s.script&&/loaded|complete/.test(s.script.readyState)&&r(!0)},e=document.getElementsByTagName("head")[0],e.insertBefore(this.script,e.firstChild),this.errorScript&&e.insertBefore(this.errorScript,this.script.nextSibling),!0},n.cleanup=function(){this.script&&this.script.parentNode&&(this.script.parentNode.removeChild(this.script),this.script=null),this.errorScript&&this.errorScript.parentNode&&(this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=null)},Pusher.JSONPRequest=e}.call(this),function(){function e(){this.lastId=0,this.callbacks={}}var t=e.prototype;t.register=function(e){this.lastId++;var t=this.lastId;return this.callbacks[t]=e,t},t.unregister=function(e){if(this.callbacks[e]){var t=this.callbacks[e];return delete this.callbacks[e],t}return null},t.receive=function(e,t,n){(e=this.unregister(e))&&e(t,n)},Pusher.JSONPReceiver=e,Pusher.JSONP=new e}.call(this),function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.uniqueID=this.sent=0}var t=e.prototype;e.ERROR=3,e.INFO=6,e.DEBUG=7,t.log=function(e,t){if(this.options.level===void 0||e<=this.options.level)this.events.push(Pusher.Util.extend({},t,{timestamp:Pusher.Util.now(),level:e})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift()},t.error=function(t){this.log(e.ERROR,t)},t.info=function(t){this.log(e.INFO,t)},t.debug=function(t){this.log(e.DEBUG,t)},t.isEmpty=function(){return this.events.length===0},t.send=function(e,t){var n=this;if(Pusher.Network.isOnline()===!1)return!1;var r={};return n.sent===0&&(r=Pusher.Util.extend({key:n.key,features:n.options.features,version:n.options.version},n.options.params||{})),r.session=n.session,r.timeline=n.events,r=Pusher.Util.filterObject(r,function(e){return e!==void 0}),n.events=[],e(r,function(e,r){e||n.sent++,t&&t(e,r)}),!0},t.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=e}.call(this),function(){function e(e,t){this.timeline=e,this.options=t||{}}e.prototype.send=function(e,t){if(!this.timeline.isEmpty()){var n=this,r="http"+(e?"s":"")+"://";n.timeline.send(function(e,t){return Pusher.JSONPRequest.send({data:e,url:r+(n.host||n.options.host)+n.options.path,receiver:Pusher.JSONP},function(e,r){r&&r.host&&(n.host=r.host),t&&t(e,r)})},t)}},Pusher.TimelineSender=e}.call(this),function(){function e(e){this.strategies=e}function t(e,t,n){var i=Pusher.Util.map(e,function(e,r,i,s){return e.connect(t,n(r,s))});return{abort:function(){Pusher.Util.apply(i,r)},forceMinPriority:function(e){Pusher.Util.apply(i,function(t){t.forceMinPriority(e)})}}}function n(e){return Pusher.Util.all(e,function(e){return Boolean(e.error)})}function r(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var i=e.prototype;i.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},i.connect=function(e,r){return t(this.strategies,e,function(e,t){return function(i,s){(t[e].error=i)?n(t)&&r(!0):(Pusher.Util.apply(t,function(e){e.forceMinPriority(s.transport.priority)}),r(null,s))}})},Pusher.BestConnectedEverStrategy=e}.call(this),function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.timeline=n.timeline}function t(){var e=Pusher.Util.getLocalStorage();if(e)try{var t=e.pusherTransport;if(t)return JSON.parse(t)}catch(r){n()}return null}function n(){var e=Pusher.Util.getLocalStorage();if(e&&e.pusherTransport)try{delete e.pusherTransport}catch(t){e.pusherTransport=void 0}}var r=e.prototype;r.isSupported=function(){return this.strategy.isSupported()},r.connect=function(e,r){var i=t(),s=[this.strategy];if(i&&i.timestamp+this.ttl>=Pusher.Util.now()){var o=this.transports[i.transport];o&&(this.timeline.info({cached:!0,transport:i.transport}),s.push(new Pusher.SequentialStrategy([o],{timeout:i.latency*2,failFast:!0})))}var u=Pusher.Util.now(),f=s.pop().connect(e,function l(t,i){if(t)n(),s.length>0?(u=Pusher.Util.now(),f=s.pop().connect(e,l)):r(t);else{var o=Pusher.Util.now()-u,c=i.transport.name,h=Pusher.Util.getLocalStorage();if(h)try{h.pusherTransport=JSON.stringify({timestamp:Pusher.Util.now(),transport:c,latency:o})}catch(p){}r(null,i)}});return{abort:function(){f.abort()},forceMinPriority:function(t){e=t,f&&f.forceMinPriority(t)}}},Pusher.CachedStrategy=e}.call(this),function(){function e(e,t){this.strategy=e,this.options={delay:t.delay}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy,r,i=new Pusher.Timer(this.options.delay,function(){r=n.connect(e,t)});return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}},Pusher.DelayedStrategy=e}.call(this),function(){function e(e){this.strategy=e}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},Pusher.FirstConnectedStrategy=e}.call(this),function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}var t=e.prototype;t.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},Pusher.IfStrategy=e}.call(this),function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){var n=this,r=this.strategies,i=0,s=this.timeout,o=null,u=function(l,h){h?t(null,h):(i+=1,n.loop&&(i%=r.length),i<r.length?(s&&(s*=2,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:s,failFast:n.failFast},u)):t(!0))},o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},u);return{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},t.tryStrategy=function(e,t,n,r){var i=null,s=null,s=e.connect(t,function(e,t){if(!e||!i||!i.isRunning()||n.failFast)i&&i.ensureAborted(),r(e,t)});return n.timeout>0&&(i=new Pusher.Timer(n.timeout,function(){s.abort(),r(!0)})),{abort:function(){i&&i.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}},Pusher.SequentialStrategy=e}.call(this),function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}function t(e,t){return new Pusher.Timer(0,function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var n=e.prototype;n.isSupported=function(){return this.transport.isSupported({disableFlash:!!this.options.disableFlash})},n.connect=function(e,n){if(!this.transport.isSupported())return t(new Pusher.Errors.UnsupportedStrategy,n);if(this.priority<e)return t(new Pusher.Errors.TransportPriorityTooLow,n);var r=this,i=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,u=function(){s.unbind("initialized",u),s.connect()},a=function(){o=new Pusher.Handshake(s,function(e){i=!0,h(),n(null,e)})},f=function(e){h(),n(e)},l=function(){h(),n(new Pusher.Errors.TransportClosed(s))},h=function(){s.unbind("initialized",u),s.unbind("open",a),s.unbind("error",f),s.unbind("closed",l)};return s.bind("initialized",u),s.bind("open",a),s.bind("error",f),s.bind("closed",l),s.initialize(),{abort:function(){i||(h(),o?o.close():s.close())},forceMinPriority:function(e){i||r.priority<e&&(o?o.close():s.close())}}},Pusher.TransportStrategy=e}.call(this),function(){function e(e,t,n,r){Pusher.EventsDispatcher.call(this),this.name=e,this.priority=t,this.key=n,this.state="new",this.timeline=r.timeline,this.id=this.timeline.generateUniqueID(),this.options={encrypted:Boolean(r.encrypted),hostUnencrypted:r.hostUnencrypted,hostEncrypted:r.hostEncrypted}}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),e.isSupported=function(){return!1},t.supportsPing=function(){return!1},t.initialize=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initialized")},t.connect=function(){var e=this.getURL(this.key,this.options);this.timeline.debug(this.buildTimelineMessage({method:"connect",url:e}));if(this.socket||this.state!=="initialized")return!1;try{this.socket=this.createSocket(e)}catch(t){var n=this;return new Pusher.Timer(0,function(){n.onError(t),n.changeState("closed")}),!1}return this.bindListeners(),Pusher.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},t.close=function(){return this.timeline.debug(this.buildTimelineMessage({method:"close"})),this.socket?(this.socket.close(),!0):!1},t.send=function(e){this.timeline.debug(this.buildTimelineMessage({method:"send",data:e}));if(this.state==="open"){var t=this;return setTimeout(function(){t.socket&&t.socket.send(e)},0),!0}return!1},t.requestPing=function(){this.emit("ping_request")},t.onOpen=function(){this.changeState("open"),this.socket.onopen=void 0},t.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({}))},t.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.socket=void 0},t.onMessage=function(e){this.timeline.debug(this.buildTimelineMessage({message:e.data})),this.emit("message",e)},t.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)}},t.createSocket=function(){return null},t.getScheme=function(){return this.options.encrypted?"wss":"ws"},t.getBaseURL=function(){var e;return e=this.options.encrypted?this.options.hostEncrypted:this.options.hostUnencrypted,this.getScheme()+"://"+e},t.getPath=function(){return"/app/"+this.key},t.getQueryString=function(){return"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION},t.getURL=function(){return this.getBaseURL()+this.getPath()+this.getQueryString()},t.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.buildTimelineMessage=function(e){return Pusher.Util.extend({cid:this.id},e)},Pusher.AbstractTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r)}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(e){if(e&&e.disableFlash)return!1;try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return Boolean(navigator&&navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==void 0)}},t.initialize=function(){var e=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR===void 0&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf",Pusher.Dependencies.load("flashfallback",function(){e.changeState("initialized")})},t.createSocket=function(e){return new FlashWebSocket(e)},t.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=true"},Pusher.FlashTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r),this.options.ignoreNullOrigin=r.ignoreNullOrigin}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(){return!0},t.initialize=function(){var e=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),Pusher.Dependencies.load("sockjs",function(){e.changeState("initialized")})},t.supportsPing=function(){return!0},t.createSocket=function(e){return new SockJS(e,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:this.options.encrypted}),ignore_null_origin:this.options.ignoreNullOrigin})},t.getScheme=function(){return this.options.encrypted?"https":"http"},t.getPath=function(){return this.options.httpPath||"/pusher"},t.getQueryString=function(){return""},t.onOpen=function(){this.socket.send(JSON.stringify({path:Pusher.AbstractTransport.prototype.getPath.call(this)+Pusher.AbstractTransport.prototype.getQueryString.call(this)})),this.changeState("open"),this.socket.onopen=void 0},Pusher.SockJSTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r)}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(){return window.WebSocket!==void 0||window.MozWebSocket!==void 0},t.createSocket=function(e){return new(window.WebSocket||window.MozWebSocket)(e)},t.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=false"},Pusher.WSTransport=e}.call(this),function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=null}var t=e.prototype;t.createConnection=function(e,t,n,r){var i=this.transport.createConnection(e,t,n,r),s=this,o=null,u=null,a=function(){i.unbind("open",a),o=Pusher.Util.now(),s.pingDelay&&(u=setInterval(function(){u&&i.requestPing()},s.pingDelay)),i.bind("closed",f)},f=function(e){i.unbind("closed",f),u&&(clearInterval(u),u=null),e.code===1002||e.code===1003?s.manager.reportDeath():!e.wasClean&&o&&(e=Pusher.Util.now()-o,e<2*s.maxPingDelay)&&(s.manager.reportDeath(),s.pingDelay=Math.max(e/2,s.minPingDelay))};return i.bind("open",a),i},t.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},Pusher.AssistantToTheTransportManager=e}.call(this),function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||Infinity}var t=e.prototype;t.getAssistant=function(e){return new Pusher.AssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.isAlive=function(){return this.livesLeft>0},t.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=e}.call(this),function(){function e(e){return function(t){return[e.apply(this,arguments),t]}}function t(e,n){if(e.length===0)return[[],n];var i=r(e[0],n),s=t(e.slice(1),i[1]);return[[i[0]].concat(s[0]),s[1]]}function n(e,n){if(typeof e[0]=="string"&&e[0].charAt(0)===":"){var i=n[e[0].slice(1)];if(e.length>1){if(typeof i!="function")throw"Calling non-function "+e[0];var s=[Pusher.Util.extend({},n)].concat(Pusher.Util.map(e.slice(1),function(e){return r(e,Pusher.Util.extend({},n))[0]}));return i.apply(this,s)}return[i,n]}return t(e,n)}function r(e,t){if(typeof e=="string"){var r;if(typeof e=="string"&&e.charAt(0)===":"){r=t[e.slice(1)];if(r===void 0)throw"Undefined symbol "+e;r=[r,t]}else r=[e,t];return r}return typeof e=="object"&&e instanceof Array&&e.length>0?n(e,t):[e,t]}var i={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport},s={def:function(e,t,n){if(e[t]!==void 0)throw"Redefining symbol "+t;return e[t]=n,[void 0,e]},def_transport:function(e,t,n,r,s,o){var u=i[n];if(!u)throw new Pusher.Errors.UnsupportedTransport(n);return n=Pusher.Util.extend({},{key:e.key,encrypted:e.encrypted,timeline:e.timeline,disableFlash:e.disableFlash,ignoreNullOrigin:e.ignoreNullOrigin},s),o&&(u=o.getAssistant(u)),r=new Pusher.TransportStrategy(t,r,u,n),o=e.def(e,t,r)[1],o.transports=e.transports||{},o.transports[t]=r,[void 0,o]},transport_manager:e(function(e,t){return new Pusher.TransportManager(t)}),sequential:e(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,t)}),cached:e(function(e,t,n){return new Pusher.CachedStrategy(n,e.transports,{ttl:t,timeline:e.timeline})}),first_connected:e(function(e,t){return new Pusher.FirstConnectedStrategy(t)}),best_connected_ever:e(function(){var e=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(e)}),delayed:e(function(e,t,n){return new Pusher.DelayedStrategy(n,{delay:t})}),"if":e(function(e,t,n,r){return new Pusher.IfStrategy(t,n,r)}),is_supported:e(function(e,t){return function(){return t.isSupported()}})};Pusher.StrategyBuilder={build:function(e,t){var n=Pusher.Util.extend({},s,t);return r(e,n)[1].strategy}}}.call(this),function(){Protocol={decodeMessage:function(e){try{var t=JSON.parse(e.data);if(typeof t.data=="string")try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(r){throw{type:"MessageParseError",error:r,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){e=this.decodeMessage(e);if(e.event==="pusher:connection_established")return{action:"connected",id:e.data.socket_id};if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Pusher.Protocol=Protocol}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.id=e,this.transport=t,this.bindListeners()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.supportsPing=function(){return this.transport.supportsPing()},t.send=function(e){return this.transport.send(e)},t.send_event=function(e,t,n){return e={event:e,data:t},n&&(e.channel=n),Pusher.debug("Event sent",e),this.send(Pusher.Protocol.encodeMessage(e))},t.close=function(){this.transport.close()},t.bindListeners=function(){var e=this,t=function(t){var n;try{n=Pusher.Protocol.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(n!==void 0){Pusher.debug("Event recd",n);switch(n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},n=function(){e.emit("ping_request")},r=function(t){e.emit("error",{type:"WebSocketError",error:t})},i=function(s){e.transport.unbind("closed",i),e.transport.unbind("error",r),e.transport.unbind("ping_request",n),e.transport.unbind("message",t),s&&s.code&&e.handleCloseEvent(s),e.transport=null,e.emit("closed")};e.transport.bind("message",t),e.transport.bind("ping_request",n),e.transport.bind("error",r),e.transport.bind("closed",i)},t.handleCloseEvent=function(e){var t=Pusher.Protocol.getCloseAction(e);(e=Pusher.Protocol.getCloseError(e))&&this.emit("error",e),t&&this.emit(t)},Pusher.Connection=e}.call(this),function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}var t=e.prototype;t.close=function(){this.unbindListeners(),this.transport.close()},t.bindListeners=function(){var e=this;e.onMessage=function(t){e.unbindListeners();try{var n=Pusher.Protocol.processHandshake(t);n.action==="connected"?e.finish("connected",{connection:new Pusher.Connection(n.id,e.transport)}):(e.finish(n.action,{error:n.error}),e.transport.close())}catch(r){e.finish("error",{error:r}),e.transport.close()}},e.onClosed=function(t){e.unbindListeners();var n=Pusher.Protocol.getCloseAction(t)||"backoff",t=Pusher.Protocol.getCloseError(t);e.finish(n,{error:t})},e.transport.bind("message",e.onMessage),e.transport.bind("closed",e.onClosed)},t.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.finish=function(e,t){this.callback(Pusher.Util.extend({transport:this.transport,action:e},t))},Pusher.Handshake=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.key=e,this.options=t||{},this.state="initialized",this.connection=null,this.encrypted=!!t.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),n.state==="unavailable"&&n.connect()}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.shouldRetry()&&(n.disconnect(),n.updateState("unavailable"))}),this.updateStrategy()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.connect=function(){var e=this;if(!e.connection&&e.state!=="connecting")if(e.strategy.isSupported())if(Pusher.Network.isOnline()===!1)e.updateState("unavailable");else{e.updateState("connecting");var t=function(n,r){n?e.runner=e.strategy.connect(0,t):r.action==="error"?e.timeline.error({handshakeError:r.error}):(e.runner.abort(),e.handshakeCallbacks[r.action](r))};e.runner=e.strategy.connect(0,t),e.setUnavailableTimer()}else e.updateState("failed")},t.send=function(e){return this.connection?this.connection.send(e):!1},t.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.disconnect=function(){this.runner&&this.runner.abort(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.stopActivityCheck(),this.updateState("disconnected"),this.connection&&(this.connection.close(),this.abandonConnection())},t.isEncrypted=function(){return this.encrypted},t.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.retryIn=function(e){var t=this;t.timeline.info({action:"retry",delay:e}),e>0&&t.emit("connecting_in",Math.round(e/1e3)),t.retryTimer=new Pusher.Timer(e||0,function(){t.disconnect(),t.connect()})},t.clearRetryTimer=function(){this.retryTimer&&this.retryTimer.ensureAborted()},t.setUnavailableTimer=function(){var e=this;e.unavailableTimer=new Pusher.Timer(e.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.resetActivityCheck=function(){this.stopActivityCheck();if(!this.connection.supportsPing()){var e=this;e.activityTimer=new Pusher.Timer(e.options.activityTimeout,function(){e.send_event("pusher:ping",{}),e.activityTimer=new Pusher.Timer(e.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.connection.close()})})}},t.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},ping_request:function(){e.send_event("pusher:ping",{})},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.buildHandshakeCallbacks=function(e){var t=this;return Pusher.Util.extend({},e,{connected:function(e){t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.timeline.info({socket_id:t.socket_id}),t.updateState("connected")}})},t.buildErrorCallbacks=function(){function e(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}}var t=this;return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},t.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.abandonConnection=function(){if(this.connection){for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);this.connection=null}},t.updateState=function(e,t){var n=this.state;this.state=e,n!==e&&(Pusher.debug("State changed",n+" -> "+e),this.timeline.info({state:e}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t))},t.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},Pusher.ConnectionManager=e}.call(this),function(){function e(){Pusher.EventsDispatcher.call(this);var e=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}Pusher.Util.extend(e.prototype,Pusher.EventsDispatcher.prototype),e.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},Pusher.NetInfo=e,Pusher.Network=new e}.call(this),function(){function e(){this.reset()}var t=e.prototype;t.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.each=function(e){var t=this;Pusher.Util.objectApply(t.members,function(n,r){e(t.get(r))})},t.setMyID=function(e){this.myID=e},t.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},t.reset=function(){this.members={},this.count=0,this.me=this.myID=null},Pusher.Members=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this,function(t){Pusher.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.authorize=function(e,t){return t(!1,{})},t.trigger=function(e,t){if(e.indexOf("client-")!==0)throw new Pusher.Errors.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.disconnect=function(){this.subscribed=!1},t.handleEvent=function(e,t){e.indexOf("pusher_internal:")===0?e==="pusher_internal:subscription_succeeded"&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.subscribe=function(){var e=this;e.authorize(e.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=e}.call(this),function(){function e(e,t){Pusher.Channel.call(this,e,t)}var t=e.prototype;Pusher.Util.extend(t,Pusher.Channel.prototype),t.authorize=function(e,t){return(new Pusher.Channel.Authorizer(this,this.pusher.config)).authorize(e,t)},Pusher.PrivateChannel=e}.call(this),function(){function e(e,t){Pusher.PrivateChannel.call(this,e,t),this.members=new Pusher.Members}var t=e.prototype;Pusher.Util.extend(t,Pusher.PrivateChannel.prototype),t.authorize=function(e,t){var n=this;Pusher.PrivateChannel.prototype.authorize.call(n,e,function(e,r){if(!e){if(r.channel_data===void 0){Pusher.warn("Invalid auth response for channel '"+n.name+"', expected 'channel_data' field"),t("Invalid auth response");return}var i=JSON.parse(r.channel_data);n.members.setMyID(i.user_id)}t(e,r)})},t.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.members.onSubscription(t),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":this.emit("pusher:member_added",this.members.addMember(t));break;case"pusher_internal:member_removed":var n=this.members.removeMember(t);n&&this.emit("pusher:member_removed",n);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,e,t)}},t.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=e}.call(this),function(){function e(){this.channels={}}var t=e.prototype;t.add=function(e,t){return this.channels[e]||(this.channels[e]=e.indexOf("private-")===0?new Pusher.PrivateChannel(e,t):e.indexOf("presence-")===0?new Pusher.PresenceChannel(e,t):new Pusher.Channel(e,t)),this.channels[e]},t.find=function(e){return this.channels[e]},t.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},t.disconnect=function(){Pusher.Util.objectApply(this.channels,function(e){e.disconnect()})},Pusher.Channels=e}.call(this),function(){Pusher.Channel.Authorizer=function(e,t){this.channel=e,this.type=t.authTransport,this.options=t,this.authOptions=(t||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(e){var e="&socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name),t;for(t in this.authOptions.params)e+="&"+encodeURIComponent(t)+"="+encodeURIComponent(this.authOptions.params[t]);return e},authorize:function(e,t){return Pusher.authorizers[this.type].call(this,e,t)}};var e=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(e,t){var n;n=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("POST",this.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var r in this.authOptions.headers)n.setRequestHeader(r,this.authOptions.headers[r]);return n.onreadystatechange=function(){if(n.readyState==4)if(n.status==200){var e,r=!1;try{e=JSON.parse(n.responseText),r=!0}catch(i){t(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}r&&t(!1,e)}else Pusher.warn("Couldn't get auth info from your webapp",n.status),t(!0,n.status)},n.send(this.composeQuery(e)),n},jsonp:function(t,n){this.authOptions.headers!==void 0&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.toString();e++;var i=Pusher.Util.getDocument(),s=i.createElement("script");Pusher.auth_callbacks[r]=function(e){n(!1,e)},s.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+r+"']")+this.composeQuery(t),r=i.getElementsByTagName("head")[0]||i.documentElement,r.insertBefore(s,r.firstChild)}}}.call(this),define("Pusher",function(e){return function(){var t,n;return t||e.Pusher}}(this)),function(e,t){typeof define=="function"&&define.amd?define("form2js",t):e.form2js=t()}(this,function(){function e(e,r,i,s,o){if(typeof i=="undefined"||i==null)i=!0;if(typeof r=="undefined"||r==null)r=".";arguments.length<5&&(o=!1),e=typeof e=="string"?document.getElementById(e):e;var u=[],a,f=0;if(e.constructor==Array||typeof NodeList!="undefined"&&e.constructor==NodeList)while(a=e[f++])u=u.concat(n(a,s,o));else u=n(e,s,o);return t(u,i,r)}function t(e,t,n){var r={},i={},s,o,u,a,f,l,c,h,p,d,v,m,g;for(s=0;s<e.length;s++){f=e[s].value;if(!(!t||f!==""&&f!==null))continue;m=e[s].name,g=m.split(n),l=[],c=r,h="";for(o=0;o<g.length;o++){v=g[o].split("][");if(v.length>1)for(u=0;u<v.length;u++){u==0?v[u]=v[u]+"]":u==v.length-1?v[u]="["+v[u]:v[u]="["+v[u]+"]",d=v[u].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(d)for(a=1;a<d.length;a++)d[a]&&l.push(d[a]);else l.push(v[u])}else l=l.concat(v)}for(o=0;o<l.length;o++)v=l[o],v.indexOf("[]")>-1&&o==l.length-1?(p=v.substr(0,v.indexOf("[")),h+=p,c[p]||(c[p]=[]),c[p].push(f)):v.indexOf("[")>-1?(p=v.substr(0,v.indexOf("[")),d=v.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),h+="_"+p+"_"+d,i[h]||(i[h]={}),p!=""&&!c[p]&&(c[p]=[]),o==l.length-1?p==""?(c.push(f),i[h][d]=c[c.length-1]):(c[p].push(f),i[h][d]=c[p][c[p].length-1]):i[h][d]||(/^[a-z_]+\[?/i.test(l[o+1])?c[p].push({}):c[p].push([]),i[h][d]=c[p][c[p].length-1]),c=i[h][d]):(h+=v,o<l.length-1?(c[v]||(c[v]={}),c=c[v]):c[v]=f)}return r}function n(e,t,n){var s=i(e,t,n);return s.length>0?s:r(e,t,n)}function r(e,t,n){var r=[],s=e.firstChild;while(s)r=r.concat(i(s,t,n)),s=s.nextSibling;return r}function i(e,t,n){var i,u,a,f=s(e,n);return i=t&&t(e),i&&i.name?a=[i]:f!=""&&e.nodeName.match(/INPUT|TEXTAREA/i)?(u=o(e),a=[{name:f,value:u}]):f!=""&&e.nodeName.match(/SELECT/i)?(u=o(e),a=[{name:f.replace(/\[\]$/,""),value:u}]):a=r(e,t,n),a}function s(e,t){return e.name&&e.name!=""?e.name:t&&e.id&&e.id!=""?e.id:""}function o(e){if(e.disabled)return null;switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":if(e.checked&&e.value==="false")return!1;case"checkbox":if(e.checked&&e.value==="true")return!0;if(!e.checked&&e.value==="true")return!1;if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return u(e);default:}return null}function u(e){var t=e.multiple,n=[],r,i,s;if(!t)return e.value;for(r=e.getElementsByTagName("option"),i=0,s=r.length;i<s;i++)r[i].selected&&n.push(r[i].value);return n}return e}),function(e,t){typeof define=="function"&&define.amd?define("js2form",t):e.js2form=t()}(this,function(){function o(e,t,r,i,s){arguments.length<3&&(r="."),arguments.length<4&&(i=null),arguments.length<5&&(s=!1);var o,f;o=l(t),f=a(e,s,r,{},!0);for(var c=0;c<o.length;c++){var h=o[c].name,p=o[c].value;typeof f[h]!="undefined"?u(f[h],p):typeof f[h.replace(n,"[]")]!="undefined"&&u(f[h.replace(n,"[]")],p)}}function u(e,t){var n,r,i;if(e instanceof Array){for(r=0;r<e.length;r++)if(e[r].value==t||t===!0)e[r].checked=!0}else if(s.test(e.nodeName))e.value=t;else if(/SELECT/i.test(e.nodeName)){n=e.getElementsByTagName("option");for(r=0,i=n.length;r<i;r++)if(n[r].value==t){n[r].selected=!0;if(e.multiple)break}else e.multiple||(n[r].selected=!1)}}function a(e,t,r,i,s){arguments.length<4&&(i={});var o={},u=e.firstChild,l,c,h,p,d,v,m;while(u){l="",u.name&&u.name!=""?l=u.name:t&&u.id&&u.id!=""&&(l=u.id);if(l==""){var g=a(u,t,r,i,s);for(h in g)if(typeof o[h]=="undefined")o[h]=g[h];else for(p=0;p<g[h].length;p++)o[h].push(g[h][p])}else if(/SELECT/i.test(u.nodeName))for(d=0,m=u.getElementsByTagName("option"),v=m.length;d<v;d++)s&&(m[d].selected=!1),c=f(l,r,i),o[c]=u;else/INPUT/i.test(u.nodeName)&&/CHECKBOX|RADIO/i.test(u.type)?(s&&(u.checked=!1),c=f(l,r,i),c=c.replace(n,"[]"),o[c]||(o[c]=[]),o[c].push(u)):(s&&(u.value=""),c=f(l,r,i),o[c]=u);u=u.nextSibling}return o}function f(e,t,n){var s=[],o=e.split(t),u,a,f,l,c,h;e=e.replace(i,"[$1].[$2]");for(h=0;h<o.length;h++){u=o[h],s.push(u),a=u.match(r);if(a!=null){f=s.join(t),l=f.replace(r,"$3"),f=f.replace(r,"$1"),typeof n[f]=="undefined"&&(n[f]={lastIndex:-1,indexes:{}});if(l==""||typeof n[f].indexes[l]=="undefined")n[f].lastIndex++,n[f].indexes[l]=n[f].lastIndex;c=n[f].indexes[l],s[s.length-1]=u.replace(r,"$1$2"+c+"$4")}}return f=s.join(t),f=f.replace("].[","]["),f}function l(e,t){var n=[],r,i;arguments.length==1&&(t=0);if(e==null)n=[{name:"",value:null}];else if(typeof e=="string"||typeof e=="number"||typeof e=="date"||typeof e=="boolean")n=[{name:"",value:e}];else if(e instanceof Array)for(r=0;r<e.length;r++)i="["+r+"]",n=n.concat(c(e[r],i,t+1));else for(r in e)i=r,n=n.concat(c(e[r],i,t+1));return n}function c(n,r,i){var s,o=[],u=l(n,i+1),a,f;for(a=0;a<u.length;a++)s=r,e.test(u[a].name)?s+=u[a].name:t.test(u[a].name)&&(s+="."+u[a].name),f={name:s,value:u[a].value},o.push(f);return o}var e=/^\[\d+?\]/,t=/^[a-zA-Z_][a-zA-Z_0-9]+/,n=/\[[0-9]+?\]$/,r=/(.*)(\[)([0-9]*)(\])$/,i=/\[([0-9]+)\]\[([0-9]+)\]/g,s=/INPUT|TEXTAREA/i;return o}),define("hbs!tpl/modals/app.createbuild.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){return f(typeof e===a?e.apply(e):e)}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='<div class="modal c0" style="text-align:center;">\n	<div class="header">\n		<h2>Add New Build</h2>\n	</div>\n	<div>\n	  <form id="form-c0" action=""class="pure-form pure-form-stacked">\n	    <fieldset class="field1">\n        <div class="pure-control-group">\n            <label for="appBuild" data-tip="Found in android:versionCode. ie, 1.0.0">Version Code (appBuild):</label>\n            <input type="text" name="build" id="appBuild" value="',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.build)?o=o.call(t,u):(o=t.build,o=typeof o===a?o.apply(t):o),n.build||(o=c.call(t,o,u));if(o||o===0)s+=o;s+='" />\n        </div>\n      </fieldset>\n      <fieldset class="field3">\n  	    <div class="pure-control-group">\n            <label for="buildURL" data-tip="This is the download URL for the build.">Enter a Package URL</label>\n            <input type="text"name="url" id="buildURL" placeholder="http://" value="',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.url)?o=o.call(t,u):(o=t.url,o=typeof o===a?o.apply(t):o),n.url||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+='" style="width:400px;" />\n        </div>\n      </fieldset>\n      <div class="clearfix" style="text-align: center;">\n        <button type="submit" data="submit-c0" id="versionButton" class="pure-button pure-button-disabled" disabled="true">Save</button>\n      </div>\n    </form>\n  </div>\n</div>',s})}),function(e,t){function r(e,t){var n;if(typeof e=="string"&&typeof t=="string")return localStorage[e]=t,!0;if(typeof e=="object"&&typeof t=="undefined"){for(n in e)e.hasOwnProperty(n)&&(localStorage[n]=e[n]);return!0}return!1}function i(e,t){var n,r,i;n=new Date,n.setTime(n.getTime()+31536e6),r="; expires="+n.toGMTString();if(typeof e=="string"&&typeof t=="string")return document.cookie=e+"="+t+r+"; path=/",!0;if(typeof e=="object"&&typeof t=="undefined"){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function s(e){return localStorage[e]}function o(e){var t,n,r,i;t=e+"=",n=document.cookie.split(";");for(r=0;r<n.length;r++){i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null}function u(e){return delete localStorage[e]}function a(e){return i(e,"",-1)}function f(e,t){var n=[],r=e.length;if(r<t)return[e];for(var i=0;i<r;i+=t)n.push(e.substring(i,i+t));return n}function l(t){var n=t?[t]:[],r=0;e.extend(this,{get:function(){return n},rotate:function(){return n.length===1?n[0]:(r===n.length-1?r=0:++r,n[r])},length:function(){return n.length},set:function(e){for(var t=n.length;t--;)if(n[t]===e){r=t;return}this.append(e)},front:function(){return n[r]},append:function(e){n.push(e)}})}function c(t){var n=t?[t]:[];e.extend(this,{size:function(){return n.length},pop:function(){if(n.length===0)return null;var e=n[n.length-1];return n=n.slice(0,n.length-1),e},push:function(e){return n=n.concat([e]),e},top:function(){return n.length>0?n[n.length-1]:null}})}function h(t,n){var r=!0;typeof t=="string"&&t!==""&&(t+="_");var i=e.Storage.get(t+"commands");i=i?(new Function("return "+i+";"))():[];var s=i.length-1;e.extend(this,{append:function(o){r&&i[i.length-1]!==o&&(i.push(o),s=i.length-1,n&&i.length>n&&(i=i.slice(-n)),e.Storage.set(t+"commands",e.json_stringify(i)))},data:function(){return i},next:function(){s<i.length-1&&++s;if(s!==-1)return i[s]},reset:function(){s=i.length-1},last:function(){return i[length-1]},end:function(){return s===i.length-1},position:function(){return s},previous:function(){var e=s;s>0&&--s;if(e!==-1)return i[e]},clear:function(){i=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(t+"commands")},disable:function(){r=!1}})}function p(t){return e("<div>"+e.terminal.strip(t)+"</div>").text().length}function d(e){return e.length-p(e)}function v(e,t){var n=e.split(/(\s+)/);return{name:n[0],args:t(n.slice(2).join(""))}}function C(t){var n=e(window).scrollTop(),r=n+e(window).height(),i=e(t).offset().top,s=i+e(t).height();return s>=n&&i<=r}function k(t){var n=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),r=n.find("span").width();n.remove();var i=Math.floor(t.width()/r);if(L(t)){var s=20,o=t.innerWidth()-t.width();i-=Math.ceil((s-o/2)/(r-1))}return i}function L(e){return e.get(0).scrollHeight>e.innerHeight()}e.omap=function(t,n){var r={};return e.each(t,function(e,i){r[e]=n.call(t,e,i)}),r};var n=typeof window.localStorage!="undefined";e.extend({Storage:{set:n?r:i,get:n?s:o,remove:n?u:a}}),jQuery.fn.extend({everyTime:function(e,t,n,r,i){return this.each(function(){jQuery.timer.add(this,e,t,n,r,i)})},oneTime:function(e,t,n){return this.each(function(){jQuery.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){jQuery.timer.remove(this,e,t)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===t||e===null)return null;var n=this.regex.exec(jQuery.trim(e.toString()));if(n[2]){var r=parseInt(n[1],10),i=this.powers[n[2]]||1;return r*i}return e},add:function(e,t,n,r,i,s){var o=0;jQuery.isFunction(n)&&(i||(i=r),r=n,n=t),t=jQuery.timer.timeParse(t);if(typeof t!="number"||isNaN(t)||t<=0)return;i&&i.constructor!==Number&&(s=!!i,i=0),i=i||0,s=s||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),r.$timerID=r.$timerID||this.guid++;var u=function(){if(s&&u.inProgress)return;u.inProgress=!0,(++o>i&&i!==0||r.call(e,o)===!1)&&jQuery.timer.remove(e,n,r),u.inProgress=!1};u.$timerID=r.$timerID,e.$timers[n][r.$timerID]||(e.$timers[n][r.$timerID]=window.setInterval(u,t)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)},remove:function(e,t,n){var r=e.$timers,i;if(r){if(!t)for(var s in r)r.hasOwnProperty(s)&&this.remove(e,s,n);else if(r[t]){if(n)n.$timerID&&(window.clearInterval(r[t][n.$timerID]),delete r[t][n.$timerID]);else for(var o in r[t])r[t].hasOwnProperty(o)&&(window.clearInterval(r[t][o]),delete r[t][o]);for(i in r[t])if(r[t].hasOwnProperty(i))break;i||(i=null,delete r[t])}for(i in r)if(r.hasOwnProperty(i))break;i||(e.$timers=null)}}}}),(jQuery.browser&&jQuery.browser.msie||/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase()))&&jQuery(window).one("unload",function(){var e=jQuery.timer.global;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],r=n.length;while(--r)jQuery.timer.remove(n[r],t)}}),function(e){if(!String.prototype.split.toString().match(/\[native/))return;var t=String.prototype.split,n=/()??/.exec("")[1]===e,r;return r=function(r,i,s){if(Object.prototype.toString.call(i)!=="[object RegExp]")return t.call(r,i,s);var o=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),a=0,f,l,c,h;i=new RegExp(i.source,u+"g"),r+="",n||(f=new RegExp("^"+i.source+"$(?!\\s)",u)),s=s===e?-1>>>0:s>>>0;while(l=i.exec(r)){c=l.index+l[0].length;if(c>a){o.push(r.slice(a,l.index)),!n&&l.length>1&&l[0].replace(f,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(l[t]=e)}),l.length>1&&l.index<r.length&&Array.prototype.push.apply(o,l.slice(1)),h=l[0].length,a=c;if(o.length>=s)break}i.lastIndex===l.index&&i.lastIndex++}return a===r.length?(h||!i.test(""))&&o.push(""):o.push(r.slice(a)),o.length>s?o.slice(0,s):o},String.prototype.split=function(e,t){return r(this,e,t)},r}(),e.json_stringify=function(n,r){var i="",s;r=r===t?1:r;var o=typeof n;switch(o){case"function":i+=n;break;case"boolean":i+=n?"true":"false";break;case"object":if(n===null)i+="null";else if(n instanceof Array){i+="[";var u=n.length;for(s=0;s<u-1;++s)i+=e.json_stringify(n[s],r+1);i+=e.json_stringify(n[u-1],r+1)+"]"}else{i+="{";for(var a in n)n.hasOwnProperty(a)&&(i+='"'+a+'":'+e.json_stringify(n[a],r+1));i+="}"}break;case"string":var f=n,l={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(s in l)l.hasOwnProperty(s)&&(f=f.replace(new RegExp(s,"g"),l[s]));i+='"'+f+'"';break;case"number":i+=String(n)}return i+=r>1?",":"",r===1&&(i=i.replace(/,([\]}])/g,"$1")),i.replace(/([\[{]),/g,"$1")},e.fn.cmd=function(n){function T(e){x.toggleClass("inverted")}function N(){y="(reverse-i-search)`"+l+"': ",D()}function C(){y=d,a=!1,c=null,l=""}function k(e){var t=S.data(),n,i=t.length;e&&c>0&&(i-=c);if(l.length>0)for(var s=l.length;s>0;s--){n=new RegExp("^"+l.substring(0,s));for(var o=i;o--;)if(n.test(t[o])){c=t.length-o,g=0,r.set(t[o],!0),M(),l.length!==s&&(l=l.substring(0,s),N());return}}}function L(){var e=r.width(),t=x.innerWidth();o=Math.floor(e/t)}function A(e,t){var n="";for(var r=t;r--;)n+=e;return n}function O(e){var t=e.substring(0,o-u),n=e.substring(o-u);return[t].concat(f(n,o))}function P(){s.focus(),r.oneTime(1,function(){r.insert(s.val()),s.blur().val("")})}function B(e){var i,s,o;if(typeof n.keydown=="function"){i=n.keydown(e);if(i!==t)return i}if(b){e.which!==38&&(e.which!==80||!e.ctrlKey)&&(H=!0);if(!a||e.which!==35&&e.which!==36&&e.which!==37&&e.which!==38&&e.which!==39&&e.which!==40&&e.which!==13&&e.which!==27){if(e.altKey)return e.which===68?(r.set(m.slice(0,g)+m.slice(g).replace(/[^ ]+ |[^ ]+$/,""),!0),!1):!0;if(e.keyCode===13){S&&m&&(n.historyFilter&&n.historyFilter(m)||!n.historyFilter)&&S.append(m);var u=m;S.reset(),r.set(""),n.commands&&n.commands(u),typeof y=="function"&&D()}else if(e.which===8)a?(l=l.slice(0,-1),N()):m!==""&&g>0&&(m=m.slice(0,g-1)+m.slice(g,m.length),--g,M());else if(e.which===9&&!e.ctrlKey&&!e.altKey)r.insert("	");else{if(e.which===46)return m!==""&&g<m.length&&(m=m.slice(0,g)+m.slice(g+1,m.length),M()),!0;if(S&&e.which===38||e.which===80&&e.ctrlKey)H&&(_=m),H=!1,r.set(S.previous());else if(S&&e.which===40||e.which===78&&e.ctrlKey)r.set(S.end()?_:S.next());else if(e.which===37||e.which===66&&e.ctrlKey)if(e.ctrlKey&&e.which!==66){o=g-1,s=0,m[o]===" "&&--o;for(var f=o;f>0;--f){if(m[f]===" "&&m[f+1]!==" "){s=f+1;break}if(m[f]==="\n"&&m[f+1]!=="\n"){s=f;break}}r.position(s)}else g>0&&(--g,M());else if(e.which===82&&e.ctrlKey)a?k(!0):(d=y,N(),_=m,m="",M(),a=!0);else if(e.which==71&&e.ctrlKey)a&&(y=d,D(),m=_,M(),a=!1);else if(e.which===39||e.which===70&&e.ctrlKey)if(e.ctrlKey&&e.which!==70){m[g]===" "&&++g;var c=m.slice(g).match(/\S[\n\s]{2,}|[\n\s]+\S?/);!c||c[0].match(/^\s+$/)?g=m.length:c[0][0]!==" "?g+=c.index+1:(g+=c.index+c[0].length-1,c[0][c[0].length-1]!==" "&&--g),M()}else g<m.length&&(++g,M());else{if(e.which===123)return!0;if(e.which===36)r.position(0);else if(e.which===35)r.position(m.length);else{if(e.shiftKey&&e.which==45)return P(),!0;if(!e.ctrlKey&&!e.metaKey)return!0;if(e.which===192)return!0;if(e.metaKey){if(e.which===82)return!0;if(e.which===76)return!0}if(e.shiftKey){if(e.which===84)return!0}else{if(e.which===87){if(m!==""){var h=m.slice(0,g),p=m.slice(g+1),v=h.match(/([^ ]+ *$)/);g=h.length-v[0].length,m=h.slice(0,g)+p,M()}return!1}if(e.which===72)return m!==""&&g>0&&(m=m.slice(0,--g),g<m.length-1&&(m+=m.slice(g)),M()),!1;if(e.which===65)r.position(0);else if(e.which===69)r.position(m.length);else{if(e.which===88||e.which===67||e.which===84)return!0;if(e.which===86)return P(),!0;if(e.which===75)g===0?r.set(""):g!==m.length&&r.set(m.slice(0,g));else if(e.which===85)r.set(m.slice(g,m.length)),r.position(0);else if(e.which===17)return!1}}}}}}else C(),D(),e.which===27&&(m=""),M(),B.call(this,e);return!1}}var r=this,i=r.data("cmd");if(i)return i;r.addClass("cmd"),r.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var s=e("<textarea/>").addClass("clipboard").appendTo(r);n.width&&r.width(n.width);var o,u,a=!1,l="",c=null,d,v=n.mask||!1,m="",g=0,y,b=n.enabled,w=n.historySize||60,E,S,x=r.find(".cursor"),M=function(t){function i(t,i){var s=t.length;if(i===s)n.html(e.terminal.encode(t,!0)),x.html("&nbsp;"),r.html("");else if(i===0)n.html(""),x.html(e.terminal.encode(t.slice(0,1),!0)),r.html(e.terminal.encode(t.slice(1),!0));else{var o=e.terminal.encode(t.slice(0,i),!0);n.html(o);var u=t.slice(i,i+1);x.html(u===" "?"&nbsp;":e.terminal.encode(u,!0)),i===t.length-1?r.html(""):r.html(e.terminal.encode(t.slice(i+1),!0))}}function s(t){return"<div>"+e.terminal.encode(t,!0)+"</div>"}function a(t){var n=r;e.each(t,function(t,r){n=e(s(r)).insertAfter(n).addClass("clear")})}function l(t){e.each(t,function(e,t){n.before(s(t))})}var n=x.prev(),r=x.next(),c=0;return function(){var c=v?m.replace(/./g,"*"):m,h,p;t.find("div").remove(),n.html("");if(c.length>o-u-1||c.match(/\n/)){var d,y=c.match(/\t/g),b=y?y.length*3:0;y&&(c=c.replace(/\t/g,"\0\0\0\0"));if(c.match(/\n/)){var w=c.split("\n");p=o-u-1;for(h=0;h<w.length-1;++h)w[h]+=" ";w[0].length>p?(d=[w[0].substring(0,p)],d=d.concat(f(w[0].substring(p),o))):d=[w[0]];for(h=1;h<w.length;++h)w[h].length>o?d=d.concat(f(w[h],o)):d.push(w[h])}else d=O(c);y&&(d=e.map(d,function(e){return e.replace(/\x00\x00\x00\x00/g,"	")})),p=d[0].length;if(p!==0||d.length!==1)if(g<p)i(d[0],g),a(d.slice(1));else if(g===p)n.before(s(d[0])),i(d[1],0),a(d.slice(2));else{var E=d.length,S=0;if(g<p)i(d[0],g),a(d.slice(1));else if(g===p)n.before(s(d[0])),i(d[1],0),a(d.slice(2));else{var T=d.slice(-1)[0],N=c.length-g,C=T.length,k=0;if(N<=C)l(d.slice(0,-1)),k=C===N?0:C-N,i(T,k+b);else if(E===3)n.before("<div>"+e.terminal.encode(d[0],!0)+"</div>"),i(d[1],g-p-1),r.after('<div class="clear">'+e.terminal.encode(d[2],!0)+"</div>");else{var L,A;k=g;for(h=0;h<d.length;++h){var M=d[h].length;if(!(k>M))break;k-=M}A=d[h],L=h,k===A.length&&(k=0,A=d[++L]),i(A,k),l(d.slice(0,L)),a(d.slice(L+1))}}}}else c===""?(n.html(""),x.html("&nbsp;"),r.html("")):i(c,g)}}(r),_,D=function(){function n(n){u=p(n),t.html(e.terminal.format(e.terminal.encode(n)))}var t=r.find(".prompt");return function(){switch(typeof y){case"string":n(y);break;case"function":y(n)}}}(),H=!0,j=[];e.extend(r,{name:function(e){if(e!==t){E=e,S=new h(e,w);var n=j.length;return n&&!j[n-1].enabled()&&S.disable(),j.push(S),r}return E},purge:function(){for(var e=j.length;e--;)j[e].purge();return j=[],r},history:function(){return S},set:function(e,i){return e!==t&&(m=e,i||(g=m.length),M(),typeof n.onCommandChange=="function"&&n.onCommandChange(m)),r},insert:function(e,t){return g===m.length?m+=e:g===0?m=e+m:m=m.slice(0,g)+e+m.slice(g),t||(g+=e.length),M(),typeof n.onCommandChange=="function"&&n.onCommandChange(m),r},get:function(){return m},commands:function(e){return e?(n.commands=e,r):e},destroy:function(){return e(document.documentElement||window).unbind(".cmd"),r.stopTime("blink",T),r.find(".cursor").next().remove().end().prev().remove().end().remove(),r.find(".prompt, .clipboard").remove(),r.removeClass("cmd").removeData("cmd"),r},prompt:function(e){if(e===t)return y;if(typeof e!="string"&&typeof e!="function")throw"prompt must be a function or string";return y=e,D(),M(),r},position:function(e){return typeof e=="number"?(g=e<0?0:e>m.length?m.length:e,M(),r):g},visible:function(){var e=r.visible;return function(){e.apply(r,[]),M(),D()}}(),show:function(){var e=r.show;return function(){e.apply(r,[]),M(),D()}}(),resize:function(e){return e?o=e:L(),M(),r},enable:function(){return b||(x.addClass("inverted"),r.everyTime(500,"blink",T),b=!0),r},isenabled:function(){return b},disable:function(){return b&&(r.stopTime("blink",T),x.removeClass("inverted"),b=!1),r},mask:function(e){return typeof e=="boolean"?(v=e,M(),r):v}}),r.name(n.name||n.prompt||""),y=n.prompt||"> ",D(),(n.enabled===t||n.enabled===!0)&&r.enable();var F;return e(document.documentElement||window).bind("keypress.cmd",function(i){var s;if(i.ctrlKey&&i.which===99)return!0;!a&&typeof n.keypress=="function"&&(s=n.keypress(i));if(s!==t&&!s)return s;if(b){if(e.inArray(i.which,[38,13,0,8])>-1&&i.keyCode!==123&&(i.which!==38||!i.shiftKey))return!1;if(!i.ctrlKey&&(!i.altKey||i.which!==100)||i.altKey)return a?(l+=String.fromCharCode(i.which),k(),N()):r.insert(String.fromCharCode(i.which)),!1}}).bind("keydown.cmd",B),r.data("cmd",r),r};var m=/(\[\[[gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/,g=/\[\[([gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/g,y=/\[\[([gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,b=/#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})/,w=/https?:\/\/(?:(?!&[^;]+;)[^\s:"'<>)])+/g,E=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,S=/('[^']*'|"(\\"|[^"])*"|\/(\\\/|[^\/])*\/|(\\ |[^ ])+|[\w-]+)/g,x=/(\[\[[gbiuso]*;[^;]*;[^\]]*\])/,T=/\[\[[gbiuso]*;[^;]*;[^\]]*\]?$/;e.terminal={split_equal:function(e,t){var n=!1,r=!1,i=0,s="",o=[],u=e.replace(y,function(e,t,n){var r=t.match(/;/g).length;return r==2?r=";;":r==3?r=";":r="","[["+t+r+n.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n")+"]"+n+"]"}).split(/\n/g);for(var a=0,f=u.length;a<f;++a){if(u[a]===""){o.push("");continue}var l=u[a],c=0,h=0;for(var p=0,d=l.length;p<d;++p){if(l[p]==="["&&l[p+1]==="[")n=!0;else if(n&&l[p]==="]")r?(n=!1,r=!1):r=!0;else if(n&&r||!n){if(l[p]==="&"){var v=l.substring(p).match(/^(&[^;]+;)/);if(!v)throw"Unclosed html entity in line "+(a+1)+" at char "+(p+1);p+=v[1].length-2,p===d-1&&o.push(m+v[1]);continue}l[p]==="]"&&l[p-1]==="\\"?--h:++h}if(h===t||p===d-1){var m=l.substring(c,p+1);s&&(m=s+m,m.match("]")&&(s="")),c=p+1,h=0;var g=m.match(y);if(g){var b=g[g.length-1];if(b[b.length-1]!=="]")s=b.match(x)[1],m+="]";else if(m.match(T)){var w=m.length,E=w-b[b.length-1].length;m=m.replace(T,""),s=b.match(x)[1]}}o.push(m)}}}return o},encode:function(e,t){return t?e=e.replace(/&(?![^=]+=)/g,"&amp;"):e=e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;|[^= "]+=[^=])/g,"&amp;"),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},format:function(t,n){var r=e.extend({},{linksNoReferrer:!1},n||{});if(typeof t=="string"){var i=t.split(m);return i&&i.length>1&&(t=e.map(i,function(e){return e===""?e:e.substring(0,1)==="["?e.replace(g,function(e,t,n,r,i,s,o){if(o==="")return"";o=o.replace(/\\]/g,"]");var u="";t.indexOf("b")!==-1&&(u+="font-weight:bold;");var a=[];t.indexOf("u")!==-1&&a.push("underline"),t.indexOf("s")!==-1&&a.push("line-through"),t.indexOf("o")!==-1&&a.push("overline"),a.length&&(u+="text-decoration:"+a.join(" ")+";"),t.indexOf("i")!==-1&&(u+="font-style:italic;"),n.match(b)&&(u+="color:"+n+";",t.indexOf("g")!==-1&&(u+="text-shadow:0 0 5px "+n+";")),r.match(b)&&(u+="background-color:"+r);var f='<span style="'+u+'"'+(i!==""?' class="'+i+'"':"")+' data-text="'+(s===""?o:s.replace(/&#93;/g,"]")).replace('"',"&quote;")+'">'+o+"</span>";return f}):"<span>"+e+"</span>"}).join("")),e.map(t.split(/(<\/?span[^>]*>)/g),function(e){return e.match(/span/)?e:e.replace(w,function(e){var t=e.match(/\.$/);return e=e.replace(/\.$/,""),'<a target="_blank" '+(r.linksNoReferer?' rel="noreferrer" ':"")+'href="'+e+'">'+e+"</a>"+(t?".":"")}).replace(E,'<a href="mailto:$1">$1</a>')}).join("").replace(/<span><br\/?><\/span>/g,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(g,"$6")},active:function(){return H.front()},from_ntroff:function(e){return e.replace(/((?:_\x08.|.\x08_)+)/g,function(e,t){return"[[u;;]"+e.replace(/_x08|\x08_|_\u0008|\u0008_/g,"")+"]"}).replace(/((?:.\x08.)+)/g,function(e,t){return"[[b;#fff;]"+e.replace(/(.)(?:\x08|\u0008)(.)/g,function(e,t,n){return n})+"]"})},ansi_colors:{normal:{black:"#000",red:"#A00",green:"#008400",yellow:"#A50",blue:"#00A",magenta:"#A0A",cyan:"#0AA",white:"#AAA"},faited:{black:"#000",red:"#640000",green:"#006100",yellow:"#737300",blue:"#000087",magenta:"#650065",cyan:"#008787",white:"#818181"},bold:{black:"#000",red:"#F55",green:"#44D544",yellow:"#FF5",blue:"#55F",magenta:"#F5F",cyan:"#5FF",white:"#FFF"},palette:["#000000","#AA0000","#00AA00","#AA5500","#0000AA","#AA00AA","#00AAAA","#AAAAAA","#555555","#FF5555","#55FF55","#FFFF55","#5555FF","#FF55FF","#55FFFF","#FFFFFF","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]},from_ansi:function(){function r(r){var i=r.split(";"),s,o=!1,u=!1,a=!1,f=[],l="",c="",h=!1,p=!1,d=!1,v=e.terminal.ansi_colors.palette;for(var m in i){s=parseInt(i[m],10);switch(s){case 1:f.push("b"),a=!0,o=!1;break;case 4:f.push("u");break;case 3:f.push("i");break;case 5:d=!0;break;case 38:h=!0;break;case 48:p=!0;break;case 2:o=!0,a=!1;break;case 7:u=!0;break;default:h&&d&&v[s-1]?l=v[s-1]:t[s]&&(l=t[s]),p&&d&&v[s-1]?c=v[s-1]:n[s]&&(c=n[s])}s!==5&&(d=!1)}if(u)if(l&&c){var g=c;c=l,l=g}else l="black",c="white";var y,b;return a?y=b=e.terminal.ansi_colors.bold:o?y=b=e.terminal.ansi_colors.faited:y=b=e.terminal.ansi_colors.normal,[f.join(""),h?l:y[l],p?c:b[c]]}var t={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"white"},n={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"black"};return function(e){var t=e.split(/(\x1B\[[0-9;]*[A-Za-z])/g);if(t.length==1)return e;var n=[];t.length>3&&t.slice(0,3).join("")=="[0m"&&(t=t.slice(3));var i=!1,s,o,u,a,f;for(var l=0;l<t.length;++l){f=t[l].match(/^\x1B\[([0-9;]*)([A-Za-z])$/);if(f)switch(f[2]){case"m":if(f[1]==="")continue;f[1]!=="0"?a=r(f[1]):a=["",""],i?(n.push("]"),f[1]=="0"?(i=!1,o=u=""):(a[1]=a[1]||o,a[2]=a[2]||u,n.push("[["+a.join(";")+"]"),a[1]&&(o=a[1]),a[2]&&(u=a[2]))):(i=!0,n.push("[["+a.join(";")+"]"),a[1]&&(o=a[1]),a[2]&&(u=a[2]))}else n.push(t[l])}return i&&n.push("]"),n.join("")}}(),parseArguments:function(t){return e.map(t.match(S)||[],function(e){return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==='"'&&e[e.length-1]==='"'?(e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"),e.replace(/\\\\|\\t|\\n/g,function(e){return e[1]==="t"?"	":e[1]==="n"?"\n":"\\"}).replace(/\\x([0-9a-f]+)/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/\\0([0-7]+)/g,function(e,t){return String.fromCharCode(parseInt(t,8))})):e[0]==="/"&&e[e.length-1]=="/"?new RegExp(e.replace(/^\/|\/$/g,"")):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/)?parseFloat(e):e.replace(/\\ /g," ")})},splitArguments:function(t){return e.map(t.match(S)||[],function(e){return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==='"'&&e[e.length-1]==='"'?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e[0]==="/"&&e[e.length-1]=="/"?e:e.replace(/\\ /g," ")})},parseCommand:function(t){return v(t,e.terminal.parseArguments)},splitCommand:function(t){return v(t,e.terminal.splitArguments)},test:function(){function s(e,n){t.echo(n+" &#91;"+(e?"[[b;#44D544;]PASS]":"[[b;#FF5555;]FAIL]")+"&#93;")}var t=e.terminal.active();if(!t){t=e("body").terminal(e.noop).css("margin",0);var n=t.outerHeight()-t.height(),r=e(window);function i(){t.css("height",e(window).height()-20)}r.resize(i).resize()}t.echo("Testing...");var o='name "foo bar" baz /^asd [x]/ str\\ str 10 1e10',u=e.terminal.splitCommand(o);s(u.name==="name"&&u.args[0]==="foo bar"&&u.args[1]==="baz"&&u.args[2]==="/^asd [x]/"&&u.args[3]==="str str"&&u.args[4]==="10"&&u.args[5]==="1e10","$.terminal.splitCommand"),u=e.terminal.parseCommand(o),s(u.name==="name"&&u.args[0]==="foo bar"&&u.args[1]==="baz"&&e.type(u.args[2])==="regexp"&&u.args[2].source==="^asd [x]"&&u.args[3]==="str str"&&u.args[4]===10&&u.args[5]===1e10,"$.terminal.parseCommand"),o="[2;31;46mFoo[1;3;4;32;45mBar[0m[7mBaz",s(e.terminal.from_ansi(o)==="[[;#640000;#008787]Foo][[biu;#44D544;#F5F]Bar][[;#000;#AAA]Baz]","$.terminal.from_ansi"),o="[[biugs;#fff;#000]Foo][[i;;;foo]Bar][[ous;;]Baz]",t.echo("$.terminal.format"),s(e.terminal.format(o)==='<span style="font-weight:bold;text-decoration:underline line-through;font-style:italic;color:#fff;text-shadow:0 0 5px #fff;background-color:#000" data-text="Foo">Foo</span><span style="font-style:italic;" class="foo" data-text="Bar">Bar</span><span style="text-decoration:underline line-through overline;" data-text="Baz">Baz</span>',"	formatting"),o="http://terminal.jcubic.pl/examples.php https://www.google.com/?q=jquery%20terminal",s(e.terminal.format(o)==='<a target="_blank" href="http://terminal.jcubic.pl/examples.php">http://terminal.jcubic.pl/examples.php</a> <a target="_blank" href="https://www.google.com/?q=jquery%20terminal">https://www.google.com/?q=jquery%20terminal</a>',"	urls"),o="foo@bar.com baz.quux@example.com",s(e.terminal.format(o)==='<a href="mailto:foo@bar.com">foo@bar.com</a> <a href="mailto:baz.quux@example.com">baz.quux@example.com</a>',"	emails"),o="-_-[[biugs;#fff;#000]Foo]-_-[[i;;;foo]Bar]-_-[[ous;;]Baz]-_-",s(e.terminal.strip(o)==="-_-Foo-_-Bar-_-Baz-_-","$.terminal.strip"),o="[[bui;#fff;]Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed dolor nisl, in suscipit justo. Donec a enim et est porttitor semper at vitae augue. Proin at nulla at dui mattis mattis. Nam a volutpat ante. Aliquam consequat dui eu sem convallis ullamcorper. Nulla suscipit, massa vitae suscipit ornare, tellus] est [[b;;#f00]consequat nunc, quis blandit elit odio eu arcu. Nam a urna nec nisl varius sodales. Mauris iaculis tincidunt orci id commodo. Aliquam] non magna quis [[i;;]tortor malesuada aliquam] eget ut lacus. Nam ut vestibulum est. Praesent volutpat tellus in eros dapibus elementum. Nam laoreet risus non nulla mollis ac luctus [[ub;#fff;]felis dapibus. Pellentesque mattis elementum augue non sollicitudin. Nullam lobortis fermentum elit ac mollis. Nam ac varius risus. Cras faucibus euismod nulla, ac auctor diam rutrum sit amet. Nulla vel odio erat], ac mattis enim.",t.echo("$.terminal.split_equal");var a=[10,40,60,400];for(var f=a.length;f--;){var l=e.terminal.split_equal(o,a[f]),c=!0;for(var h=0;h<l.length;++h)if(e.terminal.strip(l[h]).length>a[f]){c=!1;break}s(c,"	split "+a[f])}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var N=0;e.jrpc=function(t,n,r,i,s){var o=e.json_stringify({jsonrpc:"2.0",method:n,params:r,id:++N});return e.ajax({url:t,data:o,success:i,error:s,contentType:"application/json",dataType:"json",async:!0,cache:!1,type:"POST"})};var A="{{VER}}",O="Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>",M="version "+A,_=new RegExp(" {"+M.length+"}$"),D=[["jQuery Terminal","(c) 2011-2013 jcubic"],["jQuery Terminal Emulator v. "+A,O.replace(/ *<.*>/,"")],["jQuery Terminal Emulator version "+M,O.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(_,"")+M,O],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(_,"")+M,O]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,checkArity:!0,displayExceptions:!0,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,login:null,outputLimit:-1,tabcompletion:null,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop};var P=[],H=new l;e.fn.terminal=function(n,r){function i(t){return typeof Q.processArguments=="function"?v(t,Q.processArguments):Q.processArguments?e.terminal.parseCommand(t):e.terminal.splitCommand(t)}function s(t){typeof t=="string"?_.echo(t):t instanceof Array?_.echo(e.map(t,function(t){return e.json_stringify(t)}).join(" ")):typeof t=="object"?_.echo(e.json_stringify(t)):_.echo(t)}function o(t){var n=function(n,r){_.pause(),e.jrpc(t,n,r,function(e){e.error?_.error("&#91;RPC&#93; "+e.error.message):s(e.result),_.resume()},function(e,t,n){t!=="abort"&&_.error("&#91;AJAX&#93; "+t+" - Server reponse is: \n"+e.responseText),_.resume()})};return function(e,t){if(e==="")return;e=i(e);if(!Q.login||e.name==="help")n(e.name,e.args);else{var r=t.token();r?n(e.name,[r].concat(e.args)):t.error("&#91;AUTH&#93; Access denied (no token)")}}}function u(n,r){return function(s,o){if(s==="")return;s=i(s);var a=n[s.name],f=e.type(a);if(f==="function"){if(!r||a.length===s.args.length)return a.apply(_,s.args);_.error("&#91;Arity&#93; wrong number of arguments. Function '"+s.name+"' expect "+a.length+" got "+s.args.length)}else if(f==="object"||f==="string"){var l=[];if(f==="object"){for(var c in a)a.hasOwnProperty(c)&&l.push(c);a=u(a,r)}o.push(a,{prompt:s.name+"> ",name:s.name,completion:f==="object"?function(e,t,n){n(l)}:t})}else o.error("Command '"+s.name+"' Not Found")}}function a(t,n){n=n||e.noop;var r=e.type(t),i={};if(r==="string")_.pause(),e.jrpc(t,"system.describe",[],function(r){var a=[];if(r.procs){var f={};e.each(r.procs,function(n,r){a.push(r.name),f[r.name]=function(){var n=Array.prototype.slice.call(arguments);Q.checkArity&&r.params&&r.params.length!==n.length?_.error("&#91;Arity&#93; wrong number of arguments.Function '"+r.name+"' expect "+r.params.length+" got "+n.length):(_.pause(),e.jrpc(t,r.name,n,function(e){e.error?_.error("&#91;RPC&#93; "+e.error.message):s(e.result),_.resume()},function(e,t,n){t!=="abort"&&_.error("&#91;AJAX&#93; "+t+" - Server reponse is: \n"+e.responseText),_.resume()}))}}),i.interpreter=u(f,!1),i.completion=function(e,t,n){n(a)}}else i.interpreter=o(t),i.completion=Q.completion;_.resume(),n(i)},function(){i.completion=Q.completion,i.interpreter=o(t),n(i)});else if(r==="object"){var a=[];for(var f in t)a.push(f);i.interpreter=u(t,!0),i.completion=function(e,t,n){n(a)},n(i)}else{if(r!=="function")throw r+" is invalid interpreter value";n({interpreter:t,completion:Q.completion})}}function f(e){return typeof e=="string"?e:typeof e.fileName=="string"?e.fileName+": "+e.message:e.message}function l(t,n){if(Q.displayExceptions){var r=f(t);_.error("&#91;"+n+"&#93;: "+r),typeof t.fileName=="string"&&(_.pause(),e.get(t.fileName,function(e){_.resume();var n=t.lineNumber-1,r=e.split("\n")[n];r&&_.error("&#91;"+t.lineNumber+"&#93;: "+r)})),t.stack&&_.error(t.stack)}}function h(){var e=j.prop?j.prop("scrollHeight"):j.attr("scrollHeight");j.scrollTop(e)}function p(e,t){try{if(typeof t=="function")t(function(){});else if(typeof t!="string"){var n=e+" must be string or function";throw n}}catch(r){return l(r,e.toUpperCase()),!1}return!0}function g(t,n){try{var r=e.extend({raw:!1,finalize:e.noop},n||{});t=e.type(t)==="function"?t():t,t=e.type(t)==="string"?t:String(t);var i,s;r.raw||(t=e.terminal.encode(t)),t=e.terminal.from_ntroff(t),t=e.terminal.from_ansi(t),d.push(m);if(!r.raw&&(t.length>z||t.match(/\n/))){var o=e.terminal.split_equal(t,z);for(i=0,s=o.length;i<s;++i)o[i]===""||o[i]==="\r"?d.push("&nbsp"):r.raw?d.push(o[i]):d.push(e.terminal.format(o[i],{linksNoReferer:Q.linksNoReferer}))}else r.raw||(t=e.terminal.format(t,{linksNoReferer:Q.linksNoReferer})),d.push(t);d.push(r.finalize)}catch(u){d=[],console.log("Internal Exception(draw_line):"+f(u)+"\n"+u.stack)}}function y(){try{var t;if(Q.outputLimit>=0){var n=_.rows(),r=Q.outputLimit===0?n:Q.outputLimit,i=0,s,o=e("<div/>");for(var u=d.length;u--;)if(typeof d[u]=="function")s=d[u],t=e("<div/>");else if(d[u]===m){t.prependTo(o);try{s(t)}catch(a){l(a,"USER:echo(finalize)")}}else{t.prepend("<div>"+d[u]+"</div>");if(++i===r){if(d[u-1]!==m)try{s(t)}catch(a){l(a,"USER:echo(finalize)")}break}}o.children().appendTo(R)}else e.each(d,function(n,r){if(r===m)t=e("<div></div>");else if(typeof r=="function"){t.appendTo(R);try{r(t)}catch(i){l(i,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(t).width("100%")});h(),d=[]}catch(a){alert("flush "+f(a)+"\n"+a.stack)}}function b(){Q.greetings===t?_.echo(_.signature):Q.greetings&&_.echo(Q.greetings)}function w(t){t=e.terminal.escape_brackets(e.terminal.encode(t,!0));var n=tt.prompt();tt.mask()&&(t=t.replace(/./g,"*")),typeof n=="function"?n(function(e){_.echo(e+t)}):_.echo(n+t)}function E(e,n){try{F=e;var r=et.top();if(e==="exit"&&Q.exit)if(et.size()===1)if(Q.login)x();else{var i="You can't exit from main interpeter";n||w(e),_.echo(i)}else _.pop("exit");else{n||w(e);var s=q.length-1;if(e==="clear"&&Q.clear)_.clear();else{var o=r.interpreter(e,_);o!==t&&(s===q.length-1?(q.pop(),o!==!1&&_.echo(o)):o===!1?q=q.slice(0,s).concat(q.slice(s+1)):q=q.slice(0,s).concat([o]).concat(q.slice(s+1)),_.resize())}}}catch(u){throw l(u,"USER"),_.resume(),u}}function S(){var t=null;tt.prompt("login: "),Q.history&&tt.history().disable(),tt.commands(function(n){try{w(n);if(!t)t=n,tt.prompt("password: "),tt.mask(!0);else{tt.mask(!1),_.pause();if(typeof Q.login!="function")throw"Value of login property must be a function";var r=n;Q.login(t,r,function(n){if(n){var r=Q.name;r=(r?r+"_":"")+U+"_",e.Storage.set(r+"token",n),e.Storage.set(r+"login",t),tt.commands(E),O()}else _.error("Wrong password try again"),tt.prompt("login: "),t=null;_.resume()},_)}}catch(i){throw l(i,"LOGIN",_),i}})}function x(){if(typeof Q.onBeforelogout=="function")try{if(Q.onBeforelogout(_)===!1)return}catch(t){throw l(t,"onBeforelogout"),t}var n=(Q.name?Q.name+"_":"")+U+"_";e.Storage.remove(n+"token"),e.Storage.remove(n+"login"),Q.history&&tt.history().disable(),S();if(typeof Q.onAfterlogout=="function")try{Q.onAfterlogout(_)}catch(t){throw l(t,"onAfterlogout"),t}}function T(t){var n=(Q.name?Q.name+"_":"")+U+"_interpreters",r=e.Storage.get(n);r?r=(new Function("return "+r+";"))():r=[],e.inArray(t,r)==-1&&(r.push(t),e.Storage.set(n,e.json_stringify(r)))}function N(){var e=et.top(),t=(Q.name?Q.name+"_":"")+U+(B.length?"_"+B.join("_"):"");T(t),tt.name(t),typeof e.prompt=="function"?tt.prompt(function(t){e.prompt(t,_)}):tt.prompt(e.prompt),tt.set(""),typeof e.onStart=="function"&&e.onStart(_)}function O(){N(),Q.history&&tt.history().enable(),b();if(typeof Q.onInit=="function")try{Q.onInit(_)}catch(e){throw l(e,"OnInit"),e}}function M(n){var r,i,s=et.top();if(e.type(s.keydown)==="function"){r=s.keydown(n,_);if(r!==t)return r}_.oneTime(10,function(){Y()});if(e.type(Q.keydown)==="function"){r=Q.keydown(n,_);if(r!==t)return r}if(!_.paused()){n.which!==9&&(I=0);if(n.which===68&&n.ctrlKey)return tt.get()===""?et.size()>1||Q.login!==t?_.pop(""):(_.resume(),_.echo("")):_.set_command(""),!1;if(Q.tabcompletion&&n.which===9){++I;var o=tt.get().substring(0,tt.position()),u=o.split(" "),a;if(u.length==1)a=u[0];else{a=u[u.length-1];for(i=u.length-1;i>0;i--){if(u[i-1][u[i-1].length-1]!="\\")break;a=u[i-1]+" "+a}}var f=/([\^\$\[\]\(\)\+\*\.\|])/g,l=a.replace(f,"\\$1"),c=new RegExp("^"+l);return et.top().completion(_,a,function(e){var t=tt.get().substring(0,tt.position());if(t!==o)return;var n=[];for(i=e.length;i--;)c.test(e[i])&&n.push(e[i]);if(n.length===1)_.insert(n[0].replace(c,""));else if(n.length>1)if(I>=2)w(o),_.echo(n.join("	")),I=0;else{var r=!1;e:for(var s=a.length;s<n[0].length;++s){for(i=1;i<n.length;++i)if(n[0].charAt(s)!==n[i].charAt(s))break e;r=!0}r&&_.insert(n[0].slice(0,s).replace(c,""))}}),!1}if(n.which===86&&n.ctrlKey){_.oneTime(1,function(){h()});return}if(n.which===9&&n.ctrlKey){if(H.length()>1)return _.focus(!1),!1}else n.which===34?_.scroll(_.height()):n.which===33?_.scroll(-_.height()):_.attr({scrollTop:_.attr("scrollHeight")})}else if(n.which===68&&n.ctrlKey){if(P.length){for(i=P.length;i--;){var p=P[i];if(4!==p.readyState)try{p.abort()}catch(d){_.error("error in aborting ajax")}}P=[],_.resume()}return!1}}var d=[],m=1,_=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),n,e.extend({name:_.selector},r))});if(_.data("terminal"))return _.data("terminal");if(_.length===0)throw'Sorry, but terminal said that "'+_.selector+'" is not valid selector!';var B=[],j,F,I=0,q=[],R,U=H.length(),z,W=[],X,V,J,K=[],Q=e.extend({},e.terminal.defaults,{name:_.selector},r||{}),G=!Q.enabled;e.extend(_,e.omap({clear:function(){R.html(""),tt.set(""),q=[];try{Q.onClear(_)}catch(e){throw l(e,"onClear"),e}return _.attr({scrollTop:0}),_},export_view:function(){return{prompt:_.get_prompt(),command:_.get_command(),position:tt.position(),lines:q.slice(0)}},import_view:function(e){return _.set_prompt(e.prompt),_.set_command(e.command),tt.position(e.position),q=e.lines,_.resize(),_},exec:function(e,t){return G?K.push([e,t]):E(e,t),_},commands:function(){return et.top().interpreter},greetings:function(){return b(),_},paused:function(){return G},pause:function(){return tt&&(G=!0,_.disable(),tt.hidden()),_},resume:function(){if(tt){_.enable();var e=K;K=[];while(e.length){var t=e.shift();_.exec.apply(_,t)}tt.visible(),h()}return _},cols:function(){return z},rows:function(){var t=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),n=Math.floor(_.height()/t.height());return t.remove(),n},history:function(){return tt.history()},next:function(){if(H.length()===1)return _;var t=_.offset().top,n=_.height(),r=_.scrollTop();if(!C(_))return _.enable(),e("html,body").animate({scrollTop:t-50},500),_;H.front().disable();var i=H.rotate().enable(),s=i.offset().top-50;e("html,body").animate({scrollTop:s},500);try{Q.onTerminalChange(i)}catch(o){throw l(o,"onTerminalChange"),o}return i},focus:function(e,t){return _.oneTime(1,function(){if(H.length()===1)if(e===!1)try{!t&&Q.onBlur(_)!==!1&&_.disable()}catch(n){throw l(n,"onBlur"),n}else try{!t&&Q.onFocus(_)!==!1&&_.enable()}catch(n){throw l(n,"onFocus"),n}else if(e===!1)_.next();else{var r=H.front();if(r!=_){r.disable();if(!t)try{Q.onTerminalChange(_)}catch(n){throw l(n,"onTerminalChange"),n}}H.set(_),_.enable()}}),_},enable:function(){return z===t&&_.resize(),G&&tt&&(tt.enable(),G=!1),_},disable:function(){return tt&&(G=!0,tt.disable()),_},enabled:function(){return G},signature:function(){var e=_.cols(),t=e<15?null:e<35?0:e<55?1:e<64?2:e<75?3:4;return t!==null?D[t].join("\n")+"\n":""},version:function(){return A},get_command:function(){return tt.get()},insert:function(e){if(typeof e=="string")return tt.insert(e),_;throw"insert function argument is not a string"},set_prompt:function(e){return p("prompt",e)&&(typeof e=="function"?tt.prompt(function(t){e(t,_)}):tt.prompt(e),et.top().prompt=e),_},get_prompt:function(){return et.top().prompt},set_command:function(e){return tt.set(e),_},set_mask:function(e){return tt.mask(e),_},get_output:function(t){return t?q:e.map(q,function(e){return typeof e[0]=="function"?e[0]():e[0]}).join("\n")},resize:function(t,n){t&&n&&(_.width(t),_.height(n)),t=_.width(),n=_.height();var r=k(_);if(r!==z){z=r,tt.resize(z);var i=R.empty().detach();e.each(q,function(e,t){g.apply(null,t)}),tt.before(i),y(),typeof Q.onResize=="function"&&(J!==n||V!==t)&&Q.onResize(_);if(J!==n||V!==t)J=n,V=t}return _},flush:function(){y()},echo:function(t,n){try{var r=e.extend({flush:!0,raw:!1,finalize:e.noop},n||{});d=[],g(t,r),r.flush&&y(),q.push([t,r]);if(r.outputLimit>=0){var i=r.outputLimit===0?_.rows():r.outputLimit,s=R.find("div div");s.length>i&&s.slice(0,q.length-i+1).remove()}Y(),console.log(t)}catch(o){alert("terminal.echo "+f(o)+"\n"+o.stack)}return _},error:function(t,n){return _.echo("[[;#f00;]"+e.terminal.escape_brackets(t).replace(/\\$/,"&#92;")+"]",n)},scroll:function(e){var t;return e=Math.round(e),j.prop?(e>j.prop("scrollTop")&&e>0&&j.prop("scrollTop",0),t=j.prop("scrollTop"),j.scrollTop(t+e),_):(e>j.attr("scrollTop")&&e>0&&j.attr("scrollTop",0),t=j.attr("scrollTop"),j.scrollTop(t+e),_)},logout:Q.login?function(){while(et.size()>1)et.pop();return x(),_}:function(){throw"You don't have login function"},token:Q.login?function(){var t=Q.name;return e.Storage.get((t?t+"_":"")+U+"_token")}:e.noop,login_name:Q.login?function(){var t=Q.name;return e.Storage.get((t?t+"_":"")+U+"_login")}:e.noop,name:function(){return et.top().name},push:function(t,n){if(n&&(!n.prompt||p("prompt",n.prompt))||!n){n=n||{},n.name=n.name||F,n.prompt=n.prompt||n.name+" ",B.push(n.name);var r=et.top();r&&(r.mask=tt.mask()),a(t,function(t){et.push(e.extend({},t,n)),N()})}return _},pop:function(n){n!==t&&w(n),B.pop();if(et.top().name===Q.name){if(Q.login){x();if(e.type(Q.onExit)==="function")try{Q.onExit(_)}catch(r){throw l(r,"onExit"),r}}}else{var i=et.pop();N();if(e.type(i.onExit)==="function")try{i.onExit(_)}catch(r){throw l(r,"onExit"),r}_.set_mask(et.top().mask)}return _},level:function(){return et.size()},reset:function(){_.clear();while(et.size()>1)et.pop();return O(),_},purge:function(){var t=(Q.name?Q.name+"_":"")+U+"_",n=e.Storage.get(t+"interpreters");return e.each((new Function("return "+n+";"))(),function(t,n){e.Storage.remove(n+"_commands")}),e.Storage.remove(t+"interpreters"),e.Storage.remove(t+"token"),e.Storage.remove(t+"login"),_},destroy:function(){return tt.destroy().remove(),R.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),_.unbind("click, mousewheel"),_.removeData("terminal").removeClass("terminal"),Q.width&&_.css("width",""),Q.height&&_.css("height",""),_}},function(e,t){return function(){try{return t.apply(this,Array.prototype.slice.apply(arguments))}catch(n){throw e!=="exec"&&l(n,"TERMINAL"),n}}}));var Y=function(){var e=L(_);return function(){e!==L(_)&&(_.resize(),e=L(_))}}();Q.width&&_.width(Q.width),Q.height&&_.height(Q.height),!navigator.userAgent.toLowerCase().match(/(webkit)[ \/]([\w.]+)/)&&_[0].tagName.toLowerCase()=="body"?j=e("html"):j=_,e(document).bind("ajaxSend.terminal",function(e,t,n){P.push(t)}),e("<div>").addClass("terminal-header").appendTo(_),R=e("<div>").addClass("terminal-output").appendTo(_),_.addClass("terminal");if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)_.click(function(){_.find("textarea").focus()}),_.find("textarea").focus();if(Q.login&&typeof Q.onBeforeLogin=="function")try{Q.onBeforeLogin(_)}catch(Z){throw l(Z,"onBeforeLogin"),Z}typeof n=="string"&&(typeof Q.login=="string"||Q.login)&&(Q.login=function(t){return function(r,i,s,o){_.pause(),e.jrpc(n,t,[r,i],function(e){_.resume(),!e.error&&e.result?s(e.result):s(null)},function(e,t,n){_.resume(),_.error("&#91;AJAX&#92; Response: "+t+"\n"+e.responseText)})}}(e.type(Q.login)==="boolean"?"login":Q.login));if(p("prompt",Q.prompt)){var et,tt;a(n,function(n){et=new c(e.extend({name:Q.name,prompt:Q.prompt,greetings:Q.greetings},n)),tt=e("<div/>").appendTo(_).cmd({prompt:Q.prompt,history:Q.history,historyFilter:Q.historyFilter,historySize:Q.historySize,width:"100%",keydown:M,keypress:Q.keypress?function(e){return Q.keypress(e,_)}:null,onCommandChange:function(t){if(e.type(Q.onCommandChange)==="function")try{Q.onCommandChange(t,_)}catch(n){throw l(n,"onCommandChange"),n}h()},commands:E}),H.append(_),Q.enabled===!0?_.focus(t,!0):_.disable(),e(document).bind("click.terminal",function(t){!e(t.target).parents().hasClass("terminal")&&Q.onBlur(_)!==!1&&_.disable()}),_.click(function(){_.focus()}),Q.login&&_.token&&!_.token()&&_.login_name&&!_.login_name()?S():O(),z=k(_),tt.resize(z),_.oneTime(100,function(){e(window).bind("resize.terminal",function(){if(_.is(":visible")){var e=_.width(),t=_.height();(J!==t||V!==e)&&_.resize()}})}),e.type(e.fn.init.prototype.mousewheel)==="function"&&_.mousewheel(function(e,t){return t>0?_.scroll(-40):_.scroll(40),!1},!0)})}return _.data("terminal",_),_}}(jQuery),define("jquery.terminal",function(){}),define("controllers/app",["jquery","underscore","dc","Pusher","sammy","form2js","js2form","hbs!tpl/modals/app.createbuild.html","jquery.terminal","jquery.easyModal","jquery.ui.widget","crossfilter","d3"],function(e,t,n,r,i,s,o,u){console.log("Loaded app");var e=e||e(function(e){e=e});return{start:function(){console.log("starting app"),e("#modals:first").append(u({build:"",name:"",url:""},{partials:{}})),e(".modal.c0").easyModal({top:200,overlay:.2}),SP.Terminal=e("fieldset#logs #terminal").terminal({},{enabled:!1,greetings:"Ready.",onFocus:function(){return!1},onBlur:function(){return!0}}),r.log=function(e){SP.Terminal.echo("  rec'd -> "+e+"\n",{finalize:function(e){e.css("color","white")}})};var t=new r(SP.WS.key),a=t.subscribe(SP.WS.channel);t.connection.bind("state_change",function(t){e("fieldset#logs #terminal-header").text(t.current)}),t.connection.bind("connecting_in",function(e){alert("I haven't been able to establish a connection for the console.  I will try again in "+e+" seconds.")}),t.connection.bind("subscription_error",function(e){alert("Error connecting to SparkDash network")}),t.connection.bind("error",function(e){e.data.code===4004&&SP.Terminal.echo(">>> detected Pusher limit error. Upgrade your account.",{finalize:function(e){e.css("color","red")}})}),a.bind("log@main",function(e){SP.Terminal.echo(JSON.stringify(e),{finalize:function(e){e.css("color","yellow")}})}),a.bind("message@main",function(e){SP.Terminal.echo(JSON.stringify(e),{finalize:function(e){e.css("color","blue")}})});var f=i(function(){e(document).click(function(t){console.log(e(t.target)),console.log("Action: "+e(t.target).attr("action"));var n=e(t.target).attr("action");switch(n){case"clearform":e(".modal input").each(function(t){e(this).css({border:"1px solid #CCCCCC"}),e(this).val("")}),e(".modal fieldset").each(function(t){e(this).removeAttr("data-tip")});break;case"user.logout":SP.logout();break;case"addNewAppBuild":e(".modal.c0").trigger("openModal");break;case"deleteAppBuild":var r=e(t.target).closest("tr").attr("id");SP.Network.http({url:window.location.pathname+"/_deleteBuild",type:"POST",dataType:"json",data:{appBuild:r}}).done(function(n){n.status==200?e(t.target).closest("tr").remove():alert(n.message)});break;case"editAppBuild":o(document.getElementById("form-c0"),JSON.parse(e(t.target).closest("tr").attr("data"))),e(".modal.c0").trigger("openModal");break;case"setAppBuild":console.log("setAppBuild");var r=e(t.target).closest("tr").attr("id");e(".modal.appkey textarea.accesstoken").val("Loading.."),SP.Network.http({url:window.location.pathname+"/_setCurrentBuild",type:"POST",dataType:"json",data:{current_build:r}}).done(function(n){n.status==200?(e("fieldset#version label#current_build i").text(r),e("fieldset#version label#current_build").highlight(),e("fieldset#version #versionTable td.activate button").each(function(t){e(this).removeClass("pure-button-disabled").addClass("pure-button-primary").attr("disabled",!1)}),e(t.target).removeClass("pure-button-primary").addClass("pure-button-disabled"),e("#forceUpdateButton").removeClass("pure-button-disabled").addClass("pure-button-warning").attr("disabled",!1).css({opacity:1})):alert(n.message)});break;case"runForceUpdate":e("#forceUpdateButton").removeClass("pure-button-warning").addClass("pure-button-disabled").attr("disabled",!0).css({opacity:.1}),SP.Network.http({url:window.location.pathname+"/_update",type:"POST",dataType:"json",data:{type:"current_build"}}).done(function(e){SP.Terminal.echo(JSON.stringify(e),{finalize:function(e){e.css("color","green")}})})}}),e(".modal.c0 input").on("blur",function(t){var n=!1;e(".modal.c0 input").each(function(){n=e(this).val().length>0?!0:!1});if(n){var r=s("form-c0",".",!0,function(e){console.log(e)});e(".modal.c0 #versionButton").removeClass("pure-button-disabled").addClass("pure-button-primary").attr("disabled",!1)}else e(".modal.c0 #versionButton").removeClass("pure-button-primary").addClass("pure-button-disabled").attr("disabled",!0)}),e("button").on("click",function(){e(".modal.c1 input").each(function(t){e(this).css({border:"1px solid #CCCCCC"})}),e(".modal.c1 fieldset").each(function(t){e(this).removeAttr("data-tip")});if(e(this).attr("data")=="submit-c0"){var t=s("form-c0",".",!0,function(e){console.log(e)});SP.Network.http({url:window.location.pathname+"/_createBuild",type:"POST",dataType:"json",data:{data:t}}).done(function(n){n.status==200?(e("#versionTable tr:last").after('<tr id="'+t.build+"\" data='"+JSON.stringify(t)+"'><td>"+t.build+"</td><td>"+t.url+'</td><td class="edit"><button class="pure-button pure-button-xsmall" action="editAppBuild">Edit</button></td><td class="activate"><button class="pure-button pure-button-xsmall" action="setAppBuild">Set Active</button></td><td><button class="pure-button pure-button-xsmall pure-button-error" action="deleteAppBuild">X</button></td></tr>'),e("#versionTable tr.empty").remove(),e(".modal.c0 #versionButton").removeClass("pure-button-primary").addClass("pure-button-disabled").attr("disabled",!0),e(".modal.c0").trigger("closeModal"),e("#versionTable tr:last").highlight()):alert(n.response)})}}),e("form").submit(function(e){return e.preventDefault(),!1});var t=n.lineChart("#chart");e("#chart .loading_dots").remove(),d3.csv("/img/morley.csv",function(e,n){n.forEach(function(e){e.Speed=+e.Speed});var r=crossfilter(n),i=r.dimension(function(e){return+e.Run}),s=i.group().reduceSum(function(e){return e.Speed*e.Run/1e3});t.width(768).height(480).x(d3.scale.linear().domain([6,20])).brushOn(!1).yAxisLabel("This is the Y Axis!").dimension(i).group(s),t.render()})});return f.run(),!0}}}),define("hbs!tpl/modals/app.new.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c1">\n	<div class="header">\n		<h2>Create a new app</h2>\n	</div>\n	<form id="form-c1" action="" class="pure-form">\n	  <fieldset class="field1">\n	    <div class="pure-control-group">\n          <label for="package" data-tip="Ex: com.yourcompany.app">Package / Bundle ID:</label>\n          <input type="text" name="appPackage" id="package">\n      </div>\n    </fieldset>\n    <fieldset class="field3">\n	    <div class="pure-control-group">\n          <label for="title" data-tip="Give your app a name.">App Title</label>\n          <input type="text" name="appTitle" id="title">\n      </div>\n    </fieldset>\n		<div class="clearfix" style="text-align: center;">\n      <button id="newappButton" type="submit" class="pure-button pure-button-primary" data="submit-c1">Create App</button>\n    </div>\n	</form>\n</div>'})}),define("hbs!tpl/modals/app.license.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal appkey">\n	<div class="header">\n		<h2>App License</h2>\n		<div class="package" style="font-size:16px;text-align:center;"></div>\n	</div>\n  <div>\n      <div id="secret" style="margin-top: 15px;padding: 10px;border: 1px solid #EFEFEF;" data-tip="Keep this a secret. It\'s used to verify your license.">\n        <div style="float:left;margin-right:10px;">Secret:</div>\n        <div style="font-family:Courier;color:#ff0000;" class="secret"></div>\n      </div>\n      <div id="token" style="margin-top: 10px;padding: 10px;border: 1px solid #EFEFEF;" data-tip="Consider it your SparkDash API key. Don\'t share it with anyone. "> \n        <div style="float:left;margin-right:10px;">Auth Token:</div>\n        <div style="float:right;margin-top:-10px;margin-right:-10px;"><button class="pure-button pure-button-small" action="generateAuthToken">Regenerate</button></div>\n        <textarea style="font-family: Courier; color: rgb(0, 34, 255); border: medium none; width: 100%; margin-top: 15px; font-size: 21px; min-height: 50px;" class="accesstoken"></textarea>\n      </div>\n      <div id="license" style="margin-top: 10px;padding: 10px;border: 1px solid #EFEFEF;"> \n        <div style="float:left;margin-right:10px;">Spark License:</div>\n        <textarea class="appkey" style="font-family:Courier;color:#0022FF;min-height:150px;border:none;width: 100%;margin-top: 15px;font-size: 21px;"></textarea>\n      </div>\n  </div>\n</div>'})}),define("hbs!tpl/rows/row.applist.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){function h(e,t){var r="",i;return r+='\n              <li style="float:left;width:175px;height:50px;"><div style="font-size:42px;float:left;">',(i=n.device_count)?i=i.call(e,{hash:{},data:t}):(i=e.device_count,i=typeof i===a?i.apply(e):i),r+=f(i)+'</div><div style="font-size:15px;float:left;width:40px;margin-top:4px;margin-left: 5px;">Total Devices</div></li>\n              <li style="float:left;width:175px;height:50px;"><div style="font-size:42px;float:left;">',(i=n.active_count)?i=i.call(e,{hash:{},data:t}):(i=e.active_count,i=typeof i===a?i.apply(e):i),r+=f(i)+'</div><div style="font-size:15px;float:left;width:40px;margin-top:4px;margin-left: 5px;">Active Users</div></li>\n              <li style="float:left;width:175px;height:50px;"><div style="font-size:42px;float:left;">',(i=n.event_count)?i=i.call(e,{hash:{},data:t}):(i=e.event_count,i=typeof i===a?i.apply(e):i),r+=f(i)+'</div><div style="font-size:15px;float:left;width:40px;margin-top:4px;margin-left: 5px;">Total Events</div></li>\n              ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.blockHelperMissing;s+='\n  <div class="pure-u-1-1" style="clear:both;">\n    <div class="l-box" style="border:1px solid #999;border-radius:5px;margin-top:10px;background-color:#FFF;padding:10px;letter-spacing:0px;height:155px;">\n      <div>\n        <div style="float:right;height:50px;padding-top: 10px;">\n          <a class="pure-button pure-button-success" href="/',(o=n._id)?o=o.call(t,{hash:{},data:i}):(o=t._id,o=typeof o===a?o.apply(t):o),s+=f(o)+'/sparkdash">Launch SparkDash</a>\n        </div>\n      </div>\n      <div style="width:350px;height:72px;">\n        <div style="float: left;width:72px;height:72px;background-image:url(\'/img/icon.android.png\');background-repeat:no-repeat;margin-right:10px;"></div>\n        <div style="padding: 10px;">\n          <div style="font-size:26px;font-weight:bold;"><a href="/',(o=n._id)?o=o.call(t,{hash:{},data:i}):(o=t._id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" style="text-decoration:none;color:#0078E7;">',(o=n.appTitle)?o=o.call(t,{hash:{},data:i}):(o=t.appTitle,o=typeof o===a?o.apply(t):o),s+=f(o)+'</a></div>\n          <div style="font-size:16px;">Package: ',(o=n.appPackage)?o=o.call(t,{hash:{},data:i}):(o=t.appPackage,o=typeof o===a?o.apply(t):o),s+=f(o)+'</div>\n        </div>\n      </div>\n      <div style="height:65px;margin-top: -10px;">\n        <div style="float:right;position:relative;bottom:-25px;">\n          <div class="icon keys" action="showAppKey" data="',(o=n._id)?o=o.call(t,{hash:{},data:i}):(o=t._id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-tip="App license and API key"></div>\n        </div>  \n        <div style="height:65px;width:550px;margin-left:80px;">\n          <div style="">\n            <ul style="padding:0;">\n              ',u={hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i},(o=n.analytics)?o=o.call(t,u):(o=t.analytics,o=typeof o===a?o.apply(t):o),n.analytics||(o=c.call(t,o,u));if(o||o===0)s+=o;return s+="\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n",s})});var Model=function(e,t){var n=function(t){this.attributes=Model.Utils.extend({},t),this.changes={},this.errors=new Model.Errors(this),this.uid=[e,Model.UID.generate()].join("-"),Model.Utils.isFunction(this.initialize)&&this.initialize()};return Model.Module.extend.call(n,Model.Module),n._name=e,n.collection=[],n.unique_key="id",n.extend(Model.Callbacks).extend(Model.ClassMethods),n.prototype=new Model.Base,n.prototype.constructor=n,Model.Utils.isFunction(t)&&t.call(n,n,n.prototype),n};Model.Callbacks={bind:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},trigger:function(e,t){this.callbacks=this.callbacks||{};var n=this.callbacks[e];if(n)for(var r=0;r<n.length;r++)n[r].apply(this,t||[]);return this},unbind:function(e,t){this.callbacks=this.callbacks||{};if(t)for(var n=this.callbacks[e]||[],r=0;r<n.length;r++)n[r]===t&&this.callbacks[e].splice(r,1);else delete this.callbacks[e];return this}},Model.ClassMethods={add:function(e){var t=e.id();return Model.Utils.inArray(this.collection,e)===-1&&(!t||!this.find(t))&&(this.collection.push(e),this.trigger("add",[e])),this},all:function(){return this.collection.slice()},chain:function(e){return Model.Utils.extend({},this,{collection:e||[]})},count:function(){return this.all().length},detect:function(e){for(var t=this.all(),n,r=0,i=t.length;r<i;r++){n=t[r];if(e.call(n,n,r))return n}},each:function(e,t){for(var n=this.all(),r=0,i=n.length;r<i;r++)e.call(t||n[r],n[r],r,n);return this},find:function(e){return this.detect(function(){return this.id()==e})},first:function(){return this.all()[0]},load:function(e){if(this._persistence){var t=this;this._persistence.read(function(n){for(var r=0,i=n.length;r<i;r++)t.add(n[r]);e&&e.call(t,n)})}return this},last:function(){var e=this.all();return e[e.length-1]},map:function(e,t){for(var n=this.all(),r=[],i=0,s=n.length;i<s;i++)r.push(e.call(t||n[i],n[i],i,n));return r},persistence:function(e){if(arguments.length==0)return this._persistence;var t=Array.prototype.slice.call(arguments,1);return t.unshift(this),this._persistence=e.apply(e,t),this},pluck:function(e){for(var t=this.all(),n=[],r=0,i=t.length;r<i;r++)n.push(t[r].attr(e));return n},remove:function(e){for(var t,n=0,r=this.collection.length;n<r;n++)if(this.collection[n]===e){t=n;break}return t!=undefined?(this.collection.splice(t,1),this.trigger("remove",[e]),!0):!1},reverse:function(){return this.chain(this.all().reverse())},select:function(e,t){for(var n=this.all(),r=[],i,s=0,o=n.length;s<o;s++)i=n[s],e.call(t||i,i,s,n)&&r.push(i);return this.chain(r)},sort:function(e){return this.chain(this.all().sort(e))},sortBy:function(e){var t=Model.Utils.isFunction(e);return this.sort(function(n,r){var i=t?e.call(n):n.attr(e),s=t?e.call(r):r.attr(e);return i<s?-1:i>s?1:0})},use:function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(this),e.apply(this,t),this}},Model.Errors=function(e){this.errors={},this.model=e},Model.Errors.prototype={add:function(e,t){return this.errors[e]||(this.errors[e]=[]),this.errors[e].push(t),this},all:function(){return this.errors},clear:function(){return this.errors={},this},each:function(e){for(var t in this.errors)for(var n=0;n<this.errors[t].length;n++)e.call(this,t,this.errors[t][n]);return this},on:function(e){return this.errors[e]||[]},size:function(){var e=0;return this.each(function(){e++}),e}},Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(e,t){if(arguments.length===0)return Model.Utils.extend({},this.attributes,this.changes);if(arguments.length===2)return this.attributes[e]===t?delete this.changes[e]:this.changes[e]=t,this.trigger("change:"+e,[this]),this;if(typeof e=="object"){for(var n in e)this.attr(n,e[n]);return this.trigger("change",[this]),this}return e in this.changes?this.changes[e]:this.attributes[e]},callPersistMethod:function(e,t){var n=this,r=function(r){r&&(n.merge(n.changes).reset(),e==="destroy"?n.constructor.remove(n):n.constructor.add(n),n.trigger(e));var i;return t&&(i=t.apply(n,arguments)),i};this.constructor._persistence?this.constructor._persistence[e](this,r):r.call(this,!0)},destroy:function(e){return this.callPersistMethod("destroy",e),this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(e){return Model.Utils.extend(this.attributes,e),this},newRecord:function(){return this.id()===undefined},reset:function(){return this.errors.clear(),this.changes={},this},save:function(e){return this.valid()?this.callPersistMethod(this.newRecord()?"create":"update",e):e&&e(!1),this},valid:function(){return this.errors.clear(),this.validate(),this.errors.size()===0},validate:function(){return this}},Model.localStorage=function(e){if(!window.localStorage)return{create:function(e,t){t(!0)},destroy:function(e,t){t(!0)},read:function(e){e([])},update:function(e,t){t(!0)}};var t=[e._name,"collection"].join("-"),n=function(){var e=localStorage[t];return e?JSON.parse(e):[]},r=function(e){localStorage.setItem(e.uid,JSON.stringify(e.asJSON())),e=e.uid;var r=n();Model.Utils.inArray(r,e)===-1&&(r.push(e),localStorage.setItem(t,JSON.stringify(r)))};return{create:function(e,t){r(e),t(!0)},destroy:function(e,r){localStorage.removeItem(e.uid);var i=e.uid,s=n();i=Model.Utils.inArray(s,i),i>-1&&(s.splice(i,1),localStorage.setItem(t,JSON.stringify(s))),r(!0)},read:function(t){if(!t)return!1;for(var r=e.map(function(){return this.uid}),i=n(),s=[],o,u,f=0,l=i.length;f<l;f++)u=i[f],Model.Utils.inArray(r,u)==-1&&(o=JSON.parse(localStorage[u]),o=new e(o),o.uid=u,s.push(o));t(s)},update:function(e,t){r(e),t(!0)}}},Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)},Model.Module={extend:function(e){return Model.Utils.extend(this,e),this},include:function(e){return Model.Utils.extend(this.prototype,e),this}},Model.REST=function(e,t,n){var r=/:([\w\d]+)/g,i=function(){for(var e=[],n;(n=r.exec(t))!==null;)e.push(n[1]);return e}();return Model.Utils.extend({path:function(e){var n=t;return jQuery.each(i,function(t,r){n=n.replace(":"+r,e.attributes[r])}),n},create:function(e,t){return this.xhr("POST",this.create_path(e),e,t)},create_path:function(e){return this.path(e)},destroy:function(e,t){return this.xhr("DELETE",this.destroy_path(e),e,t)},destroy_path:function(e){return this.update_path(e)},params:function(e){var t;if(e){var n=e.asJSON();delete n[e.constructor.unique_key],t={},t[e.constructor._name.toLowerCase()]=n}else t=null;return jQuery.ajaxSettings.data&&(t=Model.Utils.extend({},jQuery.ajaxSettings.data,t)),JSON.stringify(t)},read:function(t){return this.xhr("GET",this.read_path(),null,function(n,r,i){i=jQuery.makeArray(i),n=[],r=0;for(var s=i.length;r<s;r++)n.push(new e(i[r]));t(n)})},read_path:function(){return t},update:function(e,t){return this.xhr("PUT",this.update_path(e),e,t)},update_path:function(e){return[this.path(e),e.id()].join("/")},xhr:function(e,t,n,r){var i=this,s=e=="GET"?undefined:this.params(n);return jQuery.ajax({type:e,url:t,contentType:"application/json",dataType:"json",data:s,dataFilter:function(e){return/\S/.test(e)?e:undefined},complete:function(e,t){i.xhrComplete(e,t,n,r)}})},xhrComplete:function(e,t,n,r){var i=Model.REST["handle"+e.status];i&&i.call(this,e,t,n),t=t==="success",i=Model.REST.parseResponseData(e),t&&n&&i&&n.attr(i),r&&r.call(n,t,e,i)}},n)},Model.RestPersistence=Model.REST,Model.REST.handle422=function(e,t,n){if(e=Model.REST.parseResponseData(e)){n.errors.clear();for(var r in e)for(t=0;t<e[r].length;t++)n.errors.add(r,e[r][t])}},Model.REST.parseResponseData=function(e){try{return/\S/.test(e.responseText)?jQuery.parseJSON(e.responseText):undefined}catch(t){Model.Log(t)}},Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){return this.counter=0,this}},Model.Utils={extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0,r=t.length;n<r;n++)for(var i in t[n])e[i]=t[n][i];return e},inArray:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"}},Model.VERSION="0.11.0",Model.Base=function(){function e(){}return e.prototype=Model.Utils.extend({},Model.Callbacks,Model.InstanceMethods),e}(),define("jsmodel",function(){}),define("controllers/apps",["jquery","underscore","sammy","form2js","hbs!tpl/modals/alerts.html","hbs!tpl/modals/app.new.html","hbs!tpl/modals/app.license.html","hbs!tpl/rows/row.applist.html","jquery.easyModal","jquery.ui.widget","jsmodel"],function(e,t,n,r,i,s,o,u){console.log("Loaded apps"),console.log(this);var e=e||e(function(e){e=e}),a=!1;return{start:function(){console.log("starting apps"),SP.DB.apps.bind("add",function(t){e(".modal.c1").trigger("closeModal"),e("#applist:first").append(u(t.asJSON(),{partials:{}}))}),SP.Network.http({url:window.location.pathname,type:"GET",cache:!1}).done(function(n){e("#applist .loading_dots").remove(),t.each(n.message,function(e){var t=new SP.DB.apps(e);t.save()})}),e("#modals:first").append(i({},{partials:{}})),e("#modals:first").append(s({},{partials:{}})),e("#modals:first").append(o({},{partials:{}})),e(".modal.c1").easyModal({top:200,overlay:.2}),e(".modal.appkey").easyModal({top:200,overlay:.2});var f=n(function(){e(document).click(function(t){console.log(e(t.target)),console.log("Action: "+e(t.target).attr("action"));var n=e(t.target).attr("action");switch(n){case"clearform":e(".modal input").each(function(t){e(this).css({border:"1px solid #CCCCCC"}),e(this).val("")}),e(".modal fieldset").each(function(t){e(this).removeAttr("data-tip")});break;case"user.logout":SP.logout();break;case"app.new":e(".modal.c1").trigger("openModal");break;case"showAppKey":var r=SP.DB.apps.find_by_ID(e(t.target).attr("data")).asJSON();e(".modal.appkey").trigger("openModal"),e(".modal.appkey textarea.appkey").val(r.key),e(".modal.appkey textarea.accesstoken").val(r.access_token||"Auth Missing"),e(".modal.appkey div.secret").text(r.seed),e(".modal.appkey div.package").text(r.pkg);break;case"launchLog":alert("Future home of Application Manager. \n- Set app version to enforce auto-upgrade\n- View device logs\n- Application Settings");return;case"generateAuthToken":e(".modal.appkey textarea.accesstoken").val("Loading.."),SP.Network.http({url:window.location.pathname+"/_newSession",type:"POST",dataType:"json",data:{_id:a._id}}).done(function(t){e(".modal.appkey textarea.accesstoken").val(t.access_token||t.message),e(".modal.appkey #token").highlight()})}}),e(".modal.c1 input").on("blur",function(t){var n=!1;e(".modal.c1 input").each(function(){n=e(this).val().length>0?!0:!1});if(n){var i=r("form-c1",".",!0,function(e){console.log(e)});e(".modal.c1 #newappButton").removeClass("pure-button-disabled").addClass("pure-button-primary").attr("disabled",!1)}else e(".modal.c1 #newappButton").removeClass("pure-button-primary").addClass("pure-button-disabled").attr("disabled",!0)}),e("button").on("click",function(){e(".modal.c1 input").each(function(t){e(this).css({border:"1px solid #CCCCCC"})}),e(".modal.c1 fieldset").each(function(t){e(this).removeAttr("data-tip")});if(e(this).attr("data")=="submit-c1"){var t=r("form-c1",".",!0,function(e){});SP.Network.http({url:"/_apps",type:"POST",dataType:"json",data:t}).done(function(t){console.log(t);if(t.status==200){var n=new SP.DB.apps(t.message);n.save()}t.status==301&&(e(".modal.c1 input#package").css({border:"2px solid #ff0000"}),e(".modal.c1 fieldset.field1").attr("data-tip",t.message))})}}),e("form").submit(function(e){return e.preventDefault(),!1})});return f.run(),!0}}}),define("shortlink",[],function(){var e={base52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",base58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",base64:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"},t=e.base58,n=t.length,r=function(e,t){var r="",e=parseInt(e,10)||5;for(var i=0;i<e;i++){var s=Math.floor(Math.random()*n);s===0&&i===0&&(s=1),r+=t[s]}return r},i=function(e,t){var r="";e=parseInt(e,10);while(e>=n){var i=e%n;r=t[i]+r,e=parseInt(e/n,10)}return e&&(r=t[e]+r),r},s=function(e,t){var r=0,i=1;for(var s=e.length-1;s>=0;s--)r+=i*t.indexOf(e[s]),i*=n;return r};return{set:function(r){return r&&e.hasOwnProperty(r)?t=e[r]:r&&typeof r=="string"&&r.length>10&&(t=r),n=t.length,this},generate:function(e){return r(e,t)},encode:function(e){return i(e,t)},decode:function(e){return s(e,t)}}}),define("controllers/data",["jquery","sammy","shortlink","hbs!tpl/modals/alerts.html","jquery.easyModal","jquery.ui.widget"],function(e,t,n,r){function i(t){e("#menu nav a").each(function(){e(this).attr("data")&&(this.href="/#/"+t+"/"+e(this).attr("data"))})}console.log("Loaded dash");var e=e||e(function(e){e=e});return{start:function(){console.log("starting data"),SP.Pace.start();var i=n.generate(6);console.log("Generate random shortlink: "+i);var s=n.decode(i);console.log("Decode this shortlink to int: "+s);var o=n.encode(s);console.log("Encode this int to shortlink: "+o);var u=n.decode(o);console.log("Decode this shortlink to int: "+u),console.log("--------------"),e("#modals:first").append(r({},{partials:{}})),e(".modal.c0").easyModal({top:200,overlay:.2}),e(".modal.c2").easyModal({top:200,overlay:.2});var a=t(function(){e(document).click(function(t){console.log(e(t.target)),console.log("Action: "+e(t.target).attr("action"));var n=e(t.target).attr("action");switch(n){case"user.logout":a.setLocation("#/logout")}}),e("button").on("click",function(){e(this).attr("data")=="submit-c1"&&e(".modal.c1").trigger("closeModal")}),e("form").submit(function(e){return e.preventDefault(),!1}),this.get("#/logout",function(){e("#layout #main").animate({opacity:0},200,"linear",function(){e("#main-menu-container").css({top:"-75px"}),e("#menu").css({left:0}),window.location.href="/logout"})})});return a.run(),!0}}}),define("controllers/login",["jquery"],function(e){console.log("Loaded login");var e=e||e(function(e){e=e});return{start:function(){return console.log("starting login"),!0}}}),define("hbs!tpl/modals/app.settings.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div id="options" class="avgrund-popup">\n    <div id="list">\n      <ul>\n        <li class="active"><i class="icon-dashboard"></i>System</li>\n        <li><i class="icon-table"></i>Layout</li>\n        <li><i class="icon-magic"></i>Style</li>\n        <li><i class="icon-hand-right"></i>Credits</li>\n      </ul>\n    </div>\n  <div id="view">\n    <div class="settings show">\n      <h1>System</h1>\n      <form>\n        <section>\n          <h2>Temperature</h2>\n          <div>\n            <input name="unitType" type="radio" value="f" id="fahrenheit" checked/>\n            <label for="fahrenheit">Fahrenheit</label>\n          </div>\n          <div>\n            <input name="unitType" type="radio" value="c" id="celsius"/>\n            <label for="celsius">Celsius</label>\n          </div>\n        </section>\n        <section>\n          <h2>Hours</h2>\n          <div>\n            <input name="clock" type="radio" value="12" id="time12" checked/>\n            <label for="time12">12</label>\n          </div>\n          <div>\n            <input name="clock" type="radio" value="24" id="time24"/>\n            <label for="time24">24</label>\n          </div>\n        </section>\n        <section>\n          <h2>Choose Your Language</h2>\n          <div>\n              <select name="lang" id="lang">\n                <option value="AF">Afrikaans</option>\n                <option value="AL">Albanian</option>\n                <option value="AR">Arabic</option>\n                <option value="HY">Armenian</option>\n                <option value="AZ">Azerbaijani</option>\n                <option value="EU">Basque</option>\n                <option value="BY">Belarusian</option>\n                <option value="BU">Bulgarian</option>\n                <option value="LI">British English</option>\n                <option value="MY">Burmese</option>\n                <option value="CA">Catalan</option>\n                <option value="CN">Chinese - Simplified</option>\n                <option value="TW">Chinese - Traditional</option>\n                <option value="CR">Croatian</option>\n                <option value="CZ">Czech</option>\n                <option value="DK">Danish</option>\n                <option value="DV">Dhivehi</option>\n                <option value="NL">Dutch</option>\n                <option value="EN" selected="selected">English</option>\n                <option value="EO">Esperanto</option>\n                <option value="ET">Estonian</option>\n                <option value="FA">Farsi</option>\n                <option value="FI">Finnish</option>\n                <option value="FR">French</option>\n                <option value="FC">French Canadian</option>\n                <option value="GZ">Galician</option>\n                <option value="DL">German</option>\n                <option value="KA">Georgian</option>\n                <option value="GR">Greek</option>\n                <option value="GU">Gujarati</option>\n                <option value="HT">Haitian Creole</option>\n                <option value="IL">Hebrew</option>\n                <option value="HI">Hindi</option>\n                <option value="HU">Hungarian</option>\n                <option value="IS">Icelandic</option>\n                <option value="IO">Ido</option>\n                <option value="ID">Indonesian</option>\n                <option value="IR">Irish Gaelic</option>\n                <option value="IT">Italian</option>\n                <option value="JP">Japanese</option>\n                <option value="JW">Javanese</option>\n                <option value="KM">Khmer</option>\n                <option value="KR">Korean</option>\n                <option value="KU">Kurdish</option>\n                <option value="LA">Latin</option>\n                <option value="LV">Latvian</option>\n                <option value="LT">Lithuanian</option>\n                <option value="ND">Low German</option>\n                <option value="MK">Macedonian</option>\n                <option value="MT">Maltese</option>\n                <option value="GM">Mandinka</option>\n                <option value="MI">Maori</option>\n                <option value="MR">Marathi</option>\n                <option value="MN">Mongolian</option>\n                <option value="NO">Norwegian</option>\n                <option value="OC">Occitan</option>\n                <option value="PS">Pashto</option>\n                <option value="GN">Plautdietsch</option>\n                <option value="PL">Polish</option>\n                <option value="BR">Portuguese</option>\n                <option value="PA">Punjabi</option>\n                <option value="RO">Romanian</option>\n                <option value="RU">Russian</option>\n                <option value="SR">Serbian</option>\n                <option value="SK">Slovak</option>\n                <option value="SL">Slovenian</option>\n                <option value="SP">Spanish</option>\n                <option value="SI">Swahili</option>\n                <option value="SW">Swedish</option>\n                <option value="CH">Swiss</option>\n                <option value="TL">Tagalog</option>\n                <option value="TT">Tatarish</option>\n                <option value="TH">Thai</option>\n                <option value="TR">Turkish</option>\n                <option value="TK">Turkmen</option>\n                <option value="UA">Ukrainian</option>\n                <option value="UZ">Uzbek</option>\n                <option value="VU">Vietnamese</option>\n                <option value="CY">Welsh</option>\n                <option value="SN">Wolof</option>\n                <option value="JI">Yiddish - transliterated</option>\n                <option value="YI">Yiddish - unicode</option>\n              </select>\n            </div>\n          </section>\n        <section>\n          <h2>Location Address <i>(optional)</i></h2>\n          <div>\n            <input type="text" name="address" id="address" placeholder="Boulder, CO, 80305, USA" />\n          </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Layout</h1>\n      <form>\n        <section>\n          <h2>Animation Toggle</h2>\n          <div>\n            <input type="radio" name="animation" id="animation-on" value="true" checked/>\n            <label for="animation-on">On</label>\n          </div>\n          <div>\n            <input type="radio" name="animation" id="animation-off" value="false"/>\n            <label for="animation-off">Off</label>\n          </div>\n        </section>\n        <section>\n          <h2>Seconds Toggle</h2>\n          <div>\n            <input name="seconds" type="radio" value="true" id="show-seconds" checked/>\n            <label for="show-seconds">On</label>\n          </div>\n          <div>\n            <input name="seconds" type="radio" value="false" id="hide-seconds"/>\n            <label for="hide-seconds">Off</label>\n          </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Style</h1>\n      <form>\n      <section>\n          <h2>Text Color</h2>\n          <div>\n            <input name="textColor" type="radio" value="dark-text" id="dark-text"/>\n            <label for="dark">Dark</label>\n          </div>\n          <div>\n            <input name="textColor" type="radio" value="light-text" id="light-text" checked/>\n            <label for="light">Light</label>\n          </div>\n        </section>\n        <section>\n          <h2>Background Color</h2>\n          <div id="color-pick">\n            <ul>\n              <li class="dark-bg active"><i class="icon-ok"></i></li>\n              <li class="light-bg"><i class="icon-ok"></i></li>\n              <li class="mint-bg"><i class="icon-ok"></i></li>\n              <li class="blue-bg"><i class="icon-ok"></i></li>\n              <li class="red-bg"><i class="icon-ok"></i></li>\n              <li class="orange-bg"><i class="icon-ok"></i></li>\n              <li class="green-bg"><i class="icon-ok"></i></li>\n              <li class="purple-bg"><i class="icon-ok"></i></li>\n              <li class="aqua-bg"><i class="icon-ok"></i></li>\n            </ul>\n            <input type="hidden" name="color" value="">\n            <div id="preview" class="dark-bg light-text">\n              <i>1</i>\n            </div>\n        </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Credits</h1>\n      <form>\n        <section>\n          <h2>Weather Icons</h2>\n          <div>\n            <a href="https://twitter.com/adamwhitcroft" target="_blank">Adam Whitcroft</a>\n          </div>\n        </section>\n        <section>\n          <h2>jQuery</h2>\n          <div>\n            <a href="http://jquery.com/" target="_blank">Homepage</a>\n          </div>\n        </section>\n        <section>\n          <h2>underscore.js</h2>\n          <div>\n            <a href="http://underscorejs.org/" target="_blank">Homepage</a>\n          </div>\n        </section>\n        <section>\n          <h2>Avgrund</h2>\n          <div>\n            <a href="https://twitter.com/hakimel" target="_blank">Hakim El Hattab</a>\n          </div>\n        </section>\n        <section>\n          <h2>Tipsy</h2>\n          <div>\n            <a href="https://github.com/jaz303/tipsy" target="_blank">Github</a>\n          </div>\n        </section>\n        <section>\n          <h2>Q.js</h2>\n          <div>\n            <a href="https://github.com/kriskowal/q" target="_blank">Github</a>\n          </div>\n        </section>\n        <section>\n          <h2>Geolib</h2>\n          <div>\n            <a href="https://github.com/manuelbieh/Geolib" target="_blank">Github</a>\n          </div>\n        </section>\n      </form>\n    </div>\n    <div class="promo">\n      <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ERRMQGDQL9SZA" target="_blank" id="gift">\n        <i class="icon-gift"></i>\n        <p>Think we\'ve done a good job?</p>\n        <p><b>Buy us a beer!</b></p>\n      </a>\n      <a href="https://twitter.com/share?text=Loving+the+new+updates+to+currently+http%3A%2F%2Fbit.ly%2FPMawVf+%23currently+%23chrome+by+%40vitaly_babiy+and+%40henrymodis" target="_blank" id="share"><i class="icon-twitter"></i>Share Currently</a>\n      <a href="https://twitter.com/vitaly_babiy" target="_blank" class="who vitaly"><b>Hacker:</b> @Vitaly</a>\n      <a href="https://twitter.com/henrymodis" target="_blank" class="who henry"><b>Designer:</b> @Henry</a>\n      <a class="normal" href="http://rainfalldesign.tumblr.com/">Updates</a>\n      <a class="normal" href="http://chromecurrently.uservoice.com" target="_blank" id="support">Support</a>\n    </div>\n  </div>\n  <a href="#" id="close"><i class="icon-remove"></i></a>\n</div>'})}),define("controllers/register",["jquery","hbs!tpl/modals/app.settings.html"],function(e,t){console.log("Loaded register");var e=e||e(function(e){e=e});return{start:function(n){return console.log("starting register"),e("#settings:first").append(t({},{partials:{}})),e("#options #list li").click(function(){var t=e(this);e("#options #list li.active").removeClass("active"),t.addClass("active"),e(".settings.show").fadeOut(0).removeClass("show");var n=e(this).index();e(settings[n]).fadeIn(100).addClass("show")}),!0}}}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D=[].slice,P={}.hasOwnProperty,H=function(e,t){function n(){this.constructor=e}for(var r in t)P.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};v={catchupTime:500,initialRate:.03,minTime:500,ghostTime:250,maxProgressPerFrame:10,easeFactor:1.25,restartOnPushState:!0,elements:{checkInterval:100,selectors:["body"]}},E=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?e:+(new Date)},x=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,d=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==x&&(x=function(e){return setTimeout(e,50)},d=function(e){return clearTimeout(e)}),N=function(e){var t,n;return t=E(),n=function(){var r;return r=E()-t,t=E(),e(r,function(){return x(n)})},n()},T=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?D.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,e):n[t]},m=function(){var e,t,n,r,i,s,o;for(t=arguments[0],r=2<=arguments.length?D.call(arguments,1):[],s=0,o=r.length;o>s;s++)if(n=r[s])for(e in n)P.call(n,e)&&(i=n[e],null!=t[e]&&"object"==typeof t[e]&&null!=i&&"object"==typeof i?m(t[e],i):t[e]=i);return t},g=function(e,t){var n,r,i;if(null==e&&(e="options"),null==t&&(t=!0),i=document.querySelector("[data-pace-"+e+"]")){if(n=i.getAttribute("data-pace-"+e),!t)return n;try{return JSON.parse(n)}catch(s){return r=s,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},null==window.Pace&&(window.Pace={}),S=Pace.options=m(v,window.paceOptions,g()),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){return null==this.el&&(this.el=document.createElement("div"),this.el.className="pace pace-active",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=document.body.firstChild?document.body.insertBefore(this.el,document.body.firstChild):document.body.appendChild(this.el)),this.el},e.prototype.finish=function(){var e;return e=this.getElement(),e.className=e.className.replace("pace-active",""),e.className+=" pace-inactive"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){return this.getElement().parentNode.removeChild(this.getElement()),this.el=void 0},e.prototype.render=function(){var e,t;return null==document.body?!1:(e=this.getElement(),e.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||0|(this.lastRenderedProgress|0!==this.progress))&&(e.setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?t="99":(t=this.progress<10?"0":"",t+=0|this.progress),e.setAttribute("data-progress",""+t)),this.lastRenderedProgress=this.progress)},e.prototype.done=function(){return this.progress>=100},e}(),o=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var n,r,i,s,o;if(null!=this.bindings[e]){for(s=this.bindings[e],o=[],r=0,i=s.length;i>r;r++)n=s[r],o.push(n.call(this,t));return o}},e.prototype.on=function(e,t){var n;return null==(n=this.bindings)[e]&&(n[e]=[]),this.bindings[e].push(t)},e}(),O=window.XMLHttpRequest,A=window.XDomainRequest,u=function(e){function t(){var e,n=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(r,i){return n.trigger("request",{type:r,url:i,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(){var t;return t=new O,e(t),t},null!=A&&(window.XDomainRequest=function(){var t;return t=new A,e(t),t})}return H(t,e),t}(o),w=new u,e=function(){function e(){var e=this;this.elements=[],w.on("request",function(t){var n;return n=t.request,e.watch(n)})}return e.prototype.watch=function(e){var t;return t=new a(e),this.elements.push(t)},e}(),a=function(){function e(e){var t,n,r,i,s,o,u,a,f=this;if(this.progress=0,void 0!==e.onprogress)for(n=null,o=e.onprogress,e.onprogress=function(){var t,r,i,s;try{r=e.getAllResponseHeaders();for(i in r)if(s=r[i],"content-length"===i.toLowerCase()){n=+s;break}}catch(o){t=o}if(null==n)return f.progress=f.progress+(100-f.progress)/2;try{return f.progress=e.responseText.length/n}catch(o){t=o}},"function"==typeof o&&o.apply(null,arguments),a=["onload","onabort","ontimeout","onerror"],r=function(){var n;return n=e[t],e[t]=function(){return f.progress=100,"function"==typeof n?n.apply(null,arguments):void 0}},i=0,s=a.length;s>i;i++)t=a[i],r();else u=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?f.progress=100:3===e.readyState&&(f.progress=50),"function"==typeof u?u.apply(null,arguments):void 0}}return e}(),r=function(){function e(e){var t,n,r,s;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),s=e.selectors,n=0,r=s.length;r>n;n++)t=s[n],this.elements.push(new i(t))}return e}(),i=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},S.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),n=function(){function e(){var e,t=this;this.progress=0,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=t.states[document.readyState]&&(t.progress=t.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),s=function(){function e(){var e,t,n,r=this;this.progress=0,e=0,n=0,t=E(),setInterval(function(){var i;return i=E()-t-50,t=E(),e+=(i-e)/15,n++>20&&Math.abs(e)<3&&(e=0),r.progress=100*(3/(e+3))},50)}return e}(),l=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=S.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=T(this.source,"progress"))}return e.prototype.tick=function(e,t){var n;return null==t&&(t=T(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/S.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),n=1-Math.pow(this.progress/100,S.easeFactor),this.progress+=n*this.rate*e,this.progress=Math.min(this.lastProgress+S.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),k=null,C=null,h=null,L=null,c=null,p=null,y=function(){return S.restartOnPushState?Pace.restart():void 0},null!=window.history.pushState&&(M=window.history.pushState,window.history.pushState=function(){return y(),M.apply(window.history,arguments)}),null!=window.history.replaceState&&(_=window.history.replaceState,window.history.replaceState=function(){return y(),_.apply(window.history,arguments)}),f={ajax:e,elements:r,document:n,eventLag:s},(b=function(){var e,n,r,i,s,o,u,a,c;for(k=[],u=["ajax","elements","document","eventLag"],r=0,s=u.length;s>r;r++)n=u[r],S[n]!==!1&&k.push(new f[n](S[n]));for(c=null!=(a=S.extraSources)?a:[],i=0,o=c.length;o>i;i++)e=c[i],k.push(new e(S));return h=new t,C=[],L=new l})(),Pace.stop=function(){return h.destroy(),p=!0,null!=c&&("function"==typeof d&&d(c),c=null),b()},Pace.restart=function(){return Pace.stop(),Pace.go()},Pace.go=function(){return h.render(),p=!1,c=N(function(e,t){var n,r,i,s,o,u,a,f,c,d,v,m,g,y,b,w,x,T;for(f=100-h.progress,r=g=0,i=!0,u=y=0,w=k.length;w>y;u=++y)for(v=k[u],d=null!=C[u]?C[u]:C[u]=[],o=null!=(T=v.elements)?T:[v],a=b=0,x=o.length;x>b;a=++b)s=o[a],c=null!=d[a]?d[a]:d[a]=new l(s),i&=c.done,c.done||(r++,g+=c.tick(e));return n=g/r,h.update(L.tick(e,n)),m=E(),h.done()||i||p?(h.update(100),setTimeout(function(){return h.finish()},Math.max(S.ghostTime,Math.min(S.minTime,E()-m)))):t()})},Pace.start=function(e){return m(S,e),h.render(),document.querySelector(".pace")?Pace.go():setTimeout(Pace.start,50)},"function"==typeof define&&define.amd?define("pace",[],function(){return Pace}):"object"==typeof exports?module.exports=Pace:Pace.start()}.call(this);var SP={Controller:"init",Network:{http:function(e){var t={headers:{Accept:"application/json"},type:"GET",timeout:6e4,async:!0,url:"/"},n=function(e){if(e){_.isArray(e)&&e.length>0&&(e=e[0]);if(e.error)return errors[e.error]}},r=$.extend({},t,e),i=$.Deferred();return console.log("------ Requesting URL: "+e.url),$.ajax(r).then(function(e){var t=n(e);t&&Emitter.emit(t,"error"),i.resolve(e)},function(e){console.log("Ajax error"),Emitter.emit(e,"notify")}),i.promise()}},WS:{key:"212c3181292b80f4e1a9",channel:typeof DOMAIN!=undefined?DOMAIN+"_"+PKG:!1},Tab:{},logout:function(){$("#layout #main").animate({opacity:0},200,"linear",function(){$("#main-menu-container").css({top:"-75px"}),$("#menu").css({left:0}),window.location.href="/logout"})},Terminal:!1,DB:{apps:Model("apps",function(){this.extend({find_by_ID:function(e){return this.detect(function(){return this.attr("_id")==e})}})}),devices:Model("devices",function(){this.extend({find_by_ID:function(e){return this.detect(function(){return this.attr("clientID")==e})}}),this.extend({countMarked:function(){var e=0;return this.each(function(){console.log("marked: "+this.attr("marked")),this.attr("marked")&&e++}),e}}),this.extend({getMarked:function(){return this.select(function(){if(this.attr("marked"))return this.attr("socketID")})}}),this.extend({getMarkedSocketIDs:function(){return this.select(function(){if(this.attr("marked")&&this.attr("socketID"))return this.attr("socketID")})}})})}};require(["jquery","controllers/launchpad","controllers/app","controllers/apps","controllers/data","controllers/login","controllers/register","pace"],function($,launchpad,app,apps,data,login,register,pace){function registerEmitter(){var e=function(e){this.emit=function(e,t){if(!t)var t="data";this.trigger(t,e)}};return MicroEvent.mixin(e),new e}var MicroEvent=function(){};MicroEvent.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},clear:function(e,t){this._events=this._events||{};if(e in this._events==0)return;this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){this._events=this._events||{};if(e in this._events==0)return;for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(e){var t=["on","clear","trigger"];for(var n=0;n<t.length;n++)e.prototype[t[n]]=MicroEvent.prototype[t[n]]};var Emitter=registerEmitter();SP.Pace=pace,$(function($){console.log("Starting app"),SP.Controller=eval($("body").attr("controller")),typeof SP.Controller=="object"?SP.Controller.start():alert("No controller available")})}),define("../app",function(){});