/*! jQuery v1.8.2 jquery.com | jquery.org/license */

/*
 jsPDF 0.9.0rc2 ( 2013-08-07T15:00 commit ID c9c47d1de98fabb0681ad9fba049ef644f8f22ba )
Copyright (c) 2010-2012 James Hall, james@snapshotmedia.co.uk, https://github.com/MrRio/jsPDF
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.

            -----------------------------------------------------------------------------------------------
            JavaScript PubSub library
            2012 (c) ddotsenko@willowsystems.com
            based on Peter Higgins (dante@dojotoolkit.org)
            Loosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.
            Original is (c) Dojo Foundation 2004-2010. Released under either AFL or new BSD, see:
            http://dojofoundation.org/license for more information.
            -----------------------------------------------------------------------------------------------
 
jsPDF addImage plugin (JPEG only at this time)
Copyright (c) 2012 https://github.com/siefkenj/

jsPDF fromHTML plugin. BETA stage. API subject to change. Needs browser, jQuery
Copyright (c) 2012 2012 Willow Systems Corporation, willow-systems.com

jsPDF Silly SVG plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
 
jsPDF split_text_to_size plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.
 
jsPDF standard_fonts_metrics plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.
*/

//     Underscore.js 1.4.4 AMD version
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

/*
 Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com
 (c) 2010-2013, Vladimir Agafonkin, CloudMade
*/

/*!
 * Pusher JavaScript Library v2.1.3
 * http://pusherapp.com/
 *
 * Copyright 2013, Pusher
 * Released under the MIT licence.
 */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

//! moment.js
//! version : 2.2.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 19.09.11
 * Time: 23:40
 */

/**
 * @license RequireJS text 2.0.7 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * Copyright (C) 2013 Maxime Hadjinlian <maxime.hadjinlian@gmail.com>
 * All Rights Reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/*
	Leaflet.contextmenu, a context menu for Leaflet.
	(c) 2013, Adam Ratcliffe, GeoSmart Maps Limited
*/

/*
 Copyright (c) 2013, Jason Sanford
 Leaflet Vector Layers is a library for showing geometry objects
 from multiple geoweb services in a Leaflet map
*/

/**@license
 *|       __ _____                     ________                              __
 *|      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /
 *|  __ / // // // // // _  // _// // / / // _  // _//     // //  \/ // _ \/ /
 *| /  / // // // // // ___// / / // / / // ___// / / / / // // /\  // // / /__
 *| \___//____ \\___//____//_/ _\_  / /_//____//_/ /_/ /_//_//_/ /_/ \__\_\___/
 *|           \/              /____/                              version {{VER}}
 * http://terminal.jcubic.pl
 *
 * Licensed under GNU LGPL Version 3 license
 * Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>
 *
 * Includes:
 *
 * Storage plugin Distributed under the MIT License
 * Copyright (c) 2010 Dave Schindler
 *
 * jQuery Timers licenced with the WTFPL
 * <http://jquery.offput.ca/every/>
 *
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 *
 * Date: {{DATE}}
 */

/*
 * jQuery UI Widget 1.9.1+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*  js-model JavaScript library, version 0.11.0
 *  (c) 2010-2012 Ben Pickles
 *
 *  Released under MIT license.
 */

function Tree(){var e=this;e.build_tree=function(t){var n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.elems,s,o=-1,u;t.heap_len=0,t.heap_max=HEAP_SIZE;for(s=0;s<i;s++)0!==n[2*s]?(t.heap[++t.heap_len]=o=s,t.depth[s]=0):n[2*s+1]=0;for(;2>t.heap_len;)u=t.heap[++t.heap_len]=2>o?++o:0,n[2*u]=1,t.depth[u]=0,t.opt_len--,r&&(t.static_len-=r[2*u+1]);e.max_code=o;for(s=Math.floor(t.heap_len/2);1<=s;s--)t.pqdownheap(n,s);u=i;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],t.pqdownheap(n,1),r=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=r,n[2*u]=n[2*s]+n[2*r],t.depth[u]=Math.max(t.depth[s],t.depth[r])+1,n[2*s+1]=n[2*r+1]=u,t.heap[1]=u++,t.pqdownheap(n,1);while(2<=t.heap_len);t.heap[--t.heap_max]=t.heap[1],s=e.dyn_tree;for(var o=e.stat_desc.static_tree,a=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,h,p=0,i=0;i<=MAX_BITS;i++)t.bl_count[i]=0;s[2*t.heap[t.heap_max]+1]=0;for(u=t.heap_max+1;u<HEAP_SIZE;u++)r=t.heap[u],i=s[2*s[2*r+1]+1]+1,i>l&&(i=l,p++),s[2*r+1]=i,r>e.max_code||(t.bl_count[i]++,c=0,r>=f&&(c=a[r-f]),h=s[2*r],t.opt_len+=h*(i+c),o&&(t.static_len+=h*(o[2*r+1]+c)));if(0!==p){do{for(i=l-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[l]--,p-=2}while(0<p);for(i=l;0!==i;i--)for(r=t.bl_count[i];0!==r;)o=t.heap[--u],o>e.max_code||(s[2*o+1]!=i&&(t.opt_len+=(i-s[2*o+1])*s[2*o],s[2*o+1]=i),r--)}s=e.max_code,u=t.bl_count,t=[],r=0;for(i=1;i<=MAX_BITS;i++)t[i]=r=r+u[i-1]<<1;for(u=0;u<=s;u++)if(a=n[2*u+1],0!==a){r=n,i=2*u,o=t[a]++,f=0;do f|=o&1,o>>>=1,f<<=1;while(0<--a);r[i]=f>>>1}}}function StaticTree(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i}function Config(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function smaller(e,t,n,r){var i=e[2*t];return e=e[2*n],i<e||i==e&&r[t]<=r[n]}function Deflate(){function e(){var e;for(e=0;e<L_CODES;e++)J[2*e]=0;for(e=0;e<D_CODES;e++)K[2*e]=0;for(e=0;e<BL_CODES;e++)Q[2*e]=0;J[2*END_BLOCK]=1,nt=it=g.opt_len=g.static_len=0}function t(e,t){var n,r=-1,i,s=e[1],o=0,u=7,a=4;0===s&&(u=138,a=3),e[2*(t+1)+1]=65535;for(n=0;n<=t;n++)i=s,s=e[2*(n+1)+1],++o<u&&i==s||(o<a?Q[2*i]+=o:0!==i?(i!=r&&Q[2*i]++,Q[2*REP_3_6]++):10>=o?Q[2*REPZ_3_10]++:Q[2*REPZ_11_138]++,o=0,r=i,0===s?(u=138,a=3):i==s?(u=6,a=3):(u=7,a=4))}function n(e){g.pending_buf[g.pending++]=e}function r(e){n(e&255),n(e>>>8&255)}function i(e,t){ut>Buf_size-t?(ot|=e<<ut&65535,r(ot),ot=e>>>Buf_size-ut,ut+=t-Buf_size):(ot|=e<<ut&65535,ut+=t)}function s(e,t){var n=2*e;i(t[n]&65535,t[n+1]&65535)}function o(e,t){var n,r=-1,o,u=e[1],a=0,f=7,l=4;0===u&&(f=138,l=3);for(n=0;n<=t;n++)if(o=u,u=e[2*(n+1)+1],!(++a<f&&o==u)){if(a<l){do s(o,Q);while(0!==--a)}else 0!==o?(o!=r&&(s(o,Q),a--),s(REP_3_6,Q),i(a-3,2)):10>=a?(s(REPZ_3_10,Q),i(a-3,3)):(s(REPZ_11_138,Q),i(a-11,7));a=0,r=o,0===u?(f=138,l=3):o==u?(f=6,l=3):(f=7,l=4)}}function u(){16==ut?(r(ot),ut=ot=0):8<=ut&&(n(ot&255),ot>>>=8,ut-=8)}function a(e,t){var n,r,i;g.pending_buf[rt+2*nt]=e>>>8&255,g.pending_buf[rt+2*nt+1]=e&255,g.pending_buf[et+nt]=t&255,nt++,0===e?J[2*t]++:(it++,e--,J[2*(Tree._length_code[t]+LITERALS+1)]++,K[2*Tree.d_code(e)]++);if(0===(nt&8191)&&2<W){n=8*nt,r=F-P;for(i=0;i<D_CODES;i++)n+=K[2*i]*(5+Tree.extra_dbits[i]);if(it<Math.floor(nt/2)&&n>>>3<Math.floor(r/2))return!0}return nt==tt-1}function f(e,t){var n,r,o=0,u,a;if(0!==nt)do n=g.pending_buf[rt+2*o]<<8&65280|g.pending_buf[rt+2*o+1]&255,r=g.pending_buf[et+o]&255,o++,0===n?s(r,e):(u=Tree._length_code[r],s(u+LITERALS+1,e),a=Tree.extra_lbits[u],0!==a&&(r-=Tree.base_length[u],i(r,a)),n--,u=Tree.d_code(n),s(u,t),a=Tree.extra_dbits[u],0!==a&&(n-=Tree.base_dist[u],i(n,a)));while(o<nt);s(END_BLOCK,e),st=e[2*END_BLOCK+1]}function l(){8<ut?r(ot):0<ut&&n(ot&255),ut=ot=0}function c(e,t,n){i((STORED_BLOCK<<1)+(n?1:0),3),l(),st=8,r(t),r(~t),g.pending_buf.set(N.subarray(e,e+t),g.pending),g.pending+=t}function h(n){var r=0<=P?P:-1,s=F-P,u,a,h=0;if(0<W){G.build_tree(g),Y.build_tree(g),t(J,G.max_code),t(K,Y.max_code),Z.build_tree(g);for(h=BL_CODES-1;3<=h&&0===Q[2*Tree.bl_order[h]+1];h--);g.opt_len+=3*(h+1)+14,u=g.opt_len+3+7>>>3,a=g.static_len+3+7>>>3,a<=u&&(u=a)}else u=a=s+5;if(s+4<=u&&-1!=r)c(r,s,n);else if(a==u)i((STATIC_TREES<<1)+(n?1:0),3),f(StaticTree.static_ltree,StaticTree.static_dtree);else{i((DYN_TREES<<1)+(n?1:0),3),r=G.max_code+1,s=Y.max_code+1,h+=1,i(r-257,5),i(s-1,5),i(h-4,4);for(u=0;u<h;u++)i(Q[2*Tree.bl_order[u]+1],3);o(J,r-1),o(K,s-1),f(J,K)}e(),n&&l(),P=F,y.flush_pending()}function p(){var e,t,n,r;do{r=C-q-F;if(0===r&&0===F&&0===q)r=S;else if(-1==r)r--;else if(F>=S+S-MIN_LOOKAHEAD){N.set(N.subarray(S,S+S),0),I-=S,F-=S,P-=S,n=e=O;do t=L[--n]&65535,L[n]=t>=S?t-S:0;while(0!==--e);n=e=S;do t=k[--n]&65535,k[n]=t>=S?t-S:0;while(0!==--e);r+=S}if(0===y.avail_in)break;e=y.read_buf(N,F+q,r),q+=e,q>=MIN_MATCH&&(A=N[F]&255,A=(A<<D^N[F+1]&255)&_)}while(q<MIN_LOOKAHEAD&&0!==y.avail_in)}function d(e){var t=65535,n;for(t>w-5&&(t=w-5);;){if(1>=q){p();if(0===q&&e==Z_NO_FLUSH)return NeedMore;if(0===q)break}F+=q,q=0,n=P+t;if(0===F||F>=n)if(q=F-n,F=n,h(!1),0===y.avail_out)return NeedMore;if(F-P>=S-MIN_LOOKAHEAD&&(h(!1),0===y.avail_out))return NeedMore}return h(e==Z_FINISH),0===y.avail_out?e==Z_FINISH?FinishStarted:NeedMore:e==Z_FINISH?FinishDone:BlockDone}function v(e){var t=U,n=F,r,i=R,s=F>S-MIN_LOOKAHEAD?F-(S-MIN_LOOKAHEAD):0,o=$,u=T,a=F+MAX_MATCH,f=N[n+i-1],l=N[n+i];R>=V&&(t>>=2),o>q&&(o=q);do if(r=e,N[r+i]==l&&N[r+i-1]==f&&N[r]==N[n]&&N[++r]==N[n+1]){n+=2,r++;do;while(N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&N[++n]==N[++r]&&n<a);r=MAX_MATCH-(a-n),n=a-MAX_MATCH;if(r>i){I=e,i=r;if(r>=o)break;f=N[n+i-1],l=N[n+i]}}while((e=k[e&u]&65535)>s&&0!==--t);return i<=q?i:q}function m(e){for(var t=0,n,r;;){if(q<MIN_LOOKAHEAD){p();if(q<MIN_LOOKAHEAD&&e==Z_NO_FLUSH)return NeedMore;if(0===q)break}q>=MIN_MATCH&&(A=(A<<D^N[F+(MIN_MATCH-1)]&255)&_,t=L[A]&65535,k[F&T]=L[A],L[A]=F),R=H,B=I,H=MIN_MATCH-1,0!==t&&R<z&&(F-t&65535)<=S-MIN_LOOKAHEAD&&(X!=Z_HUFFMAN_ONLY&&(H=v(t)),5>=H&&(X==Z_FILTERED||H==MIN_MATCH&&4096<F-I)&&(H=MIN_MATCH-1));if(R>=MIN_MATCH&&H<=R){r=F+q-MIN_MATCH,n=a(F-1-B,R-MIN_MATCH),q-=R-1,R-=2;do++F<=r&&(A=(A<<D^N[F+(MIN_MATCH-1)]&255)&_,t=L[A]&65535,k[F&T]=L[A],L[A]=F);while(0!==--R);j=0,H=MIN_MATCH-1,F++;if(n&&(h(!1),0===y.avail_out))return NeedMore}else if(0!==j){if((n=a(0,N[F-1]&255))&&h(!1),F++,q--,0===y.avail_out)return NeedMore}else j=1,F++,q--}return 0!==j&&(a(0,N[F-1]&255),j=0),h(e==Z_FINISH),0===y.avail_out?e==Z_FINISH?FinishStarted:NeedMore:e==Z_FINISH?FinishDone:BlockDone}var g=this,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G=new Tree,Y=new Tree,Z=new Tree;g.depth=[];var et,tt,nt,rt,it,st,ot,ut;g.bl_count=[],g.heap=[],J=[],K=[],Q=[],g.pqdownheap=function(e,t){for(var n=g.heap,r=n[t],i=t<<1;i<=g.heap_len;){i<g.heap_len&&smaller(e,n[i+1],n[i],g.depth)&&i++;if(smaller(e,r,n[i],g.depth))break;n[t]=n[i],t=i,i<<=1}n[t]=r},g.deflateInit=function(t,n,r,i,s,o){i||(i=Z_DEFLATED),s||(s=DEF_MEM_LEVEL),o||(o=Z_DEFAULT_STRATEGY),t.msg=null,n==Z_DEFAULT_COMPRESSION&&(n=6);if(1>s||s>MAX_MEM_LEVEL||i!=Z_DEFLATED||9>r||15<r||0>n||9<n||0>o||o>Z_HUFFMAN_ONLY)return Z_STREAM_ERROR;t.dstate=g,x=r,S=1<<x,T=S-1,M=s+7,O=1<<M,_=O-1,D=Math.floor((M+MIN_MATCH-1)/MIN_MATCH),N=new Uint8Array(2*S),k=[],L=[],tt=1<<s+6,g.pending_buf=new Uint8Array(4*tt),w=4*tt,rt=Math.floor(tt/2),et=3*tt,W=n,X=o,t.total_in=t.total_out=0,t.msg=null,g.pending=0,g.pending_out=0,b=BUSY_STATE,E=Z_NO_FLUSH,G.dyn_tree=J,G.stat_desc=StaticTree.static_l_desc,Y.dyn_tree=K,Y.stat_desc=StaticTree.static_d_desc,Z.dyn_tree=Q,Z.stat_desc=StaticTree.static_bl_desc,ut=ot=0,st=8,e(),C=2*S;for(t=L[O-1]=0;t<O-1;t++)L[t]=0;return z=config_table[W].max_lazy,V=config_table[W].good_length,$=config_table[W].nice_length,U=config_table[W].max_chain,q=P=F=0,H=R=MIN_MATCH-1,A=j=0,Z_OK},g.deflateEnd=function(){return b!=INIT_STATE&&b!=BUSY_STATE&&b!=FINISH_STATE?Z_STREAM_ERROR:(N=k=L=g.pending_buf=null,g.dstate=null,b==BUSY_STATE?Z_DATA_ERROR:Z_OK)},g.deflateParams=function(e,t,n){var r=Z_OK;return t==Z_DEFAULT_COMPRESSION&&(t=6),0>t||9<t||0>n||n>Z_HUFFMAN_ONLY?Z_STREAM_ERROR:(config_table[W].func!=config_table[t].func&&0!==e.total_in&&(r=e.deflate(Z_PARTIAL_FLUSH)),W!=t&&(W=t,z=config_table[W].max_lazy,V=config_table[W].good_length,$=config_table[W].nice_length,U=config_table[W].max_chain),X=n,r)},g.deflateSetDictionary=function(e,t,n){e=n;var r=0;if(!t||b!=INIT_STATE)return Z_STREAM_ERROR;if(e<MIN_MATCH)return Z_OK;e>S-MIN_LOOKAHEAD&&(e=S-MIN_LOOKAHEAD,r=n-e),N.set(t.subarray(r,r+e),0),P=F=e,A=N[0]&255,A=(A<<D^N[1]&255)&_;for(t=0;t<=e-MIN_MATCH;t++)A=(A<<D^N[t+(MIN_MATCH-1)]&255)&_,k[t&T]=L[A],L[A]=t;return Z_OK},g.deflate=function(e,t){var r,o,f;if(t>Z_FINISH||0>t)return Z_STREAM_ERROR;if(!e.next_out||!e.next_in&&0!==e.avail_in||b==FINISH_STATE&&t!=Z_FINISH)return e.msg=z_errmsg[Z_NEED_DICT-Z_STREAM_ERROR],Z_STREAM_ERROR;if(0===e.avail_out)return e.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;y=e,r=E,E=t,b==INIT_STATE&&(o=Z_DEFLATED+(x-8<<4)<<8,f=(W-1&255)>>1,3<f&&(f=3),o|=f<<6,0!==F&&(o|=PRESET_DICT),b=BUSY_STATE,o+=31-o%31,n(o>>8&255),n(o&255));if(0!==g.pending){if(y.flush_pending(),0===y.avail_out)return E=-1,Z_OK}else if(0===y.avail_in&&t<=r&&t!=Z_FINISH)return y.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(b==FINISH_STATE&&0!==y.avail_in)return e.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(0!==y.avail_in||0!==q||t!=Z_NO_FLUSH&&b!=FINISH_STATE){r=-1;switch(config_table[W].func){case STORED:r=d(t);break;case FAST:e:{for(r=0;;){if(q<MIN_LOOKAHEAD){p();if(q<MIN_LOOKAHEAD&&t==Z_NO_FLUSH){r=NeedMore;break e}if(0===q)break}q>=MIN_MATCH&&(A=(A<<D^N[F+(MIN_MATCH-1)]&255)&_,r=L[A]&65535,k[F&T]=L[A],L[A]=F),0!==r&&(F-r&65535)<=S-MIN_LOOKAHEAD&&X!=Z_HUFFMAN_ONLY&&(H=v(r));if(H>=MIN_MATCH)if(o=a(F-I,H-MIN_MATCH),q-=H,H<=z&&q>=MIN_MATCH){H--;do F++,A=(A<<D^N[F+(MIN_MATCH-1)]&255)&_,r=L[A]&65535,k[F&T]=L[A],L[A]=F;while(0!==--H);F++}else F+=H,H=0,A=N[F]&255,A=(A<<D^N[F+1]&255)&_;else o=a(0,N[F]&255),q--,F++;if(o&&(h(!1),0===y.avail_out)){r=NeedMore;break e}}h(t==Z_FINISH),r=0===y.avail_out?t==Z_FINISH?FinishStarted:NeedMore:t==Z_FINISH?FinishDone:BlockDone}break;case SLOW:r=m(t)}if(r==FinishStarted||r==FinishDone)b=FINISH_STATE;if(r==NeedMore||r==FinishStarted)return 0===y.avail_out&&(E=-1),Z_OK;if(r==BlockDone){if(t==Z_PARTIAL_FLUSH)i(STATIC_TREES<<1,3),s(END_BLOCK,StaticTree.static_ltree),u(),9>1+st+10-ut&&(i(STATIC_TREES<<1,3),s(END_BLOCK,StaticTree.static_ltree),u()),st=7;else if(c(0,0,!1),t==Z_FULL_FLUSH)for(r=0;r<O;r++)L[r]=0;y.flush_pending();if(0===y.avail_out)return E=-1,Z_OK}}return t!=Z_FINISH?Z_OK:Z_STREAM_END}}function ZStream(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}function Deflater(e){var t=new ZStream,n=Z_NO_FLUSH,r=new Uint8Array(512);"undefined"==typeof e&&(e=Z_DEFAULT_COMPRESSION),t.deflateInit(e),t.next_out=r,this.append=function(e,i){var s,o=[],u=0,a=0,f=0,c;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{t.next_out_index=0,t.avail_out=512,s=t.deflate(n);if(s!=Z_OK)throw"deflating: "+t.msg;t.next_out_index&&(512==t.next_out_index?o.push(new Uint8Array(r)):o.push(new Uint8Array(r.subarray(0,t.next_out_index)))),f+=t.next_out_index,i&&0<t.next_in_index&&t.next_in_index!=u&&(i(t.next_in_index),u=t.next_in_index)}while(0<t.avail_in||0===t.avail_out);return c=new Uint8Array(f),o.forEach(function(e){c.set(e,a),a+=e.length}),c}},this.flush=function(){var e,n=[],i=0,s=0,o;do{t.next_out_index=0,t.avail_out=512,e=t.deflate(Z_FINISH);if(e!=Z_STREAM_END&&e!=Z_OK)throw"deflating: "+t.msg;0<512-t.avail_out&&n.push(new Uint8Array(r.subarray(0,t.next_out_index))),s+=t.next_out_index}while(0<t.avail_in||0===t.avail_out);return t.deflateEnd(),o=new Uint8Array(s),n.forEach(function(e){o.set(e,i),i+=e.length}),o}}function registerEmitter(){var e=function(e){this.emit=function(e,t){if(!t)var t="data";this.trigger(t,e)}};return MicroEvent.mixin(e),new e}(function(e,t){function n(e){var t=dt[e]={};return Y.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(mt,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vt.test(r)?Y.parseJSON(r):r}catch(s){}Y.data(e,n,r)}else r=t}return r}function i(e){var t;for(t in e){if(t==="data"&&Y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function s(){return!1}function o(){return!0}function u(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function a(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function f(e,t,n){t=t||0;if(Y.isFunction(t))return Y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return Y.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=Y.grep(e,function(e){return e.nodeType===1});if(Bt.test(t))return Y.filter(t,r,!n);t=Y.filter(t,r)}return Y.grep(e,function(e,r){return Y.inArray(e,t)>=0===n})}function l(e){var t=It.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(t.nodeType!==1||!Y.hasData(e))return;var n,r,i,s=Y._data(e),o=Y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)Y.event.add(t,n,u[n][r])}o.data&&(o.data=Y.extend({},o.data))}function p(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando)}function d(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function v(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=yn.length;while(i--){t=yn[i]+n;if(t in e)return t}return r}function g(e,t){return e=t||e,Y.css(e,"display")==="none"||!Y.contains(e.ownerDocument,e)}function y(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=Y._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&g(n)&&(i[s]=Y._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),!i[s]&&r!=="none"&&Y._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function b(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function w(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=Y.css(e,n+gn[i],!0)),r?(n==="content"&&(s-=parseFloat(nn(e,"padding"+gn[i]))||0),n!=="margin"&&(s-=parseFloat(nn(e,"border"+gn[i]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+gn[i]))||0,n!=="padding"&&(s+=parseFloat(nn(e,"border"+gn[i]+"Width"))||0));return s}function E(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=nn(e,t);if(r<0||r==null)r=e.style[t];if(hn.test(r))return r;i=s&&(Y.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+w(e,t,n||(s?"border":"content"),i)+"px"}function S(e){if(dn[e])return dn[e];var t=Y("<"+e+">").appendTo(R.body),n=t.css("display");t.remove();if(n==="none"||n===""){rn=R.body.appendChild(rn||Y.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!sn||!rn.createElement)sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close();t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)}return dn[e]=n,n}function x(e,t,n,r){var i;if(Y.isArray(t))Y.each(t,function(t,i){n||En.test(e)?r(e,i):x(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&Y.type(t)==="object")for(i in t)x(e+"["+i+"]",t[i],n,r);else r(e,t)}function T(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(tt),u=0,a=o.length;if(Y.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function N(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===jn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=N(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=N(e,n,r,i,"*",o)),u}function C(e,n){var r,i,s=Y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&Y.extend(!0,e,i)}function k(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function L(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Jn=t},0),Jn=Y.now()}function _(e,t){Y.each(t,function(t,n){var r=(er[t]||[]).concat(er["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function D(e,t,n){var r,i=0,s=0,o=Zn.length,u=Y.Deferred().always(function(){delete a.elem}),a=function(){var t=Jn||M(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Jn||M(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=Y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;P(l,f.opts.specialEasing);for(;i<o;i++){r=Zn[i].call(f,e,l,f.opts);if(r)return r}return _(f,l),Y.isFunction(f.opts.start)&&f.opts.start.call(e,f),Y.fx.timer(Y.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function P(e,t){var n,r,i,s,o;for(n in e){r=Y.camelCase(n),i=t[r],s=e[n],Y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=Y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function H(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],v=e.nodeType&&g(e);n.queue||(f=Y._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,Y.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],Y.css(e,"display")==="inline"&&Y.css(e,"float")==="none"&&(!Y.support.inlineBlockNeedsLayout||S(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",Y.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Qn.exec(s)){delete t[r];if(s===(v?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),v?Y(e).show():c.done(function(){Y(e).hide()}),c.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in p)Y.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,v?u[i]:0),p[i]=u[i]||Y.style(e,i),i in u||(u[i]=a.start,v&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function B(e,t,n,r,i){return new B.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=gn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var I,q,R=e.document,U=e.location,z=e.navigator,W=e.jQuery,X=e.$,V=Array.prototype.push,$=Array.prototype.slice,J=Array.prototype.indexOf,K=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,G=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,it=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,ut=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ft=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return(t+"").toUpperCase()},ht=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ht,!1),Y.ready()):R.readyState==="complete"&&(R.detachEvent("onreadystatechange",ht),Y.ready())},pt={};Y.fn=Y.prototype={constructor:Y,init:function(e,n,r){var i,s,o,u;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=rt.exec(e);if(i&&(i[1]||!n)){if(i[1])return n=n instanceof Y?n[0]:n,u=n&&n.nodeType?n.ownerDocument||n:R,e=Y.parseHTML(i[1],u,!0),it.test(i[1])&&Y.isPlainObject(n)&&this.attr.call(e,n,!0),Y.merge(this,e);s=R.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=R,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return Y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Y.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!Y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(s?(s=!1,o=r&&Y.isArray(r)?r:[]):o=r&&Y.isPlainObject(r)?r:{},u[n]=Y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=X),t&&e.jQuery===Y&&(e.jQuery=W),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(e===!0?--Y.readyWait:Y.isReady)return;if(!R.body)return setTimeout(Y.ready,1);Y.isReady=!0;if(e!==!0&&--Y.readyWait>0)return;q.resolveWith(R,[Y]),Y.fn.trigger&&Y(R).trigger("ready").off("ready")},isFunction:function(e){return Y.type(e)==="function"},isArray:Array.isArray||function(e){return Y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||Y.type(e)!=="object"||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Q.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||R,(r=it.exec(e))?[t.createElement(r[1])]:(r=Y.buildFragment([e],t,n?null:[]),Y.merge([],(r.cacheable?Y.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=Y.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(st.test(t.replace(ut,"@").replace(at,"]").replace(ot,"")))return(new Function("return "+t))();Y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ft,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||Y.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:G&&!G.call("ï»¿ ")?function(e){return e==null?"":G.call(e)}:function(e){return e==null?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=Y.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||Y.isWindow(e)?V.call(r,e):Y.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof Y||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||Y.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),Y.isFunction(e)?(i=$.call(arguments,2),s=function(){return e.apply(n,i.concat($.call(arguments)))},s.guid=e.guid=e.guid||Y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)Y.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&Y.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(Y(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!q){q=Y.Deferred();if(R.readyState==="complete")setTimeout(Y.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Y.ready,!1);else{R.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Y.ready);var n=!1;try{n=e.frameElement==null&&R.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!Y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Y.ready()}}()}}return q.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),I=Y(R);var dt={};Y.Callbacks=function(e){e=typeof e=="string"?dt[e]||n(e):Y.extend({},e);var r,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){r=e.memory&&t,i=!0,a=o||0,o=0,u=f.length,s=!0;for(;f&&a<u;a++)if(f[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}s=!1,f&&(l?l.length&&c(l.shift()):r?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function n(t){Y.each(t,function(t,r){var i=Y.type(r);i==="function"&&(!e.unique||!h.has(r))?f.push(r):r&&r.length&&i!=="string"&&n(r)})})(arguments),s?u=f.length:r&&(o=t,c(r))}return this},remove:function(){return f&&Y.each(arguments,function(e,t){var n;while((n=Y.inArray(t,f,n))>-1)f.splice(n,1),s&&(n<=u&&u--,n<=a&&a--)}),this},has:function(e){return Y.inArray(e,f)>-1},empty:function(){return f=[],this},disable:function(){return f=l=r=t,this},disabled:function(){return!f},lock:function(){return l=t,r||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],f&&(!i||l)&&(s?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(n){Y.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](Y.isFunction(o)?function(){var e=o.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?Y.extend(e,r):r}},i={};return r.pipe=r.then,Y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=$.call(arguments),r=n.length,i=r!==1||e&&Y.isFunction(e.promise)?r:0,s=i===1?e:Y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?$.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&Y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),Y.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h=R.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};i=R.createElement("select"),s=i.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:h.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",c)),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),u=R.createDocumentFragment(),u.appendChild(h.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(h);if(h.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})a="on"+f,l=a in h,l||(h.setAttribute(a,"return;"),l=typeof h[a]=="function"),t[f+"Bubbles"]=l;return Y(function(){var n,r,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=R.getElementsByTagName("body")[0];if(!u)return;n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=R.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=r.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&i[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",s=R.createElement("div"),s.style.cssText=r.style.cssText=o,s.style.marginRight=s.style.width="0",r.style.width="1px",r.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),u.removeChild(n),n=r=i=s=null}),u.removeChild(h),n=r=i=s=o=u=h=null,t}();var vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando],!!e&&!i(e)},data:function(e,n,r,i){if(!Y.acceptData(e))return;var s,o,u=Y.expando,a=typeof n=="string",f=e.nodeType,l=f?Y.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=Y.deletedIds.pop()||Y.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=Y.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=Y.extend(l[c],n):l[c].data=Y.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[Y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[Y.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!Y.acceptData(e))return;var r,s,o,u=e.nodeType,a=u?Y.cache:e,f=u?e[Y.expando]:Y.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){Y.isArray(t)||(t in r?t=[t]:(t=Y.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(s=0,o=t.length;s<o;s++)delete r[t[s]];if(!(n?i:Y.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!i(a[f]))return}u?Y.cleanData([e],!0):Y.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null},_data:function(e,t,n){return Y.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,n){var i,s,o,u,a,f=this[0],l=0,c=null;if(e===t){if(this.length){c=Y.data(f);if(f.nodeType===1&&!Y._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")||(u=Y.camelCase(u.substring(5)),r(f,u,c[u]));Y._data(f,"parsedAttrs",!0)}}return c}return typeof e=="object"?this.each(function(){Y.data(this,e)}):(i=e.split(".",2),i[1]=i[1]?"."+i[1]:"",s=i[1]+"!",Y.access(this,function(n){if(n===t)return c=this.triggerHandler("getData"+s,[i[0]]),c===t&&f&&(c=Y.data(f,e),c=r(f,e,c)),c===t&&i[1]?this.data(i[0]):c;i[1]=n,this.each(function(){var t=Y(this);t.triggerHandler("setData"+s,i),Y.data(this,e,n),t.triggerHandler("changeData"+s,i)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y._data(e,t),n&&(!r||Y.isArray(n)?r=Y._data(e,t,Y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Y.queue(e,t),r=n.length,i=n.shift(),s=Y._queueHooks(e,t),o=function(){Y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y._data(e,n)||Y._data(e,n,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,n,!0)})})}}),Y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?Y.queue(this[0],e):n===t?this:this.each(function(){var t=Y.queue(this,e,n);Y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx?Y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=Y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=Y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,Et=/\r/g,St=/^(?:button|input)$/i,xt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,Nt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(tt);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=Y.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(tt);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(wt," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?Y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return Y.isFunction(e)?this.each(function(n){Y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=Y(this),u=t,a=e.split(tt);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&Y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=Y.valHooks[s.type]||Y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(Et,""):r==null?"":r);return}return i=Y.isFunction(e),this.each(function(r){var s,o=Y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":Y.isArray(s)&&(s=Y.map(s,function(e){return e==null?"":e+""})),n=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(Y.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!Y.nodeName(i.parentNode,"optgroup"))){t=Y(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?Y(u[s]).val():o},set:function(e,t){var n=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=Y.inArray(Y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&Y.isFunction(Y.fn[n]))return Y(e)[n](r);if(typeof e.getAttribute=="undefined")return Y.prop(e,n,r);u=a!==1||!Y.isXMLDoc(e),u&&(n=n.toLowerCase(),o=Y.attrHooks[n]||(Nt.test(n)?yt:gt));if(r!==t){if(r===null){Y.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(tt);for(;o<r.length;o++)i=r[o],i&&(n=Y.propFix[i]||i,s=Nt.test(i),s||Y.attr(e,i,""),e.removeAttribute(Ct?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&t==="radio"&&Y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&Y.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null},set:function(e,t,n){if(gt&&Y.nodeName(e,"button"))return gt.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!Y.isXMLDoc(e),o&&(n=Y.propFix[n]||n,s=Y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):xt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var r,i=Y.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Y.removeAttr(e,n):(r=Y.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ct||(bt={name:!0,id:!0,coords:!0},gt=Y.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=R.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),Y.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){t===""&&(t="false"),gt.set(e,t,n)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,n){Y.attrHooks[n]=Y.extend(Y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=Y.inArray(Y(e).val(),t)>=0}})});var kt=/^(?:textarea|input|select)$/i,Lt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,Mt=/^(?:mouse|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){return Y.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=Y._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=Y.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof Y=="undefined"||!!e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=Y.trim(Dt(n)).split(" ");for(f=0;f<n.length;f++){l=Lt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),m=Y.event.special[c]||{},c=(s?m.delegateType:m.bindType)||c,m=Y.event.special[c]||{},p=Y.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&Y.expr.match.needsContext.test(s),namespace:h.join(".")},d),v=a[c];if(!v){v=a[c]=[],v.delegateCount=0;if(!m.setup||m.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?v.splice(v.delegateCount++,0,p):v.push(p),Y.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=Y.hasData(e)&&Y._data(e);if(!m||!(h=m.events))return;t=Y.trim(Dt(t||"")).split(" ");for(s=0;s<t.length;s++){o=Lt.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)Y.event.remove(e,u+t[s],n,r,!0);continue}p=Y.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)v=d[c],(i||a===v.origType)&&(!n||n.guid===v.guid)&&(!f||f.test(v.namespace))&&(!r||r===v.selector||r==="**"&&v.selector)&&(d.splice(c--,1),v.selector&&d.delegateCount--,p.remove&&p.remove.call(e,v));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,m.handle)===!1)&&Y.removeEvent(e,u,m.handle),delete h[u])}Y.isEmptyObject(h)&&(delete m.handle,Y.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o,u,a,f,l,c,h,p,d,v,m=n.type||n,g=[];if(_t.test(m+Y.event.triggered))return;m.indexOf("!")>=0&&(m=m.slice(0,-1),u=!0),m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort());if((!i||Y.event.customEvent[m])&&!Y.event.global[m])return;n=typeof n=="object"?n[Y.expando]?n:new Y.Event(m,n):new Y.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=u,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"";if(!i){o=Y.cache;for(a in o)o[a].events&&o[a].events[m]&&Y.event.trigger(n,r,o[a].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?Y.makeArray(r):[],r.unshift(n),h=Y.event.special[m]||{};if(h.trigger&&h.trigger.apply(i,r)===!1)return;d=[[i,h.bindType||m]];if(!s&&!h.noBubble&&!Y.isWindow(i)){v=h.delegateType||m,f=_t.test(v+m)?i:i.parentNode;for(l=i;f;f=f.parentNode)d.push([f,v]),l=f;l===(i.ownerDocument||R)&&d.push([l.defaultView||l.parentWindow||e,v])}for(a=0;a<d.length&&!n.isPropagationStopped();a++)f=d[a][0],n.type=d[a][1],p=(Y._data(f,"events")||{})[n.type]&&Y._data(f,"handle"),p&&p.apply(f,r),p=c&&f[c],p&&Y.acceptData(f)&&p.apply&&p.apply(f,r)===!1&&n.preventDefault();return n.type=m,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(i.ownerDocument,r)===!1)&&(m!=="click"||!Y.nodeName(i,"a"))&&Y.acceptData(i)&&c&&i[m]&&(m!=="focus"&&m!=="blur"||n.target.offsetWidth!==0)&&!Y.isWindow(i)&&(l=i[c],l&&(i[c]=null),Y.event.triggered=m,i[m](),Y.event.triggered=t,l&&(i[c]=l)),n.result}return},dispatch:function(n){n=Y.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p=(Y._data(this,"events")||{})[n.type]||[],d=p.delegateCount,v=$.call(arguments),m=!n.exclusive&&!n.namespace,g=Y.event.special[n.type]||{},y=[];v[0]=n,n.delegateTarget=this;if(g.preDispatch&&g.preDispatch.call(this,n)===!1)return;if(d&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<d;r++)l=p[r],c=l.selector,u[c]===t&&(u[c]=l.needsContext?Y(c,this).index(s)>=0:Y.find(c,this,null,[s]).length),u[c]&&f.push(l);f.length&&y.push({elem:s,matches:f})}p.length>d&&y.push({elem:this,matches:p.slice(d)});for(r=0;r<y.length&&!n.isPropagationStopped();r++){a=y[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){l=a.matches[i];if(m||!n.namespace&&!l.namespace||n.namespace_re&&n.namespace_re.test(l.namespace))n.data=l.data,n.handleObj=l,o=((Y.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,v),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return g.postDispatch&&g.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||R,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,n,r=e,i=Y.event.fixHooks[e.type]||{},s=i.props?this.props.concat(i.props):this.props;e=Y.Event(r);for(t=s.length;t;)n=s[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||R),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Y.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=Y.extend(new Y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Y.event.trigger(i,null,t):Y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!Y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Y.nodeName(n,"input")||Y.nodeName(n,"button")?n.form:t;r&&!Y._data(r,"_submit_attached")&&(Y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(kt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")Y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)});return!1}Y.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!Y._data(t,"_change_attached")&&(Y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),!kt.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){n++===0&&R.addEventListener(e,r,!0)},teardown:function(){--n===0&&R.removeEventListener(e,r,!0)}}}),Y.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=s;else if(!i)return this;return o===1&&(u=i,i=function(e){return Y().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=s),this.each(function(){Y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Y(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||Y.guid++,r=0,i=function(n){var i=(Y._data(this,"lastToggle"+e.guid)||0)%r;return Y._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Ot.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),Mt.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||M;var i,s,o,u,a=t.nodeType;if(!e||typeof e!="string")return n;if(a!==1&&a!==9)return[];o=E(t);if(!o&&!r)if(i=nt.exec(e))if(u=i[1]){if(a===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&S(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return B.apply(n,j.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&dt&&t.getElementsByClassName)return B.apply(n,j.call(t.getElementsByClassName(u),0)),n}return v(e.replace(G,"$1"),t,n,r,o)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function s(e){return I(function(t){return t=+t,I(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function o(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function u(e,t){var r,i,s,o,u,a,f,l=U[A][e];if(l)return t?0:l.slice(0);u=e,a=[],f=b.preFilter;while(u){if(!r||(i=Z.exec(u)))i&&(u=u.slice(i[0].length)),a.push(s=[]);r=!1;if(i=et.exec(u))s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=i[0].replace(G," ");for(o in b.filter)(i=ft[o].exec(u))&&(!f[o]||(i=f[o](i,M,!0)))&&(s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=o,r.matches=i);if(!r)break}return t?u.length:u?n.error(e):U(e,a).slice(0)}function a(e,t,n){var r=t.dir,i=n&&t.dir==="parentNode",s=P++;return t.first?function(t,n,s){while(t=t[r])if(i||t.nodeType===1)return e(t,n,s)}:function(t,n,o){if(!o){var u,a=D+" "+s+" ",f=a+g;while(t=t[r])if(i||t.nodeType===1){if((u=t[A])===f)return t.sizset;if(typeof u=="string"&&u.indexOf(a)===0){if(t.sizset)return t}else{t[A]=f;if(e(t,n,o))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[r])if(i||t.nodeType===1)if(e(t,n,o))return t}}function f(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function l(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function c(e,t,n,r,i,s){return r&&!r[A]&&(r=c(r)),i&&!i[A]&&(i=c(i,s)),I(function(s,o,u,a){if(s&&i)return;var f,c,h,p=[],v=[],m=o.length,g=s||d(t||"*",u.nodeType?[u]:u,[],s),y=e&&(s||!t)?l(g,p,e,u,a):g,b=n?i||(s?e:m||r)?[]:o:y;n&&n(y,b,u,a);if(r){h=l(b,v),r(h,[],u,a),f=h.length;while(f--)if(c=h[f])b[v[f]]=!(y[v[f]]=c)}if(s){f=e&&b.length;while(f--)if(c=b[f])s[p[f]]=!(o[p[f]]=c)}else b=l(b===o?b.splice(m,b.length):b),i?i(null,o,b,a):B.apply(o,b)})}function h(e){var t,n,r,i=e.length,s=b.relative[e[0].type],o=s||b.relative[" "],u=s?1:0,l=a(function(e){return e===t},o,!0),p=a(function(e){return F.call(t,e)>-1},o,!0),d=[function(e,n,r){return!s&&(r||n!==C)||((t=n).nodeType?l(e,n,r):p(e,n,r))}];for(;u<i;u++)if(n=b.relative[e[u].type])d=[a(f(d),n)];else{n=b.filter[e[u].type].apply(null,e[u].matches);if(n[A]){r=++u;for(;r<i;r++)if(b.relative[e[r].type])break;return c(u>1&&f(d),u>1&&e.slice(0,u-1).join("").replace(G,"$1"),n,u<r&&h(e.slice(u,r)),r<i&&h(e=e.slice(r)),r<i&&e.join(""))}d.push(n)}return f(d)}function p(e,t){var r=t.length>0,i=e.length>0,s=function(o,u,a,f,c){var h,p,d,v=[],m=0,y="0",w=o&&[],E=c!=null,S=C,x=o||i&&b.find.TAG("*",c&&u.parentNode||u),T=D+=S==null?1:Math.E;E&&(C=u!==M&&u,g=s.el);for(;(h=x[y])!=null;y++){if(i&&h){for(p=0;d=e[p];p++)if(d(h,u,a)){f.push(h);break}E&&(D=T,g=++s.el)}r&&((h=!d&&h)&&m--,o&&w.push(h))}m+=y;if(r&&y!==m){for(p=0;d=t[p];p++)d(w,v,u,a);if(o){if(m>0)while(y--)!w[y]&&!v[y]&&(v[y]=H.call(f));v=l(v)}B.apply(f,v),E&&!o&&v.length>0&&m+t.length>1&&n.uniqueSort(f)}return E&&(D=T,C=S),w};return s.el=0,r?I(s):s}function d(e,t,r,i){var s=0,o=t.length;for(;s<o;s++)n(e,t[s],r,i);return r}function v(e,t,n,r,i){var s,o,a,f,l,c=u(e),h=c.length;if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!i&&b.relative[o[1].type]){t=b.find.ID(a.matches[0].replace(at,""),t,i)[0];if(!t)return n;e=e.slice(o.shift().length)}for(s=ft.POS.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(b.relative[f=a.type])break;if(l=b.find[f])if(r=l(a.matches[0].replace(at,""),it.test(o[0].type)&&t.parentNode||t,i)){o.splice(s,1),e=r.length&&o.join("");if(!e)return B.apply(n,j.call(r,0)),n;break}}}return x(e,c)(r,t,i,n,it.test(e)),n}function m(){}var g,y,b,w,E,S,x,T,N,C,k=!0,L="undefined",A=("sizcache"+Math.random()).replace(".",""),O=String,M=e.document,_=M.documentElement,D=0,P=0,H=[].pop,B=[].push,j=[].slice,F=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},I=function(e,t){return e[A]=t==null||t,e},q=function(){var e={},t=[];return I(function(n,r){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n]=r},e)},R=q(),U=q(),z=q(),W="[\\x20\\t\\r\\n\\f]",X="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=X.replace("w","w#"),$="([*^$|!~]?=)",J="\\["+W+"*("+X+")"+W+"*(?:"+$+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+W+"*\\]",K=":("+X+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+J+")|[^:]|\\\\.)*|.*))\\)|)",Q=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",G=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=new RegExp("^"+W+"*,"+W+"*"),et=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),tt=new RegExp(K),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rt=/^:not/,it=/[\x20\t\r\n\f]*[+~]/,st=/:not\($/,ot=/h\d/i,ut=/input|select|textarea|button/i,at=/\\(?!\\)/g,ft={ID:new RegExp("^#("+X+")"),CLASS:new RegExp("^\\.("+X+")"),NAME:new RegExp("^\\[name=['\"]?("+X+")['\"]?\\]"),TAG:new RegExp("^("+X.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+K),POS:new RegExp(Q,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+Q,"i")},lt=function(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),ht=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"}),pt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),vt=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",_.insertBefore(e,_.firstChild);var t=M.getElementsByName&&M.getElementsByName(A).length===2+M.getElementsByName(A+0).length;return y=!M.getElementById(A),_.removeChild(e),t});try{j.call(_.childNodes,0)[0].nodeType}catch(mt){j=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},w=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=w(t);return n},E=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},S=n.contains=_.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:_.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=E(e);return r||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):r||pt?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:I,match:ft,attrHandle:ht?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==L&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==L&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==L&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:ct?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:vt&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},CLASS:dt&&function(e,t,n){if(typeof t.getElementsByClassName!==L&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;if(ft.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])tt.test(t)&&(n=u(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:y?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var n=typeof t.getAttributeNode!==L&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=R[A][e];return t||(t=R(e,new RegExp("(^|"+W+")"+e+"("+W+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")}},ATTR:function(e,t,r){return function(i,s){var o=n.attr(i,e);return o==null?t==="!=":t?(o+="",t==="="?o===r:t==="!="?o!==r:t==="^="?r&&o.indexOf(r)===0:t==="*="?r&&o.indexOf(r)>-1:t==="$="?r&&o.substr(o.length-r.length)===r:t==="~="?(" "+o+" ").indexOf(r)>-1:t==="|="?o===r||o.substr(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var r,i=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return i[A]?i(t):i.length>1?(r=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?I(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=F.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,r)}):i}},pseudos:{not:I(function(e){var t=[],n=[],r=x(e.replace(G,"$1"));return r[A]?I(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:I(function(e){return function(t){return n(e,t).length>0}}),contains:I(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:i("submit"),reset:i("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return ut.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:s(function(e,t,n){return[0]}),last:s(function(e,t,n){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:s(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},T=_.compareDocumentPosition?function(e,t){return e===t?(N=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return N=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a)return o(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return o(i[l],s[l]);return l===n?o(e,s[l],-1):o(i[l],t,1)},[0,0].sort(T),k=!N,n.uniqueSort=function(e){var t,n=1;N=k,e.sort(T);if(N)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},x=n.compile=function(e,t){var n,r=[],i=[],s=z[A][e];if(!s){t||(t=u(e)),n=t.length;while(n--)s=h(t[n]),s[A]?r.push(s):i.push(s);s=z(e,p(i,r))}return s},M.querySelectorAll&&function(){var e,t=v,r=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],o=[":active",":focus"],a=_.matchesSelector||_.mozMatchesSelector||_.webkitMatchesSelector||_.oMatchesSelector||_.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=new RegExp(s.join("|")),v=function(e,n,i,o,a){if(!o&&!a&&(!s||!s.test(e))){var f,l,c=!0,h=A,p=n,d=n.nodeType===9&&e;if(n.nodeType===1&&n.nodeName.toLowerCase()!=="object"){f=u(e),(c=n.getAttribute("id"))?h=c.replace(r,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",l=f.length;while(l--)f[l]=h+f[l].join("");p=it.test(e)&&n.parentNode||n,d=f.join(",")}if(d)try{return B.apply(i,j.call(p.querySelectorAll(d),0)),i}catch(v){}finally{c||n.removeAttribute("id")}}return t(e,n,i,o,a)},a&&(lt(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),o.push("!=",K)}catch(n){}}),o=new RegExp(o.join("|")),n.matchesSelector=function(t,r){r=r.replace(i,"='$1']");if(!E(t)&&!o.test(r)&&(!s||!s.test(r)))try{var u=a.call(t,r);if(u||e||t.document&&t.document.nodeType!==11)return u}catch(f){}return n(r,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=m.prototype=b.pseudos,b.setFilters=new m,n.attr=Y.attr,Y.find=n,Y.expr=n.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=n.uniqueSort,Y.text=n.getText,Y.isXMLDoc=n.isXML,Y.contains=n.contains}(e);var Pt=/Until$/,Ht=/^(?:parents|prev(?:Until|All))/,Bt=/^.[^:#\[\.,]*$/,jt=Y.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return Y(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(Y.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,Y.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=Y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1),"not",e)},filter:function(e){return this.pushStack(f(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?jt.test(e)?Y(e,this.context).index(this[0])>=0:Y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=jt.test(e)||typeof e!="string"?Y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:Y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?Y.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),r=Y.merge(this.get(),n);return this.pushStack(u(n[0])||u(r[0])?r:Y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Y.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Y.dir(e,"previousSibling",n)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(n,r){var i=Y.map(this,t,n);return Pt.test(e)||(r=n),r&&typeof r=="string"&&(i=Y.filter(r,i)),i=this.length>1&&!Ft[e]?Y.unique(i):i,this.length>1&&Ht.test(e)&&(i=i.reverse()),this.pushStack(i,e,$.call(arguments).join(","))}}),Y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!Y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,Xt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+It+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/\/(java|ecma)script/i,Yt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=l(R),tn=en.appendChild(R.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Y.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(n){Y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||Y.filter(e,[n]).length)!t&&n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),Y.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&Y.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(qt,""):t;if(typeof e=="string"&&!Vt.test(e)&&(Y.support.htmlSerialize||!Jt.test(e))&&(Y.support.leadingWhitespace||!Rt.test(e))&&!Zt[(zt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ut,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var n=Y(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],h=this.length;if(!Y.support.checkClone&&h>1&&typeof f=="string"&&Qt.test(f))return this.each(function(){Y(this).domManip(e,n,r)});if(Y.isFunction(f))return this.each(function(i){var s=Y(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=Y.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&Y.nodeName(s,"tr");for(u=i.cacheable||h-1;a<h;a++)r.call(n&&Y.nodeName(this[a],"table")?c(this[a],"tbody"):this[a],a===u?o:Y.clone(o,!0,!0))}o=s=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Yt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,n,r){var i,s,o,u=e[0];return n=n||R,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof u=="string"&&u.length<512&&n===R&&u.charAt(0)==="<"&&!$t.test(u)&&(Y.support.checkClone||!Qt.test(u))&&(Y.support.html5Clone||!Jt.test(u))&&(s=!0,i=Y.fragments[u],o=i!==t),i||(i=n.createDocumentFragment(),Y.clean(e,n,i,r),s&&(Y.fragments[u]=o&&i)),{fragment:i,cacheable:s}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(n){var r,i=0,s=[],o=Y(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),Y(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),Y.extend({clone:function(e,t,n){var r,i,s,o;Y.support.html5Clone||Y.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild));if((!Y.support.noCloneEvent||!Y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!Y.isXMLDoc(e)){p(e,o),r=d(e),i=d(o);for(s=0;r[s];++s)i[s]&&p(r[s],i[s])}if(t){h(e,o);if(n){r=d(e),i=d(o);for(s=0;r[s];++s)h(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i,s,o,u,a,f,c,h,p,d,m,g,y=t===R&&en,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=R;for(i=0;(o=e[i])!=null;i++){typeof o=="number"&&(o+="");if(!o)continue;if(typeof o=="string")if(!Xt.test(o))o=t.createTextNode(o);else{y=y||l(t),c=t.createElement("div"),y.appendChild(c),o=o.replace(Ut,"<$1></$2>"),u=(zt.exec(o)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,f=a[0],c.innerHTML=a[1]+o+a[2];while(f--)c=c.lastChild;if(!Y.support.tbody){h=Wt.test(o),p=u==="table"&&!h?c.firstChild&&c.firstChild.childNodes:a[1]==="<table>"&&!h?c.childNodes:[];for(s=p.length-1;s>=0;--s)Y.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!Y.support.leadingWhitespace&&Rt.test(o)&&c.insertBefore(t.createTextNode(Rt.exec(o)[0]),c.firstChild),o=c.childNodes,c.parentNode.removeChild(c)}o.nodeType?b.push(o):Y.merge(b,o)}c&&(o=c=y=null);if(!Y.support.appendChecked)for(i=0;(o=b[i])!=null;i++)Y.nodeName(o,"input")?v(o):typeof o.getElementsByTagName!="undefined"&&Y.grep(o.getElementsByTagName("input"),v);if(n){m=function(e){if(!e.type||Gt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(i=0;(o=b[i])!=null;i++)if(!Y.nodeName(o,"script")||!m(o))n.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(g=Y.grep(Y.merge([],o.getElementsByTagName("script")),m),b.splice.apply(b,[i+1,0].concat(g)),i+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=Y.expando,a=Y.cache,f=Y.support.deleteExpando,l=Y.event.special;for(;(i=e[o])!=null;o++)if(t||Y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?Y.event.remove(i,s):Y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,Y.deletedIds.push(r))}}}}),function(){var e,t;Y.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Y.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Y.browser=t,Y.sub=function(){function e(t,n){return new e.fn.init(t,n)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function n(n,r){return r&&r instanceof Y&&!(r instanceof e)&&(r=e(r)),Y.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,sn,on=/alpha\([^)]*\)/i,un=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,fn=/^(none|table(?!-c[ea]).+)/,ln=/^margin/,cn=new RegExp("^("+Z+")(.*)$","i"),hn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+Z+")","i"),dn={},vn={position:"absolute",visibility:"hidden",display:"block"},mn={letterSpacing:0,fontWeight:400},gn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Y.fn.toggle;Y.fn.extend({css:function(e,n){return Y.access(this,function(e,n,r){return r!==t?Y.style(e,n,r):Y.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n=typeof e=="boolean";return Y.isFunction(e)&&Y.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:g(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=Y.camelCase(n),f=e.style;n=Y.cssProps[a]||(Y.cssProps[a]=m(f,a)),u=Y.cssHooks[n]||Y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=pn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(Y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!Y.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=Y.camelCase(n);return n=Y.cssProps[a]||(Y.cssProps[a]=m(e.style,a)),u=Y.cssHooks[n]||Y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=nn(e,n)),s==="normal"&&n in mn&&(s=mn[n]),r||i!==t?(o=parseFloat(s),r||Y.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?nn=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!Y.contains(t.ownerDocument,t)&&(r=Y.style(t,n)),hn.test(r)&&ln.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:R.documentElement.currentStyle&&(nn=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),hn.test(i)&&!an.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&fn.test(nn(e,"display"))?Y.swap(e,vn,function(){return E(e,t,r)}):E(e,t,r)},set:function(e,n,r){return b(e,n,r?w(e,t,r,Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box"):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return un.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&Y.trim(s.replace(on,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=on.test(s)?s.replace(on,i):s+" "+i}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return nn(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return hn.test(r)?Y(e).position()[t]+"px":r}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!Y.support.reliableHiddenOffsets&&(e.style&&e.style.display||nn(e,"display"))==="none"},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+gn[r]+t]=i[r]||i[r-2]||i[0];return s}},ln.test(e)||(Y.cssHooks[e+t].set=b)});var wn=/%20/g,En=/\[\]$/,Sn=/\r?\n/g,xn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tn=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tn.test(this.nodeName)||xn.test(this.type))}).map(function(e,t){var n=Y(this).val();return n==null?null:Y.isArray(n)?Y.map(n,function(e,n){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Y.param=function(e,n){var r,i=[],s=function(e,t){t=Y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=Y.ajaxSettings&&Y.ajaxSettings.traditional);if(Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){s(this.name,this.value)});else for(r in e)x(r,e[r],n,s);return i.join("&").replace(wn,"+")};var Nn,Cn,kn=/#.*$/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Mn=/^\/\//,_n=/\?/,Dn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Pn=/([?&])_=[^&]*/,Hn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=Y.fn.load,jn={},Fn={},In=["*/"]+["*"];try{Cn=U.href}catch(qn){Cn=R.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Hn.exec(Cn.toLowerCase())||[],Y.fn.load=function(e,n,r){if(typeof e!="string"&&Bn)return Bn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),Y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),Y.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?Y("<div>").append(e.replace(Dn,"")).find(i):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,r,i,s){return Y.isFunction(r)&&(s=s||i,i=r,r=t),Y.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),Y.extend({getScript:function(e,n){return Y.get(e,t,n,"script")},getJSON:function(e,t,n){return Y.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),C(e,t),e},ajaxSettings:{url:Cn,isLocal:An.test(Nn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":In},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(jn),ajaxTransport:T(Fn),ajax:function(e,n){function r(e,n,r,o){var f,c,y,b,E,x=n;if(w===2)return;w=2,a&&clearTimeout(a),u=t,s=o||"",S.readyState=e>0?4:0,r&&(b=k(h,S,r));if(e>=200&&e<300||e===304)h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(Y.lastModified[i]=E),E=S.getResponseHeader("Etag"),E&&(Y.etag[i]=E)),e===304?(x="notmodified",f=!0):(f=L(h,b),x=f.state,c=f.data,y=f.error,f=!y);else{y=x;if(!x||e)x="error",e<0&&(e=0)}S.status=e,S.statusText=(n||x)+"",f?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,l&&d.trigger("ajax"+(f?"Success":"Error"),[S,h,f?c:y]),m.fireWith(p,[S,x]),l&&(d.trigger("ajaxComplete",[S,h]),--Y.active||Y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=Y.ajaxSetup({},n),p=h.context||h,d=p!==h&&(p.nodeType||p instanceof Y)?Y(p):Y.event,v=Y.Deferred(),m=Y.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return w===2?s:null},getResponseHeader:function(e){var n;if(w===2){if(!o){o={};while(n=Ln.exec(s))o[n[1].toLowerCase()]=n[2]}n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||E,u&&u.abort(e),r(0,e),this}};v.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(w<2)for(t in e)g[t]=[g[t],e[t]];else t=e[S.status],S.always(t)}return this},h.url=((e||h.url)+"").replace(kn,"").replace(Mn,Nn[1]+"//"),h.dataTypes=Y.trim(h.dataType||"*").toLowerCase().split(tt),h.crossDomain==null&&(f=Hn.exec(h.url.toLowerCase())||!1,h.crossDomain=f&&f.join(":")+(f[3]?"":f[1]==="http:"?80:443)!==Nn.join(":")+(Nn[3]?"":Nn[1]==="http:"?80:443)),h.data&&h.processData&&typeof h.data!="string"&&(h.data=Y.param(h.data,h.traditional)),N(jn,h,n,S);if(w===2)return S;l=h.global,h.type=h.type.toUpperCase(),h.hasContent=!On.test(h.type),l&&Y.active++===0&&Y.event.trigger("ajaxStart");if(!h.hasContent){h.data&&(h.url+=(_n.test(h.url)?"&":"?")+h.data,delete h.data),i=h.url;if(h.cache===!1){var x=Y.now(),T=h.url.replace(Pn,"$1_="+x);h.url=T+(T===h.url?(_n.test(h.url)?"&":"?")+"_="+x:"")}}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(i=i||h.url,Y.lastModified[i]&&S.setRequestHeader("If-Modified-Since",Y.lastModified[i]),Y.etag[i]&&S.setRequestHeader("If-None-Match",Y.etag[i])),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+In+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)S.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&w!==2){E="abort";for(c in{success:1,error:1,complete:1})S[c](h[c]);u=N(Fn,h,n,S);if(!u)r(-1,"No Transport");else{S.readyState=1,l&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,u.send(y,r)}catch(C){if(!(w<2))throw C;r(-1,C)}}return S}return S.abort()},active:0,lastModified:{},etag:{}});var Rn=[],Un=/\?/,zn=/(=)\?(?=&|$)|\?\?/,Wn=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Y.expando+"_"+Wn++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&zn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=Y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(zn,"$1"+s):h?n.data=a.replace(zn,"$1"+s):l&&(n.url+=(Un.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||Y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Rn.push(s)),u&&Y.isFunction(o)&&o(u[0]),u=o=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(i,s){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Xn,Vn=e.ActiveXObject?function(){for(var e in Xn)Xn[e](0,1)}:!1,$n=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||O()}:A,function(e){Y.extend(Y.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Y.ajaxSettings.xhr()),Y.support.ajax&&Y.ajaxTransport(function(n){if(!n.crossDomain||Y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=Y.noop,Vn&&delete Xn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++$n,Vn&&(Xn||(Xn={},Y(e).unload(Vn)),Xn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Jn,Kn,Qn=/^(?:toggle|show|hide)$/,Gn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Yn=/queueHooks$/,Zn=[H],er={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Gn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(Y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=Y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,Y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};Y.Animation=Y.extend(D,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),Y.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(Y.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=Y.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[Y.cssProps[e.prop]]!=null||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var n=Y.fn[t];Y.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&Y.isFunction(r)&&Y.isFunction(i)?n.apply(this,arguments):this.animate(j(t,!0),r,i,s)}}),Y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Y.isEmptyObject(e),s=Y.speed(t,n,r),o=function(){var t=D(this,Y.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=Y.timers,o=Y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Yn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&Y.dequeue(this,e)})}}),Y.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Y.speed=function(e,t,n){var r=e&&typeof e=="object"?Y.extend({},e):{complete:n||!n&&t||Y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Y.isFunction(t)&&t};r.duration=Y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in Y.fx.speeds?Y.fx.speeds[r.duration]:Y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){Y.isFunction(r.old)&&r.old.call(this),r.queue&&Y.dequeue(this,r.queue)},r},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=B.prototype.init,Y.fx.tick=function(){var e,t=Y.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!Kn&&(Kn=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(Kn),Kn=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?Y.offset.bodyOffset(l):(n=c.documentElement,Y.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=F(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},Y.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,n+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Y.css(e,"position");r==="static"&&(e.style.position="relative");var i=Y(e),s=i.offset(),o=Y.css(e,"top"),u=Y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&Y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),Y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},Y.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Y.css(e,"marginTop"))||0,n.left-=parseFloat(Y.css(e,"marginLeft"))||0,r.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||R.body;while(e&&!tr.test(e.nodeName)&&Y.css(e,"position")==="static")e=e.offsetParent;return e||R.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Y.fn[e]=function(i){return Y.access(this,function(e,i,s){var o=F(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?Y(o).scrollLeft():s,r?s:Y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,n){Y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){Y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return Y.access(this,function(n,r,i){var s;return Y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?Y.css(n,r,i,u):Y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=Y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})})(window),function(e){var t=function(){var e=function(){};return e.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){r||(this.context=t,this.buffer=[]);if(!this.includes("",e)){if(r)return e;this.send(e);return}e=this.render_pragmas(e);var i=this.render_section(e,t,n);if(r)return this.render_tags(i,t,n,r);this.render_tags(i,t,n,r)},send:function(e){e!=""&&this.buffer.push(e)},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return e.replace(n,function(e,n,r){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};t.pragmas[n]={};if(r){var i=r.split("=");t.pragmas[n][i[0]]=i[1]}return""})},render_partial:function(e,t,n){e=this.trim(e);if(!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return typeof t[e]!="object"?this.render(n[e],t,n,!0):this.render(n[e],t[e],n,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return e;var r=this,i=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return e.replace(i,function(e,i,s,o){var u=r.find(s,t);if(i=="^")return!u||r.is_array(u)&&u.length===0?r.render(o,t,n,!0):"";if(i=="#")return r.is_array(u)?r.map(u,function(e){return r.render(o,r.create_context(e),n,!0)}).join(""):r.is_object(u)?r.render(o,r.create_context(u),n,!0):typeof u=="function"?u.call(t,o,function(e){return r.render(e,t,n,!0)}):u?r.render(o,t,n,!0):""})},render_tags:function(e,t,n,r){var i=this,s=function(){return new RegExp(i.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+i.ctag+"+","g")},o=s(),u=function(e,r,u){switch(r){case"!":return"";case"=":return i.set_delimiters(u),o=s(),"";case">":return i.render_partial(u,t,n);case"{":return i.find(u,t);default:return i.escape(i.find(u,t))}},a=e.split("\n");for(var f=0;f<a.length;f++)a[f]=a[f].replace(o,u,this),r||this.send(a[f]);if(r)return a.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||e===0||e}e=this.trim(e);var r;return n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]),typeof r=="function"?r.apply(t):r!==undefined?r:""},includes:function(e,t){return t.indexOf(this.otag+e)!=-1},escape:function(e){return e=String(e===null?"":e),e.replace(/&(?!\w+;)|["<>\\]/g,function(e){switch(e){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return e}})},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&typeof e=="object"},is_array:function(e){return Object.prototype.toString.call(e)==="[object Array]"},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},map:function(e,t){if(typeof e.map=="function")return e.map(t);var n=[],r=e.length;for(var i=0;i<r;i++)n.push(t(e[i]));return n}},{name:"mustache.js",version:"0.3.1-dev",to_html:function(t,n,r,i){var s=new e;i&&(s.send=i),s.render(t,n,r);if(!i)return s.buffer.join("\n")},escape:function(t){return(new e).escape(t)}}}();e.mustache=function(e,n,r){return t.to_html(e,n,r)},e.mustache.escape=function(e){return t.escape(e)}}(jQuery),function(e){e.fn.codemirror=function(t){var n=this,r=e.extend({mode:"javascript",lineNumbers:!1,runmode:!1},t);return r.runmode?this.each(function(){var t=e(this),n=[],i=[],s=0,o=function(e,t){e=="\n"?(n.push("<br>"),i.push("<pre>"+ ++s+"</pre>")):t?n.push('<span class="cm-'+CodeMirror.htmlEscape(t)+'">'+CodeMirror.htmlEscape(e)+"</span>"):n.push(CodeMirror.htmlEscape(e))};CodeMirror.runMode(t.val(),r.mode,o),e('<div class="CodeMirror">'+(r.lineNumbers?'<div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text">'+i.join("")+"</div></div>":"<!--gutter-->")+'<div class="CodeMirror-lines">'+(r.lineNumbers?'<div style="position: relative; margin-left: '+s.toString().length+'em;">':"<div>")+'<pre class="cm-s-default">'+n.join("")+"</pre></div></div></div>").insertAfter(t),t.hide()}):this.each(function(){n=CodeMirror.fromTextArea(this,r)}),n}}(jQuery),function(e,t){(function(n){typeof define=="function"&&define.amd?define("sammy",["jquery"],n):e.sammy=t.Sammy=n(e)})(function(e){var n,r="([^/]+)",i=/:([\w\d]+)/g,s=/\?([^#]*)?$/,o=function(e){return Array.prototype.slice.call(e)},u=function(e){return Object.prototype.toString.call(e)==="[object Function]"},a=function(e){return Object.prototype.toString.call(e)==="[object Array]"},f=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},l=function(e){return decodeURIComponent((e||"").replace(/\+/g," "))},c=encodeURIComponent,h=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return function(){return this.route.apply(this,[e].concat(Array.prototype.slice.call(arguments)))}},d={},v=!!t.history&&!!history.pushState,m=[];return n=function(){var t=o(arguments),r,i;n.apps=n.apps||{};if(t.length===0||t[0]&&u(t[0]))return n.apply(n,["body"].concat(t));if(typeof (i=t.shift())=="string")return r=n.apps[i]||new n.Application,r.element_selector=i,t.length>0&&e.each(t,function(e,t){r.use(t)}),r.element_selector!=i&&delete n.apps[i],n.apps[r.element_selector]=r,r},n.VERSION="0.7.4",n.addLogger=function(e){m.push(e)},n.log=function(){var t=o(arguments);t.unshift("["+Date()+"]"),e.each(m,function(e,r){r.apply(n,t)})},typeof t.console!="undefined"?u(t.console.log.apply)?n.addLogger(function(){t.console.log.apply(t.console,arguments)}):n.addLogger(function(){t.console.log(arguments)}):typeof console!="undefined"&&n.addLogger(function(){console.log.apply(console,arguments)}),e.extend(n,{makeArray:o,isFunction:u,isArray:a}),n.Object=function(t){return e.extend(this,t||{})},e.extend(n.Object.prototype,{escapeHTML:h,h:h,toHash:function(){var t={};return e.each(this,function(e,n){u(n)||(t[e]=n)}),t},toHTML:function(){var t="";return e.each(this,function(e,n){u(n)||(t+="<strong>"+e+"</strong> "+n+"<br />")}),t},keys:function(e){var t=[];for(var n in this)(!u(this[n])||!e)&&t.push(n);return t},has:function(t){return this[t]&&e.trim(this[t].toString())!==""},join:function(){var e=o(arguments),t=e.shift();return e.join(t)},log:function(){n.log.apply(n,arguments)},toString:function(t){var n=[];return e.each(this,function(e,r){(!u(r)||t)&&n.push('"'+e+'": '+r.toString())}),"Sammy.Object: {"+n.join(",")+"}"}}),n.targetIsThisWindow=function(n){var r=e(n.target).attr("target");return!r||r===t.name||r==="_self"?!0:r==="_blank"?!1:r==="top"&&t===t.top?!0:!1},n.DefaultLocationProxy=function(e,t){this.app=e,this.is_native=!1,this.has_history=v,this._startPolling(t)},n.DefaultLocationProxy.fullPath=function(e){var t=e.toString().match(/^[^#]*(#.+)$/),n=t?t[1]:"";return[e.pathname,e.search,n].join("")},e.extend(n.DefaultLocationProxy.prototype,{bind:function(){var r=this,i=this.app,s=n.DefaultLocationProxy;e(t).bind("hashchange."+this.app.eventNamespace(),function(e,n){r.is_native===!1&&!n&&(r.is_native=!0,t.clearInterval(s._interval),s._interval=null),i.trigger("location-changed")}),v&&!i.disable_push_state&&(e(t).bind("popstate."+this.app.eventNamespace(),function(e){i.trigger("location-changed")}),e(document).delegate("a","click.history-"+this.app.eventNamespace(),function(e){if(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)return;var o=s.fullPath(this);if(this.hostname==t.location.hostname&&i.lookupRoute("get",o)&&n.targetIsThisWindow(e))return e.preventDefault(),r.setLocation(o),!1})),s._bindings||(s._bindings=0),s._bindings++},unbind:function(){e(t).unbind("hashchange."+this.app.eventNamespace()),e(t).unbind("popstate."+this.app.eventNamespace()),e(document).undelegate("a","click.history-"+this.app.eventNamespace()),n.DefaultLocationProxy._bindings--,n.DefaultLocationProxy._bindings<=0&&(t.clearInterval(n.DefaultLocationProxy._interval),n.DefaultLocationProxy._interval=null)},getLocation:function(){return n.DefaultLocationProxy.fullPath(t.location)},setLocation:function(e){/^([^#\/]|$)/.test(e)&&(v&&!this.app.disable_push_state?e="/"+e:e="#!/"+e);if(e!=this.getLocation()){if(!(v&&!this.app.disable_push_state&&/^\//.test(e)))return t.location=e;history.pushState({path:e},t.title,e),this.app.trigger("location-changed")}},_startPolling:function(r){var i=this;if(!n.DefaultLocationProxy._interval){r||(r=10);var s=function(){var r=i.getLocation();(typeof n.DefaultLocationProxy._last_location=="undefined"||r!=n.DefaultLocationProxy._last_location)&&t.setTimeout(function(){e(t).trigger("hashchange",[!0])},0),n.DefaultLocationProxy._last_location=r};s(),n.DefaultLocationProxy._interval=t.setInterval(s,r)}}}),n.Application=function(e){var t=this;this.routes={},this.listeners=new n.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(Math.random()*1e3,10),this.context_prototype=function(){n.EventContext.apply(this,arguments)},this.context_prototype.prototype=new n.EventContext,u(e)&&e.apply(this,[this]),this._location_proxy||this.setLocationProxy(new n.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(e,n){t.log(t.toString(),e.cleaned_type,n||{})})},n.Application.prototype=e.extend({},n.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(t){return t?e(this.element_selector).find(t):e(this.element_selector)},use:function(){var e=o(arguments),t=e.shift(),r=t||"";try{e.unshift(this),typeof t=="string"&&(r="Sammy."+t,t=n[t]),t.apply(this,e)}catch(i){typeof t=="undefined"?this.error("Plugin Error: called use() but plugin ("+r.toString()+") is not defined",i):u(t)?this.error("Plugin Error",i):this.error("Plugin Error: called use() but '"+r.toString()+"' is not a function",i)}return this},setLocationProxy:function(e){var t=this._location_proxy;this._location_proxy=e,this.isRunning()&&(t&&t.unbind(),this._location_proxy.bind())},log:function(){n.log.apply(n,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(t,n){var s=this,o=[],a,f,l=Array.prototype.slice.call(arguments,2);l.length===0&&u(n)&&(n=t,l=[n],t="any"),t=t.toLowerCase();if(n.constructor==String){i.lastIndex=0;while((f=i.exec(n))!==null)o.push(f[1]);n=new RegExp(n.replace(i,r)+"$")}return e.each(l,function(e,t){typeof t=="string"&&(l[e]=s[t])}),a=function(e){var t={verb:e,path:n,callback:l,param_names:o};s.routes[e]=s.routes[e]||[],s.routes[e].push(t)},t==="any"?e.each(this.ROUTE_VERBS,function(e,t){a(t)}):a(t),this},get:p("get"),post:p("post"),put:p("put"),del:p("delete"),any:p("any"),mapRoutes:function(t){var n=this;return e.each(t,function(e,t){n.route.apply(n,t)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(e,t,n){var r=this;typeof n=="undefined"&&(n=t);var i=function(){var e,t,i;e=arguments[0],i=arguments[1],i&&i.context?(t=i.context,delete i.context):t=new r.context_prototype(r,"bind",e.type,i,e.target),e.cleaned_type=e.type.replace(r.eventNamespace(),""),n.apply(t,[e,i])};return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i),this.isRunning()&&this._listen(e,i),this},trigger:function(e,t){return this.$element().trigger([e,this.eventNamespace()].join("."),[t]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(e,t){return u(e)&&(t=e,e={}),this.befores.push([e,t]),this},after:function(e){return this.bind("event-context-after",e)},around:function(e){return this.arounds.push(e),this},onComplete:function(e){return this._onComplete=e,this},isRunning:function(){return this._running},helpers:function(t){return e.extend(this.context_prototype.prototype,t),this},helper:function(e,t){return this.context_prototype.prototype[e]=t,this},run:function(r){if(this.isRunning())return!1;var i=this;return e.each(this.listeners.toHash(),function(t,n){e.each(n,function(e,n){i._listen(t,n)})}),this.trigger("run",{start_url:r}),this._running=!0,this.last_location=null,!/\#(.+)/.test(this.getLocation())&&typeof r!="undefined"&&this.setLocation(r),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){i._checkLocation()}),this.bind("submit",function(t){if(!n.targetIsThisWindow(t))return!0;var r=i._checkFormSubmission(e(t.target).closest("form"));return r===!1?t.preventDefault():!1}),e(t).bind("unload",function(){i.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var t=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(t.eventNamespace()),e.each(this.listeners.toHash(),function(n,r){e.each(r,function(e,r){t._unlisten(n,r)})}),this._running=!1,this},destroy:function(){return this.unload(),delete n.apps[this.element_selector],this},bindToAllEvents:function(t){var n=this;return e.each(this.APP_EVENTS,function(e,r){n.bind(r,t)}),e.each(this.listeners.keys(!0),function(r,i){e.inArray(i,n.APP_EVENTS)==-1&&n.bind(i,t)}),this},routablePath:function(e){return e.replace(s,"")},lookupRoute:function(e,t){var n=this,r=!1,i=0,s,o;if(typeof this.routes[e]!="undefined"){s=this.routes[e].length;for(;i<s;i++){o=this.routes[e][i];if(n.routablePath(t).match(o.path)){r=o;break}}}return r},runRoute:function(t,n,r,i){var s=this,o=this.lookupRoute(t,n),u,a,f,c,h,p,d,v,m;this.debug&&this.log("runRoute",[t,n].join(" ")),this.trigger("run-route",{verb:t,path:n,params:r}),typeof r=="undefined"&&(r={}),e.extend(r,this._parseQueryString(n));if(o){this.trigger("route-found",{route:o}),(v=o.path.exec(this.routablePath(n)))!==null&&(v.shift(),e.each(v,function(e,t){o.param_names[e]?r[o.param_names[e]]=l(t):(r.splat||(r.splat=[]),r.splat.push(l(t)))})),u=new this.context_prototype(this,t,n,r,i),f=this.arounds.slice(0),h=this.befores.slice(0),d=[u],r.splat&&(d=d.concat(r.splat)),a=function(){var e,t,n;while(h.length>0){p=h.shift();if(s.contextMatchesOptions(u,p[0])){e=p[1].apply(u,[u]);if(e===!1)return!1}}return s.last_route=o,u.trigger("event-context-before",{context:u}),typeof o.callback=="function"&&(o.callback=[o.callback]),o.callback&&o.callback.length&&(t=-1,n=function(){t++,o.callback[t]?e=o.callback[t].apply(u,d):s._onComplete&&typeof (s._onComplete==="function")&&s._onComplete(u)},d.push(n),n()),u.trigger("event-context-after",{context:u}),e},e.each(f.reverse(),function(e,t){var n=a;a=function(){return t.apply(u,[n])}});try{m=a()}catch(g){this.error(["500 Error",t,n].join(" "),g)}return m}return this.notFound(t,n)},contextMatchesOptions:function(t,n,r){var i=n;if(typeof i=="string"||f(i))i={path:i};typeof r=="undefined"&&(r=!0);if(e.isEmptyObject(i))return!0;if(a(i.path)){var s,o,u,l;s=[];for(o=0,l=i.path.length;o<l;o+=1)u=e.extend({},i,{path:i.path[o]}),s.push(this.contextMatchesOptions(t,u));var c=e.inArray(!0,s)>-1?!0:!1;return r?c:!c}if(i.only)return this.contextMatchesOptions(t,i.only,!0);if(i.except)return this.contextMatchesOptions(t,i.except,!1);var h=!0,p=!0;return i.path&&(f(i.path)||(i.path=new RegExp(i.path.toString()+"$")),h=i.path.test(t.path)),i.verb&&(typeof i.verb=="string"?p=i.verb===t.verb:p=i.verb.indexOf(t.verb)>-1),r?p&&h:!p||!h},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(e){return this._location_proxy.setLocation(e)},swap:function(e,t){var n=this.$element().html(e);return u(t)&&t(e),n},templateCache:function(e,t){return typeof t!="undefined"?d[e]=t:d[e]},clearTemplateCache:function(){return d={}},notFound:function(e,t){var n=this.error(["404 Not Found",e,t].join(" "));return e==="get"?n:!0},error:function(e,t){t||(t=new Error),t.message=[e,t.message].join(" "),this.trigger("error",{message:t.message,error:t});if(this.raise_errors)throw t;this.log(t.message,t)},_checkLocation:function(){var e,t;e=this.getLocation();if(!this.last_location||this.last_location[0]!="get"||this.last_location[1]!=e)this.last_location=["get",e],t=this.runRoute("get",e);return t},_getFormVerb:function(t){var n=e(t),r,i;i=n.find('input[name="_method"]'),i.length>0&&(r=i.val()),r||(r=n[0].getAttribute("method"));if(!r||r==="")r="get";return e.trim(r.toString().toLowerCase())},_checkFormSubmission:function(t){var n,r,i,s,o;return this.trigger("check-form-submission",{form:t}),n=e(t),r=n.attr("action")||"",i=this._getFormVerb(n),this.debug&&this.log("_checkFormSubmission",n,r,i),i==="get"?(s=this._serializeFormParams(n),s!==""&&(r+="?"+s),this.setLocation(r),o=!1):(s=e.extend({},this._parseFormParams(n)),o=this.runRoute(i,r,s,t.get(0))),typeof o=="undefined"?!1:o},_serializeFormParams:function(e){var t="",n=e.serializeArray(),r;if(n.length>0){t=this._encodeFormPair(n[0].name,n[0].value);for(r=1;r<n.length;r++)t=t+"&"+this._encodeFormPair(n[r].name,n[r].value)}return t},_encodeFormPair:function(e,t){return c(e)+"="+c(t)},_parseFormParams:function(e){var t={},n=e.serializeArray(),r;for(r=0;r<n.length;r++)t=this._parseParamPair(t,n[r].name,n[r].value);return t},_parseQueryString:function(e){var t={},n,r,i,o;n=e.match(s);if(n&&n[1]){r=n[1].split("&");for(o=0;o<r.length;o++)i=r[o].split("="),t=this._parseParamPair(t,l(i[0]),l(i[1]||""))}return t},_parseParamPair:function(e,t,n){return typeof e[t]!="undefined"?a(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n,e},_listen:function(e,t){return this.$element().bind([e,this.eventNamespace()].join("."),t)},_unlisten:function(e,t){return this.$element().unbind([e,this.eventNamespace()].join("."),t)}}),n.RenderContext=function(e){this.event_context=e,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},n.RenderContext.prototype=e.extend({},n.Object.prototype,{then:function(e){if(!u(e)){if(!(typeof e=="string"&&e in this.event_context))return this;var n=this.event_context[e];e=function(e){return n.apply(this.event_context,[e])}}var r=this;return this.waiting?this.callbacks.push(e):(this.wait(),t.setTimeout(function(){var t=e.apply(r,[r.content,r.previous_content]);t!==!1&&r.next(t)},0)),this},wait:function(){this.waiting=!0},next:function(e){this.waiting=!1,typeof e!="undefined"&&(this.previous_content=this.content,this.content=e),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(t,n,r){var i=this;return this.then(function(){var s,o,a,f;u(n)?(r=n,n={}):n=e.extend({},n),r&&this.then(r);if(typeof t=="string")return a=t.match(/\.json$/)||n.json,s=a?n.cache===!0:n.cache!==!1,i.next_engine=i.event_context.engineFor(t),delete n.cache,delete n.json,n.engine&&(i.next_engine=n.engine,delete n.engine),s&&(o=this.event_context.app.templateCache(t))?o:(this.wait(),e.ajax(e.extend({url:t,data:{},dataType:a?"json":"text",type:"get",success:function(e){s&&i.event_context.app.templateCache(t,e),i.next(e)}},n)),!1);if(t.nodeType)return t.innerHTML;if(t.selector)return i.next_engine=t.attr("data-engine"),n.clone===!1?t.remove()[0].innerHTML.toString():t[0].innerHTML.toString()})},loadPartials:function(e){var t;if(e){this.partials=this.partials||{};for(t in e)(function(t,n){t.load(e[n]).then(function(e){this.partials[n]=e})})(this,t)}return this},render:function(e,t,n,r){return u(e)&&!t?this.then(e):(u(t)?(r=n,n=t,t=null):n&&!u(n)&&(r=n,n=null),this.loadPartials(r).load(e).interpolate(t,e).then(n))},partial:function(e,t,n,r){return u(n)?this.render(e,t,r).swap(n):u(t)?this.render(e,{},n).swap(t):this.render(e,t,n).swap()},send:function(){var e=this,t=o(arguments),n=t.shift();return a(t[0])&&(t=t[0]),this.then(function(r){return t.push(function(t){e.next(t)}),e.wait(),n.apply(n,t),!1})},collect:function(t,n,r){var i=this,s=function(){u(t)&&(n=t,t=this.content);var r=[],s=!1;return e.each(t,function(e,t){var o=n.apply(i,[e,t]);return o.jquery&&o.length==1&&(o=o[0],s=!0),r.push(o),o}),s?r:r.join("")};return r?s():this.then(s)},renderEach:function(t,n,r,i){return a(n)&&(i=r,r=n,n=null),this.load(t).then(function(s){var o=this;r||(r=a(this.previous_content)?this.previous_content:[]);if(!i)return this.collect(r,function(e,r){var i={},o=this.next_engine||t;return n?i[n]=r:i=r,this.event_context.interpolate(s,i,o)},!0);e.each(r,function(e,r){var u={},a=this.next_engine||t;n?u[n]=r:u=r,i(r,o.event_context.interpolate(s,u,a))})})},interpolate:function(e,t,n){var r=this;return this.then(function(i,s){!e&&s&&(e=s),this.next_engine&&(t=this.next_engine,this.next_engine=!1);var o=r.event_context.interpolate(i,e,t,this.partials);return n?s+o:o})},swap:function(e){return this.then(function(t){return this.event_context.swap(t,e),t}).trigger("changed",{})},appendTo:function(t){return this.then(function(n){e(t).append(n)}).trigger("changed",{})},prependTo:function(t){return this.then(function(n){e(t).prepend(n)}).trigger("changed",{})},replace:function(t){return this.then(function(n){e(t).html(n)}).trigger("changed",{})},trigger:function(e,t){return this.then(function(n){return typeof t=="undefined"&&(t={content:n}),this.event_context.trigger(e,t),n})}}),n.EventContext=function(e,t,r,i,s){this.app=e,this.verb=t,this.path=r,this.params=new n.Object(i),this.target=s},n.EventContext.prototype=e.extend({},n.Object.prototype,{$element:function(){return this.app.$element(o(arguments).shift())},engineFor:function(e){var t=this,n;if(u(e))return e;e=(e||t.app.template_engine).toString();if(n=e.match(/\.([^\.\?\#]+)$/))e=n[1];return e&&u(t[e])?t[e]:t.app.template_engine?this.engineFor(t.app.template_engine):function(e,t){return e}},interpolate:function(e,t,n,r){return this.engineFor(n).apply(this,[e,t,r])},render:function(e,t,r,i){return(new n.RenderContext(this)).render(e,t,r,i)},renderEach:function(e,t,r,i){return(new n.RenderContext(this)).renderEach(e,t,r,i)},load:function(e,t,r){return(new n.RenderContext(this)).load(e,t,r)},loadPartials:function(e){return(new n.RenderContext(this)).loadPartials(e)},partial:function(e,t,r,i){return(new n.RenderContext(this)).partial(e,t,r,i)},send:function(){var e=new n.RenderContext(this);return e.send.apply(e,arguments)},redirect:function(){var t,n=o(arguments),r=this.app.getLocation(),i=n.length;if(i>1){var s=0,u=[],a=[],f={},l=!1;for(;s<i;s++)typeof n[s]=="string"?u.push(n[s]):(e.extend(f,n[s]),l=!0);t=u.join("/");if(l){for(var c in f)a.push(this.app._encodeFormPair(c,f[c]));t+="?"+a.join("&")}}else t=n[0];this.trigger("redirect",{to:t}),this.app.last_location=[this.verb,this.path],this.app.setLocation(t),(new RegExp(t)).test(r)&&this.app.trigger("location-changed")},trigger:function(e,t){return typeof t=="undefined"&&(t={}),t.context||(t.context=this),this.app.trigger(e,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(e,t){return this.app.swap(e,t)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(t){return e.parseJSON(t)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),n})}(jQuery,window);var Faye=typeof Faye=="object"?Faye:{};typeof window!="undefined"&&(window.Faye=Faye),Faye.extend=function(e,t,n){if(!t)return e;for(var r in t){if(!t.hasOwnProperty(r))continue;if(e.hasOwnProperty(r)&&n===!1)continue;e[r]!==t[r]&&(e[r]=t[r])}return e},Faye.extend(Faye,{VERSION:"0.8.2",BAYEUX_VERSION:"1.0",ID_LENGTH:128,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:function(){return this}(),random:function(e){e=e||this.ID_LENGTH;if(e>32){var t=Math.ceil(e/32),n="";while(t--)n+=this.random(32);return n}var r=Math.pow(2,e)-1,i=r.toString(36).length,n=Math.floor(Math.random()*r).toString(36);while(n.length<i)n="0"+n;return n},clientIdFromMessages:function(e){var t=[].concat(e)[0];return t&&t.clientId},copyObject:function(e){var t,n,r;if(e instanceof Array){t=[],n=e.length;while(n--)t[n]=Faye.copyObject(e[n]);return t}if(typeof e=="object"){t=e===null?null:{};for(r in e)t[r]=Faye.copyObject(e[r]);return t}return e},commonElement:function(e,t){for(var n=0,r=e.length;n<r;n++)if(this.indexOf(t,e[n])!==-1)return e[n];return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},map:function(e,t,n){if(e.map)return e.map(t,n);var r=[];if(e instanceof Array)for(var i=0,s=e.length;i<s;i++)r.push(t.call(n||null,e[i],i));else for(var o in e){if(!e.hasOwnProperty(o))continue;r.push(t.call(n||null,o,e[o]))}return r},filter:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++)t.call(n||null,e[i],i)&&r.push(e[i]);return r},asyncEach:function(e,t,n,r){var i=e.length,s=-1,o=0,u=!1,a=function(){o-=1,s+=1;if(s===i)return n&&n.call(r);t(e[s],l)},f=function(){if(u)return;u=!0;while(o>0)a();u=!1},l=function(){o+=1,f()};l()},toJSON:function(e){return this.stringify?this.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t}):JSON.stringify(e)},logger:function(e){typeof console!="undefined"&&console.log(e)},timestamp:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),u=function(e){return e<10?"0"+e:String(e)};return u(t)+"-"+u(n)+"-"+u(r)+" "+u(i)+":"+u(s)+":"+u(o)}}),Faye.Class=function(e,t){typeof e!="function"&&(t=e,e=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},r=function(){};return r.prototype=e.prototype,n.prototype=new r,Faye.extend(n.prototype,t),n},Faye.Namespace=Faye.Class({initialize:function(){this._d={}},exists:function(e){return this._d.hasOwnProperty(e)},generate:function(){var e=Faye.random();while(this._d.hasOwnProperty(e))e=Faye.random();return this._d[e]=e},release:function(e){delete this._d[e]}}),Faye.Error=Faye.Class({initialize:function(e,t,n){this.code=e,this.params=Array.prototype.slice.call(t),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(e){e=e||"";if(!Faye.Grammar.ERROR.test(e))return new this(null,[],e);var t=e.split(":"),n=parseInt(t[0]),r=t[1].split(","),e=t[2];return new this(n,r,e)},Faye.Error.versionMismatch=function(){return(new this(300,arguments,"Version mismatch")).toString()},Faye.Error.conntypeMismatch=function(){return(new this(301,arguments,"Connection types not supported")).toString()},Faye.Error.extMismatch=function(){return(new this(302,arguments,"Extension mismatch")).toString()},Faye.Error.badRequest=function(){return(new this(400,arguments,"Bad request")).toString()},Faye.Error.clientUnknown=function(){return(new this(401,arguments,"Unknown client")).toString()},Faye.Error.parameterMissing=function(){return(new this(402,arguments,"Missing required parameter")).toString()},Faye.Error.channelForbidden=function(){return(new this(403,arguments,"Forbidden channel")).toString()},Faye.Error.channelUnknown=function(){return(new this(404,arguments,"Unknown channel")).toString()},Faye.Error.channelInvalid=function(){return(new this(405,arguments,"Invalid channel")).toString()},Faye.Error.extUnknown=function(){return(new this(406,arguments,"Unknown extension")).toString()},Faye.Error.publishFailed=function(){return(new this(407,arguments,"Failed to publish")).toString()},Faye.Error.serverError=function(){return(new this(500,arguments,"Internal server error")).toString()},Faye.Deferrable={callback:function(e,t){if(!e)return;if(this._v==="succeeded")return e.apply(t,this._j);this._k=this._k||[],this._k.push([e,t])},timeout:function(e,t){var n=this,r=Faye.ENV.setTimeout(function(){n.setDeferredStatus("failed",t)},e*1e3);this._w=r},errback:function(e,t){if(!e)return;if(this._v==="failed")return e.apply(t,this._j);this._l=this._l||[],this._l.push([e,t])},setDeferredStatus:function(){this._w&&Faye.ENV.clearTimeout(this._w);var e=Array.prototype.slice.call(arguments),t=e.shift(),n;this._v=t,this._j=e,t==="succeeded"?n=this._k:t==="failed"&&(n=this._l);if(!n)return;var r;while(r=n.shift())r[0].apply(r[1],this._j)}},Faye.Publisher={countListeners:function(e){return!this._3||!this._3[e]?0:this._3[e].length},bind:function(e,t,n){this._3=this._3||{};var r=this._3[e]=this._3[e]||[];r.push([t,n])},unbind:function(e,t,n){if(!this._3||!this._3[e])return;if(!t){delete this._3[e];return}var r=this._3[e],i=r.length;while(i--){if(t!==r[i][0])continue;if(n&&r[i][1]!==n)continue;r.splice(i,1)}},trigger:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(!this._3||!this._3[t])return;var n=this._3[t].slice(),r;for(var i=0,s=n.length;i<s;i++)r=n[i],r[0].apply(r[1],e)}},Faye.Timeouts={addTimeout:function(e,t,n,r){this._5=this._5||{};if(this._5.hasOwnProperty(e))return;var i=this;this._5[e]=Faye.ENV.setTimeout(function(){delete i._5[e],n.call(r)},1e3*t)},removeTimeout:function(e){this._5=this._5||{};var t=this._5[e];if(!t)return;clearTimeout(t),delete this._5[e]}},Faye.Logging={LOG_LEVELS:{error:3,warn:2,info:1,debug:0},logLevel:"error",log:function(e,t){if(!Faye.logger)return;var n=Faye.Logging.LOG_LEVELS;if(n[Faye.Logging.logLevel]>n[t])return;var e=Array.prototype.slice.apply(e),r=" ["+t.toUpperCase()+"] [Faye",i=this.className,s=e.shift().replace(/\?/g,function(){try{return Faye.toJSON(e.shift())}catch(t){return"[Object]"}});for(var o in Faye){if(i)continue;if(typeof Faye[o]!="function")continue;this instanceof Faye[o]&&(i=o)}i&&(r+="."+i),r+="] ",Faye.logger(Faye.timestamp()+r+s)}},function(){for(var e in Faye.Logging.LOG_LEVELS)(function(e,t){Faye.Logging[e]=function(){this.log(arguments,e)}})(e,Faye.Logging.LOG_LEVELS[e])}(),Faye.Grammar={LOWALPHA:/^[a-z]$/,UPALPHA:/^[A-Z]$/,ALPHA:/^([a-z]|[A-Z])$/,DIGIT:/^[0-9]$/,ALPHANUM:/^(([a-z]|[A-Z])|[0-9])$/,MARK:/^(\-|\_|\!|\~|\(|\)|\$|\@)$/,STRING:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*$/,TOKEN:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+$/,INTEGER:/^([0-9])+$/,CHANNEL_SEGMENT:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+$/,CHANNEL_SEGMENTS:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,WILD_CARD:/^\*{1,2}$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,VERSION_ELEMENT:/^(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/,CLIENT_ID:/^((([a-z]|[A-Z])|[0-9]))+$/,ID:/^((([a-z]|[A-Z])|[0-9]))+$/,ERROR_MESSAGE:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*$/,ERROR_ARGS:/^(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*$/,ERROR_CODE:/^[0-9][0-9][0-9]$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/},Faye.Extensible={addExtension:function(e){this._6=this._6||[],this._6.push(e),e.added&&e.added(this)},removeExtension:function(e){if(!this._6)return;var t=this._6.length;while(t--){if(this._6[t]!==e)continue;this._6.splice(t,1),e.removed&&e.removed(this)}},pipeThroughExtensions:function(e,t,n,r){this.debug("Passing through ? extensions: ?",e,t);if(!this._6)return n.call(r,t);var i=this._6.slice(),s=function(t){if(!t)return n.call(r,t);var o=i.shift();if(!o)return n.call(r,t);o[e]?o[e](t,s):s(t)};s(t)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(e){this.id=this.name=e},push:function(e){this.trigger("message",e)},isUnused:function(){return this.countListeners("message")===0}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(e){var t=this.parse(e),n=["/**",e],r=t.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,s=t.length;i<s;i++)r=t.slice(0,i),r.push("**"),n.push(this.unparse(r));return n},isValid:function(e){return Faye.Grammar.CHANNEL_NAME.test(e)||Faye.Grammar.CHANNEL_PATTERN.test(e)},parse:function(e){return this.isValid(e)?e.split("/").slice(1):null},unparse:function(e){return"/"+e.join("/")},isMeta:function(e){var t=this.parse(e);return t?t[0]===this.META:null},isService:function(e){var t=this.parse(e);return t?t[0]===this.SERVICE:null},isSubscribable:function(e){return this.isValid(e)?!this.isMeta(e)&&!this.isService(e):null},Set:Faye.Class({initialize:function(){this._2={}},getKeys:function(){var e=[];for(var t in this._2)e.push(t);return e},remove:function(e){delete this._2[e]},hasSubscription:function(e){return this._2.hasOwnProperty(e)},subscribe:function(e,t,n){if(!t)return;var r;for(var i=0,s=e.length;i<s;i++){r=e[i];var o=this._2[r]=this._2[r]||new Faye.Channel(r);o.bind("message",t,n)}},unsubscribe:function(e,t,n){var r=this._2[e];return r?(r.unbind("message",t,n),r.isUnused()?(this.remove(e),!0):!1):!1},distributeMessage:function(e){var t=Faye.Channel.expand(e.channel);for(var n=0,r=t.length;n<r;n++){var i=this._2[t[n]];i&&i.trigger("message",e.data)}}})}),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(e,t,n,r){this._7=e,this._2=t,this._m=n,this._n=r,this._x=!1},cancel:function(){if(this._x)return;this._7.unsubscribe(this._2,this._m,this._n),this._x=!0},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_RETRY:5,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(e,t){this.info("New client created for ?",e),this.endpoint=e||this.DEFAULT_ENDPOINT,this._E=Faye.CookieJar&&new Faye.CookieJar,this._y={},this._o=t||{},this._p=[],this.retry=this._o.retry||this.DEFAULT_RETRY,this._z(Faye.MANDATORY_CONNECTION_TYPES),this._1=this.UNCONNECTED,this._2=new Faye.Channel.Set,this._e=0,this._q={},this._8={reconnect:this.RETRY,interval:1e3*(this._o.interval||this.INTERVAL),timeout:1e3*(this._o.timeout||this.CONNECTION_TIMEOUT)},Faye.Event&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._p,"autodisconnect")<0&&this.disconnect()},this)},disable:function(e){this._p.push(e)},setHeader:function(e,t){this._y[e]=t},getClientId:function(){return this._0},getState:function(){switch(this._1){case this.UNCONNECTED:return"UNCONNECTED";case this.CONNECTING:return"CONNECTING";case this.CONNECTED:return"CONNECTED";case this.DISCONNECTED:return"DISCONNECTED"}},handshake:function(e,t){if(this._8.reconnect===this.NONE)return;if(this._1!==this.UNCONNECTED)return;this._1=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",this.endpoint),this._9({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:[this._a.connectionType]},function(r){if(r.successful){this._1=this.CONNECTED,this._0=r.clientId;var i=Faye.filter(r.supportedConnectionTypes,function(e){return Faye.indexOf(this._p,e)<0},this);this._z(i),this.info("Handshake successful: ?",this._0),this.subscribe(this._2.getKeys(),!0),e&&e.call(t)}else this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(e,t)},this._8.interval),this._1=this.UNCONNECTED},this)},connect:function(e,t){if(this._8.reconnect===this.NONE)return;if(this._1===this.DISCONNECTED)return;if(this._1===this.UNCONNECTED)return this.handshake(function(){this.connect(e,t)},this);this.callback(e,t);if(this._1!==this.CONNECTED)return;this.info("Calling deferred actions for ?",this._0),this.setDeferredStatus("succeeded"),this.setDeferredStatus("deferred");if(this._r)return;this._r=!0,this.info("Initiating connection for ?",this._0),this._9({channel:Faye.Channel.CONNECT,clientId:this._0,connectionType:this._a.connectionType},this._A,this)},disconnect:function(){if(this._1!==this.CONNECTED)return;this._1=this.DISCONNECTED,this.info("Disconnecting ?",this._0),this._9({channel:Faye.Channel.DISCONNECT,clientId:this._0},function(e){e.successful&&this._a.close()},this),this.info("Clearing channel listeners for ?",this._0),this._2=new Faye.Channel.Set},subscribe:function(e,t,n){if(e instanceof Array){for(var r=0,i=e.length;r<i;r++)this.subscribe(e[r],t,n);return}var s=new Faye.Subscription(this,e,t,n),o=t===!0,u=this._2.hasSubscription(e);return u&&!o?(this._2.subscribe([e],t,n),s.setDeferredStatus("succeeded"),s):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._0,e),o||this._2.subscribe([e],t,n),this._9({channel:Faye.Channel.SUBSCRIBE,clientId:this._0,subscription:e},function(r){if(!r.successful)return s.setDeferredStatus("failed",Faye.Error.parse(r.error)),this._2.unsubscribe(e,t,n);var i=[].concat(r.subscription);this.info("Subscription acknowledged for ? to ?",this._0,i),s.setDeferredStatus("succeeded")},this)},this),s)},unsubscribe:function(e,t,n){if(e instanceof Array){for(var r=0,i=e.length;r<i;r++)this.unsubscribe(e[r],t,n);return}var s=this._2.unsubscribe(e,t,n);if(!s)return;this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._0,e),this._9({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._0,subscription:e},function(e){if(!e.successful)return;var t=[].concat(e.subscription);this.info("Unsubscription acknowledged for ? from ?",this._0,t)},this)},this)},publish:function(e,t){var n=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._0,e,t),this._9({channel:e,data:t,clientId:this._0},function(e){e.successful?n.setDeferredStatus("succeeded"):n.setDeferredStatus("failed",Faye.Error.parse(e.error))},this)},this),n},receiveMessage:function(e){this.pipeThroughExtensions("incoming",e,function(e){if(!e)return;e.advice&&this._F(e.advice),this._G(e);if(e.successful===undefined)return;var t=this._q[e.id];if(!t)return;delete this._q[e.id],t[0].call(t[1],e)},this)},_z:function(e){Faye.Transport.get(this,e,function(e){this._a=e,this._a.cookies=this._E,this._a.headers=this._y,e.bind("down",function(){if(this._c!==undefined&&!this._c)return;this._c=!1,this.trigger("transport:down")},this),e.bind("up",function(){if(this._c!==undefined&&this._c)return;this._c=!0,this.trigger("transport:up")},this)},this)},_9:function(e,t,n){e.id=this._H(),t&&(this._q[e.id]=[t,n]),this.pipeThroughExtensions("outgoing",e,function(e){if(!e)return;this._a.send(e,this._8.timeout/1e3)},this)},_H:function(){return this._e+=1,this._e>=Math.pow(2,32)&&(this._e=0),this._e.toString(36)},_F:function(e){Faye.extend(this._8,e),this._8.reconnect===this.HANDSHAKE&&this._1!==this.DISCONNECTED&&(this._1=this.UNCONNECTED,this._0=null,this._A())},_G:function(e){if(!e.channel||e.data===undefined)return;this.info("Client ? calling listeners for ? with ?",this._0,e.channel,e.data),this._2.distributeMessage(e)},_I:function(){if(!this._r)return;this._r=null,this.info("Closed connection for ?",this._0)},_A:function(){this._I();var e=this;Faye.ENV.setTimeout(function(){e.connect()},this._8.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Transport=Faye.extend(Faye.Class({MAX_DELAY:0,batching:!0,initialize:function(e,t){this.debug("Created new ? transport for ?",this.connectionType,t),this._7=e,this._b=t,this._f=[]},close:function(){},send:function(e,t){this.debug("Client ? sending message to ?: ?",this._7._0,this._b,e);if(!this.batching)return this.request([e],t);this._f.push(e),this._J=t;if(e.channel===Faye.Channel.HANDSHAKE)return this.flush();e.channel===Faye.Channel.CONNECT&&(this._s=e),this.addTimeout("publish",this.MAX_DELAY,this.flush,this)},flush:function(){this.removeTimeout("publish"),this._f.length>1&&this._s&&(this._s.advice={timeout:0}),this.request(this._f,this._J),this._s=null,this._f=[]},receive:function(e){this.debug("Client ? received from ?: ?",this._7._0,this._b,e);for(var t=0,n=e.length;t<n;t++)this._7.receiveMessage(e[t])},retry:function(e,t){var n=!1,r=this._7.retry*1e3,i=this;return function(){if(n)return;n=!0,Faye.ENV.setTimeout(function(){i.request(e,t)},r)}}}),{get:function(e,t,n,r){var i=e.endpoint;t===undefined&&(t=this.supportedConnectionTypes()),Faye.asyncEach(this._t,function(s,o){var u=s[0],a=s[1];if(Faye.indexOf(t,u)<0)return o();a.isUsable(i,function(t){t?n.call(r,new a(e,i)):o()})},function(){throw new Error("Could not find a usable connection type for "+i)})},register:function(e,t){this._t.push([e,t]),t.prototype.connectionType=e},_t:[],supportedConnectionTypes:function(){return Faye.map(this._t,function(e){return e[0]})}}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Publisher),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_g:[],on:function(e,t,n,r){var i=function(){n.call(r)};e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i),this._g.push({_h:e,_u:t,_m:n,_n:r,_B:i})},detach:function(e,t,n,r){var i=this._g.length,s;while(i--){s=this._g[i];if(e&&e!==s._h||t&&t!==s._u||n&&n!==s._m||r&&r!==s._n)continue;s._h.removeEventListener?s._h.removeEventListener(s._u,s._B,!1):s._h.detachEvent("on"+s._u,s._B),this._g.splice(i,1),s=null}}},Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),Faye.URI=Faye.extend(Faye.Class({queryString:function(){var e=[];for(var t in this.params){if(!this.params.hasOwnProperty(t))continue;e.push(encodeURIComponent(t)+"="+encodeURIComponent(this.params[t]))}return e.join("&")},isLocal:function(){var e=Faye.URI.parse(Faye.ENV.location.href),t=e.hostname!==this.hostname||e.port!==this.port||e.protocol!==this.protocol;return!t},toURL:function(){var e=this.queryString();return this.protocol+this.hostname+":"+this.port+this.pathname+(e?"?"+e:"")}}),{parse:function(e,t){if(typeof e!="string")return e;var n=new this,r=function(t,r){e=e.replace(r,function(e){return e&&(n[t]=e),""})};r("protocol",/^https?\:\/+/),r("hostname",/^[^\/\:]+/),r("port",/^:[0-9]+/),Faye.extend(n,{protocol:Faye.ENV.location.protocol+"//",hostname:Faye.ENV.location.hostname,port:Faye.ENV.location.port},!1),n.port||(n.port=n.protocol==="https://"?"443":"80"),n.port=n.port.replace(/\D/g,"");var i=e.split("?"),s=i.shift(),o=i.join("?"),u=o?o.split("&"):[],a=u.length,f={};while(a--)i=u[a].split("="),f[decodeURIComponent(i[0]||"")]=decodeURIComponent(i[1]||"");return typeof t=="object"&&Faye.extend(f,t),n.pathname=s,n.params=f,n}}),this.JSON||(JSON={}),function(){function k(e){return e<10?"0"+e:e}function r(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,function(e){var t=s[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function q(e,t){var n,i,s,u,a=l,f,c=t[e];c&&typeof c=="object"&&typeof c.toJSON=="function"&&(c=c.toJSON(e)),typeof o=="function"&&(c=o.call(t,e,c));switch(typeof c){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";l+=p,f=[];if(Object.prototype.toString.apply(c)==="[object Array]"){u=c.length;for(n=0;n<u;n+=1)f[n]=q(n,c)||"null";return s=f.length===0?"[]":l?"[\n"+l+f.join(",\n"+l)+"\n"+a+"]":"["+f.join(",")+"]",l=a,s}if(o&&typeof o=="object"){u=o.length;for(n=0;n<u;n+=1)i=o[n],typeof i=="string"&&(s=q(i,c),s&&f.push(r(i)+(l?": ":":")+s))}else for(i in c)Object.hasOwnProperty.call(c,i)&&(s=q(i,c),s&&f.push(r(i)+(l?": ":":")+s));return s=f.length===0?"{}":l?"{\n"+l+f.join(",\n"+l)+"\n"+a+"}":"{"+f.join(",")+"}",l=a,s}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,p,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;Faye.stringify=function(e,t,n){var r;l="",p="";if(typeof n=="number")for(r=0;r<n;r+=1)p+=" ";else typeof n=="string"&&(p=n);o=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return q("",{"":e});throw new Error("JSON.stringify")},typeof JSON.stringify!="function"&&(JSON.stringify=Faye.stringify),typeof JSON.parse!="function"&&(JSON.parse=function(g,j){function h(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=h(i,n),r!==undefined?i[n]=r:delete i[n]);return j.call(e,t,i)}var i;m.lastIndex=0,m.test(g)&&(g=g.replace(m,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+g+")"),typeof j=="function"?h({"":i},""):i;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,request:function(e,t){if(e.length===0)return;this._i=this._i||{};for(var n=0,r=e.length;n<r;n++)this._i[e[n].id]=e[n];this.withSocket(function(t){t.send(Faye.toJSON(e))})},withSocket:function(e,t){this.callback(e,t),this.connect()},close:function(){if(this._C)return;this._C=!0,this._4&&this._4.close()},connect:function(){if(this._C)return;this._1=this._1||this.UNCONNECTED;if(this._1!==this.UNCONNECTED)return;this._1=this.CONNECTING;var e=Faye.Transport.WebSocket.getClass();this._4=new e(Faye.Transport.WebSocket.getSocketUrl(this._b));var t=this;this._4.onopen=function(){t._1=t.CONNECTED,t.setDeferredStatus("succeeded",t._4),t.trigger("up")},this._4.onmessage=function(e){var n=[].concat(JSON.parse(e.data));for(var r=0,i=n.length;r<i;r++)delete t._i[n[r].id];t.receive(n)},this._4.onclose=function(){var e=t._1===t.CONNECTED;t.setDeferredStatus("deferred"),t._1=t.UNCONNECTED,delete t._4;if(e)return t.resend();var n=t._7.retry*1e3;Faye.ENV.setTimeout(function(){t.connect()},n),t.trigger("down")}},resend:function(){var e=Faye.map(this._i,function(e,t){return t});this.request(e)}}),{WEBSOCKET_TIMEOUT:1e3,getSocketUrl:function(e){return Faye.URI&&(e=Faye.URI.parse(e).toURL()),e.replace(/^http(s?):/ig,"ws$1:")},getClass:function(){return Faye.WebSocket&&Faye.WebSocket.Client||Faye.ENV.WebSocket||Faye.ENV.MozWebSocket},isUsable:function(e,t,n){var r=this.getClass();if(!r)return t.call(n,!1);var i=!1,s=!1,o=this.getSocketUrl(e),u=new r(o);u.onopen=function(){i=!0,u.close(),t.call(n,!0),s=!0,u=null};var a=function(){!s&&!i&&t.call(n,!1),s=!0};u.onclose=u.onerror=a,Faye.ENV.setTimeout(a,this.WEBSOCKET_TIMEOUT)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(e,t){Faye.Transport.prototype.initialize.call(this,e,t),this._K=new Faye.Transport.XHR(e,t);var n=new EventSource(t+"/"+e.getClientId()),r=this;n.onopen=function(){r.trigger("up")},n.onerror=function(){r.trigger("down")},n.onmessage=function(e){r.receive(JSON.parse(e.data))},this._4=n},request:function(e,t){this._K.request(e,t)},close:function(){this._4.close()}}),{isUsable:function(e,t,n){Faye.Transport.XHR.isUsable(e,function(e){t.call(n,e&&Faye.ENV.EventSource)})}}),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{request:function(e,t){var n=this.retry(e,t),r=Faye.URI.parse(this._b).pathname,i=this,s=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;s.open("POST",r,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-Requested-With","XMLHttpRequest");var o=this.headers;for(var u in o){if(!o.hasOwnProperty(u))continue;s.setRequestHeader(u,o[u])}var a=function(){s.abort()};Faye.Event.on(Faye.ENV,"beforeunload",a);var f=function(){Faye.Event.detach(Faye.ENV,"beforeunload",a),s.onreadystatechange=function(){},s=null};s.onreadystatechange=function(){if(s.readyState!==4)return;var e=null,t=s.status,r=t>=200&&t<300||t===304||t===1223;if(!r)return f(),n(),i.trigger("down");try{e=JSON.parse(s.responseText)}catch(o){}f(),e?(i.receive(e),i.trigger("up")):(n(),i.trigger("down"))},s.send(Faye.toJSON(e))}}),{isUsable:function(e,t,n){t.call(n,Faye.URI.parse(e).isLocal())}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{request:function(e,t){var n=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,r=new n,i=this.retry(e,t),s=this;r.open("POST",this._b,!0);var o=function(){return r?(r.onload=r.onerror=r.ontimeout=r.onprogress=null,r=null,Faye.ENV.clearTimeout(a),!0):!1};r.onload=function(){var e=null;try{e=JSON.parse(r.responseText)}catch(t){}o(),e?(s.receive(e),s.trigger("up")):(i(),s.trigger("down"))};var u=function(){o(),i(),s.trigger("down")},a=Faye.ENV.setTimeout(u,1500*t);r.onerror=u,r.ontimeout=u,r.onprogress=function(){},r.send("message="+encodeURIComponent(Faye.toJSON(e)))}}),{isUsable:function(e,t,n){if(Faye.URI.parse(e).isLocal())return t.call(n,!1);if(Faye.ENV.XDomainRequest)return t.call(n,!0);if(Faye.ENV.XMLHttpRequest){var r=new Faye.ENV.XMLHttpRequest;return t.call(n,r.withCredentials!==undefined)}return t.call(n,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{request:function(e,t){var n={message:Faye.toJSON(e)},r=document.getElementsByTagName("head")[0],i=document.createElement("script"),s=Faye.Transport.JSONP.getCallbackName(),o=Faye.URI.parse(this._b,n),u=this.retry(e,t),a=this;Faye.ENV[s]=function(e){l(),a.receive(e),a.trigger("up")};var f=Faye.ENV.setTimeout(function(){l(),u(),a.trigger("down")},1500*t),l=function(){if(!Faye.ENV[s])return!1;Faye.ENV[s]=undefined;try{delete Faye.ENV[s]}catch(e){}return Faye.ENV.clearTimeout(f),i.parentNode.removeChild(i),!0};o.params.jsonp=s,i.type="text/javascript",i.src=o.toURL(),r.appendChild(i)}}),{_D:0,getCallbackName:function(){return this._D+=1,"__jsonp"+this._D+"__"},isUsable:function(e,t,n){t.call(n,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP),define("faye",function(){});var jsPDF=function(){function e(r,i,s,o){r="undefined"==typeof r?"p":r.toString().toLowerCase(),"undefined"==typeof i&&(i="mm"),"undefined"==typeof s&&(s="a4"),"undefined"==typeof o&&"undefined"==typeof zpipe&&(o=!1);var u=s.toString().toLowerCase(),a=[],f=0,l=o;o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224]};var c="0 g",h=0,p=[],v=2,g=!1,y=[],b={},w={},E=16,S,x,T,N,C={title:"",subject:"",author:"",keywords:"",creator:""},k=0,L=0,A={},O=new n(A),M,_=function(e){return e.toFixed(2)},D=function(e){var t=e.toFixed(0);return 10>e?"0"+t:t},P=function(e){g?p[h].push(e):(a.push(e),f+=e.length+1)},H=function(){return v++,y[v]=f,P(v+" 0 obj"),v},B=function(e){P("stream"),P(e),P("endstream")},j,F,I,q=function(e,t){var n;n=e;var r=t,i,s,o,u,a,f;void 0===r&&(r={}),i=r.sourceEncoding?i:"Unicode",o=r.outputEncoding;if((r.autoencode||o)&&b[S].metadata&&b[S].metadata[i]&&b[S].metadata[i].encoding&&(i=b[S].metadata[i].encoding,!o&&b[S].encoding&&(o=b[S].encoding),!o&&i.codePages&&(o=i.codePages[0]),"string"==typeof o&&(o=i[o]),o)){a=!1,u=[],i=0;for(s=n.length;i<s;i++)(f=o[n.charCodeAt(i)])?u.push(String.fromCharCode(f)):u.push(n[i]),u[i].charCodeAt(0)>>8&&(a=!0);n=u.join("")}for(i=n.length;void 0===a&&0!==i;)n.charCodeAt(i-1)>>8&&(a=!0),i--;if(a){u=r.noBOM?[]:[254,255],i=0;for(s=n.length;i<s;i++){f=n.charCodeAt(i),r=f>>8;if(r>>8)throw Error("Character at position "+i.toString(10)+" of string '"+n+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");u.push(r),u.push(f-(r<<8))}n=String.fromCharCode.apply(void 0,u)}return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},R=function(){h++,g=!0,p[h]=[],P(_(.200025*N)+" w"),P("0 G"),0!==k&&P(k.toString(10)+" J"),0!==L&&P(L.toString(10)+" j"),O.publish("addPage",{pageNumber:h})},U=function(e,t){var n;void 0===e&&(e=b[S].fontName),void 0===t&&(t=b[S].fontStyle);try{n=w[e][t]}catch(r){n=void 0}if(!n)throw Error("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts.");return n},z=function(){g=!1,a=[],y=[],P("%PDF-1.3"),j=T*N,F=x*N;var e,t,n,r,i;for(e=1;e<=h;e++){H(),P("<</Type /Page"),P("/Parent 1 0 R"),P("/Resources 2 0 R"),P("/Contents "+(v+1)+" 0 R>>"),P("endobj"),t=p[e].join("\n"),H();if(l){n=[];for(r=0;r<t.length;++r)n[r]=t.charCodeAt(r);i=adler32cs.from(t),t=new Deflater(6),t.append(new Uint8Array(n)),t=t.flush(),n=[new Uint8Array([120,156]),new Uint8Array(t),new Uint8Array([i&255,i>>8&255,i>>16&255,i>>24&255])],t="";for(r in n)n.hasOwnProperty(r)&&(t+=String.fromCharCode.apply(null,n[r]));P("<</Length "+t.length+" /Filter [/FlateDecode]>>")}else P("<</Length "+t.length+">>");B(t),P("endobj")}y[1]=f,P("1 0 obj"),P("<</Type /Pages"),I="/Kids [";for(r=0;r<h;r++)I+=3+2*r+" 0 R ";P(I+"]"),P("/Count "+h),P("/MediaBox [0 0 "+_(j)+" "+_(F)+"]"),P(">>"),P("endobj");for(var s in b)b.hasOwnProperty(s)&&(e=b[s],e.objectNumber=H(),P("<</BaseFont/"+e.PostScriptName+"/Type/Font"),"string"==typeof e.encoding&&P("/Encoding/"+e.encoding),P("/Subtype/Type1>>"),P("endobj"));O.publish("putResources"),y[2]=f,P("2 0 obj"),P("<<"),P("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),P("/Font <<");for(var o in b)b.hasOwnProperty(o)&&P("/"+o+" "+b[o].objectNumber+" 0 R");P(">>"),P("/XObject <<"),O.publish("putXobjectDict"),P(">>"),P(">>"),P("endobj"),O.publish("postPutResources"),H(),P("<<"),P("/Producer (jsPDF 0.9.0rc2)"),C.title&&P("/Title ("+q(C.title)+")"),C.subject&&P("/Subject ("+q(C.subject)+")"),C.author&&P("/Author ("+q(C.author)+")"),C.keywords&&P("/Keywords ("+q(C.keywords)+")"),C.creator&&P("/Creator ("+q(C.creator)+")"),s=new Date,P("/CreationDate (D:"+[s.getFullYear(),D(s.getMonth()+1),D(s.getDate()),D(s.getHours()),D(s.getMinutes()),D(s.getSeconds())].join("")+")"),P(">>"),P("endobj"),H(),P("<<"),P("/Type /Catalog"),P("/Pages 1 0 R"),P("/OpenAction [3 0 R /FitH null]"),P("/PageLayout /OneColumn"),O.publish("putCatalog"),P(">>"),P("endobj"),s=f,P("xref"),P("0 "+(v+1)),P("0000000000 65535 f ");for(o=1;o<=v;o++)e=y[o].toFixed(0),e=10>e.length?Array(11-e.length).join("0")+e:e,P(e+" 00000 n ");return P("trailer"),P("<<"),P("/Size "+(v+1)),P("/Root "+v+" 0 R"),P("/Info "+(v-1)+" 0 R"),P(">>"),P("startxref"),P(s),P("%%EOF"),g=!0,a.join("\n")},W=function(e){var t="S";if("F"===e)t="f";else if("FD"===e||"DF"===e)t="B";return t},X=function(e,t){var n,r,i,s;switch(e){case void 0:return z();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return A.output("dataurlnewwindow");n=z(),r=n.length,i=new Uint8Array(new ArrayBuffer(r));for(s=0;s<r;s++)i[s]=n.charCodeAt(s);n=new Blob([i],{type:"application/pdf"}),saveAs(n,t);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(z());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(z());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(z()));break;default:throw Error('Output type "'+e+'" is not supported.')}};if("pt"===i)N=1;else if("mm"===i)N=72/25.4;else if("cm"===i)N=72/2.54;else{if("in"!==i)throw"Invalid unit: "+i;N=72}if(o.hasOwnProperty(u))x=o[u][1]/N,T=o[u][0]/N;else try{x=s[1],T=s[0]}catch(V){throw"Invalid format: "+s}if("p"===r||"portrait"===r)r="p",T>x&&(r=T,T=x,x=r);else{if("l"!==r&&"landscape"!==r)throw"Invalid orientation: "+r;r="l",x>T&&(r=T,T=x,x=r)}A.internal={pdfEscape:q,getStyle:W,getFont:function(){return b[U.apply(A,arguments)]},getFontSize:function(){return E},getLineHeight:function(){return 1.15*E},btoa:btoa,write:function(e,t,n,r){P(1===arguments.length?e:Array.prototype.join.call(arguments," "))},getCoordinateString:function(e){return _(e*N)},getVerticalCoordinateString:function(e){return _((x-e)*N)},collections:{},newObject:H,putStream:B,events:O,scaleFactor:N,pageSize:{width:T,height:x},output:function(e,t){return X(e,t)},getNumberOfPages:function(){return p.length-1},pages:p},A.addPage=function(){return R(),this},A.text=function(e,t,n,r){var i,s;"number"==typeof e&&(i=e,s=t,e=n,t=i,n=s),"string"==typeof e&&e.match(/[\n\r]/)&&(e=e.split(/\r\n|\r|\n/g)),"undefined"==typeof r?r={noBOM:!0,autoencode:!0}:(void 0===r.noBOM&&(r.noBOM=!0),void 0===r.autoencode&&(r.autoencode=!0));if("string"==typeof e)r=q(e,r);else{if(!(e instanceof Array))throw Error('Type of text must be string or Array. "'+e+'" is not recognized.');e=e.concat();for(i=e.length-1;-1!==i;i--)e[i]=q(e[i],r);r=e.join(") Tj\nT* (")}return P("BT\n/"+S+" "+E+" Tf\n"+1.15*E+" TL\n"+c+"\n"+_(t*N)+" "+_((x-n)*N)+" Td\n("+r+") Tj\nET"),this},A.line=function(e,t,n,r){return P(_(e*N)+" "+_((x-t)*N)+" m "+_(n*N)+" "+_((x-r)*N)+" l S"),this},A.lines=function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p;"number"==typeof e&&(o=e,u=t,e=n,t=o,n=u),i=W(i),r=void 0===r?[1,1]:r,P((t*N).toFixed(3)+" "+((x-n)*N).toFixed(3)+" m "),o=r[0],r=r[1],u=e.length,p=n;for(n=0;n<u;n++)a=e[n],2===a.length?(t=a[0]*o+t,p=a[1]*r+p,P((t*N).toFixed(3)+" "+((x-p)*N).toFixed(3)+" l")):(f=a[0]*o+t,l=a[1]*r+p,c=a[2]*o+t,h=a[3]*r+p,t=a[4]*o+t,p=a[5]*r+p,P((f*N).toFixed(3)+" "+((x-l)*N).toFixed(3)+" "+(c*N).toFixed(3)+" "+((x-h)*N).toFixed(3)+" "+(t*N).toFixed(3)+" "+((x-p)*N).toFixed(3)+" c"));return 1==s&&P(" h"),P(i),this},A.rect=function(e,t,n,r,i){return i=W(i),P([_(e*N),_((x-t)*N),_(n*N),_(-r*N),"re",i].join(" ")),this},A.triangle=function(e,t,n,r,i,s,o){return this.lines([[n-e,r-t],[i-n,s-r],[e-i,t-s]],e,t,[1,1],o,!0),this},A.roundedRect=function(e,t,n,r,i,s,o){var u=4/3*(Math.SQRT2-1);return this.lines([[n-2*i,0],[i*u,0,i,s-s*u,i,s],[0,r-2*s],[0,s*u,-(i*u),s,-i,s],[-n+2*i,0],[-(i*u),0,-i,-(s*u),-i,-s],[0,-r+2*s],[0,-(s*u),i*u,-s,i,-s]],e+i,t,[1,1],o),this},A.ellipse=function(e,t,n,r,i){i=W(i);var s=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*r;return P([_((e+n)*N),_((x-t)*N),"m",_((e+n)*N),_((x-(t-o))*N),_((e+s)*N),_((x-(t-r))*N),_(e*N),_((x-(t-r))*N),"c"].join(" ")),P([_((e-s)*N),_((x-(t-r))*N),_((e-n)*N),_((x-(t-o))*N),_((e-n)*N),_((x-t)*N),"c"].join(" ")),P([_((e-n)*N),_((x-(t+o))*N),_((e-s)*N),_((x-(t+r))*N),_(e*N),_((x-(t+r))*N),"c"].join(" ")),P([_((e+s)*N),_((x-(t+r))*N),_((e+n)*N),_((x-(t+o))*N),_((e+n)*N),_((x-t)*N),"c",i].join(" ")),this},A.circle=function(e,t,n,r){return this.ellipse(e,t,n,n,r)},A.setProperties=function(e){for(var t in C)C.hasOwnProperty(t)&&e[t]&&(C[t]=e[t]);return this},A.setFontSize=function(e){return E=e,this},A.setFont=function(e,t){return S=U(e,t),this},A.setFontStyle=A.setFontType=function(e){return S=U(void 0,e),this},A.getFontList=function(){var e={},t,n,r;for(t in w)if(w.hasOwnProperty(t))for(n in e[t]=r=[],w[t])w[t].hasOwnProperty(n)&&r.push(n);return e},A.setLineWidth=function(e){return P((e*N).toFixed(2)+" w"),this},A.setDrawColor=function(e,t,n,r){return e=void 0===t||void 0===r&&e===t===n?"string"==typeof e?e+" G":_(e/255)+" G":void 0===r?"string"==typeof e?[e,t,n,"RG"].join(" "):[_(e/255),_(t/255),_(n/255),"RG"].join(" "):"string"==typeof e?[e,t,n,r,"K"].join(" "):[_(e),_(t),_(n),_(r),"K"].join(" "),P(e),this},A.setFillColor=function(e,t,n,r){return e=void 0===t||void 0===r&&e===t===n?"string"==typeof e?e+" g":_(e/255)+" g":void 0===r?"string"==typeof e?[e,t,n,"rg"].join(" "):[_(e/255),_(t/255),_(n/255),"rg"].join(" "):"string"==typeof e?[e,t,n,r,"k"].join(" "):[_(e),_(t),_(n),_(r),"k"].join(" "),P(e),this},A.setTextColor=function(e,t,n){return c=0===e&&0===t&&0===n||"undefined"==typeof t?(e/255).toFixed(3)+" g":[(e/255).toFixed(3),(t/255).toFixed(3),(n/255).toFixed(3),"rg"].join(" "),this},A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.setLineCap=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return k=t,P(t.toString(10)+" J"),this},A.setLineJoin=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return L=t,P(t.toString(10)+" j"),this},A.output=X,A.save=function(e){A.output("save",e)};for(M in e.API)e.API.hasOwnProperty(M)&&("events"===M&&e.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(O,e.API.events):A[M]=e.API[M]);return function(){var e=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],n,r,i,s;n=0;for(r=e.length;n<r;n++){var o=e[n][0],u=e[n][1];i=e[n][2],s="F"+(t(b)+1).toString(10);var o=b[s]={id:s,PostScriptName:o,fontName:u,fontStyle:i,encoding:"StandardEncoding",metadata:{}},a=s;void 0===w[u]&&(w[u]={}),w[u][i]=a,O.publish("addFont",o),i=s,s=e[n][0].split("-"),o=s[0],s=s[1]||"",void 0===w[o]&&(w[o]={}),w[o][s]=i}O.publish("addFonts",{fonts:b,dictionary:w})}(),S="F1",R(),O.publish("initialized"),A}"undefined"==typeof btoa&&(window.btoa=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),n,r,i,s,o=0,u=0,a="",a=[];do n=e.charCodeAt(o++),r=e.charCodeAt(o++),i=e.charCodeAt(o++),s=n<<16|r<<8|i,n=s>>18&63,r=s>>12&63,i=s>>6&63,s&=63,a[u++]=t[n]+t[r]+t[i]+t[s];while(o<e.length);return a=a.join(""),e=e.length%3,(e?a.slice(0,e-3):a)+"===".slice(e||3)}),"undefined"==typeof atob&&(window.atob=function(e){var t,n,r,i,s,o=0,u=0;i="";var a=[];if(!e)return e;e+="";do t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(o++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(o++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(o++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(o++)),r=t<<18|n<<12|i<<6|s,t=r>>16&255,n=r>>8&255,r&=255,64===i?a[u++]=String.fromCharCode(t):64===s?a[u++]=String.fromCharCode(t,n):a[u++]=String.fromCharCode(t,n,r);while(o<e.length);return i=a.join("")});var t="function"==typeof Object.keys?function(e){return Object.keys(e).length}:function(e){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t},n=function(e){this.topics={},this.context=e,this.publish=function(e,t){if(this.topics[e]){var n=this.topics[e],r=[],i,s,o,u,a=function(){};t=Array.prototype.slice.call(arguments,1),s=0;for(o=n.length;s<o;s++)u=n[s],i=u[0],u[1]&&(u[0]=a,r.push(s)),i.apply(this.context,t);s=0;for(o=r.length;s<o;s++)n.splice(r[s],1)}},this.subscribe=function(e,t,n){return this.topics[e]?this.topics[e].push([t,n]):this.topics[e]=[[t,n]],{topic:e,callback:t}},this.unsubscribe=function(e){if(this.topics[e.topic]){var t=this.topics[e.topic],n,r;n=0;for(r=t.length;n<r;n++)t[n][0]===e.callback&&t.splice(n,1)}}};return e.API={events:[]},e}();(function(e){var t=function(){var e=this.internal.collections.addImage_images,t;for(t in e){var n=e[t],r=this.internal.newObject(),i=this.internal.write,s=this.internal.putStream;n.n=r,i("<</Type /XObject"),i("/Subtype /Image"),i("/Width "+n.w),i("/Height "+n.h),"Indexed"===n.cs?i("/ColorSpace [/Indexed /DeviceRGB "+(n.pal.length/3-1)+" "+(r+1)+" 0 R]"):(i("/ColorSpace /"+n.cs),"DeviceCMYK"===n.cs&&i("/Decode [1 0 1 0 1 0 1 0]")),i("/BitsPerComponent "+n.bpc),"f"in n&&i("/Filter /"+n.f),"dp"in n&&i("/DecodeParms <<"+n.dp+">>");if("trns"in n&&n.trns.constructor==Array)for(var o="",u=0;u<n.trns.length;u++)o+=n[o][u]+" "+n.trns[u]+" ",i("/Mask ["+o+"]");"smask"in n&&i("/SMask "+(r+1)+" 0 R"),i("/Length "+n.data.length+">>"),s(n.data),i("endobj")}},n=function(){var e=this.internal.collections.addImage_images,t=this.internal.write,n,r;for(r in e)n=e[r],t("/I"+n.i,n.n,"0","R")};e.addImage=function(e,r,i,s,o,u){if("object"==typeof e&&1===e.nodeType){r=document.createElement("canvas"),r.width=e.clientWidth,r.height=e.clientHeight;var a=r.getContext("2d");if(!a)throw"addImage requires canvas to be supported by browser.";a.drawImage(e,0,0,r.width,r.height),e=r.toDataURL("image/jpeg"),r="JPEG"}if("JPEG"!==r.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+r+"'");var f;r=this.internal.collections.addImage_images;var a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;"data:image/jpeg;base64,"===e.substring(0,23)&&(e=atob(e.replace("data:image/jpeg;base64,","")));if(r)if(Object.keys)f=Object.keys(r).length;else{var c=r,h=0;for(f in c)c.hasOwnProperty(f)&&h++;f=h}else f=0,this.internal.collections.addImage_images=r={},this.internal.events.subscribe("putResources",t),this.internal.events.subscribe("putXobjectDict",n);e:{var c=e,p;if(255===!c.charCodeAt(0)||216===!c.charCodeAt(1)||255===!c.charCodeAt(2)||224===!c.charCodeAt(3)||74===!c.charCodeAt(6)||70===!c.charCodeAt(7)||73===!c.charCodeAt(8)||70===!c.charCodeAt(9)||0===!c.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");p=256*c.charCodeAt(4)+c.charCodeAt(5);for(var h=4,v=c.length;h<v;){h+=p;if(255!==c.charCodeAt(h))throw Error("getJpegSize could not find the size of the image");if(192===c.charCodeAt(h+1)||193===c.charCodeAt(h+1)||194===c.charCodeAt(h+1)||195===c.charCodeAt(h+1)||196===c.charCodeAt(h+1)||197===c.charCodeAt(h+1)||198===c.charCodeAt(h+1)||199===c.charCodeAt(h+1)){p=256*c.charCodeAt(h+5)+c.charCodeAt(h+6),c=256*c.charCodeAt(h+7)+c.charCodeAt(h+8),c=[c,p];break e}h+=2,p=256*c.charCodeAt(h)+c.charCodeAt(h+1)}c=void 0}return e={w:c[0],h:c[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:f,data:e},r[f]=e,o||u||(u=o=-96),0>o&&(o=-72*e.w/o/this.internal.scaleFactor),0>u&&(u=-72*e.h/u/this.internal.scaleFactor),0===o&&(o=u*e.w/e.h),0===u&&(u=o*e.h/e.w),this.internal.write("q",a(o),"0 0",a(u),a(i),l(s+u),"cm /I"+e.i,"Do Q"),this}})(jsPDF.API),function(e){function t(e,t,n,r){return this.pdf=e,this.x=t,this.y=n,this.settings=r,this.init(),this}function n(e){var t=u[e];return t?t:(t={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[e],void 0!==t||(t=parseFloat(e))?u[e]=t/16:(t=e.match(/([\d\.]+)(px)/),3===t.length?u[e]=parseFloat(t[1])/16:u[e]=1))}function r(e,t,u){var a=e.childNodes,f;f=$(e),e={};for(var h,p=f.css("font-family").split(","),d=p.shift();!h&&d;)h=i[d.trim().toLowerCase()],d=p.shift();e["font-family"]=h||"times",e["font-style"]=o[f.css("font-style")]||"normal",h=s[f.css("font-weight")]||"normal","bold"===h&&(e["font-style"]="normal"===e["font-style"]?h:h+e["font-style"]),e["font-size"]=n(f.css("font-size"))||1,e["line-height"]=n(f.css("line-height"))||1,e.display="inline"===f.css("display")?"inline":"block","block"===e.display&&(e["margin-top"]=n(f.css("margin-top"))||0,e["margin-bottom"]=n(f.css("margin-bottom"))||0,e["padding-top"]=n(f.css("padding-top"))||0,e["padding-bottom"]=n(f.css("padding-bottom"))||0);if(h="block"===e.display)t.setBlockBoundary(),t.setBlockStyle(e);p=0;for(d=a.length;p<d;p++)if(f=a[p],"object"==typeof f)if(1===f.nodeType&&"SCRIPT"!=f.nodeName){var v=f,y=t,b=u,w=!1,E=void 0,S=void 0,x=b["#"+v.id];if(x)if("function"==typeof x)w=x(v,y);else for(E=0,S=x.length;!w&&E!==S;)w=x[E](v,y),E++;x=b[v.nodeName];if(!w&&x)if("function"==typeof x)w=x(v,y);else for(E=0,S=x.length;!w&&E!==S;)w=x[E](v,y),E++;w||r(f,t,u)}else 3===f.nodeType&&t.addText(f.nodeValue,e);else"string"==typeof f&&t.addText(f,e);h&&t.setBlockBoundary()}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),t.prototype.init=function(){this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},t.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y}},t.prototype.splitFragmentsIntoLines=function(e,t){for(var n=this.pdf.internal.scaleFactor,r={},i,s,o,u,a,f=[],l=[f],c=0,h=this.settings.width;e.length;)if(u=e.shift(),a=t.shift(),u)if(i=a["font-family"],s=a["font-style"],o=r[i+s],o||(o=this.pdf.internal.getFont(i,s).metadata.Unicode,r[i+s]=o),i={widths:o.widths,kerning:o.kerning,fontSize:12*a["font-size"],textIndent:c},s=this.pdf.getStringUnitWidth(u,i)*i.fontSize/n,c+s>h){u=this.pdf.splitTextToSize(u,h,i);for(f.push([u.shift(),a]);u.length;)f=[[u.shift(),a]],l.push(f);c=this.pdf.getStringUnitWidth(f[0][0],i)*i.fontSize/n}else f.push([u,a]),c+=s;return l},t.prototype.RenderTextFragment=function(e,t){var n=this.pdf.internal.getFont(t["font-family"],t["font-style"]);this.pdf.internal.write("/"+n.id,(12*t["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(e)+") Tj")},t.prototype.renderParagraph=function(){for(var e=this.paragraph.text,t=0,n=e.length,r,i=!1,s=!1;!i&&t!==n;)(r=e[t]=e[t].trimLeft())&&(i=!0),t++;for(t=n-1;n&&!s&&-1!==t;)(r=e[t]=e[t].trimRight())&&(s=!0),t--;i=/\s+$/g,s=!0;for(t=0;t!==n;t++)r=e[t].replace(/\s+/g," "),s&&(r=r.trimLeft()),r&&(s=i.test(r)),e[t]=r;t=this.paragraph.style,r=(n=this.paragraph.blockstyle)||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:n};if(e.join("").trim()){e=this.splitFragmentsIntoLines(e,t),t=12/this.pdf.internal.scaleFactor,i=(Math.max((n["margin-top"]||0)-(r["margin-bottom"]||0),0)+(n["padding-top"]||0))*t,n=((n["margin-bottom"]||0)+(n["padding-bottom"]||0))*t,r=this.pdf.internal.write;var o,u;this.y+=i;for(r("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");e.length;){i=e.shift(),o=s=0;for(u=i.length;o!==u;o++)i[o][0].trim()&&(s=Math.max(s,i[o][1]["line-height"],i[o][1]["font-size"]));r(0,(-12*s).toFixed(2),"Td"),o=0;for(u=i.length;o!==u;o++)i[o][0]&&this.RenderTextFragment(i[o][0],i[o][1]);this.y+=s*t}r("ET","Q"),this.y+=n}},t.prototype.setBlockBoundary=function(){this.renderParagraph()},t.prototype.setBlockStyle=function(e){this.paragraph.blockstyle=e},t.prototype.addText=function(e,t){this.paragraph.text.push(e),this.paragraph.style.push(t)};var i={helvetica:"helvetica","sans-serif":"helvetica",serif:"times",times:"times","times new roman":"times",monospace:"courier",courier:"courier"},s={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},o={normal:"normal",italic:"italic",oblique:"italic"},u={normal:1};e.fromHTML=function(e,n,i,s){if("string"==typeof e){var o="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0);$('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="'+o+'" /></div>').appendTo(document.body),e=$(window.frames[o].document.body).html(e)[0]}return n=new t(this,n,i,s),r(e,n,s.elementHandlers),n.dispose()}}(jsPDF.API),function(e){e.addSVG=function(e,t,n,r,i){function s(e){for(var t=parseFloat(e[1]),n=parseFloat(e[2]),r=[],i=3,s=e.length;i<s;)"c"===e[i]?(r.push([parseFloat(e[i+1]),parseFloat(e[i+2]),parseFloat(e[i+3]),parseFloat(e[i+4]),parseFloat(e[i+5]),parseFloat(e[i+6])]),i+=7):"l"===e[i]?(r.push([parseFloat(e[i+1]),parseFloat(e[i+2])]),i+=3):i+=1;return[t,n,r]}if(void 0===t||void 0===t)throw Error("addSVG needs values for 'x' and 'y'");var o=function(e){var t=e.createElement("iframe"),n=e.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":n.appendChild(e.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}")),e.getElementsByTagName("head")[0].appendChild(n),t.name="childframe",t.setAttribute("width",0),t.setAttribute("height",0),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("seamless","seamless"),t.setAttribute("class","jsPDF_sillysvg_iframe"),e.body.appendChild(t),t}(document),o=function(e,t){var n=(t.contentWindow||t.contentDocument).document;return n.write(e),n.close(),n.getElementsByTagName("svg")[0]}(e,o);e=[1,1];var u=parseFloat(o.getAttribute("width")),a=parseFloat(o.getAttribute("height"));u&&a&&(r&&i?e=[r/u,i/a]:r?e=[r/u,r/u]:i&&(e=[i/a,i/a])),o=o.childNodes,r=0;for(i=o.length;r<i;r++)u=o[r],u.tagName&&"PATH"===u.tagName.toUpperCase()&&(u=s(u.getAttribute("d").split(" ")),u[0]=u[0]*e[0]+t,u[1]=u[1]*e[1]+n,this.lines.call(this,u[2],u[0],u[1],e));return this}}(jsPDF.API),function(e){var t=e.getCharWidthsArray=function(e,t){t||(t={});var n=t.widths?t.widths:this.internal.getFont().metadata.Unicode.widths,r=n.fof?n.fof:1,i=t.kerning?t.kerning:this.internal.getFont().metadata.Unicode.kerning,s=i.fof?i.fof:1,o,u,a,f=0,l=n[0]||r,c=[];o=0;for(u=e.length;o<u;o++)a=e.charCodeAt(o),c.push((n[a]||l)/r+(i[a]&&i[a][f]||0)/s),f=a;return c},n=function(e){for(var t=e.length,n=0;t;)t--,n+=e[t];return n};e.getStringUnitWidth=function(e,r){return n(t.call(this,e,r))};var r=function(e,r,i){i||(i={});var s=t(" ",i)[0],o=e.split(" "),u=[];e=[u];var a=i.textIndent||0,f=0,l=0,c,h,p,v;p=0;for(v=o.length;p<v;p++){c=o[p],h=t(c,i),l=n(h);if(a+f+l>r){if(l>r){for(var l=c,g=h,y=r,b=[],w=0,E=l.length,S=0;w!==E&&S+g[w]<r-(a+f);)S+=g[w],w++;b.push(l.slice(0,w)),a=w;for(S=0;w!==E;)S+g[w]>y&&(b.push(l.slice(a,w)),S=0,a=w),S+=g[w],w++;a!==w&&b.push(l.slice(a,w)),a=b,u.push(a.shift());for(u=[a.pop()];a.length;)e.push([a.shift()]);l=n(h.slice(c.length-u[0].length))}else u=[c];e.push(u),a=l}else u.push(c),a+=f+l;f=s}r=[],p=0;for(v=e.length;p<v;p++)r.push(e[p].join(" "));return r};e.splitTextToSize=function(e,t,n){n||(n={});var i=n.fontSize||this.internal.getFontSize(),s,o=n;s={0:1};var u={};o.widths&&o.kerning?s={widths:o.widths,kerning:o.kerning}:(o=this.internal.getFont(o.fontName,o.fontStyle),s=o.metadata.Unicode?{widths:o.metadata.Unicode.widths||s,kerning:o.metadata.Unicode.kerning||u}:{widths:s,kerning:u}),e=e.match(/[\n\r]/)?e.split(/\r\n|\r|\n/g):[e],t=1*this.internal.scaleFactor*t/i,s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,u=[],n=0;for(i=e.length;n<i;n++)u=u.concat(r(e[n],t,s));return u}}(jsPDF.API),function(e){var t=function(e){for(var t={},n=0;16>n;n++)t["klmnopqrstuvwxyz"[n]]="0123456789abcdef"[n];for(var r={},i=1,s,o=r,u=[],a,f="",l="",c,h=e.length-1,n=1;n!=h;)a=e[n],n+=1,"'"==a?s?(c=s.join(""),s=void 0):s=[]:s?s.push(a):"{"==a?(u.push([o,c]),o={},c=void 0):"}"==a?(a=u.pop(),a[0][a[1]]=o,c=void 0,o=a[0]):"-"==a?i=-1:void 0===c?t.hasOwnProperty(a)?(f+=t[a],c=parseInt(f,16)*i,i=1,f=""):f+=a:t.hasOwnProperty(a)?(l+=t[a],o[c]=parseInt(l,16)*i,i=1,c=void 0,l=""):l+=a;return r},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:t("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},i={Unicode:{"Courier-Oblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":t("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":t("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":t("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":t("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":t("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":t("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":t("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFonts",function(e){var t,n,s,o;for(n in e.fonts)if(e.fonts.hasOwnProperty(n)){t=e.fonts[n];if(s=i.Unicode[t.PostScriptName])o=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={},o.widths=s.widths,o.kerning=s.kerning;if(s=r.Unicode[t.PostScriptName])o=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={},o.encoding=s,s.codePages&&s.codePages.length&&(t.encoding=s.codePages[0])}}])}(jsPDF.API),function(e){var t,n,r,i,s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},o=1;e.setHeaderFunction=function(e){i=e},e.getTextDimensions=function(e){t=this.internal.getFont().fontName,n=this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var i=19.049976/25.4,s;return s=document.createElement("font"),s.id="jsPDFCell",s.style.fontStyle=r,s.style.fontName=t,s.style.fontSize=n+"pt",s.innerText=e,document.body.appendChild(s),e={w:(s.offsetWidth+1)*i,h:(s.offsetHeight+1)*i},document.body.removeChild(s),e},e.cellAddPage=function(){this.addPage(),s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},o+=1},e.cellInitialize=function(){s={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},o=1},e.cell=function(e,t,n,r,i,o,u){var a=s;void 0!==a.ln&&(a.ln===o?(e=a.x+a.w,t=a.y):(a.y+a.h+r+13>=this.internal.pageSize.height&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o)),t=s.y+s.h));if(""!==i[0])if(this.printingHeaderRow?this.rect(e,t,n,r,"FD"):this.rect(e,t,n,r),"right"===u){if(i instanceof Array)for(u=0;u<i.length;u++){var a=i[u],f=this.getStringUnitWidth(a)*this.internal.getFontSize();this.text(a,e+n-f-3,t+this.internal.getLineHeight()*(u+1))}}else this.text(i,e+3,t+this.internal.getLineHeight());return s={x:e,y:t,w:n,h:r,ln:o},this},e.getKeys="function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t},e.arrayMax=function(e,t){var n=e[0],r,i,s;r=0;for(i=e.length;r<i;r+=1)s=e[r],t?-1===t(n,s)&&(n=s):s>n&&(n=s);return n},e.table=function(t,n,r){var i=[],s=[],o,u,a,f={},l={},c,h,p=[],d,v=[],m;this.lnMod=0,r&&(this.printHeaders=r.printHeaders||!0);if(!t)throw"No data for PDF table";if(void 0===n||null===n)i=this.getKeys(t[0]);else if(n[0]&&"string"!=typeof n[0])for(u=0,a=n.length;u<a;u+=1)o=n[u],i.push(o.name),s.push(o.prompt),l[o.name]=o.width;else i=n;if(r.autoSize)for(m=function(e){return e[o]},u=0,a=i.length;u<a;u+=1){o=i[u],f[o]=t.map(m),p.push(this.getTextDimensions(s[u]||o).w),h=f[o],d=0;for(a=h.length;d<a;d+=1)c=h[d],p.push(this.getTextDimensions(c).w);l[o]=e.arrayMax(p)}if(r.printHeaders){r=this.calculateLineHeight(i,l,s.length?s:i),u=0;for(a=i.length;u<a;u+=1)o=i[u],v.push([13,13,l[o],r,String(s.length?s[u]:o)]);this.setTableHeaderRow(v),this.printHeaderRow(1)}u=0;for(a=t.length;u<a;u+=1)for(s=t[u],r=this.calculateLineHeight(i,l,s),d=0,v=i.length;d<v;d+=1)o=i[d],this.cell(13,13,l[o],r,s[o],u+2,n[d].align);return this},e.calculateLineHeight=function(e,t,n){for(var r,i=0,s=0;s<e.length;s++)r=e[s],n[r]=this.splitTextToSize(String(n[r]),t[r]-3),r=this.internal.getLineHeight()*n[r].length+3,r>i&&(i=r);return i},e.setTableHeaderRow=function(e){this.tableHeaderRow=e},e.printHeaderRow=function(e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var t,n,r;this.printingHeaderRow=!0,void 0!==i&&(n=i(this,o),s={x:n[0],y:n[1],w:n[2],h:n[3],ln:-1}),this.setFontStyle("bold"),n=0;for(r=this.tableHeaderRow.length;n<r;n+=1)this.setFillColor(200,200,200),t=this.tableHeaderRow[n],t=[].concat(t),this.cell.apply(this,t.concat(e));this.setFontStyle("normal"),this.printingHeaderRow=!1}}(jsPDF.API),function(e){e.putTotalPages=function(e){e=RegExp(e,"g");for(var t=1;t<=this.internal.getNumberOfPages();t++)for(var n=0;n<this.internal.pages[t].length;n++)this.internal.pages[t][n]=this.internal.pages[t][n].replace(e,this.internal.getNumberOfPages());return this}}(jsPDF.API);var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},i=n.prototype,s=r.prototype,o=e.FileReaderSync,u=function(e){this.code=this[this.name=e]},a="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),f=a.length,l=e.URL||e.webkitURL||e,c=l.createObjectURL,h=l.revokeObjectURL,p=l,d=e.btoa,v=e.atob,m=!1,g=function(e){m=!e},y=e.ArrayBuffer,b=e.Uint8Array;for(n.fake=s.fake=!0;f--;)u.prototype[a[f]]=f+1;try{b&&g.apply(0,new b(1))}catch(w){}return l.createObjectURL||(p=e.URL={}),p.createObjectURL=function(e){var t=e.type;null===t&&(t="application/octet-stream");if(e instanceof r)return t="data:"+t,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):d?t+";base64,"+d(e.data):t+","+encodeURIComponent(e.data);if(c)return c.call(l,e)},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(l,e)},i.append=function(e){var n=this.data;if(b&&e instanceof y)if(m)n.push(String.fromCharCode.apply(String,new b(e)));else{n="",e=new b(e);for(var i=0,s=e.length;i<s;i++)n+=String.fromCharCode(e[i])}else if("Blob"===t(e)||"File"===t(e)){if(!o)throw new u("NOT_READABLE_ERR");i=new o,n.push(i.readAsBinaryString(e))}else e instanceof r?"base64"===e.encoding&&v?n.push(v(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new r(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,n){var i=arguments.length;return 3>i&&(n=null),new r(this.data.slice(e,1<i?t:this.data.length),n,this.encoding)},s.toString=function(){return"[object Blob]"},n}(self),saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){var t=e.document,n=e.URL||e.webkitURL||e,r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,s=function(n){var r=t.createEvent("MouseEvents");return r.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},o=e.webkitRequestFileSystem,u=e.requestFileSystem||o||e.mozRequestFileSystem,a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f=0,l=[],c=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(s){a(s)}}},h=function(t,n){var a=this,h=t.type,p=!1,d,v,m=function(){var n=(e.URL||e.webkitURL||e).createObjectURL(t);return l.push(n),n},y=function(){c(a,["writestart","progress","write","writeend"])},b=function(){if(p||!d)d=m(t);v&&(v.location.href=d),a.readyState=a.DONE,y()},w=function(e){return function(){if(a.readyState!==a.DONE)return e.apply(this,arguments)}},E={create:!0,exclusive:!1},S;a.readyState=a.INIT,n||(n="download");if(i&&(d=m(t),r.href=d,r.download=n,s(r))){a.readyState=a.DONE,y();return}e.chrome&&h&&"application/octet-stream"!==h&&(S=t.slice||t.webkitSlice,t=S.call(t,0,t.size,"application/octet-stream"),p=!0),o&&"download"!==n&&(n+=".download"),v="application/octet-stream"===h||o?e:e.open(),u?(f+=t.size,u(e.TEMPORARY,f,w(function(e){e.root.getDirectory("saved",E,w(function(e){var r=function(){e.getFile(n,E,w(function(e){e.createWriter(w(function(n){n.onwriteend=function(t){v.location.href=e.toURL(),l.push(e),a.readyState=a.DONE,c(a,"writeend",t)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&b()},["writestart","progress","write","abort"].forEach(function(e){n["on"+e]=a["on"+e]}),n.write(t),a.abort=function(){n.abort(),a.readyState=a.DONE},a.readyState=a.WRITING}),b)}),b)};e.getFile(n,{create:!1},w(function(e){e.remove(),r()}),w(function(e){e.code===e.NOT_FOUND_ERR?r():b()}))}),b)}),b)):b()},p=h.prototype;return p.abort=function(){this.readyState=this.DONE,c(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,e.addEventListener("unload",function(){for(var e=l.length;e--;){var t=l[e];"string"==typeof t?n.revokeObjectURL(t):t.remove()}l.length=0},!1),function(e,t){return new h(e,t)}}(self),MAX_BITS=15,D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,END_BLOCK=256,MAX_BL_BITS=7,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,Buf_size=16,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_DEFAULT_STRATEGY=0,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tree.d_code=function(e){return 256>e?_dist_code[e]:_dist_code[256+(e>>>7)]},Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],StaticTree.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],StaticTree.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,MAX_BITS),StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,MAX_BITS),StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);var MAX_MEM_LEVEL=9,DEF_MEM_LEVEL=8,STORED=0,FAST=1,SLOW=2,config_table=[new Config(0,0,0,0,STORED),new Config(4,4,8,4,FAST),new Config(4,5,16,8,FAST),new Config(4,6,32,32,FAST),new Config(4,4,16,16,SLOW),new Config(8,16,32,32,SLOW),new Config(8,16,128,128,SLOW),new Config(8,32,128,256,SLOW),new Config(32,128,258,1024,SLOW),new Config(32,258,258,4096,SLOW)],z_errmsg="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),NeedMore=0,BlockDone=1,FinishStarted=2,FinishDone=3,PRESET_DICT=32,INIT_STATE=42,BUSY_STATE=113,FINISH_STATE=666,Z_DEFLATED=8,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;ZStream.prototype={deflateInit:function(e,t){return this.dstate=new Deflate,t||(t=MAX_BITS),this.dstate.deflateInit(this,e,t)},deflate:function(e){return this.dstate?this.dstate.deflate(this,e):Z_STREAM_ERROR},deflateEnd:function(){if(!this.dstate)return Z_STREAM_ERROR;var e=this.dstate.deflateEnd();return this.dstate=null,e},deflateParams:function(e,t){return this.dstate?this.dstate.deflateParams(this,e,t):Z_STREAM_ERROR},deflateSetDictionary:function(e,t){return this.dstate?this.dstate.deflateSetDictionary(this,e,t):Z_STREAM_ERROR},read_buf:function(e,t,n){var r=this.avail_in;return r>n&&(r=n),0===r?0:(this.avail_in-=r,e.set(this.next_in.subarray(this.next_in_index,this.next_in_index+r),t),this.next_in_index+=r,this.total_in+=r,r)},flush_pending:function(){var e=this.dstate.pending;e>this.avail_out&&(e=this.avail_out),0!==e&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+e),this.next_out_index),this.next_out_index+=e,this.dstate.pending_out+=e,this.total_out+=e,this.avail_out-=e,this.dstate.pending-=e,0===this.dstate.pending&&(this.dstate.pending_out=0))}},void function(e,t){"object"==typeof module?module.exports=t():"function"==typeof define?define("jspdf",t):e.adler32cs=t()}(this,function(){var e="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,t=null,n=function(){if(!e)return function(){return!1};try{var n=require("buffer");"function"==typeof n.Buffer&&(t=n.Buffer)}catch(r){}return function(e){return e instanceof ArrayBuffer||null!==t&&e instanceof t}}(),r=function(){return null!==t?function(e){return(new t(e,"utf8")).toString("binary")}:function(e){return unescape(encodeURIComponent(e))}}(),i=function(e,t){for(var n=e&65535,r=e>>>16,i=0,s=t.length;i<s;i++)n=(n+(t.charCodeAt(i)&255))%65521,r=(r+n)%65521;return(r<<16|n)>>>0},s=function(e,t){for(var n=e&65535,r=e>>>16,i=0,s=t.length;i<s;i++)n=(n+t[i])%65521,r=(r+n)%65521;return(r<<16|n)>>>0},o={},u=o.Adler32=function(){var t=function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(e=null==e?1:+e))throw Error("First arguments needs to be a finite number.");this.checksum=e>>>0},o=t.prototype={};return o.constructor=t,t.from=function(e){return e.prototype=o,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw Error("First argument needs to be a string.");this.checksum=i(1,e.toString())}),t.fromUtf8=function(e){return e.prototype=o,e}(function(e){if(!(this instanceof t))throw new TypeError("Constructor cannot called be as a function.");if(null==e)throw Error("First argument needs to be a string.");e=r(e.toString()),this.checksum=i(1,e)}),e&&(t.fromBuffer=function(e){return e.prototype=o,e}(function(e){if(this instanceof t){if(!n(e))throw Error("First argument needs to be ArrayBuffer.");return e=new Uint8Array(e),this.checksum=s(1,e)}throw new TypeError("Constructor cannot called be as a function.")})),o.update=function(e){if(null==e)throw Error("First argument needs to be a string.");return e=e.toString(),this.checksum=i(this.checksum,e)},o.updateUtf8=function(e){if(null==e)throw Error("First argument needs to be a string.");return e=r(e.toString()),this.checksum=i(this.checksum,e)},e&&(o.updateBuffer=function(e){if(!n(e))throw Error("First argument needs to be ArrayBuffer.");return e=new Uint8Array(e),this.checksum=s(this.checksum,e)}),o.clone=function(){return new u(this.checksum)},t}();return o.from=function(e){if(null==e)throw Error("First argument needs to be a string.");return i(1,e.toString())},o.fromUtf8=function(e){if(null==e)throw Error("First argument needs to be a string.");return e=r(e.toString()),i(1,e)},e&&(o.fromBuffer=function(e){if(!n(e))throw Error("First argument need to be ArrayBuffer.");return e=new Uint8Array(e),s(1,e)}),o}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(e,t,n){var r,i;typeof exports!=n+""?r=exports:(i=e.L,r={},r.noConflict=function(){return e.L=i,this},e.L=r),r.version="0.5.1",r.Util={extend:function(e){var t,n,r,i,s=Array.prototype.slice.call(arguments,1);for(n=0,r=s.length;r>n;n++){i=s[n]||{};for(t in i)i.hasOwnProperty(t)&&(e[t]=i[t])}return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(n){return n[t]=n[t]||++e,n[t]}}(),limitExecByInterval:function(e,t,r){var i,s;return function o(){var u=arguments;return i?(s=!0,n):(i=!0,setTimeout(function(){i=!1,s&&(o.apply(r,u),s=!1)},t),e.apply(r,u),n)}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},splitWords:function(e){return e.replace(/^\s+|\s+$/g,"").split(/\s+/)},setOptions:function(e,t){return e.options=r.extend({},e.options,t),e.options},getParamString:function(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(r+"="+e[r]);return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var r=t[n];if(!t.hasOwnProperty(n))throw Error("No value provided for variable "+e);return r})},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,r,i=["webkit","moz","o","ms"];for(n=0;i.length>n&&!r;n++)r=e[i[n]+t];return r}function i(t){var n=+(new Date),r=Math.max(0,16-(n-s));return s=n+r,e.setTimeout(t,r)}var s=0,o=e.requestAnimationFrame||t("RequestAnimationFrame")||i,u=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};r.Util.requestAnimFrame=function(t,s,u,f){return t=r.bind(t,s),u&&o===i?(t(),n):o.call(e,t,f)},r.Util.cancelAnimFrame=function(t){t&&u.call(e,t)}}(),r.extend=r.Util.extend,r.bind=r.Util.bind,r.stamp=r.Util.stamp,r.setOptions=r.Util.setOptions,r.Class=function(){},r.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=t,t.prototype=i;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(t[s]=this[s]);e.statics&&(r.extend(t,e.statics),delete e.statics),e.includes&&(r.Util.extend.apply(null,[i].concat(e.includes)),delete e.includes),e.options&&i.options&&(e.options=r.extend({},i.options,e.options)),r.extend(i,e),i._initHooks=[];var o=this;return i.callInitHooks=function(){if(!this._initHooksCalled){o.prototype.callInitHooks&&o.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;t>e;e++)i._initHooks[e].call(this)}},t},r.Class.include=function(e){r.extend(this.prototype,e)},r.Class.mergeOptions=function(e){r.extend(this.prototype.options,e)},r.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var s="_leaflet_events";r.Mixin={},r.Mixin.Events={addEventListener:function(e,t,n){var i,o,u,a=this[s]=this[s]||{};if("object"==typeof e){for(i in e)e.hasOwnProperty(i)&&this.addEventListener(i,e[i],t);return this}for(e=r.Util.splitWords(e),o=0,u=e.length;u>o;o++)a[e[o]]=a[e[o]]||[],a[e[o]].push({action:t,context:n||this});return this},hasEventListeners:function(e){return s in this&&e in this[s]&&this[s][e].length>0},removeEventListener:function(e,t,n){var i,o,u,a,f,l=this[s];if("object"==typeof e){for(i in e)e.hasOwnProperty(i)&&this.removeEventListener(i,e[i],t);return this}for(e=r.Util.splitWords(e),o=0,u=e.length;u>o;o++)if(this.hasEventListeners(e[o]))for(a=l[e[o]],f=a.length-1;f>=0;f--)t&&a[f].action!==t||n&&a[f].context!==n||a.splice(f,1);return this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;for(var n=r.extend({type:e,target:this},t),i=this[s][e].slice(),o=0,u=i.length;u>o;o++)i[o].action.call(i[o].context||this,n);return this}},r.Mixin.Events.on=r.Mixin.Events.addEventListener,r.Mixin.Events.off=r.Mixin.Events.removeEventListener,r.Mixin.Events.fire=r.Mixin.Events.fireEvent,function(){var i=!!e.ActiveXObject,s=i&&!e.XMLHttpRequest,o=i&&!t.querySelector,u=navigator.userAgent.toLowerCase(),a=-1!==u.indexOf("webkit"),f=-1!==u.indexOf("chrome"),l=-1!==u.indexOf("android"),c=-1!==u.search("android [23]"),h=typeof orientation!=n+"",p=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints,d="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=t.documentElement,m=i&&"transition"in v.style,g="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix,y="MozPerspective"in v.style,b="OTransition"in v.style,w=!e.L_DISABLE_3D&&(m||g||y||b),E=!e.L_NO_TOUCH&&function(){var e="ontouchstart";if(p||e in v)return!0;var n=t.createElement("div"),r=!1;return n.setAttribute?(n.setAttribute(e,"return;"),"function"==typeof n[e]&&(r=!0),n.removeAttribute(e),n=null,r):!1}();r.Browser={ie:i,ie6:s,ie7:o,webkit:a,android:l,android23:c,chrome:f,ie3d:m,webkit3d:g,gecko3d:y,opera3d:b,any3d:w,mobile:h,mobileWebkit:h&&a,mobileWebkit3d:h&&g,mobileOpera:h&&e.opera,touch:E,msTouch:p,retina:d}}(),r.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(e){return this.clone()._add(r.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(r.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=r.point(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e.x===this.x&&e.y===this.y},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}},r.point=function(e,t,n){return e instanceof r.Point?e:r.Util.isArray(e)?new r.Point(e[0],e[1]):isNaN(e)?e:new r.Point(e,t,n)},r.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;i>r;r++)this.extend(n[r])},r.Bounds.prototype={extend:function(e){return e=r.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof r.Point?r.point(e):r.bounds(e),e instanceof r.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=r.bounds(e);var t=this.min,n=this.max,i=e.min,s=e.max,o=s.x>=t.x&&i.x<=n.x,u=s.y>=t.y&&i.y<=n.y;return o&&u},isValid:function(){return!!this.min&&!!this.max}},r.bounds=function(e,t){return!e||e instanceof r.Bounds?e:new r.Bounds(e,t)},r.Transformation=function(e,t,n,r){this._a=e,this._b=t,this._c=n,this._d=r},r.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new r.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},r.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,n){var r=e.style[n];if(!r&&e.currentStyle&&(r=e.currentStyle[n]),(!r||"auto"===r)&&t.defaultView){var i=t.defaultView.getComputedStyle(e,null);r=i?i[n]:null}return"auto"===r?null:r},getViewportOffset:function(e){var n,i=0,s=0,o=e,u=t.body,a=r.Browser.ie7;do{if(i+=o.offsetTop||0,s+=o.offsetLeft||0,i+=parseInt(r.DomUtil.getStyle(o,"borderTopWidth"),10)||0,s+=parseInt(r.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,n=r.DomUtil.getStyle(o,"position"),o.offsetParent===u&&"absolute"===n)break;if("fixed"===n){i+=u.scrollTop||0,s+=u.scrollLeft||0;break}o=o.offsetParent}while(o);o=e;do{if(o===u)break;i-=o.scrollTop||0,s-=o.scrollLeft||0,r.DomUtil.documentIsLtr()||!r.Browser.webkit&&!a||(s+=o.scrollWidth-o.clientWidth,a&&"hidden"!==r.DomUtil.getStyle(o,"overflow-y")&&"hidden"!==r.DomUtil.getStyle(o,"overflow")&&(s+=17)),o=o.parentNode}while(o);return new r.Point(s,i)},documentIsLtr:function(){return r.DomUtil._docIsLtrCached||(r.DomUtil._docIsLtrCached=!0,r.DomUtil._docIsLtr="ltr"===r.DomUtil.getStyle(t.body,"direction")),r.DomUtil._docIsLtr},create:function(e,n,r){var i=t.createElement(e);return i.className=n,r&&r.appendChild(i),i},disableTextSelection:function(){t.selection&&t.selection.empty&&t.selection.empty(),this._onselectstart||(this._onselectstart=t.onselectstart||null,t.onselectstart=r.Util.falseFn)},enableTextSelection:function(){t.onselectstart===r.Util.falseFn&&(t.onselectstart=this._onselectstart,this._onselectstart=null)},hasClass:function(e,t){return e.className.length>0&&RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},addClass:function(e,t){r.DomUtil.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},removeClass:function(e,t){function n(e,n){return n===t?"":e}e.className=e.className.replace(/(\S+)\s*/g,n).replace(/(^\s+|\s+$)/,"")},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(i){}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}},testProp:function(e){for(var n=t.documentElement.style,r=0;e.length>r;r++)if(e[r]in n)return e[r];return!1},getTranslateString:function(e){var t=r.Browser.webkit3d,n="translate"+(t?"3d":"")+"(",i=(t?",0":"")+")";return n+e.x+"px,"+e.y+"px"+i},getScaleString:function(e,t){var n=r.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),i=" scale("+e+") ";return n+i},setPosition:function(e,t,n){e._leaflet_pos=t,!n&&r.Browser.any3d?(e.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(t),r.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden")):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),r.DomUtil.TRANSITION_END="webkitTransition"===r.DomUtil.TRANSITION||"OTransition"===r.DomUtil.TRANSITION?r.DomUtil.TRANSITION+"End":"transitionend",r.LatLng=function(e,t){var n=parseFloat(e),r=parseFloat(t);if(isNaN(n)||isNaN(r))throw Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=n,this.lng=r},r.extend(r.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),r.LatLng.prototype={equals:function(e){if(!e)return!1;e=r.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return r.LatLng.MAX_MARGIN>=t},toString:function(e){return"LatLng("+r.Util.formatNum(this.lat,e)+", "+r.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=r.latLng(e);var t=6378137,n=r.LatLng.DEG_TO_RAD,i=(e.lat-this.lat)*n,s=(e.lng-this.lng)*n,o=this.lat*n,u=e.lat*n,a=Math.sin(i/2),f=Math.sin(s/2),l=a*a+f*f*Math.cos(o)*Math.cos(u);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))},wrap:function(e,t){var n=this.lng;return e=e||-180,t=t||180,n=(n+t)%(t-e)+(e>n||n===t?t:e),new r.LatLng(this.lat,n)}},r.latLng=function(e,t){return e instanceof r.LatLng?e:r.Util.isArray(e)?new r.LatLng(e[0],e[1]):isNaN(e)?e:new r.LatLng(e,t)},r.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;i>r;r++)this.extend(n[r])},r.LatLngBounds.prototype={extend:function(e){return e="number"==typeof e[0]||"string"==typeof e[0]||e instanceof r.LatLng?r.latLng(e):r.latLngBounds(e),e instanceof r.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new r.LatLng(e.lat,e.lng),this._northEast=new r.LatLng(e.lat,e.lng)):e instanceof r.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,s=Math.abs(t.lng-n.lng)*e;return new r.LatLngBounds(new r.LatLng(t.lat-i,t.lng-s),new r.LatLng(n.lat+i,n.lng+s))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new r.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(e){e="number"==typeof e[0]||e instanceof r.LatLng?r.latLng(e):r.latLngBounds(e);var t,n,i=this._southWest,s=this._northEast;return e instanceof r.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=s.lat&&t.lng>=i.lng&&n.lng<=s.lng},intersects:function(e){e=r.latLngBounds(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),s=e.getNorthEast(),o=s.lat>=t.lat&&i.lat<=n.lat,u=s.lng>=t.lng&&i.lng<=n.lng;return o&&u},toBBoxString:function(){var e=this._southWest,t=this._northEast;return[e.lng,e.lat,t.lng,t.lat].join(",")},equals:function(e){return e?(e=r.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!!this._southWest&&!!this._northEast}},r.latLngBounds=function(e,t){return!e||e instanceof r.LatLngBounds?e:new r.LatLngBounds(e,t)},r.Projection={},r.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),s=e.lng*t,o=i*t;return o=Math.log(Math.tan(Math.PI/4+o/2)),new r.Point(s,o)},unproject:function(e){var t=r.LatLng.RAD_TO_DEG,n=e.x*t,i=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new r.LatLng(i,n)}},r.Projection.LonLat={project:function(e){return new r.Point(e.lng,e.lat)},unproject:function(e){return new r.LatLng(e.y,e.x)}},r.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)}},r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),r.CRS.EPSG3857=r.extend({},r.CRS,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:new r.Transformation(.5/Math.PI,.5,-0.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),n=6378137;return t.multiplyBy(n)}}),r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"}),r.CRS.EPSG4326=r.extend({},r.CRS,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/360,.5,-1/360,.5)}),r.Map=r.Class.extend({includes:r.Mixin.Events,options:{crs:r.CRS.EPSG3857,fadeAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23,trackResize:!0,markerZoomAnimation:r.DomUtil.TRANSITION&&r.Browser.any3d},initialize:function(e,t){t=r.setOptions(this,t),this._initContainer(e),this._initLayout(),this.callInitHooks(),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==n&&this.setView(r.latLng(t.center),t.zoom,!0),this._initLayers(t.layers)},setView:function(e,t){return this._resetView(r.latLng(e),this._limitZoom(t)),this},setZoom:function(e){return this.setView(this.getCenter(),e)},zoomIn:function(e){return this.setZoom(this._zoom+(e||1))},zoomOut:function(e){return this.setZoom(this._zoom-(e||1))},fitBounds:function(e){var t=this.getBoundsZoom(e);return this.setView(r.latLngBounds(e).getCenter(),t)},fitWorld:function(){var e=new r.LatLng(-60,-170),t=new r.LatLng(85,179);return this.fitBounds(new r.LatLngBounds(e,t))},panTo:function(e){return this.setView(e,this._zoom)},panBy:function(e){return this.fire("movestart"),this._rawPanBy(r.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){if(e=r.latLngBounds(e),this.options.maxBounds=e,!e)return this._boundsMinZoom=null,this;var t=this.getBoundsZoom(e,!0);return this._boundsMinZoom=t,this._loaded&&(t>this._zoom?this.setView(e.getCenter(),t):this.panInsideBounds(e)),this},panInsideBounds:function(e){e=r.latLngBounds(e);var t=this.getBounds(),n=this.project(t.getSouthWest()),i=this.project(t.getNorthEast()),s=this.project(e.getSouthWest()),o=this.project(e.getNorthEast()),u=0,a=0;return i.y<o.y&&(a=o.y-i.y),i.x>o.x&&(u=o.x-i.x),n.y>s.y&&(a=s.y-n.y),n.x<s.x&&(u=s.x-n.x),this.panBy(new r.Point(u,a,!0))},addLayer:function(e){var t=r.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this.whenReady(function(){e.onAdd(this),this.fire("layeradd",{layer:e})},this),this)},removeLayer:function(e){var t=r.stamp(e);if(this._layers[t])return e.onRemove(this),delete this._layers[t],this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this.fire("layerremove",{layer:e})},hasLayer:function(e){var t=r.stamp(e);return this._layers.hasOwnProperty(t)},invalidateSize:function(e){var t=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var n=t._subtract(this.getSize())._divideBy(2)._round();return e===!0?this.panBy(n):(this._rawPanBy(n),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)),this},addHandler:function(e,t){return t?(this[e]=new t(this),this.options[e]&&this[e].enable(),this):n},getCenter:function(){return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new r.LatLngBounds(t,n)},getMinZoom:function(){var e=this.options.minZoom||0,t=this._layersMinZoom||0,n=this._boundsMinZoom||0;return Math.max(e,t,n)},getMaxZoom:function(){var e=this.options.maxZoom===n?1/0:this.options.maxZoom,t=this._layersMaxZoom===n?1/0:this._layersMaxZoom;return Math.min(e,t)},getBoundsZoom:function(e,t){e=r.latLngBounds(e);var n,i,s,o=this.getSize(),u=this.options.minZoom||0,a=this.getMaxZoom(),f=e.getNorthEast(),l=e.getSouthWest(),c=!0;t&&u--;do u++,i=this.project(f,u),s=this.project(l,u),n=new r.Point(Math.abs(i.x-s.x),Math.abs(s.y-i.y)),c=t?n.x<o.x||n.y<o.y:n.x<=o.x&&n.y<=o.y;while(c&&a>=u);return c&&t?null:t?u:u-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new r.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===n?this._zoom:t,this.options.crs.latLngToPoint(r.latLng(e),t)},unproject:function(e,t){return t=t===n?this._zoom:t,this.options.crs.pointToLatLng(r.point(e),t)},layerPointToLatLng:function(e){var t=r.point(e).add(this._initialTopLeftPoint);return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(r.latLng(e))._round();return t._subtract(this._initialTopLeftPoint)},containerPointToLayerPoint:function(e){return r.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return r.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(r.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(e)))},mouseEventToContainerPoint:function(e){return r.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=r.DomUtil.get(e);if(t._leaflet)throw Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;r.DomUtil.addClass(e,"leaflet-container"),r.Browser.touch&&r.DomUtil.addClass(e,"leaflet-touch"),this.options.fadeAnimation&&r.DomUtil.addClass(e,"leaflet-fade-anim");var t=r.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(r.DomUtil.addClass(e.markerPane,t),r.DomUtil.addClass(e.shadowPane,t),r.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return r.DomUtil.create("div",e,t||this._panes.objectsPane)},_initLayers:function(e){e=e?r.Util.isArray(e)?e:[e]:[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0;var t,n;for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},_resetView:function(e,t,n,i){var s=this._zoom!==t;i||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),n?this._initialTopLeftPoint._add(this._getMapPanePos()):r.DomUtil.setPosition(this._mapPane,new r.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var o=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),this.fire("move"),(s||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n}),o&&this.fire("load")},_rawPanBy:function(e){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_updateZoomLevels:function(){var e,t=1/0,r=-1/0;for(e in this._zoomBoundLayers)if(this._zoomBoundLayers.hasOwnProperty(e)){var i=this._zoomBoundLayers[e];isNaN(i.options.minZoom)||(t=Math.min(t,i.options.minZoom)),isNaN(i.options.maxZoom)||(r=Math.max(r,i.options.maxZoom))}e===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=r,this._layersMinZoom=t)},_initEvents:function(){if(r.DomEvent){r.DomEvent.on(this._container,"click",this._onMouseClick,this);var t,n,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(t=0,n=i.length;n>t;t++)r.DomEvent.on(this._container,i[t],this._fireMouseEvent,this);this.options.trackResize&&r.DomEvent.on(e,"resize",this._onResize,this)}},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=r.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(e){!this._loaded||this.dragging&&this.dragging.moved()||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&r.DomEvent.preventDefault(e);var n=this.mouseEventToContainerPoint(e),i=this.containerPointToLayerPoint(n),s=this.layerPointToLatLng(i);this.fire(t,{latlng:s,layerPoint:i,containerPoint:n,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(r.bind(this._clearTileBg,this),500))},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)},_getTopLeftPoint:function(){if(!this._loaded)throw Error("Set map center and zoom first.");return this._initialTopLeftPoint.subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),r.map=function(e,t){return new r.Map(e,t)},r.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(e){var t=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),s=this.R_MAJOR,o=this.R_MINOR,u=e.lng*t*s,a=i*t,f=o/s,l=Math.sqrt(1-f*f),c=l*Math.sin(a);c=Math.pow((1-c)/(1+c),.5*l);var h=Math.tan(.5*(.5*Math.PI-a))/c;return a=-o*Math.log(h),new r.Point(u,a)},unproject:function(e){for(var t,n=r.LatLng.RAD_TO_DEG,i=this.R_MAJOR,s=this.R_MINOR,o=e.x*n/i,u=s/i,a=Math.sqrt(1-u*u),f=Math.exp(-e.y/s),l=Math.PI/2-2*Math.atan(f),c=15,h=1e-7,p=c,d=.1;Math.abs(d)>h&&--p>0;)t=a*Math.sin(l),d=Math.PI/2-2*Math.atan(f*Math.pow((1-t)/(1+t),.5*a))-l,l+=d;return new r.LatLng(l*n,o)}},r.CRS.EPSG3395=r.extend({},r.CRS,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var e=r.Projection.Mercator,t=e.R_MAJOR,n=e.R_MINOR;return new r.Transformation(.5/(Math.PI*t),.5,-0.5/(Math.PI*n),.5)}()}),r.TileLayer=r.Class.extend({includes:r.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile},initialize:function(e,t){t=r.setOptions(this,t),t.detectRetina&&r.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),this._url=e;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(e){this._map=e,this._initContainer(),this._createTileProto(),e.on({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||(this._limitedUpdate=r.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._resetCallback,moveend:this._update},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._map._panes.tilePane.empty=!1,this._reset(!0),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var n,r,i,s=e.children,o=-t(1/0,-1/0);for(r=0,i=s.length;i>r;r++)s[r]!==this._container&&(n=parseInt(s[r].style.zIndex,10),isNaN(n)||(o=t(o,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(o)?o:0)+t(1,-1)},_updateOpacity:function(){r.DomUtil.setOpacity(this._container,this.options.opacity);var e,t=this._tiles;if(r.Browser.webkit)for(e in t)t.hasOwnProperty(e)&&(t[e].style.webkitTransform+=" translate(0,0)")},_initContainer:function(){var e=this._map._panes.tilePane;(!this._container||e.empty)&&(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),e.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_resetCallback:function(e){this._reset(e.hard)},_reset:function(e){var t=this._tiles;for(var n in t)t.hasOwnProperty(n)&&this.fire("tileunload",{tile:t[n]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),e&&this._container&&(this._container.innerHTML=""),this._initContainer()},_update:function(){if(this._map){var e=this._map.getPixelBounds(),t=this._map.getZoom(),n=this.options.tileSize;if(!(t>this.options.maxZoom||this.options.minZoom>t)){var i=new r.Point(Math.floor(e.min.x/n),Math.floor(e.min.y/n)),s=new r.Point(Math.floor(e.max.x/n),Math.floor(e.max.y/n)),o=new r.Bounds(i,s);this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(e){var n,i,s,o=[],u=e.getCenter();for(n=e.min.y;e.max.y>=n;n++)for(i=e.min.x;e.max.x>=i;i++)s=new r.Point(i,n),this._tileShouldBeLoaded(s)&&o.push(s);var a=o.length;if(0!==a){o.sort(function(e,t){return e.distanceTo(u)-t.distanceTo(u)});var f=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=a,i=0;a>i;i++)this._addTile(o[i],f);this._container.appendChild(f)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;if(!this.options.continuousWorld){var t=this._getWrapTileNum();if(this.options.noWrap&&(0>e.x||e.x>=t)||0>e.y||e.y>=t)return!1}return!0},_removeOtherTiles:function(e){var t,n,r,i;for(i in this._tiles)this._tiles.hasOwnProperty(i)&&(t=i.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),(e.min.x>n||n>e.max.x||e.min.y>r||r>e.max.y)&&this._removeTile(i))},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(r.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._container&&this._container.removeChild(t),r.Browser.android||(t.src=r.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var n=this._getTilePos(e),i=this._getTile();r.DomUtil.setPosition(i,n,r.Browser.chrome||r.Browser.android23),this._tiles[e.x+":"+e.y]=i,this._loadTile(i,e),i.parentNode!==this._container&&t.appendChild(i)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+e.zoomOffset},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this.options.tileSize;return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return this._adjustTilePoint(e),r.Util.template(this._url,r.extend({s:this._getSubdomain(e),z:this._getZoomForUrl(),x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t+t)%t),this.options.tms&&(e.y=t-e.y-1)},_getSubdomain:function(e){var t=(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_createTileProto:function(){var e=this._tileImg=r.DomUtil.create("img","leaflet-tile");e.style.width=e.style.height=this.options.tileSize+"px",e.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=this._tileImg.cloneNode(!1);return e.onselectstart=e.onmousemove=r.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,e.src=this.getTileUrl(t)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||this.fire("load")},_tileOnLoad:function(){var e=this._layer;this.src!==r.Util.emptyImageUrl&&(r.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),r.tileLayer=function(e,t){return new r.TileLayer(e,t)},r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var n=r.extend({},this.defaultWmsParams);n.width=n.height=t.detectRetina&&r.Browser.retina?2*this.options.tileSize:this.options.tileSize;for(var i in t)this.options.hasOwnProperty(i)||(n[i]=t[i]);this.wmsParams=n,r.setOptions(this,t)},onAdd:function(e){var t=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[t]=e.options.crs.code,r.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e,t){this._adjustTilePoint(e);var n=this._map,i=n.options.crs,s=this.options.tileSize,o=e.multiplyBy(s),u=o.add(new r.Point(s,s)),a=i.project(n.unproject(o,t)),f=i.project(n.unproject(u,t)),l=[a.x,f.y,f.x,a.y].join(","),c=r.Util.template(this._url,{s:this._getSubdomain(e)});return c+r.Util.getParamString(this.wmsParams,c)+"&bbox="+l},setParams:function(e,t){return r.extend(this.wmsParams,e),t||this.redraw(),this}}),r.tileLayer.wms=function(e,t){return new r.TileLayer.WMS(e,t)},r.TileLayer.Canvas=r.TileLayer.extend({options:{async:!1},initialize:function(e){r.setOptions(this,e)},redraw:function(){var e=this._tiles;for(var t in e)e.hasOwnProperty(t)&&this._redrawTile(e[t])},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTileProto:function(){var e=this._canvasProto=r.DomUtil.create("canvas","leaflet-tile");e.width=e.height=this.options.tileSize},_createTile:function(){var e=this._canvasProto.cloneNode(!1);return e.onselectstart=e.onmousemove=r.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),r.tileLayer.canvas=function(e){return new r.TileLayer.Canvas(e)},r.ImageOverlay=r.Class.extend({includes:r.Mixin.Events,options:{opacity:1},initialize:function(e,t,n){this._url=e,this._bounds=r.latLngBounds(t),r.setOptions(this,n)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&r.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},_initImage:function(){this._image=r.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&r.Browser.any3d?r.DomUtil.addClass(this._image,"leaflet-zoom-animated"):r.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),r.extend(this._image,{galleryimg:"no",onselectstart:r.Util.falseFn,onmousemove:r.Util.falseFn,onload:r.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,n=this._image,i=t.getZoomScale(e.zoom),s=this._bounds.getNorthWest(),o=this._bounds.getSouthEast(),u=t._latLngToNewLayerPoint(s,e.zoom,e.center),a=t._latLngToNewLayerPoint(o,e.zoom,e.center)._subtract(u),f=u._add(a._multiplyBy(.5*(1-1/i)));n.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(f)+" scale("+i+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);r.DomUtil.setPosition(e,t),e.style.width=n.x+"px",e.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}}),r.imageOverlay=function(e,t,n){return new r.ImageOverlay(e,t,n)},r.Icon=r.Class.extend({options:{className:""},initialize:function(e){r.setOptions(this,e)},createIcon:function(){return this._createIcon("icon")},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(e){var t=this._getIconUrl(e);if(!t){if("icon"===e)throw Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(t);return this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var n,i=this.options,s=r.point(i[t+"Size"]);n="shadow"===t?r.point(i.shadowAnchor||i.iconAnchor):r.point(i.iconAnchor),!n&&s&&(n=s.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+i.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),s&&(e.style.width=s.x+"px",e.style.height=s.y+"px")},_createImg:function(e){var n;return r.Browser.ie6?(n=t.createElement("div"),n.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'")'):(n=t.createElement("img"),n.src=e),n},_getIconUrl:function(e){return r.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),r.icon=function(e){return new r.Icon(e)},r.Icon.Default=r.Icon.extend({options:{iconSize:new r.Point(25,41),iconAnchor:new r.Point(12,41),popupAnchor:new r.Point(1,-34),shadowSize:new r.Point(41,41)},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];r.Browser.retina&&"icon"===e&&(e+="@2x");var n=r.Icon.Default.imagePath;if(!n)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+".png"}}),r.Icon.Default.imagePath=function(){var e,n,r,i,s=t.getElementsByTagName("script"),o=/\/?leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,n=s.length;n>e;e++)if(r=s[e].src,i=r.match(o))return r.split(o)[0]+"/images"}(),r.Marker=r.Class.extend({includes:r.Mixin.Events,options:{icon:new r.Icon.Default,title:"",clickable:!0,draggable:!1,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){r.setOptions(this,t),this._latlng=r.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._removeIcon(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=r.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this._map&&this._removeIcon(),this.options.icon=e,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t=this._map,n=t.options.zoomAnimation&&t.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",s=!1;this._icon||(this._icon=e.icon.createIcon(),e.title&&(this._icon.title=e.title),this._initInteraction(),s=1>this.options.opacity,r.DomUtil.addClass(this._icon,i),e.riseOnHover&&r.DomEvent.on(this._icon,"mouseover",this._bringToFront,this).on(this._icon,"mouseout",this._resetZIndex,this)),this._shadow||(this._shadow=e.icon.createShadow(),this._shadow&&(r.DomUtil.addClass(this._shadow,i),s=1>this.options.opacity)),s&&this._updateOpacity();var o=this._map._panes;o.markerPane.appendChild(this._icon),this._shadow&&o.shadowPane.appendChild(this._shadow)},_removeIcon:function(){var e=this._map._panes;this.options.riseOnHover&&r.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),e.markerPane.removeChild(this._icon),this._shadow&&e.shadowPane.removeChild(this._shadow),this._icon=this._shadow=null},_setPos:function(e){r.DomUtil.setPosition(this._icon,e),this._shadow&&r.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];r.DomUtil.addClass(e,"leaflet-clickable"),r.DomEvent.on(e,"click",this._onMouseClick,this);for(var n=0;t.length>n;n++)r.DomEvent.on(e,t[n],this._fireMouseEvent,this);r.Handler.MarkerDrag&&(this.dragging=new r.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&r.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&r.DomEvent.preventDefault(e),"mousedown"!==e.type&&r.DomEvent.stopPropagation(e)},setOpacity:function(e){this.options.opacity=e,this._map&&this._updateOpacity()},_updateOpacity:function(){r.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&r.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),r.marker=function(e,t){return new r.Marker(e,t)},r.DivIcon=r.Icon.extend({options:{iconSize:new r.Point(12,12),className:"leaflet-div-icon"},createIcon:function(){var e=t.createElement("div"),n=this.options;return n.html&&(e.innerHTML=n.html),n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+ -n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),r.divIcon=function(e){return new r.DivIcon(e)},r.Map.mergeOptions({closePopupOnClick:!0}),r.Popup=r.Class.extend({includes:r.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:new r.Point(0,6),autoPanPadding:new r.Point(5,5),className:"",zoomAnimation:!0},initialize:function(e,t){r.setOptions(this,e),this._source=t,this._animated=r.Browser.any3d&&this.options.zoomAnimation},onAdd:function(e){this._map=e,this._container||this._initLayout(),this._updateContent();var t=e.options.fadeAnimation;t&&r.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on("viewreset",this._updatePosition,this),this._animated&&e.on("zoomanim",this._zoomAnimation,this),e.options.closePopupOnClick&&e.on("preclick",this._close,this),this._update(),t&&r.DomUtil.setOpacity(this._container,1)},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),r.Util.falseFn(this._container.offsetWidth),e.off({viewreset:this._updatePosition,preclick:this._close,zoomanim:this._zoomAnimation},this),e.options.fadeAnimation&&r.DomUtil.setOpacity(this._container,0),this._map=null},setLatLng:function(e){return this._latlng=r.latLng(e),this._update(),this},setContent:function(e){return this._content=e,this._update(),this},_close:function(){var e=this._map;e&&(e._popup=null,e.removeLayer(this).fire("popupclose",{popup:this}))},_initLayout:function(){var e,t="leaflet-popup",n=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=r.DomUtil.create("div",n);this.options.closeButton&&(e=this._closeButton=r.DomUtil.create("a",t+"-close-button",i),e.href="#close",e.innerHTML="&#215;",r.DomEvent.on(e,"click",this._onCloseButtonClick,this));var s=this._wrapper=r.DomUtil.create("div",t+"-content-wrapper",i);r.DomEvent.disableClickPropagation(s),this._contentNode=r.DomUtil.create("div",t+"-content",s),r.DomEvent.on(this._contentNode,"mousewheel",r.DomEvent.stopPropagation),this._tipContainer=r.DomUtil.create("div",t+"-tip-container",i),this._tip=r.DomUtil.create("div",t+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,s=this.options.maxHeight,o="leaflet-popup-scrolled";s&&i>s?(t.height=s+"px",r.DomUtil.addClass(e,o)):r.DomUtil.removeClass(e,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,n=this.options.offset;t&&r.DomUtil.setPosition(this._container,e),this._containerBottom=-n.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);r.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,i=new r.Point(this._containerLeft,-t-this._containerBottom);this._animated&&i._add(r.DomUtil.getPosition(this._container));var s=e.layerPointToContainerPoint(i),o=this.options.autoPanPadding,u=e.getSize(),a=0,f=0;0>s.x&&(a=s.x-o.x),s.x+n>u.x&&(a=s.x+n-u.x+o.x),0>s.y&&(f=s.y-o.y),s.y+t>u.y&&(f=s.y+t-u.y+o.y),(a||f)&&e.panBy(new r.Point(a,f))}},_onCloseButtonClick:function(e){this._close(),r.DomEvent.stop(e)}}),r.popup=function(e,t){return new r.Popup(e,t)},r.Marker.include({openPopup:function(){return this._popup&&this._map&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},bindPopup:function(e,t){var n=r.point(this.options.icon.options.popupAnchor)||new r.Point(0,0);return n=n.add(r.Popup.prototype.options.offset),t&&t.offset&&(n=n.add(t.offset)),t=r.extend({offset:n},t),this._popup||this.on("click",this.openPopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popup=(new r.Popup(t,this)).setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.openPopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),r.Map.include({openPopup:function(e){return this.closePopup(),this._popup=e,this.addLayer(e).fire("popupopen",{popup:this._popup})},closePopup:function(){return this._popup&&this._popup._close(),this}}),r.LayerGroup=r.Class.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=r.stamp(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=r.stamp(e);return delete this._layers[t],this._map&&this._map.removeLayer(e),this},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)this._layers.hasOwnProperty(t)&&(n=this._layers[t],n[e]&&n[e].apply(n,r));return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)this._layers.hasOwnProperty(n)&&e.call(t,this._layers[n])},setZIndex:function(e){return this.invoke("setZIndex",e)}}),r.layerGroup=function(e){return new r.LayerGroup(e)},r.FeatureGroup=r.LayerGroup.extend({includes:r.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu"},addLayer:function(e){return this._layers[r.stamp(e)]?this:(e.on(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return e.off(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new r.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof r.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e.layer=e.target,e.target=this,this.fire(e.type,e)}}),r.featureGroup=function(e){return new r.FeatureGroup(e)},r.Path=r.Class.extend({includes:[r.Mixin.Events],statics:{CLIP_PADDING:r.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(e.innerWidth,e.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){r.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,r.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return r.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),r.Map.include({_updatePathViewport:function(){var e=r.Path.CLIP_PADDING,t=this.getSize(),n=r.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),s=i.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new r.Bounds(i,s)}}),r.Path.SVG_NS="http://www.w3.org/2000/svg",r.Browser.svg=!!t.createElementNS&&!!t.createElementNS(r.Path.SVG_NS,"svg").createSVGRect,r.Path=r.Path.extend({statics:{SVG:r.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,n=e.firstChild;return t&&n!==t&&e.insertBefore(t,n),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(r.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(r.Browser.svg||!r.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),r.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;e.length>t;t++)r.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){var t=this._map,n=t.mouseEventToContainerPoint(e),i=t.containerPointToLayerPoint(n),s=t.layerPointToLatLng(i);this.fire(e.type,{latlng:s,layerPoint:i,containerPoint:n,originalEvent:e}),"contextmenu"===e.type&&r.DomEvent.preventDefault(e),"mousemove"!==e.type&&r.DomEvent.stopPropagation(e)}}}),r.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=r.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&r.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),n=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(n)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max,i=n.x-t.x,s=n.y-t.y,o=this._pathRoot,u=this._panes.overlayPane;r.Browser.mobileWebkit&&u.removeChild(o),r.DomUtil.setPosition(o,t),o.setAttribute("width",i),o.setAttribute("height",s),o.setAttribute("viewBox",[t.x,t.y,i,s].join(" ")),r.Browser.mobileWebkit&&u.appendChild(o)}}}),r.Path.include({bindPopup:function(e,t){return(!this._popup||t)&&(this._popup=new r.Popup(t,this)),this._popup.setContent(e),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),r.Browser.vml=!r.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(r){return!1}}(),r.Path=r.Browser.svg||!r.Browser.vml?r.Path:r.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");r.DomUtil.addClass(e,"leaflet-vml-shape"),this.options.clickable&&r.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,r=this._container;r.stroked=n.stroke,r.filled=n.fill,n.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",r.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,e.dashStyle=n.dashArray?n.dashArray instanceof Array?n.dashArray.join(" "):n.dashArray.replace(/ *, */g," "):""):e&&(r.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),r.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(r.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),r.Map.include(r.Browser.svg||!r.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),r.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),r.Path=r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?r.Path:r.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return r.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&this._map.off("click",this._onClick,this),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!r.Path._updateRequest&&(r.Path._updateRequest=r.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){r.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color)},_drawPath:function(){var e,t,n,i,s,o;for(this._ctx.beginPath(),e=0,n=this._parts.length;n>e;e++){for(t=0,i=this._parts[e].length;i>t;t++)s=this._parts[e][t],o=(0===t?"move":"line")+"To",this._ctx[o](s.x,s.y);this instanceof r.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill()),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&this._map.on("click",this._onClick,this)},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",{latlng:e.latlng,layerPoint:e.layerPoint,containerPoint:e.containerPoint,originalEvent:e})}}),r.Map.include(r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?{}:{_initPathRoot:function(){var e,n=this._pathRoot;n||(n=this._pathRoot=t.createElement("canvas"),n.style.position="absolute",e=this._canvasCtx=n.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max.subtract(t),i=this._pathRoot;r.DomUtil.setPosition(i,t),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-t.x,-t.y)}}}),r.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var r=e.length,i=typeof Uint8Array!=n+""?Uint8Array:Array,s=new i(r);s[0]=s[r-1]=1,this._simplifyDPStep(e,s,t,0,r-1);var o,u=[];for(o=0;r>o;o++)s[o]&&u.push(e[o]);return u},_simplifyDPStep:function(e,t,n,r,i){var s,o,u,a=0;for(o=r+1;i-1>=o;o++)u=this._sqClosestPointOnSegment(e[o],e[r],e[i],!0),u>a&&(s=o,a=u);a>n&&(t[s]=1,this._simplifyDPStep(e,t,n,r,s),this._simplifyDPStep(e,t,n,s,i))},_reducePoints:function(e,t){for(var n=[e[0]],r=1,i=0,s=e.length;s>r;r++)this._sqDist(e[r],e[i])>t&&(n.push(e[r]),i=r);return s-1>i&&n.push(e[s-1]),n},clipSegment:function(e,t,n,r){var i,s,o,u=r?this._lastCode:this._getBitCode(e,n),a=this._getBitCode(t,n);for(this._lastCode=a;;){if(!(u|a))return[e,t];if(u&a)return!1;i=u||a,s=this._getEdgeIntersection(e,t,i,n),o=this._getBitCode(s,n),i===u?(e=s,u=o):(t=s,a=o)}},_getEdgeIntersection:function(e,t,i,s){var o=t.x-e.x,u=t.y-e.y,a=s.min,f=s.max;return 8&i?new r.Point(e.x+o*(f.y-e.y)/u,f.y):4&i?new r.Point(e.x+o*(a.y-e.y)/u,a.y):2&i?new r.Point(f.x,e.y+u*(f.x-e.x)/o):1&i?new r.Point(a.x,e.y+u*(a.x-e.x)/o):n},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},_sqClosestPointOnSegment:function(e,t,n,i){var s,o=t.x,u=t.y,a=n.x-o,f=n.y-u,l=a*a+f*f;return l>0&&(s=((e.x-o)*a+(e.y-u)*f)/l,s>1?(o=n.x,u=n.y):s>0&&(o+=a*s,u+=f*s)),a=e.x-o,f=e.y-u,i?a*a+f*f:new r.Point(o,u)}},r.Polyline=r.Path.extend({initialize:function(e,t){r.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";t>e;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(r.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs),this.redraw(),e},closestLayerPoint:function(e){for(var t,n,i=1/0,s=this._parts,o=null,u=0,a=s.length;a>u;u++)for(var f=s[u],l=1,c=f.length;c>l;l++){t=f[l-1],n=f[l];var h=r.LineUtil._sqClosestPointOnSegment(e,t,n,!0);i>h&&(i=h,o=r.LineUtil._sqClosestPointOnSegment(e,t,n))}return o&&(o.distance=Math.sqrt(i)),o},getBounds:function(){var e,t,n=new r.LatLngBounds,i=this.getLatLngs();for(e=0,t=i.length;t>e;e++)n.extend(i[e]);return n},_convertLatLngs:function(e){var t,n;for(t=0,n=e.length;n>t;t++){if(r.Util.isArray(e[t])&&"number"!=typeof e[t][0])return;e[t]=r.latLng(e[t])}return e},_initEvents:function(){r.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,n=r.Path.VML,i=0,s=e.length,o="";s>i;i++)t=e[i],n&&t._round(),o+=(i?"L":"M")+t.x+" "+t.y;return o},_clipPoints:function(){var e,t,i,s=this._originalPoints,o=s.length;if(this.options.noClip)return this._parts=[s],n;this._parts=[];var u=this._parts,a=this._map._pathViewport,f=r.LineUtil;for(e=0,t=0;o-1>e;e++)i=f.clipSegment(s[e],s[e+1],a,e),i&&(u[t]=u[t]||[],u[t].push(i[0]),(i[1]!==s[e+1]||e===o-2)&&(u[t].push(i[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=r.LineUtil,n=0,i=e.length;i>n;n++)e[n]=t.simplify(e[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),r.Path.prototype._updatePath.call(this))}}),r.polyline=function(e,t){return new r.Polyline(e,t)},r.PolyUtil={},r.PolyUtil.clipPolygon=function(e,t){var n,i,s,o,u,a,f,l,c,h=[1,4,2,8],p=r.LineUtil;for(i=0,f=e.length;f>i;i++)e[i]._code=p._getBitCode(e[i],t);for(o=0;4>o;o++){for(l=h[o],n=[],i=0,f=e.length,s=f-1;f>i;s=i++)u=e[i],a=e[s],u._code&l?a._code&l||(c=p._getEdgeIntersection(a,u,l,t),c._code=p._getBitCode(c,t),n.push(c)):(a._code&l&&(c=p._getEdgeIntersection(a,u,l,t),c._code=p._getBitCode(c,t),n.push(c)),n.push(u));e=n}return e},r.Polygon=r.Polyline.extend({options:{fill:!0},initialize:function(e,t){r.Polyline.prototype.initialize.call(this,e,t),e&&r.Util.isArray(e[0])&&"number"!=typeof e[0][0]&&(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1))},projectLatlngs:function(){if(r.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,n,i;for(e=0,n=this._holes.length;n>e;e++)for(this._holePoints[e]=[],t=0,i=this._holes[e].length;i>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var s=r.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);s.length&&t.push(s)}this._parts=t}},_getPathPartStr:function(e){var t=r.Polyline.prototype._getPathPartStr.call(this,e);return t+(r.Browser.svg?"z":"x")}}),r.polygon=function(e,t){return new r.Polygon(e,t)},function(){function e(e){return r.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,r=t.length;for(this.eachLayer(function(e){r>n?e.setLatLngs(t[n++]):this.removeLayer(e)},this);r>n;)this.addLayer(new e(t[n++],this._options));return this}})}r.MultiPolyline=e(r.Polyline),r.MultiPolygon=e(r.Polygon),r.multiPolyline=function(e,t){return new r.MultiPolyline(e,t)},r.multiPolygon=function(e,t){return new r.MultiPolygon(e,t)}}(),r.Rectangle=r.Polygon.extend({initialize:function(e,t){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=r.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),r.rectangle=function(e,t){return new r.Rectangle(e,t)},r.Circle=r.Path.extend({initialize:function(e,t,n){r.Path.prototype.initialize.call(this,n),this._latlng=r.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=r.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=new r.LatLng(this._latlng.lat,this._latlng.lng-e),n=this._map.latLngToLayerPoint(t);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=Math.max(Math.round(this._point.x-n.x),1)},getBounds:function(){var e=this._getLngRadius(),t=360*(this._mRadius/40075017),n=this._latlng,i=new r.LatLng(n.lat-t,n.lng-e),s=new r.LatLng(n.lat+t,n.lng+e);return new r.LatLngBounds(i,s)},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":r.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(r.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),r.circle=function(e,t,n){return new r.Circle(e,t,n)},r.CircleMarker=r.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){r.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){r.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()}}),r.circleMarker=function(e,t){return new r.CircleMarker(e,t)},r.Polyline.include(r.Path.CANVAS?{_containsPoint:function(e,t){var n,i,s,o,u,a,f,l=this.options.weight/2;for(r.Browser.touch&&(l+=10),n=0,o=this._parts.length;o>n;n++)for(f=this._parts[n],i=0,u=f.length,s=u-1;u>i;s=i++)if((t||0!==i)&&(a=r.LineUtil.pointToSegmentDistance(e,f[s],f[i]),l>=a))return!0;return!1}}:{}),r.Polygon.include(r.Path.CANVAS?{_containsPoint:function(e){var t,n,i,s,o,u,a,f,l=!1;if(r.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(s=0,a=this._parts.length;a>s;s++)for(t=this._parts[s],o=0,f=t.length,u=f-1;f>o;u=o++)n=t[o],i=t[u],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l}}:{}),r.Circle.include(r.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),r.GeoJSON=r.FeatureGroup.extend({initialize:function(e,t){r.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i=r.Util.isArray(e)?e:e.features;if(i){for(t=0,n=i.length;n>t;t++)(i[t].geometries||i[t].geometry||i[t].features)&&this.addData(i[t]);return this}var s=this.options;if(!s.filter||s.filter(e)){var o=r.GeoJSON.geometryToLayer(e,s.pointToLayer);return o.feature=e,o.defaultOptions=o.options,this.resetStyle(o),s.onEachFeature&&s.onEachFeature(e,o),this.addLayer(o)}},resetStyle:function(e){var t=this.options.style;t&&(r.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),r.extend(r.GeoJSON,{geometryToLayer:function(e,t){var n,i,s,o,u,a="Feature"===e.type?e.geometry:e,f=a.coordinates,l=[];switch(a.type){case"Point":return n=this.coordsToLatLng(f),t?t(e,n):new r.Marker(n);case"MultiPoint":for(s=0,o=f.length;o>s;s++)n=this.coordsToLatLng(f[s]),u=t?t(e,n):new r.Marker(n),l.push(u);return new r.FeatureGroup(l);case"LineString":return i=this.coordsToLatLngs(f),new r.Polyline(i);case"Polygon":return i=this.coordsToLatLngs(f,1),new r.Polygon(i);case"MultiLineString":return i=this.coordsToLatLngs(f,1),new r.MultiPolyline(i);case"MultiPolygon":return i=this.coordsToLatLngs(f,2),new r.MultiPolygon(i);case"GeometryCollection":for(s=0,o=a.geometries.length;o>s;s++)u=this.geometryToLayer({geometry:a.geometries[s],type:"Feature",properties:e.properties},t),l.push(u);return new r.FeatureGroup(l);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e,t){var n=parseFloat(e[t?0:1]),i=parseFloat(e[t?1:0]);return new r.LatLng(n,i)},coordsToLatLngs:function(e,t,n){var r,i,s,o=[];for(i=0,s=e.length;s>i;i++)r=t?this.coordsToLatLngs(e[i],t-1,n):this.coordsToLatLng(e[i],n),o.push(r);return o}}),r.geoJson=function(e,t){return new r.GeoJSON(e,t)},r.DomEvent={addListener:function(e,t,i,s){var o,u,a,f=r.stamp(i),l="_leaflet_"+t+f;return e[l]?this:(o=function(t){return i.call(s||e,t||r.DomEvent._getEvent())},r.Browser.msTouch&&0===t.indexOf("touch")?this.addMsTouchListener(e,t,o,f):(r.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,o,f),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(u=o,a="mouseenter"===t?"mouseover":"mouseout",o=function(t){return r.DomEvent._checkMouse(e,t)?u(t):n},e.addEventListener(a,o,!1)):e.addEventListener(t,o,!1):"attachEvent"in e&&e.attachEvent("on"+t,o),e[l]=o,this))},removeListener:function(e,t,n){var i=r.stamp(n),s="_leaflet_"+t+i,o=e[s];if(o)return r.Browser.msTouch&&0===t.indexOf("touch")?this.removeMsTouchListener(e,t,i):r.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",o,!1),e.removeEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1):e.removeEventListener(t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o),e[s]=null,this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},disableClickPropagation:function(e){for(var t=r.DomEvent.stopPropagation,n=r.Draggable.START.length-1;n>=0;n--)r.DomEvent.addListener(e,r.Draggable.START[n],t);return r.DomEvent.addListener(e,"click",t).addListener(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return r.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,n){var i=t.body,s=t.documentElement,o=e.pageX?e.pageX:e.clientX+i.scrollLeft+s.scrollLeft,u=e.pageY?e.pageY:e.clientY+i.scrollTop+s.scrollTop,a=new r.Point(o,u);return n?a._subtract(r.DomUtil.getViewportOffset(n)):a},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e},_getEvent:function(){var t=e.event;if(!t)for(var n=arguments.callee.caller;n&&(t=n.arguments[0],!t||e.Event!==t.constructor);)n=n.caller;return t}},r.DomEvent.on=r.DomEvent.addListener,r.DomEvent.off=r.DomEvent.removeListener,r.Draggable=r.Class.extend({includes:r.Mixin.Events,statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"},TAP_TOLERANCE:15},initialize:function(e,t,n){this._element=e,this._dragStartTarget=t||e,this._longPress=n&&!r.Browser.msTouch},enable:function(){if(!this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.on(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.off(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(!(!r.Browser.touch&&e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(r.DomEvent.preventDefault(e),r.DomEvent.stopPropagation(e),r.Draggable._disabled))){if(this._simulateClick=!0,e.touches&&e.touches.length>1)return this._simulateClick=!1,clearTimeout(this._longPressTimeout),n;var i=e.touches&&1===e.touches.length?e.touches[0]:e,s=i.target;r.Browser.touch&&"a"===s.tagName.toLowerCase()&&r.DomUtil.addClass(s,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new r.Point(i.clientX,i.clientY),this._startPos=this._newPos=r.DomUtil.getPosition(this._element),e.touches&&1===e.touches.length&&r.Browser.touch&&this._longPress&&(this._longPressTimeout=setTimeout(r.bind(function(){var e=this._newPos&&this._newPos.distanceTo(this._startPos)||0;r.Draggable.TAP_TOLERANCE>e&&(this._simulateClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3)),r.DomEvent.on(t,r.Draggable.MOVE[e.type],this._onMove,this),r.DomEvent.on(t,r.Draggable.END[e.type],this._onUp,this))}},_onMove:function(e){if(!(e.touches&&e.touches.length>1)){var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new r.Point(t.clientX,t.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(r.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(i),r.Browser.touch||(r.DomUtil.disableTextSelection(),this._setMovingCursor())),this._newPos=this._startPos.add(i),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),r.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(e){var n;if(clearTimeout(this._longPressTimeout),this._simulateClick&&e.changedTouches){var i=e.changedTouches[0],s=i.target,o=this._newPos&&this._newPos.distanceTo(this._startPos)||0;"a"===s.tagName.toLowerCase()&&r.DomUtil.removeClass(s,"leaflet-active"),r.Draggable.TAP_TOLERANCE>o&&(n=i)}r.Browser.touch||(r.DomUtil.enableTextSelection(),this._restoreCursor());for(var u in r.Draggable.MOVE)r.Draggable.MOVE.hasOwnProperty(u)&&(r.DomEvent.off(t,r.Draggable.MOVE[u],this._onMove),r.DomEvent.off(t,r.Draggable.END[u],this._onUp));this._moved&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1,n&&(this._moved=!1,this._simulateEvent("click",n))},_setMovingCursor:function(){r.DomUtil.addClass(t.body,"leaflet-dragging")},_restoreCursor:function(){r.DomUtil.removeClass(t.body,"leaflet-dragging")},_simulateEvent:function(n,r){var i=t.createEvent("MouseEvents");i.initMouseEvent(n,!0,!0,e,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(i)}}),r.Handler=r.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.25,longPress:!0,worldCopyJump:!1}),r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new r.Draggable(e._mapPane,e._container,e.options.longPress),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+(new Date),t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint(new r.LatLng(0,0));this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project(new r.LatLng(0,180)).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,s=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(s+n)?i:s;this._draggable._newPos.x=o},_onDragEnd:function(){var e=this._map,t=e.options,n=+(new Date)-this._lastTime,i=!t.inertia||n>t.inertiaThreshold||!this._positions[0];if(i)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),o=(this._lastTime+n-this._times[0])/1e3,u=t.easeLinearity,a=s.multiplyBy(u/o),f=a.distanceTo(new r.Point(0,0)),l=Math.min(t.inertiaMaxSpeed,f),c=a.multiplyBy(l/f),h=l/(t.inertiaDeceleration*u),p=c.multiplyBy(-h/2).round();r.Util.requestAnimFrame(function(){e.panBy(p,h,u)})}e.fire("dragend"),t.maxBounds&&r.Util.requestAnimFrame(this._panInsideMaxBounds,e,!0,e._container)},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)}}),r.Map.addInitHook("addHandler","dragging",r.Map.Drag),r.Map.mergeOptions({doubleClickZoom:!0}),r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(e){this.setView(e.latlng,this._zoom+1)}}),r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom),r.Map.mergeOptions({scrollWheelZoom:!0}),r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll)},_onWheelScroll:function(e){var t=r.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+(new Date));var n=Math.max(40-(+(new Date)-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r.bind(this._performZoom,this),n),r.DomEvent.preventDefault(e),r.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();if(t=t>0?Math.ceil(t):Math.round(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,this._startTime=null,t){var r=n+t,i=this._getCenterForScrollWheelZoom(r);e.setView(i,r)}},_getCenterForScrollWheelZoom:function(e){var t=this._map,n=t.getZoomScale(e),r=t.getSize()._divideBy(2),i=this._lastMousePos._subtract(r)._multiplyBy(1-1/n),s=t._getTopLeftPoint()._add(r)._add(i);return t.unproject(s)}}),r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom),r.extend(r.DomEvent,{_touchstart:r.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:r.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(e,n,i){function s(e){var t;if(r.Browser.msTouch?(d.push(e.pointerId),t=d.length):t=e.touches.length,!(t>1)){var n=Date.now(),i=n-(u||n);a=e.touches?e.touches[0]:e,f=i>0&&l>=i,u=n}}function o(e){if(r.Browser.msTouch){var t=d.indexOf(e.pointerId);if(-1===t)return;d.splice(t,1)}if(f){if(r.Browser.msTouch){var i,s={};for(var o in a)i=a[o],s[o]="function"==typeof i?i.bind(a):i;a=s}a.type="dblclick",n(a),u=null}}var u,a,f=!1,l=250,c="_leaflet_",h=this._touchstart,p=this._touchend,d=[];e[c+h+i]=s,e[c+p+i]=o;var v=r.Browser.msTouch?t.documentElement:e;return e.addEventListener(h,s,!1),v.addEventListener(p,o,!1),r.Browser.msTouch&&v.addEventListener("MSPointerCancel",o,!1),this},removeDoubleTapListener:function(e,n){var i="_leaflet_";return e.removeEventListener(this._touchstart,e[i+this._touchstart+n],!1),(r.Browser.msTouch?t.documentElement:e).removeEventListener(this._touchend,e[i+this._touchend+n],!1),r.Browser.msTouch&&t.documentElement.removeEventListener("MSPointerCancel",e[i+this._touchend+n],!1),this}}),r.extend(r.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(e,t,n,r){switch(t){case"touchstart":return this.addMsTouchListenerStart(e,t,n,r);case"touchend":return this.addMsTouchListenerEnd(e,t,n,r);case"touchmove":return this.addMsTouchListenerMove(e,t,n,r);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(e,n,r,i){var s="_leaflet_",o=this._msTouches,u=function(e){for(var t=!1,n=0;o.length>n;n++)if(o[n].pointerId===e.pointerId){t=!0;break}t||o.push(e),e.touches=o.slice(),e.changedTouches=[e],r(e)};if(e[s+"touchstart"+i]=u,e.addEventListener("MSPointerDown",u,!1),!this._msDocumentListener){var a=function(e){for(var t=0;o.length>t;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}};t.documentElement.addEventListener("MSPointerUp",a,!1),t.documentElement.addEventListener("MSPointerCancel",a,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(e,t,n,r){function i(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE||0!==e.buttons){for(var t=0;o.length>t;t++)if(o[t].pointerId===e.pointerId){o[t]=e;break}e.touches=o.slice(),e.changedTouches=[e],n(e)}}var s="_leaflet_",o=this._msTouches;return e[s+"touchmove"+r]=i,e.addEventListener("MSPointerMove",i,!1),this},addMsTouchListenerEnd:function(e,t,n,r){var i="_leaflet_",s=this._msTouches,o=function(e){for(var t=0;s.length>t;t++)if(s[t].pointerId===e.pointerId){s.splice(t,1);break}e.touches=s.slice(),e.changedTouches=[e],n(e)};return e[i+"touchend"+r]=o,e.addEventListener("MSPointerUp",o,!1),e.addEventListener("MSPointerCancel",o,!1),this},removeMsTouchListener:function(e,t,n){var r="_leaflet_",i=e[r+t+n];switch(t){case"touchstart":e.removeEventListener("MSPointerDown",i,!1);break;case"touchmove":e.removeEventListener("MSPointerMove",i,!1);break;case"touchend":e.removeEventListener("MSPointerUp",i,!1),e.removeEventListener("MSPointerCancel",i,!1)}return this}}),r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23}),r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(e.touches&&2===e.touches.length&&!n._animatingZoom&&!this._zooming){var i=n.mouseEventToLayerPoint(e.touches[0]),s=n.mouseEventToLayerPoint(e.touches[1]),o=n._getCenterLayerPoint();this._startCenter=i.add(s)._divideBy(2),this._startDist=i.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),r.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),r.DomEvent.preventDefault(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length){var t=this._map,n=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(r.DomUtil.addClass(t._mapPane,"leaflet-zoom-anim leaflet-touching"),t.fire("movestart").fire("zoomstart")._prepareTileBg(),this._moved=!0),r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),r.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),n=e.layerPointToLatLng(t);e.fire("zoomanim",{center:n,zoom:e.getScaleZoom(this._scale)}),e._tileBg.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(this._delta)+" "+r.DomUtil.getScaleString(this._scale,this._startCenter)},_onTouchEnd:function(){if(this._moved&&this._zooming){var e=this._map;this._zooming=!1,r.DomUtil.removeClass(e._mapPane,"leaflet-touching"),r.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),i=e.layerPointToLatLng(n),s=e.getZoom(),o=e.getScaleZoom(this._scale)-s,u=o>0?Math.ceil(o):Math.floor(o),a=e._limitZoom(s+u);e.fire("zoomanim",{center:i,zoom:a}),e._runAnimation(i,a,e.getZoomScale(a)/this._scale,n,!0)}},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom),r.Map.mergeOptions({boxZoom:!0}),r.Map.BoxZoom=r.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(e){return!e.shiftKey||1!==e.which&&1!==e.button?!1:(r.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),this._box=r.DomUtil.create("div","leaflet-zoom-box",this._pane),r.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",r.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).preventDefault(e),this._map.fire("boxzoomstart"),n)},_onMouseMove:function(e){var t=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(e),s=i.subtract(t),o=new r.Point(Math.min(i.x,t.x),Math.min(i.y,t.y));r.DomUtil.setPosition(n,o),n.style.width=Math.max(0,Math.abs(s.x)-4)+"px",n.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_onMouseUp:function(e){this._pane.removeChild(this._box),this._container.style.cursor="",r.DomUtil.enableTextSelection(),r.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp);var n=this._map,i=n.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(i)){var s=new r.LatLngBounds(n.layerPointToLatLng(this._startLayerPoint),n.layerPointToLatLng(i));n.fitBounds(s),n.fire("boxzoomend",{boxZoomBounds:s})}}}),r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom),r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),r.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;r.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){this._focused||this._map._container.focus()},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;n>t;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;n>t;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;n>t;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;n>t;t++)r[i.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;n>t;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;n>t;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){r.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,n=this._map;if(this._panKeys.hasOwnProperty(t))n.panBy(this._panKeys[t]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds);else{if(!this._zoomKeys.hasOwnProperty(t))return;n.setZoom(n.getZoom()+this._zoomKeys[t])}r.DomEvent.stop(e)}}),r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard),r.Handler.MarkerDrag=r.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=(new r.Draggable(e,e)).on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this)),this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,n=r.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(n);t&&r.DomUtil.setPosition(t,n),e._latlng=i,e.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),r.Handler.PolyEdit=r.Handler.extend({options:{icon:new r.DivIcon({iconSize:new r.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(e,t){this._poly=e,r.setOptions(this,t)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new r.LayerGroup),this._markers=[];var e,t,n,i,s=this._poly._latlngs;for(e=0,n=s.length;n>e;e++)i=this._createMarker(s[e],e),i.on("click",this._onMarkerClick,this),this._markers.push(i);var o,u;for(e=0,t=n-1;n>e;t=e++)(0!==e||r.Polygon&&this._poly instanceof r.Polygon)&&(o=this._markers[t],u=this._markers[e],this._createMiddleMarker(o,u),this._updatePrevNext(o,u))},_createMarker:function(e,t){var n=new r.Marker(e,{draggable:!0,icon:this.options.icon});return n._origLatLng=e,n._index=t,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_fireEdit:function(){this._poly.fire("edit")},_onMarkerDrag:function(e){var t=e.target;r.extend(t._origLatLng,t._latlng),t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t)),t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next)),this._poly.redraw()},_onMarkerClick:function(e){if(!(3>this._poly._latlngs.length)){var t=e.target,n=t._index;this._markerGroup.removeLayer(t),this._markers.splice(n,1),this._poly.spliceLatLngs(n,1),this._updateIndexes(n,-1),this._updatePrevNext(t._prev,t._next),t._middleLeft&&this._markerGroup.removeLayer(t._middleLeft),t._middleRight&&this._markerGroup.removeLayer(t._middleRight),t._prev&&t._next?this._createMiddleMarker(t._prev,t._next):t._prev?t._next||(t._prev._middleRight=null):t._next._middleLeft=null,this._poly.fire("edit")}},_updateIndexes:function(e,t){this._markerGroup.eachLayer(function(n){n._index>e&&(n._index+=t)})},_createMiddleMarker:function(e,t){var n,r,i,s=this._getMiddleLatLng(e,t),o=this._createMarker(s);o.setOpacity(.6),e._middleRight=t._middleLeft=o,r=function(){var r=t._index;o._index=r,o.off("click",n).on("click",this._onMarkerClick,this),s.lat=o.getLatLng().lat,s.lng=o.getLatLng().lng,this._poly.spliceLatLngs(r,0,s),this._markers.splice(r,0,o),o.setOpacity(1),this._updateIndexes(r,1),t._index++,this._updatePrevNext(e,o),this._updatePrevNext(o,t)},i=function(){o.off("dragstart",r,this),o.off("dragend",i,this),this._createMiddleMarker(e,o),this._createMiddleMarker(o,t)},n=function(){r.call(this),i.call(this),this._poly.fire("edit")},o.on("click",n,this).on("dragstart",r,this).on("dragend",i,this),this._markerGroup.addLayer(o)},_updatePrevNext:function(e,t){e&&(e._next=t),t&&(t._prev=e)},_getMiddleLatLng:function(e,t){var n=this._poly._map,r=n.latLngToLayerPoint(e.getLatLng()),i=n.latLngToLayerPoint(t.getLatLng());return n.layerPointToLatLng(r._add(i)._divideBy(2))}}),r.Polyline.addInitHook(function(){r.Handler.PolyEdit&&(this.editing=new r.Handler.PolyEdit(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),r.Control=r.Class.extend({options:{position:"topright"},initialize:function(e){r.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return r.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),n=e._controlCorners[t];return n.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this}}),r.control=function(e){return new r.Control(e)},r.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,s){var u=n+e+" "+n+s;t[e+s]=r.DomUtil.create("div",u,i)}var t=this._controlCorners={},n="leaflet-",i=this._controlContainer=r.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")}}),r.Control.Zoom=r.Control.extend({options:{position:"topleft"},onAdd:function(e){var t="leaflet-control-zoom",n="leaflet-bar",i=n+"-part",s=r.DomUtil.create("div",t+" "+n);return this._map=e,this._zoomInButton=this._createButton("+","Zoom in",t+"-in "+i+" "+i+"-top",s,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",t+"-out "+i+" "+i+"-bottom",s,this._zoomOut,this),e.on("zoomend",this._updateDisabled,this),s},onRemove:function(e){e.off("zoomend",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,i,s,o){var u=r.DomUtil.create("a",n,i);u.innerHTML=e,u.href="#",u.title=t;var a=r.DomEvent.stopPropagation;return r.DomEvent.on(u,"click",a).on(u,"mousedown",a).on(u,"dblclick",a).on(u,"click",r.DomEvent.preventDefault).on(u,"click",s,o),u},_updateDisabled:function(){var e=this._map,t="leaflet-control-zoom-disabled";r.DomUtil.removeClass(this._zoomInButton,t),r.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,t)}}),r.Map.mergeOptions({zoomControl:!0}),r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))}),r.control.zoom=function(e){return new r.Control.Zoom(e)},r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'Powered by <a href="http://leafletjs.com">Leaflet</a>'},initialize:function(e){r.setOptions(this,e),this._attributions={}},onAdd:function(e){return this._container=r.DomUtil.create("div","leaflet-control-attribution"),r.DomEvent.disableClickPropagation(this._container),e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):n},removeAttribution:function(e){return e?(this._attributions[e]--,this._update(),this):n},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions.hasOwnProperty(t)&&this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" &#8212; ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),r.Map.mergeOptions({attributionControl:!0}),r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))}),r.control.attribution=function(e){return new r.Control.Attribution(e)},r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",n=r.DomUtil.create("div",t),i=this.options;return this._addScales(i,t,n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=r.DomUtil.create("div",t+"-line",n)),e.imperial&&(this._iScale=r.DomUtil.create("div",t+"-line",n))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180),r=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,i=this._map.getSize(),s=this.options,o=0;i.x>0&&(o=r*(s.maxWidth/i.x)),this._updateScales(s,o)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,n,r,i=3.2808399*e,s=this._iScale;i>5280?(t=i/5280,n=this._getRoundNum(t),s.style.width=this._getScaleWidth(n/t)+"px",s.innerHTML=n+" mi"):(r=this._getRoundNum(i),s.style.width=this._getScaleWidth(r/i)+"px",s.innerHTML=r+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),r.control.scale=function(e){return new r.Control.Scale(e)},r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,n){r.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in e)e.hasOwnProperty(i)&&this._addLayer(e[i],i);for(i in t)t.hasOwnProperty(i)&&this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=r.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=r.DomUtil.create("div",e);r.Browser.touch?r.DomEvent.on(t,"click",r.DomEvent.stopPropagation):(r.DomEvent.disableClickPropagation(t),r.DomEvent.on(t,"mousewheel",r.DomEvent.stopPropagation));var n=this._form=r.DomUtil.create("form",e+"-list");if(this.options.collapsed){r.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=r.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",r.Browser.touch?r.DomEvent.on(i,"click",r.DomEvent.stopPropagation).on(i,"click",r.DomEvent.preventDefault).on(i,"click",this._expand,this):r.DomEvent.on(i,"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();this._baseLayersList=r.DomUtil.create("div",e+"-base",n),this._separator=r.DomUtil.create("div",e+"-separator",n),this._overlaysList=r.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){var i=r.stamp(e);this._layers[i]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e=!1,t=!1;for(var n in this._layers)if(this._layers.hasOwnProperty(n)){var r=this._layers[n];this._addItem(r),t=t||r.overlay,e=e||!r.overlay}this._separator.style.display=t&&e?"":"none"}},_onLayerChange:function(e){var t=r.stamp(e.layer);this._layers[t]&&!this._handlingClick&&this._update()},_createRadioElement:function(e,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';n&&(r+=' checked="checked"'),r+="/>";var i=t.createElement("div");return i.innerHTML=r,i.firstChild},_addItem:function(e){var n,i=t.createElement("label"),s=this._map.hasLayer(e.layer);e.overlay?(n=t.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=s):n=this._createRadioElement("leaflet-base-layers",s),n.layerId=r.stamp(e.layer),r.DomEvent.on(n,"click",this._onInputClick,this);var o=t.createElement("span");o.innerHTML=" "+e.name,i.appendChild(n),i.appendChild(o);var u=e.overlay?this._overlaysList:this._baseLayersList;return u.appendChild(i),i},_onInputClick:function(){var e,t,n,r,i=this._form.getElementsByTagName("input"),s=i.length;for(this._handlingClick=!0,e=0;s>e;e++)t=i[e],n=this._layers[t.layerId],t.checked&&!this._map.hasLayer(n.layer)?(this._map.addLayer(n.layer),n.overlay||(r=n.layer)):!t.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);r&&(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:r})),this._handlingClick=!1},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),r.control.layers=function(e,t,n){return new r.Control.Layers(e,t,n)},r.PosAnimation=r.Class.extend({includes:r.Mixin.Events,run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this.fire("start"),e.style[r.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",r.DomEvent.on(e,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),r.DomUtil.setPosition(e,t),r.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(r.bind(this.fire,this,"step"),50)},stop:function(){this._inProgress&&(r.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),r.Util.falseFn(this._el.offsetWidth))},_transformRe:/(-?[\d\.]+), (-?[\d\.]+)\)/,_getPos:function(){var t,n,i,s=this._el,o=e.getComputedStyle(s);return r.Browser.any3d?(i=o[r.DomUtil.TRANSFORM].match(this._transformRe),t=parseFloat(i[1]),n=parseFloat(i[2])):(t=parseFloat(o.left),n=parseFloat(o.top)),new r.Point(t,n,!0)},_onTransitionEnd:function(){r.DomEvent.off(this._el,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[r.DomUtil.TRANSITION]="",clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),r.Map.include({setView:function(e,t,n){t=this._limitZoom(t);var r=this._zoom!==t;if(this._loaded&&!n&&this._layers){this._panAnim&&this._panAnim.stop();var i=r?this._zoomToIfClose&&this._zoomToIfClose(e,t):this._panByIfClose(e);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t,n){if(e=r.point(e),!e.x&&!e.y)return this;this._panAnim||(this._panAnim=new r.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),this.fire("movestart"),r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=r.DomUtil.getPosition(this._mapPane).subtract(e)._round();return this._panAnim.run(this._mapPane,i,t||.25,n),this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_panByIfClose:function(e){var t=this._getCenterOffset(e)._floor();return this._offsetIsWithinView(t)?(this.panBy(t),!0):!1},_offsetIsWithinView:function(e,t){var n=t||1,r=this.getSize();return Math.abs(e.x)<=r.x*n&&Math.abs(e.y)<=r.y*n}}),r.PosAnimation=r.DomUtil.TRANSITION?r.PosAnimation:r.PosAnimation.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=r.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+(new Date),this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+(new Date)-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));r.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),r.Map.mergeOptions({zoomAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23&&!r.Browser.mobileOpera}),r.DomUtil.TRANSITION&&r.Map.addInitHook(function(){r.DomEvent.on(this._mapPane,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),r.Map.include(r.DomUtil.TRANSITION?{_zoomToIfClose:function(e,t){if(this._animatingZoom)return!0;if(!this.options.zoomAnimation)return!1;var n=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/n);if(!this._offsetIsWithinView(i,1))return!1;r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this.fire("movestart").fire("zoomstart"),this.fire("zoomanim",{center:e,zoom:t});var s=this._getCenterLayerPoint().add(i);return this._prepareTileBg(),this._runAnimation(e,t,n,s),!0},_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_runAnimation:function(e,t,n,i,s){this._animateToCenter=e,this._animateToZoom=t,this._animatingZoom=!0,r.Draggable&&(r.Draggable._disabled=!0);var o=r.DomUtil.TRANSFORM,u=this._tileBg;clearTimeout(this._clearTileBgTimer),r.Util.falseFn(u.offsetWidth);var a=r.DomUtil.getScaleString(n,i),f=u.style[o];u.style[o]=s?f+" "+a:a+" "+f},_prepareTileBg:function(){var e=this._tilePane,t=this._tileBg;if(t&&this._getLoadedTilesPercentage(t)>.5&&.5>this._getLoadedTilesPercentage(e))return e.style.visibility="hidden",e.empty=!0,this._stopLoadingImages(e),n;t||(t=this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),t.style.zIndex=1),t.style[r.DomUtil.TRANSFORM]="",t.style.visibility="hidden",t.empty=!0,e.empty=!1,this._tilePane=this._panes.tilePane=t;var i=this._tileBg=e;r.DomUtil.addClass(i,"leaflet-zoom-animated"),this._stopLoadingImages(i)},_getLoadedTilesPercentage:function(e){var t,n,r=e.getElementsByTagName("img"),i=0;for(t=0,n=r.length;n>t;t++)r[t].complete&&i++;return i/n},_stopLoadingImages:function(e){var t,n,i,s=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,n=s.length;n>t;t++)i=s[t],i.complete||(i.onload=r.Util.falseFn,i.onerror=r.Util.falseFn,i.src=r.Util.emptyImageUrl,i.parentNode.removeChild(i))},_onZoomTransitionEnd:function(){this._restoreTileFront(),r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),r.Util.falseFn(this._tileBg.offsetWidth),this._animatingZoom=!1,this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),r.Draggable&&(r.Draggable._disabled=!1)},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){this._animatingZoom||this.touchZoom._zooming||(this._tileBg.innerHTML="")}}:{}),r.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locationOptions=r.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r.bind(this._handleGeolocationResponse,this),n=r.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locationOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=180*e.coords.accuracy/4e7,n=2*t,i=e.coords.latitude,s=e.coords.longitude,o=new r.LatLng(i,s),u=new r.LatLng(i-t,s-n),a=new r.LatLng(i+t,s+n),f=new r.LatLngBounds(u,a),l=this._locationOptions;if(l.setView){var c=Math.min(this.getBoundsZoom(f),l.maxZoom);this.setView(o,c)}this.fire("locationfound",{latlng:o,bounds:f,accuracy:e.coords.accuracy})}})}(this,document),define("Leaflet",function(e){return function(){var t,n;return t||e.L}}(this)),function(){function e(t,n){(t===null||t===void 0)&&e.warn("Warning","You must pass your app key when you instantiate Pusher.");var n=n||{},r=this;this.key=t,this.config=e.Util.extend(e.getGlobalConfig(),n.cluster?e.getClusterConfig(n.cluster):{},n),this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new e.Timeline(this.key,this.sessionID,{features:e.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e.Timeline.INFO,version:e.VERSION}),this.config.disableStats||(this.timelineSender=new e.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline"})),this.connection=new e.ConnectionManager(this.key,e.Util.extend({getStrategy:function(t){return e.StrategyBuilder.build(e.getDefaultStrategy(r.config),e.Util.extend({},r.config,t))},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=e.event.indexOf("pusher_internal:")===0;if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||r.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),e.isReady&&r.connect()}var t=e.prototype;e.instances=[],e.isReady=!1,e.debug=function(){e.log&&e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){var t=e.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(t):window.console.log&&window.console.log(t)),e.log&&e.log(t)},e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},t.channel=function(e){return this.channels.find(e)},t.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),n=this.timelineSender;this.timelineSenderTimer=new e.PeriodicTimer(6e4,function(){n.send(t)})}},t.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.bind=function(e,t){return this.global_emitter.bind(e,t),this},t.bind_all=function(e){return this.global_emitter.bind_all(e),this},t.subscribeAll=function(){for(var e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.subscribe=function(e){return e=this.channels.add(e,this),this.connection.state==="connected"&&e.subscribe(),e},t.unsubscribe=function(e){e=this.channels.remove(e),this.connection.state==="connected"&&e.unsubscribe()},t.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},t.isEncrypted=function(){return e.Util.getDocumentLocation().protocol==="https:"?!0:Boolean(this.config.encrypted)},this.Pusher=e}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},extend:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t],r;for(r in n)e[r]=n[r]&&n[r].constructor&&n[r].constructor===Object?Pusher.Util.extend(e[r]||{},n[r]):n[r]}return e},stringify:function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):window.JSON===void 0?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},keys:function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},apply:function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},objectApply:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},map:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n},mapObject:function(e,t){var n={},r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t(e[r]));return n},filter:function(e,t){for(var t=t||function(e){return!!e},n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n},filterObject:function(e,t){var t=t||function(e){return!!e},n={},r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e,n)&&(n[r]=e[r]);return n},flatten:function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t},any:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},all:function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}},getDocument:function(){return document},getDocumentLocation:function(){return Pusher.Util.getDocument().location},getLocalStorage:function(){try{return window.localStorage}catch(e){}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(e){return e.isSupported()}))}}}.call(this),function(){Pusher.VERSION="2.1.3",Pusher.PROTOCOL=6,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",Pusher.dependency_suffix=".min",Pusher.getDefaultStrategy=function(e){return[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],[":best_connected_ever",":ws_loop",[":delayed",2e3,[":sockjs_loop"]]],[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":sockjs_loop"]]],[":sockjs_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}.call(this),function(){function e(e){var t=function(t){Error.call(this,t),this.name=e};return Pusher.Util.extend(t.prototype,Error.prototype),t}Pusher.Errors={BadEventName:e("BadEventName"),UnsupportedTransport:e("UnsupportedTransport"),UnsupportedStrategy:e("UnsupportedStrategy"),TransportPriorityTooLow:e("TransportPriorityTooLow"),TransportClosed:e("TransportClosed")}}.call(this),function(){function e(e){this.callbacks=new t,this.global_callbacks=[],this.failThrough=e}function t(){this._callbacks={}}var n=e.prototype;n.bind=function(e,t){return this.callbacks.add(e,t),this},n.bind_all=function(e){return this.global_callbacks.push(e),this},n.unbind=function(e,t){return this.callbacks.remove(e,t),this},n.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n](t);else this.failThrough&&this.failThrough(e,t);return this},t.prototype.get=function(e){return this._callbacks[this._prefix(e)]},t.prototype.add=function(e,t){var n=this._prefix(e);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(t)},t.prototype.remove=function(e,t){if(this.get(e)){var n=Pusher.Util.arrayIndexOf(this.get(e),t);if(n!==-1){var r=this._callbacks[this._prefix(e)].slice(0);r.splice(n,1),this._callbacks[this._prefix(e)]=r}}},t.prototype._prefix=function(e){return"_"+e},Pusher.EventsDispatcher=e}.call(this),function(){function e(e){this.options=e,this.loading={},this.loaded={}}function t(e,t){Pusher.Util.getDocument().addEventListener?e.addEventListener("load",t,!1):e.attachEvent("onreadystatechange",function(){(e.readyState==="loaded"||e.readyState==="complete")&&t()})}function n(e,n){var r=Pusher.Util.getDocument(),i=r.getElementsByTagName("head")[0],r=r.createElement("script");r.setAttribute("src",e),r.setAttribute("type","text/javascript"),r.setAttribute("async",!0),t(r,function(){setTimeout(n,0)}),i.appendChild(r)}var r=e.prototype;r.load=function(e,t){var r=this;this.loaded[e]?t():this.loading[e]&&this.loading[e].length>0?this.loading[e].push(t):(this.loading[e]=[t],n(this.getPath(e),function(){r.loaded[e]=!0;if(r.loading[e]){for(var t=0;t<r.loading[e].length;t++)r.loading[e][t]();delete r.loading[e]}}))},r.getRoot=function(e){var t=Pusher.Util.getDocumentLocation().protocol;return(e&&e.encrypted||t==="https:"?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},r.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},Pusher.DependencyLoader=e}.call(this),function(){function e(){Pusher.ready()}function t(e){document.body?e():setTimeout(function(){t(e)},0)}function n(){t(e)}Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix}),!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.JSON?n():Pusher.Dependencies.load("json2",n)}(),function(){function e(e,t){var n=this;this.timeout=setTimeout(function(){n.timeout!==null&&(t(),n.timeout=null)},e)}var t=e.prototype;t.isRunning=function(){return this.timeout!==null},t.ensureAborted=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},Pusher.Timer=e}.call(this),function(){function e(e,t){var n=this;this.interval=setInterval(function(){n.interval!==null&&t()},e)}var t=e.prototype;t.isRunning=function(){return this.interval!==null},t.ensureAborted=function(){this.interval&&(clearInterval(this.interval),this.interval=null)},Pusher.PeriodicTimer=e}.call(this),function(){for(var e=String.fromCharCode,t=0;t<64;t++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t);var n=function(t){var n=t.charCodeAt(0);return n<128?t:n<2048?e(192|n>>>6)+e(128|n&63):e(224|n>>>12&15)+e(128|n>>>6&63)+e(128|n&63)},r=function(e){var t=[0,2,1][e.length%3],e=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>12&63),t>=2?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6&63),t>=1?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63)].join("")},i=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,r)};Pusher.Base64={encode:function(e){return i(e.replace(/[^\x00-\x7F]/g,n))}}}.call(this),function(){function e(e){this.options=e}function t(e){return Pusher.Util.mapObject(e,function(e){return typeof e=="object"&&(e=JSON.stringify(e)),encodeURIComponent(Pusher.Base64.encode(e.toString()))})}e.send=function(e,t){var n=new Pusher.JSONPRequest({url:e.url,receiver:e.receiverName,tagPrefix:e.tagPrefix}),r=e.receiver.register(function(e,r){n.cleanup(),t(e,r)});return n.send(r,e.data,function(t){var n=e.receiver.unregister(r);n&&n(t)})};var n=e.prototype;n.send=function(e,n,r){if(this.script)return!1;var i=this.options.tagPrefix||"_pusher_jsonp_",n=Pusher.Util.extend({},n,{receiver:this.options.receiver}),n=Pusher.Util.map(Pusher.Util.flatten(t(Pusher.Util.filterObject(n,function(e){return e!==void 0}))),Pusher.Util.method("join","=")).join("&");this.script=document.createElement("script"),this.script.id=i+e,this.script.src=this.options.url+"/"+e+"?"+n,this.script.type="text/javascript",this.script.charset="UTF-8",this.script.onerror=this.script.onload=r,this.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)&&(i=this.options.receiver||"Pusher.JSONP.receive",this.errorScript=document.createElement("script"),this.errorScript.text=i+"("+e+", true);",this.script.async=this.errorScript.async=!1);var s=this;return this.script.onreadystatechange=function(){s.script&&/loaded|complete/.test(s.script.readyState)&&r(!0)},e=document.getElementsByTagName("head")[0],e.insertBefore(this.script,e.firstChild),this.errorScript&&e.insertBefore(this.errorScript,this.script.nextSibling),!0},n.cleanup=function(){this.script&&this.script.parentNode&&(this.script.parentNode.removeChild(this.script),this.script=null),this.errorScript&&this.errorScript.parentNode&&(this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=null)},Pusher.JSONPRequest=e}.call(this),function(){function e(){this.lastId=0,this.callbacks={}}var t=e.prototype;t.register=function(e){this.lastId++;var t=this.lastId;return this.callbacks[t]=e,t},t.unregister=function(e){if(this.callbacks[e]){var t=this.callbacks[e];return delete this.callbacks[e],t}return null},t.receive=function(e,t,n){(e=this.unregister(e))&&e(t,n)},Pusher.JSONPReceiver=e,Pusher.JSONP=new e}.call(this),function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.uniqueID=this.sent=0}var t=e.prototype;e.ERROR=3,e.INFO=6,e.DEBUG=7,t.log=function(e,t){if(this.options.level===void 0||e<=this.options.level)this.events.push(Pusher.Util.extend({},t,{timestamp:Pusher.Util.now(),level:e})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift()},t.error=function(t){this.log(e.ERROR,t)},t.info=function(t){this.log(e.INFO,t)},t.debug=function(t){this.log(e.DEBUG,t)},t.isEmpty=function(){return this.events.length===0},t.send=function(e,t){var n=this;if(Pusher.Network.isOnline()===!1)return!1;var r={};return n.sent===0&&(r=Pusher.Util.extend({key:n.key,features:n.options.features,version:n.options.version},n.options.params||{})),r.session=n.session,r.timeline=n.events,r=Pusher.Util.filterObject(r,function(e){return e!==void 0}),n.events=[],e(r,function(e,r){e||n.sent++,t&&t(e,r)}),!0},t.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=e}.call(this),function(){function e(e,t){this.timeline=e,this.options=t||{}}e.prototype.send=function(e,t){if(!this.timeline.isEmpty()){var n=this,r="http"+(e?"s":"")+"://";n.timeline.send(function(e,t){return Pusher.JSONPRequest.send({data:e,url:r+(n.host||n.options.host)+n.options.path,receiver:Pusher.JSONP},function(e,r){r&&r.host&&(n.host=r.host),t&&t(e,r)})},t)}},Pusher.TimelineSender=e}.call(this),function(){function e(e){this.strategies=e}function t(e,t,n){var i=Pusher.Util.map(e,function(e,r,i,s){return e.connect(t,n(r,s))});return{abort:function(){Pusher.Util.apply(i,r)},forceMinPriority:function(e){Pusher.Util.apply(i,function(t){t.forceMinPriority(e)})}}}function n(e){return Pusher.Util.all(e,function(e){return Boolean(e.error)})}function r(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var i=e.prototype;i.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},i.connect=function(e,r){return t(this.strategies,e,function(e,t){return function(i,s){(t[e].error=i)?n(t)&&r(!0):(Pusher.Util.apply(t,function(e){e.forceMinPriority(s.transport.priority)}),r(null,s))}})},Pusher.BestConnectedEverStrategy=e}.call(this),function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.timeline=n.timeline}function t(){var e=Pusher.Util.getLocalStorage();if(e)try{var t=e.pusherTransport;if(t)return JSON.parse(t)}catch(r){n()}return null}function n(){var e=Pusher.Util.getLocalStorage();if(e&&e.pusherTransport)try{delete e.pusherTransport}catch(t){e.pusherTransport=void 0}}var r=e.prototype;r.isSupported=function(){return this.strategy.isSupported()},r.connect=function(e,r){var i=t(),s=[this.strategy];if(i&&i.timestamp+this.ttl>=Pusher.Util.now()){var o=this.transports[i.transport];o&&(this.timeline.info({cached:!0,transport:i.transport}),s.push(new Pusher.SequentialStrategy([o],{timeout:i.latency*2,failFast:!0})))}var u=Pusher.Util.now(),f=s.pop().connect(e,function l(t,i){if(t)n(),s.length>0?(u=Pusher.Util.now(),f=s.pop().connect(e,l)):r(t);else{var o=Pusher.Util.now()-u,c=i.transport.name,h=Pusher.Util.getLocalStorage();if(h)try{h.pusherTransport=JSON.stringify({timestamp:Pusher.Util.now(),transport:c,latency:o})}catch(p){}r(null,i)}});return{abort:function(){f.abort()},forceMinPriority:function(t){e=t,f&&f.forceMinPriority(t)}}},Pusher.CachedStrategy=e}.call(this),function(){function e(e,t){this.strategy=e,this.options={delay:t.delay}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy,r,i=new Pusher.Timer(this.options.delay,function(){r=n.connect(e,t)});return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}},Pusher.DelayedStrategy=e}.call(this),function(){function e(e){this.strategy=e}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},Pusher.FirstConnectedStrategy=e}.call(this),function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}var t=e.prototype;t.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},Pusher.IfStrategy=e}.call(this),function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){var n=this,r=this.strategies,i=0,s=this.timeout,o=null,u=function(l,h){h?t(null,h):(i+=1,n.loop&&(i%=r.length),i<r.length?(s&&(s*=2,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:s,failFast:n.failFast},u)):t(!0))},o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},u);return{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},t.tryStrategy=function(e,t,n,r){var i=null,s=null,s=e.connect(t,function(e,t){if(!e||!i||!i.isRunning()||n.failFast)i&&i.ensureAborted(),r(e,t)});return n.timeout>0&&(i=new Pusher.Timer(n.timeout,function(){s.abort(),r(!0)})),{abort:function(){i&&i.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}},Pusher.SequentialStrategy=e}.call(this),function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}function t(e,t){return new Pusher.Timer(0,function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var n=e.prototype;n.isSupported=function(){return this.transport.isSupported({disableFlash:!!this.options.disableFlash})},n.connect=function(e,n){if(!this.transport.isSupported())return t(new Pusher.Errors.UnsupportedStrategy,n);if(this.priority<e)return t(new Pusher.Errors.TransportPriorityTooLow,n);var r=this,i=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,u=function(){s.unbind("initialized",u),s.connect()},a=function(){o=new Pusher.Handshake(s,function(e){i=!0,h(),n(null,e)})},f=function(e){h(),n(e)},l=function(){h(),n(new Pusher.Errors.TransportClosed(s))},h=function(){s.unbind("initialized",u),s.unbind("open",a),s.unbind("error",f),s.unbind("closed",l)};return s.bind("initialized",u),s.bind("open",a),s.bind("error",f),s.bind("closed",l),s.initialize(),{abort:function(){i||(h(),o?o.close():s.close())},forceMinPriority:function(e){i||r.priority<e&&(o?o.close():s.close())}}},Pusher.TransportStrategy=e}.call(this),function(){function e(e,t,n,r){Pusher.EventsDispatcher.call(this),this.name=e,this.priority=t,this.key=n,this.state="new",this.timeline=r.timeline,this.id=this.timeline.generateUniqueID(),this.options={encrypted:Boolean(r.encrypted),hostUnencrypted:r.hostUnencrypted,hostEncrypted:r.hostEncrypted}}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),e.isSupported=function(){return!1},t.supportsPing=function(){return!1},t.initialize=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initialized")},t.connect=function(){var e=this.getURL(this.key,this.options);this.timeline.debug(this.buildTimelineMessage({method:"connect",url:e}));if(this.socket||this.state!=="initialized")return!1;try{this.socket=this.createSocket(e)}catch(t){var n=this;return new Pusher.Timer(0,function(){n.onError(t),n.changeState("closed")}),!1}return this.bindListeners(),Pusher.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},t.close=function(){return this.timeline.debug(this.buildTimelineMessage({method:"close"})),this.socket?(this.socket.close(),!0):!1},t.send=function(e){this.timeline.debug(this.buildTimelineMessage({method:"send",data:e}));if(this.state==="open"){var t=this;return setTimeout(function(){t.socket&&t.socket.send(e)},0),!0}return!1},t.requestPing=function(){this.emit("ping_request")},t.onOpen=function(){this.changeState("open"),this.socket.onopen=void 0},t.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({}))},t.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.socket=void 0},t.onMessage=function(e){this.timeline.debug(this.buildTimelineMessage({message:e.data})),this.emit("message",e)},t.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)}},t.createSocket=function(){return null},t.getScheme=function(){return this.options.encrypted?"wss":"ws"},t.getBaseURL=function(){var e;return e=this.options.encrypted?this.options.hostEncrypted:this.options.hostUnencrypted,this.getScheme()+"://"+e},t.getPath=function(){return"/app/"+this.key},t.getQueryString=function(){return"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION},t.getURL=function(){return this.getBaseURL()+this.getPath()+this.getQueryString()},t.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.buildTimelineMessage=function(e){return Pusher.Util.extend({cid:this.id},e)},Pusher.AbstractTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r)}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(e){if(e&&e.disableFlash)return!1;try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return Boolean(navigator&&navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==void 0)}},t.initialize=function(){var e=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR===void 0&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf",Pusher.Dependencies.load("flashfallback",function(){e.changeState("initialized")})},t.createSocket=function(e){return new FlashWebSocket(e)},t.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=true"},Pusher.FlashTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r),this.options.ignoreNullOrigin=r.ignoreNullOrigin}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(){return!0},t.initialize=function(){var e=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),Pusher.Dependencies.load("sockjs",function(){e.changeState("initialized")})},t.supportsPing=function(){return!0},t.createSocket=function(e){return new SockJS(e,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:this.options.encrypted}),ignore_null_origin:this.options.ignoreNullOrigin})},t.getScheme=function(){return this.options.encrypted?"https":"http"},t.getPath=function(){return this.options.httpPath||"/pusher"},t.getQueryString=function(){return""},t.onOpen=function(){this.socket.send(JSON.stringify({path:Pusher.AbstractTransport.prototype.getPath.call(this)+Pusher.AbstractTransport.prototype.getQueryString.call(this)})),this.changeState("open"),this.socket.onopen=void 0},Pusher.SockJSTransport=e}.call(this),function(){function e(e,t,n,r){Pusher.AbstractTransport.call(this,e,t,n,r)}var t=e.prototype;Pusher.Util.extend(t,Pusher.AbstractTransport.prototype),e.createConnection=function(t,n,r,i){return new e(t,n,r,i)},e.isSupported=function(){return window.WebSocket!==void 0||window.MozWebSocket!==void 0},t.createSocket=function(e){return new(window.WebSocket||window.MozWebSocket)(e)},t.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=false"},Pusher.WSTransport=e}.call(this),function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=null}var t=e.prototype;t.createConnection=function(e,t,n,r){var i=this.transport.createConnection(e,t,n,r),s=this,o=null,u=null,a=function(){i.unbind("open",a),o=Pusher.Util.now(),s.pingDelay&&(u=setInterval(function(){u&&i.requestPing()},s.pingDelay)),i.bind("closed",f)},f=function(e){i.unbind("closed",f),u&&(clearInterval(u),u=null),e.code===1002||e.code===1003?s.manager.reportDeath():!e.wasClean&&o&&(e=Pusher.Util.now()-o,e<2*s.maxPingDelay)&&(s.manager.reportDeath(),s.pingDelay=Math.max(e/2,s.minPingDelay))};return i.bind("open",a),i},t.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},Pusher.AssistantToTheTransportManager=e}.call(this),function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||Infinity}var t=e.prototype;t.getAssistant=function(e){return new Pusher.AssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.isAlive=function(){return this.livesLeft>0},t.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=e}.call(this),function(){function e(e){return function(t){return[e.apply(this,arguments),t]}}function t(e,n){if(e.length===0)return[[],n];var i=r(e[0],n),s=t(e.slice(1),i[1]);return[[i[0]].concat(s[0]),s[1]]}function n(e,n){if(typeof e[0]=="string"&&e[0].charAt(0)===":"){var i=n[e[0].slice(1)];if(e.length>1){if(typeof i!="function")throw"Calling non-function "+e[0];var s=[Pusher.Util.extend({},n)].concat(Pusher.Util.map(e.slice(1),function(e){return r(e,Pusher.Util.extend({},n))[0]}));return i.apply(this,s)}return[i,n]}return t(e,n)}function r(e,t){if(typeof e=="string"){var r;if(typeof e=="string"&&e.charAt(0)===":"){r=t[e.slice(1)];if(r===void 0)throw"Undefined symbol "+e;r=[r,t]}else r=[e,t];return r}return typeof e=="object"&&e instanceof Array&&e.length>0?n(e,t):[e,t]}var i={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport},s={def:function(e,t,n){if(e[t]!==void 0)throw"Redefining symbol "+t;return e[t]=n,[void 0,e]},def_transport:function(e,t,n,r,s,o){var u=i[n];if(!u)throw new Pusher.Errors.UnsupportedTransport(n);return n=Pusher.Util.extend({},{key:e.key,encrypted:e.encrypted,timeline:e.timeline,disableFlash:e.disableFlash,ignoreNullOrigin:e.ignoreNullOrigin},s),o&&(u=o.getAssistant(u)),r=new Pusher.TransportStrategy(t,r,u,n),o=e.def(e,t,r)[1],o.transports=e.transports||{},o.transports[t]=r,[void 0,o]},transport_manager:e(function(e,t){return new Pusher.TransportManager(t)}),sequential:e(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,t)}),cached:e(function(e,t,n){return new Pusher.CachedStrategy(n,e.transports,{ttl:t,timeline:e.timeline})}),first_connected:e(function(e,t){return new Pusher.FirstConnectedStrategy(t)}),best_connected_ever:e(function(){var e=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(e)}),delayed:e(function(e,t,n){return new Pusher.DelayedStrategy(n,{delay:t})}),"if":e(function(e,t,n,r){return new Pusher.IfStrategy(t,n,r)}),is_supported:e(function(e,t){return function(){return t.isSupported()}})};Pusher.StrategyBuilder={build:function(e,t){var n=Pusher.Util.extend({},s,t);return r(e,n)[1].strategy}}}.call(this),function(){Protocol={decodeMessage:function(e){try{var t=JSON.parse(e.data);if(typeof t.data=="string")try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(r){throw{type:"MessageParseError",error:r,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){e=this.decodeMessage(e);if(e.event==="pusher:connection_established")return{action:"connected",id:e.data.socket_id};if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Pusher.Protocol=Protocol}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.id=e,this.transport=t,this.bindListeners()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.supportsPing=function(){return this.transport.supportsPing()},t.send=function(e){return this.transport.send(e)},t.send_event=function(e,t,n){return e={event:e,data:t},n&&(e.channel=n),Pusher.debug("Event sent",e),this.send(Pusher.Protocol.encodeMessage(e))},t.close=function(){this.transport.close()},t.bindListeners=function(){var e=this,t=function(t){var n;try{n=Pusher.Protocol.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(n!==void 0){Pusher.debug("Event recd",n);switch(n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},n=function(){e.emit("ping_request")},r=function(t){e.emit("error",{type:"WebSocketError",error:t})},i=function(s){e.transport.unbind("closed",i),e.transport.unbind("error",r),e.transport.unbind("ping_request",n),e.transport.unbind("message",t),s&&s.code&&e.handleCloseEvent(s),e.transport=null,e.emit("closed")};e.transport.bind("message",t),e.transport.bind("ping_request",n),e.transport.bind("error",r),e.transport.bind("closed",i)},t.handleCloseEvent=function(e){var t=Pusher.Protocol.getCloseAction(e);(e=Pusher.Protocol.getCloseError(e))&&this.emit("error",e),t&&this.emit(t)},Pusher.Connection=e}.call(this),function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}var t=e.prototype;t.close=function(){this.unbindListeners(),this.transport.close()},t.bindListeners=function(){var e=this;e.onMessage=function(t){e.unbindListeners();try{var n=Pusher.Protocol.processHandshake(t);n.action==="connected"?e.finish("connected",{connection:new Pusher.Connection(n.id,e.transport)}):(e.finish(n.action,{error:n.error}),e.transport.close())}catch(r){e.finish("error",{error:r}),e.transport.close()}},e.onClosed=function(t){e.unbindListeners();var n=Pusher.Protocol.getCloseAction(t)||"backoff",t=Pusher.Protocol.getCloseError(t);e.finish(n,{error:t})},e.transport.bind("message",e.onMessage),e.transport.bind("closed",e.onClosed)},t.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.finish=function(e,t){this.callback(Pusher.Util.extend({transport:this.transport,action:e},t))},Pusher.Handshake=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.key=e,this.options=t||{},this.state="initialized",this.connection=null,this.encrypted=!!t.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),n.state==="unavailable"&&n.connect()}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.shouldRetry()&&(n.disconnect(),n.updateState("unavailable"))}),this.updateStrategy()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.connect=function(){var e=this;if(!e.connection&&e.state!=="connecting")if(e.strategy.isSupported())if(Pusher.Network.isOnline()===!1)e.updateState("unavailable");else{e.updateState("connecting");var t=function(n,r){n?e.runner=e.strategy.connect(0,t):r.action==="error"?e.timeline.error({handshakeError:r.error}):(e.runner.abort(),e.handshakeCallbacks[r.action](r))};e.runner=e.strategy.connect(0,t),e.setUnavailableTimer()}else e.updateState("failed")},t.send=function(e){return this.connection?this.connection.send(e):!1},t.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.disconnect=function(){this.runner&&this.runner.abort(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.stopActivityCheck(),this.updateState("disconnected"),this.connection&&(this.connection.close(),this.abandonConnection())},t.isEncrypted=function(){return this.encrypted},t.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.retryIn=function(e){var t=this;t.timeline.info({action:"retry",delay:e}),e>0&&t.emit("connecting_in",Math.round(e/1e3)),t.retryTimer=new Pusher.Timer(e||0,function(){t.disconnect(),t.connect()})},t.clearRetryTimer=function(){this.retryTimer&&this.retryTimer.ensureAborted()},t.setUnavailableTimer=function(){var e=this;e.unavailableTimer=new Pusher.Timer(e.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.resetActivityCheck=function(){this.stopActivityCheck();if(!this.connection.supportsPing()){var e=this;e.activityTimer=new Pusher.Timer(e.options.activityTimeout,function(){e.send_event("pusher:ping",{}),e.activityTimer=new Pusher.Timer(e.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.connection.close()})})}},t.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},ping_request:function(){e.send_event("pusher:ping",{})},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.buildHandshakeCallbacks=function(e){var t=this;return Pusher.Util.extend({},e,{connected:function(e){t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.timeline.info({socket_id:t.socket_id}),t.updateState("connected")}})},t.buildErrorCallbacks=function(){function e(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}}var t=this;return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},t.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.abandonConnection=function(){if(this.connection){for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);this.connection=null}},t.updateState=function(e,t){var n=this.state;this.state=e,n!==e&&(Pusher.debug("State changed",n+" -> "+e),this.timeline.info({state:e}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t))},t.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},Pusher.ConnectionManager=e}.call(this),function(){function e(){Pusher.EventsDispatcher.call(this);var e=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}Pusher.Util.extend(e.prototype,Pusher.EventsDispatcher.prototype),e.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},Pusher.NetInfo=e,Pusher.Network=new e}.call(this),function(){function e(){this.reset()}var t=e.prototype;t.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.each=function(e){var t=this;Pusher.Util.objectApply(t.members,function(n,r){e(t.get(r))})},t.setMyID=function(e){this.myID=e},t.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},t.reset=function(){this.members={},this.count=0,this.me=this.myID=null},Pusher.Members=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this,function(t){Pusher.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.authorize=function(e,t){return t(!1,{})},t.trigger=function(e,t){if(e.indexOf("client-")!==0)throw new Pusher.Errors.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.disconnect=function(){this.subscribed=!1},t.handleEvent=function(e,t){e.indexOf("pusher_internal:")===0?e==="pusher_internal:subscription_succeeded"&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.subscribe=function(){var e=this;e.authorize(e.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=e}.call(this),function(){function e(e,t){Pusher.Channel.call(this,e,t)}var t=e.prototype;Pusher.Util.extend(t,Pusher.Channel.prototype),t.authorize=function(e,t){return(new Pusher.Channel.Authorizer(this,this.pusher.config)).authorize(e,t)},Pusher.PrivateChannel=e}.call(this),function(){function e(e,t){Pusher.PrivateChannel.call(this,e,t),this.members=new Pusher.Members}var t=e.prototype;Pusher.Util.extend(t,Pusher.PrivateChannel.prototype),t.authorize=function(e,t){var n=this;Pusher.PrivateChannel.prototype.authorize.call(n,e,function(e,r){if(!e){if(r.channel_data===void 0){Pusher.warn("Invalid auth response for channel '"+n.name+"', expected 'channel_data' field"),t("Invalid auth response");return}var i=JSON.parse(r.channel_data);n.members.setMyID(i.user_id)}t(e,r)})},t.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.members.onSubscription(t),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":this.emit("pusher:member_added",this.members.addMember(t));break;case"pusher_internal:member_removed":var n=this.members.removeMember(t);n&&this.emit("pusher:member_removed",n);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,e,t)}},t.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=e}.call(this),function(){function e(){this.channels={}}var t=e.prototype;t.add=function(e,t){return this.channels[e]||(this.channels[e]=e.indexOf("private-")===0?new Pusher.PrivateChannel(e,t):e.indexOf("presence-")===0?new Pusher.PresenceChannel(e,t):new Pusher.Channel(e,t)),this.channels[e]},t.find=function(e){return this.channels[e]},t.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},t.disconnect=function(){Pusher.Util.objectApply(this.channels,function(e){e.disconnect()})},Pusher.Channels=e}.call(this),function(){Pusher.Channel.Authorizer=function(e,t){this.channel=e,this.type=t.authTransport,this.options=t,this.authOptions=(t||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(e){var e="&socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name),t;for(t in this.authOptions.params)e+="&"+encodeURIComponent(t)+"="+encodeURIComponent(this.authOptions.params[t]);return e},authorize:function(e,t){return Pusher.authorizers[this.type].call(this,e,t)}};var e=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(e,t){var n;n=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("POST",this.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var r in this.authOptions.headers)n.setRequestHeader(r,this.authOptions.headers[r]);return n.onreadystatechange=function(){if(n.readyState==4)if(n.status==200){var e,r=!1;try{e=JSON.parse(n.responseText),r=!0}catch(i){t(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}r&&t(!1,e)}else Pusher.warn("Couldn't get auth info from your webapp",n.status),t(!0,n.status)},n.send(this.composeQuery(e)),n},jsonp:function(t,n){this.authOptions.headers!==void 0&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.toString();e++;var i=Pusher.Util.getDocument(),s=i.createElement("script");Pusher.auth_callbacks[r]=function(e){n(!1,e)},s.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+r+"']")+this.composeQuery(t),r=i.getElementsByTagName("head")[0]||i.documentElement,r.insertBefore(s,r.firstChild)}}}.call(this),define("Pusher",function(e){return function(){var t,n;return t||e.Pusher}}(this)),this.Handlebars={},function(e){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}(this.Handlebars);var handlebars=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();Handlebars.Parser=handlebars,Handlebars.parse=function(e){return e.constructor===Handlebars.AST.ProgramNode?e:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e))},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r,i){e(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s===".."||s==="."||s==="this"){if(t.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);s===".."?n++:this.isScoped=!0}else t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=e.length===1&&!this.isScoped&&n===0,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<errorProps.length;n++)this[errorProps[n]]=t[errorProps[n]]},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(o=i.length;this.i<o;this.i++)s=i[this.i],s.opcode==="DECLARE"?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(r)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,s=this.environment.depths.list.length;i<s;i++)r.push("depth"+this.environment.depths.list[i]);var o=this.mergeSource();if(!this.isChild){var u=Handlebars.COMPILER_REVISION,a=Handlebars.REVISION_CHANGES[u];o="this.compilerInfo = ["+u+",'"+a+"'];\n"+o}if(e)return r.push(o),Function.apply(this,r);var f="function "+(this.name||"")+"("+r.join(",")+") {\n  "+o+"}";return Handlebars.log(Handlebars.logger.DEBUG,f+"\n\n"),f},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",r=this.isInline(),i;if(r){var s=this.popStack(!0);if(s instanceof n)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];i instanceof n?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();return!e&&r instanceof n?r.value:(t||this.stackSlot--,r)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,r=t[t.length-1];return!e&&r instanceof n?r.value:r},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),i=t.RESERVED_WORDS={};for(var s=0,o=r.length;s<o;s++)i[r[s]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var i=e.call(t,Handlebars,n,r.helpers,r.partials,r.data),s=t.compilerInfo||[],o=s[0]||1,u=Handlebars.COMPILER_REVISION;if(o!==u){if(o<u){var a=Handlebars.REVISION_CHANGES[u],f=Handlebars.REVISION_CHANGES[o];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+f+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return i}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){var o={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e,{data:s!==undefined}),i[t](n,o)}},Handlebars.template=Handlebars.VM.template,define("handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),function(e){function t(e,t){return function(n){return a(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function r(){}function i(e){o(this,e)}function s(e){var t=e.years||e.year||e.y||0,n=e.months||e.month||e.M||0,r=e.weeks||e.week||e.w||0,i=e.days||e.day||e.d||0,s=e.hours||e.hour||e.h||0,o=e.minutes||e.minute||e.m||0,u=e.seconds||e.second||e.s||0,a=e.milliseconds||e.millisecond||e.ms||0;this._input=e,this._milliseconds=+a+1e3*u+6e4*o+36e5*s,this._days=+i+7*r,this._months=+n+12*t,this._data={},this._bubble()}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function u(e){return 0>e?Math.ceil(e):Math.floor(e)}function a(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function f(e,t,n,r){var i,s,o=t._milliseconds,u=t._days,a=t._months;o&&e._d.setTime(+e._d+o*n),(u||a)&&(i=e.minute(),s=e.hour()),u&&e.date(e.date()+u*n),a&&e.month(e.month()+a*n),o&&!r&&j.updateOffset(e),(u||a)&&(e.minute(i),e.hour(s))}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e,t){var n,r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0;for(n=0;r>n;n++)~~e[n]!==~~t[n]&&s++;return s+i}function h(e){return e?at[e]||e.toLowerCase().replace(/(.)s$/,"$1"):e}function p(e,t){return t.abbr=e,R[e]||(R[e]=new r),R[e].set(t),R[e]}function d(e){delete R[e]}function v(e){if(!e)return j.fn._lang;if(!R[e]&&U)try{require("./lang/"+e)}catch(t){return j.fn._lang}return R[e]||j.fn._lang}function m(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function g(e){var t,n,r=e.match(X);for(t=0,n=r.length;n>t;t++)r[t]=ht[r[t]]?ht[r[t]]:m(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function y(e,t){return t=b(t,e.lang()),ft[t]||(ft[t]=g(t)),ft[t](e)}function b(e,t){function n(e){return t.longDateFormat(e)||e}for(var r=5;r--&&(V.lastIndex=0,V.test(e));)e=e.replace(V,n);return e}function w(e,t){switch(e){case"DDDD":return K;case"YYYY":return Q;case"YYYYY":return G;case"S":case"SS":case"SSS":case"DDD":return J;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Y;case"a":case"A":return v(t._l)._meridiemParse;case"X":return tt;case"Z":case"ZZ":return Z;case"T":return et;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return $;default:return new RegExp(e.replace("\\",""))}}function E(e){var t=(Z.exec(e)||[])[0],n=(t+"").match(st)||["-",0,0],r=+(60*n[1])+~~n[2];return"+"===n[0]?-r:r}function S(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":null!=t&&(i[1]=~~t-1);break;case"MMM":case"MMMM":r=v(n._l).monthsParse(t),null!=r?i[1]=r:n._isValid=!1;break;case"D":case"DD":null!=t&&(i[2]=~~t);break;case"DDD":case"DDDD":null!=t&&(i[1]=0,i[2]=~~t);break;case"YY":i[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":i[0]=~~t;break;case"a":case"A":n._isPm=v(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[3]=~~t;break;case"m":case"mm":i[4]=~~t;break;case"s":case"ss":i[5]=~~t;break;case"S":case"SS":case"SSS":i[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=E(t)}null==t&&(n._isValid=!1)}function x(e){var t,n,r,i=[];if(!e._d){for(r=N(e),t=0;3>t&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];i[3]+=~~((e._tzm||0)/60),i[4]+=~~((e._tzm||0)%60),n=new Date(0),e._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),e._d=n}}function T(e){var t=e._i;e._d||(e._a=[t.years||t.year||t.y,t.months||t.month||t.M,t.days||t.day||t.d,t.hours||t.hour||t.h,t.minutes||t.minute||t.m,t.seconds||t.second||t.s,t.milliseconds||t.millisecond||t.ms],x(e))}function N(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function C(e){var t,n,r,i=v(e._l),s=""+e._i;for(r=b(e._f,i).match(X),e._a=[],t=0;t<r.length;t++)n=(w(r[t],e).exec(s)||[])[0],n&&(s=s.slice(s.indexOf(n)+n.length)),ht[r[t]]&&S(r[t],n,e);s&&(e._il=s),e._isPm&&e._a[3]<12&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),x(e)}function k(e){var t,n,r,s,u,a=99;for(s=0;s<e._f.length;s++)t=o({},e),t._f=e._f[s],C(t),n=new i(t),u=c(t._a,n.toArray()),n._il&&(u+=n._il.length),a>u&&(a=u,r=n);o(e,r)}function L(e){var t,n=e._i,r=nt.exec(n);if(r){for(e._f="YYYY-MM-DD"+(r[2]||" "),t=0;4>t;t++)if(it[t][1].exec(n)){e._f+=it[t][0];break}Z.exec(n)&&(e._f+=" Z"),C(e)}else e._d=new Date(n)}function A(t){var n=t._i,r=z.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):"string"==typeof n?L(t):l(n)?(t._a=n.slice(0),x(t)):n instanceof Date?t._d=new Date(+n):"object"==typeof n?T(t):t._d=new Date(n)}function O(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function M(e,t,n){var r=q(Math.abs(e)/1e3),i=q(r/60),s=q(i/60),o=q(s/24),u=q(o/365),a=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===s&&["h"]||22>s&&["hh",s]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",q(o/30)]||1===u&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,O.apply({},a)}function _(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=j(e).add("d",s),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function D(e){var t=e._i,n=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=v().preparse(t)),j.isMoment(t)?(e=o({},t),e._d=new Date(+t._d)):n?l(n)?k(e):C(e):A(e),new i(e))}function P(e,t){j.fn[e]=j.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),j.updateOffset(this),this):this._d["get"+n+t]()}}function H(e){j.duration.fn[e]=function(){return this._data[e]}}function B(e,t){j.duration.fn["as"+e]=function(){return+this/t}}for(var j,F,I="2.2.1",q=Math.round,R={},U="undefined"!=typeof module&&module.exports,z=/^\/?Date\((\-?\d+)/i,W=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,X=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,V=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,$=/\d\d?/,J=/\d{1,3}/,K=/\d{3}/,Q=/\d{1,4}/,G=/[+\-]?\d{1,6}/,Y=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Z=/Z|[\+\-]\d\d:?\d\d/i,et=/T/i,tt=/[\+\-]?\d+(\.\d{1,3})?/,nt=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,rt="YYYY-MM-DDTHH:mm:ssZ",it=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],st=/([\+\-]|\d\d)/gi,ot="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ut={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},at={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},ft={},lt="DDD w W M D d".split(" "),ct="M D H h m s w W".split(" "),ht={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return a(this.year()%100,2)},YYYY:function(){return a(this.year(),4)},YYYYY:function(){return a(this.year(),5)},gg:function(){return a(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return a(this.weekYear(),5)},GG:function(){return a(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return a(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return a(~~(this.milliseconds()/10),2)},SSS:function(){return a(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(~~(e/60),2)+":"+a(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+a(~~(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};lt.length;)F=lt.pop(),ht[F+"o"]=n(ht[F],F);for(;ct.length;)F=ct.pop(),ht[F+F]=t(ht[F],2);for(ht.DDDD=t(ht.DDD,3),o(r.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=j.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=j([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return _(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),j=function(e,t,n){return D({_i:e,_f:t,_l:n,_isUTC:!1})},j.utc=function(e,t,n){return D({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t}).utc()},j.unix=function(e){return j(1e3*e)},j.duration=function(e,t){var n,r,i=j.isDuration(e),o="number"==typeof e,u=i?e._input:o?{}:e,a=W.exec(e);return o?t?u[t]=e:u.milliseconds=e:a&&(n="-"===a[1]?-1:1,u={y:0,d:~~a[2]*n,h:~~a[3]*n,m:~~a[4]*n,s:~~a[5]*n,ms:~~a[6]*n}),r=new s(u),i&&e.hasOwnProperty("_lang")&&(r._lang=e._lang),r},j.version=I,j.defaultFormat=rt,j.updateOffset=function(){},j.lang=function(e,t){return e?(e=e.toLowerCase(),e=e.replace("_","-"),t?p(e,t):null===t?(d(e),e="en"):R[e]||v(e),j.duration.fn._lang=j.fn._lang=v(e),void 0):j.fn._lang._abbr},j.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),v(e)},j.isMoment=function(e){return e instanceof i},j.isDuration=function(e){return e instanceof s},o(j.fn=i.prototype,{clone:function(){return j(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return y(j(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!c(this._a,(this._isUTC?j.utc(this._a):j(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var e,t=this._a,n=(this._isUTC?j.utc(this._a):j(this._a)).toArray();for(e=6;e>=0&&t[e]===n[e];--e);return e},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=y(this,e||j.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?j.duration(+t,e):j.duration(e,t),f(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?j.duration(+t,e):j.duration(e,t),f(this,n,-1),this},diff:function(e,t,n){var r,i,s=this._isUTC?j(e).zone(this._offset||0):j(e).local(),o=6e4*(this.zone()-s.zone());return t=h(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),i+=(this-j(this).startOf("month")-(s-j(s).startOf("month")))/r,i-=6e4*(this.zone()-j(this).startOf("month").zone()-(s.zone()-j(s).startOf("month").zone()))/r,"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:u(i)},from:function(e,t){return j.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(j(),e)},calendar:function(){var e=this.diff(j().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?"string"==typeof e&&(e=this.lang().weekdaysParse(e),"number"!=typeof e)?this:this.add({d:e-t}):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),j.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoweek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoweek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+j(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+j(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+j(e).startOf(t)},min:function(e){return e=j.apply(null,arguments),this>e?this:e},max:function(e){return e=j.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=E(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&f(this,j.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(e){return e=e?j(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return j.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=q((j(this).startOf("day")-j(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=_(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=_(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=_(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e.toLowerCase()]()},set:function(e,t){e=h(e),this[e.toLowerCase()](t)},lang:function(t){return t===e?this._lang:(this._lang=v(t),this)}}),F=0;F<ot.length;F++)P(ot[F].toLowerCase().replace(/s$/,""),ot[F]);P("year","FullYear"),j.fn.days=j.fn.day,j.fn.months=j.fn.month,j.fn.weeks=j.fn.week,j.fn.isoWeeks=j.fn.isoWeek,j.fn.toJSON=j.fn.toISOString,o(j.duration.fn=s.prototype,{_bubble:function(){var e,t,n,r,i=this._milliseconds,s=this._days,o=this._months,a=this._data;a.milliseconds=i%1e3,e=u(i/1e3),a.seconds=e%60,t=u(e/60),a.minutes=t%60,n=u(t/60),a.hours=n%24,s+=u(n/24),a.days=s%30,o+=u(s/30),a.months=o%12,r=u(o/12),a.years=r},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(e){var t=+this,n=M(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=j.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=j.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:j.fn.lang});for(F in ut)ut.hasOwnProperty(F)&&(B(F,ut[F]),H(F.toLowerCase()));B("Weeks",6048e5),j.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},j.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),U&&(module.exports=j),"undefined"==typeof ender&&(this.moment=j),"function"==typeof define&&define.amd&&define("moment",[],function(){return j})}.call(this),function(e,t){typeof define=="function"&&define.amd?define("form2js",t):e.form2js=t()}(this,function(){function e(e,r,i,s,o){if(typeof i=="undefined"||i==null)i=!0;if(typeof r=="undefined"||r==null)r=".";arguments.length<5&&(o=!1),e=typeof e=="string"?document.getElementById(e):e;var u=[],a,f=0;if(e.constructor==Array||typeof NodeList!="undefined"&&e.constructor==NodeList)while(a=e[f++])u=u.concat(n(a,s,o));else u=n(e,s,o);return t(u,i,r)}function t(e,t,n){var r={},i={},s,o,u,a,f,l,c,h,p,d,v,m,g;for(s=0;s<e.length;s++){f=e[s].value;if(!(!t||f!==""&&f!==null))continue;m=e[s].name,g=m.split(n),l=[],c=r,h="";for(o=0;o<g.length;o++){v=g[o].split("][");if(v.length>1)for(u=0;u<v.length;u++){u==0?v[u]=v[u]+"]":u==v.length-1?v[u]="["+v[u]:v[u]="["+v[u]+"]",d=v[u].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(d)for(a=1;a<d.length;a++)d[a]&&l.push(d[a]);else l.push(v[u])}else l=l.concat(v)}for(o=0;o<l.length;o++)v=l[o],v.indexOf("[]")>-1&&o==l.length-1?(p=v.substr(0,v.indexOf("[")),h+=p,c[p]||(c[p]=[]),c[p].push(f)):v.indexOf("[")>-1?(p=v.substr(0,v.indexOf("[")),d=v.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),h+="_"+p+"_"+d,i[h]||(i[h]={}),p!=""&&!c[p]&&(c[p]=[]),o==l.length-1?p==""?(c.push(f),i[h][d]=c[c.length-1]):(c[p].push(f),i[h][d]=c[p][c[p].length-1]):i[h][d]||(/^[a-z_]+\[?/i.test(l[o+1])?c[p].push({}):c[p].push([]),i[h][d]=c[p][c[p].length-1]),c=i[h][d]):(h+=v,o<l.length-1?(c[v]||(c[v]={}),c=c[v]):c[v]=f)}return r}function n(e,t,n){var s=i(e,t,n);return s.length>0?s:r(e,t,n)}function r(e,t,n){var r=[],s=e.firstChild;while(s)r=r.concat(i(s,t,n)),s=s.nextSibling;return r}function i(e,t,n){var i,u,a,f=s(e,n);return i=t&&t(e),i&&i.name?a=[i]:f!=""&&e.nodeName.match(/INPUT|TEXTAREA/i)?(u=o(e),a=[{name:f,value:u}]):f!=""&&e.nodeName.match(/SELECT/i)?(u=o(e),a=[{name:f.replace(/\[\]$/,""),value:u}]):a=r(e,t,n),a}function s(e,t){return e.name&&e.name!=""?e.name:t&&e.id&&e.id!=""?e.id:""}function o(e){if(e.disabled)return null;switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":if(e.checked&&e.value==="false")return!1;case"checkbox":if(e.checked&&e.value==="true")return!0;if(!e.checked&&e.value==="true")return!1;if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return u(e);default:}return null}function u(e){var t=e.multiple,n=[],r,i,s;if(!t)return e.value;for(r=e.getElementsByTagName("option"),i=0,s=r.length;i<s;i++)r[i].selected&&n.push(r[i].value);return n}return e}),function(e,t){typeof define=="function"&&define.amd?define("js2form",t):e.js2form=t()}(this,function(){function o(e,t,r,i,s){arguments.length<3&&(r="."),arguments.length<4&&(i=null),arguments.length<5&&(s=!1);var o,f;o=l(t),f=a(e,s,r,{},!0);for(var c=0;c<o.length;c++){var h=o[c].name,p=o[c].value;typeof f[h]!="undefined"?u(f[h],p):typeof f[h.replace(n,"[]")]!="undefined"&&u(f[h.replace(n,"[]")],p)}}function u(e,t){var n,r,i;if(e instanceof Array){for(r=0;r<e.length;r++)if(e[r].value==t||t===!0)e[r].checked=!0}else if(s.test(e.nodeName))e.value=t;else if(/SELECT/i.test(e.nodeName)){n=e.getElementsByTagName("option");for(r=0,i=n.length;r<i;r++)if(n[r].value==t){n[r].selected=!0;if(e.multiple)break}else e.multiple||(n[r].selected=!1)}}function a(e,t,r,i,s){arguments.length<4&&(i={});var o={},u=e.firstChild,l,c,h,p,d,v,m;while(u){l="",u.name&&u.name!=""?l=u.name:t&&u.id&&u.id!=""&&(l=u.id);if(l==""){var g=a(u,t,r,i,s);for(h in g)if(typeof o[h]=="undefined")o[h]=g[h];else for(p=0;p<g[h].length;p++)o[h].push(g[h][p])}else if(/SELECT/i.test(u.nodeName))for(d=0,m=u.getElementsByTagName("option"),v=m.length;d<v;d++)s&&(m[d].selected=!1),c=f(l,r,i),o[c]=u;else/INPUT/i.test(u.nodeName)&&/CHECKBOX|RADIO/i.test(u.type)?(s&&(u.checked=!1),c=f(l,r,i),c=c.replace(n,"[]"),o[c]||(o[c]=[]),o[c].push(u)):(s&&(u.value=""),c=f(l,r,i),o[c]=u);u=u.nextSibling}return o}function f(e,t,n){var s=[],o=e.split(t),u,a,f,l,c,h;e=e.replace(i,"[$1].[$2]");for(h=0;h<o.length;h++){u=o[h],s.push(u),a=u.match(r);if(a!=null){f=s.join(t),l=f.replace(r,"$3"),f=f.replace(r,"$1"),typeof n[f]=="undefined"&&(n[f]={lastIndex:-1,indexes:{}});if(l==""||typeof n[f].indexes[l]=="undefined")n[f].lastIndex++,n[f].indexes[l]=n[f].lastIndex;c=n[f].indexes[l],s[s.length-1]=u.replace(r,"$1$2"+c+"$4")}}return f=s.join(t),f=f.replace("].[","]["),f}function l(e,t){var n=[],r,i;arguments.length==1&&(t=0);if(e==null)n=[{name:"",value:null}];else if(typeof e=="string"||typeof e=="number"||typeof e=="date"||typeof e=="boolean")n=[{name:"",value:e}];else if(e instanceof Array)for(r=0;r<e.length;r++)i="["+r+"]",n=n.concat(c(e[r],i,t+1));else for(r in e)i=r,n=n.concat(c(e[r],i,t+1));return n}function c(n,r,i){var s,o=[],u=l(n,i+1),a,f;for(a=0;a<u.length;a++)s=r,e.test(u[a].name)?s+=u[a].name:t.test(u[a].name)&&(s+="."+u[a].name),f={name:s,value:u[a].value},o.push(f);return o}var e=/^\[\d+?\]/,t=/^[a-zA-Z_][a-zA-Z_0-9]+/,n=/\[[0-9]+?\]$/,r=/(.*)(\[)([0-9]*)(\])$/,i=/\[([0-9]+)\]\[([0-9]+)\]/g,s=/INPUT|TEXTAREA/i;return o}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h={},p=e.config&&e.config()||{};t={version:"2.0.7",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,e))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("hbs",["text","handlebars"],function(e,t){var n={},r='define("{{pluginName}}!{{moduleName}}", ["handlebars"], function(handlebars) {return handlebars.template({{{fn}}})});',i,s=function(r,i,s,o){e.get(i.toUrl(r),function(e){o.isBuild?(n[r]=e,s()):s(t.compile(e))})},o=function(e,s,o){s in n&&(i||(i=t.compile(r)),o(i({pluginName:e,moduleName:s,fn:t.precompile(n[s])})))};return{load:s,write:o}}),define("hbs!tpl/tabs/devices.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="map-container">\n  <div id="devices-map" class="map"></div>\n  <i class="map-top"></i>\n  <i class="map-right"></i>\n  <i class="map-bottom"></i>\n  <i class="map-left"></i>\n</div>\n\n<div class="left-panel">\n  <div id="device-header">\n      \n      <div class="suggestionGrouping">\n        \n      </div>\n      <div class="filterControls">\n        <h5 class="headerVisible">Select:</h5>\n        <ul class="chips">\n          <li class="chip"><span class="pure-button" action="selectAll">All</span></li>\n          <li class="chip"><span class="pure-button" action="selectNone">None</span></li>\n          <li class="chip"><span class="pure-button" action="selectAction">Take Action</span></li>\n        </ul>\n      </div>\n  </div>\n  <div class="device-list">\n    <ul></ul>\n    <div class="loading_dots">\n      <span></span>\n      <span></span>\n      <span></span>\n    </div>\n  </div>\n</div>\n'})}),define("hbs!tpl/modals/app.new.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c1">\n	<div class="header">\n		<h3>Create a new app</h3>\n	</div>\n	<form id="form-c1" action="" class="pure-form">\n	  <fieldset>\n	    <div class="pure-control-group">\n          <label for="appid">App ID:</label>\n          <input type="text" name="appid" id="appid">\n      </div>\n    </fieldset>\n    <fieldset>\n	    <div class="pure-control-group">\n          <label for="name">App Name</label>\n          <input type="text" name="email" id="email">\n      </div>\n    </fieldset>\n    \n		<div class="clearfix" style="text-align: center;">\n      <button type="submit" class="pure-button pure-button-primary" data="submit-c1">Create App</button>\n    </div>\n	</form>\n</div>'})}),define("hbs!tpl/modals/devices.map.settings.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c3">\n	<div class="header">\n		<h3>Device Tracking Settings</h3>\n	</div>\n	<form id="form-c3" action="" class="pure-form pure-form-aligned">\n	  <fieldset>\n	    <div class="pure-control-group">\n          <label for="name">Idle Timeout (minutes)</label>\n          <input name="id" value="map" type="hidden">\n          <input name="idleTimeout" id="name" type="text" placeholder="Enter num of minutes">\n      </div>\n    </fieldset>\n    <div class="clearfix" style="text-align: center;">\n      <button type="submit" class="pure-button pure-button-primary" data="submit-c3">Submit</button>\n    </div>\n	</form>\n</div>'})}),define("hbs!tpl/modals/device.settings.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal settings">\n	<div class="header">\n		<div class="pure-menu pure-menu-open pure-menu-horizontal">\n        <ul>\n          <li class="pure-menu-selected"><a href="#">General</a></li>\n          <li><a href="#">Markers</a></li>\n          <li><a href="#">Devices</a></li>\n          <li><a href="#">Notifications</a></li>\n        </ul>\n    </div>\n	</div>\n  \n  <section id="general" class="active">\n    <div class="left" style="width:400px;float:left;">\n      <h2 style="text-align:center;">Left</h2>\n    </div>\n    <div class="right" style="display: block;float: left;margin-left: 10px;width: 550px;">\n      <h2 style="text-align:center;">Right</h2>\n    </div>\n  </section>\n\n  <section id="map">\n    <div class="left" style="width:450px;float:left;">\n      <div class="pure-menu pure-menu-open pure-menu-horizontal">\n          <h2 style="text-align:center;margin:0.23em 0;">Code</h2>\n      </div>\n      <div id="panel" class="active" style="height:520px;">\n        <div style="border:1px solid #afafaf;width:100%;background-image: url(\'/img/sparkdash/bg.ffedit.png\'); ">\n          <textarea class="marker-preview-code" id="code" name="code" height="520" style="width:100%;"></textarea>\n        </div>\n      </div>\n    </div>\n    <div class="right" style="display: block;float: left;margin-left: 10px;width: 500px;">\n      <div class="pure-menu pure-menu-open pure-menu-horizontal">\n          <h2 style="text-align:center;margin:0.23em 0;">Preview</h2>\n      </div>      \n      <div class="preview" style="border:1px solid #336699;height:520px;width:100%;background-image:url(\'/img/sparkdash/device.settings.preview.map.png\');">\n\n        <div class="device-preview" style="width:330px;margin:auto;">\n          <ul>\n            <li data="ffedit-preview-ef12155c-a286-3253-bfb1-24dbe403a1fa" class="device unselectable">\n              <div class="header">\n                <div class="deviceIcon"></div>\n                <div class="deviceTitle">Keverage</div>\n                <div class="deviceCheckBox">\n                  <label class="styled-checkbox">\n                    <input type="checkbox" />\n                    <span></span>\n                  </label>\n                </div>\n              </div>\n\n              <div class="content">\n                <div style="width:50px;height:50px;margin-top: 3px;float:left;">\n                  <img src="https://www.monosnap.com/image/6jaPgaE3d0i2wq3umYzixoz7y.png" width="50">\n                </div>\n                <div style="float:left;margin-left: 10px;">\n                  <div style="float:left;" class="row1">\n                    <a style="text-decoration:none;font-weight:bold;color:#336699;" href="#">S9822215</a>\n                  </div>\n                  <div style="float:left;" class="row2">1199 West 25th St, Joplin</div>\n                  <div style="float:left;" class="row3">\n                    <div class="label red">Turn Off</div>\n                  </div>\n                </div>\n              </div>\n              <div class="footer">\n                <div>\n                  <div class="led state2"></div>\n                  <div class="timestamp">Last updated: 3 hours ago</div>\n                  <div class="socket"></div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n    </div>\n  </section>  \n    \n  <section id="devices">\n    \n    <div class="left" style="width:400px;float:left;">\n      <div style="width:400px;" class="tableview">\n        <ul>\n          <p>Filter Functions</p>\n          <li>&nbsp;</li>\n          <li>&nbsp;</li>\n          <li>&nbsp;</li>\n          <li>&nbsp;</li>\n          <li>&nbsp;</li>\n        </ul>\n      </div>\n      <div class="clearfix" style="text-align: center;">\n        <button type="submit" class="pure-button pure-button-primary" data="submit-c3">New Filter</button>\n      </div>\n    </div>\n    <div class="right" style="display: block;float: left;margin-left: 10px;width: 550px;">\n\n        <div class="pure-menu pure-menu-open pure-menu-horizontal">\n            <ul>\n              <li class="pure-menu-selected"><a href="#">Code</a></li>\n              <li><a href="#">Payload</a></li>\n            </ul>\n        </div>\n\n        <div class="container">\n          <div id="panel" class="active">\n            <div style="border:1px solid #afafaf;width:100%;background-image: url(\'/img/sparkdash/bg.ffedit.png\'); ">\n              <textarea class="expression-preview-code" id="code" name="code" style="height:290px;width:100%;"></textarea>\n            </div>\n          </div>\n          <div id="panel">\n            <div style="border:1px solid #afafaf;width:100%;background-image: url(\'/img/sparkdash/bg.ffedit.png\'); ">\n              <textarea class="expression-preview-data" id="code" name="code" style="height:290px;width:100%;"></textarea>\n            </div>\n          </div>\n\n          <div style="margin-top:5px;margin-bottom:5px;">\n            <button class="pure-button pure-button-warning" action="test_FFEdit">Test</button>\n            <button class="pure-button pure-button-disabled" action="save_FFEdit" style="float:right;">Save</button>\n          </div>\n\n          <div class="preview" style="border:1px solid #336699;height:200px;width:100%;background-image:url(\'/img/sparkdash/device.settings.preview.map.png\');">\n\n            <div class="device-preview" style="width:330px;margin:auto;">\n              <ul>\n                <li data="ffedit-preview-ef12155c-a286-3253-bfb1-24dbe403a1fa" class="device unselectable">\n                  <div class="header">\n                    <div class="deviceIcon"></div>\n                    <div class="deviceTitle">Keverage</div>\n                    <div class="deviceCheckBox">\n                      <label class="styled-checkbox">\n                        <input type="checkbox" />\n                        <span></span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div class="content">\n                    <div style="width:50px;height:50px;margin-top: 3px;float:left;">\n                      <img src="https://www.monosnap.com/image/6jaPgaE3d0i2wq3umYzixoz7y.png" width="50">\n                    </div>\n                    <div style="float:left;margin-left: 10px;">\n                      <div style="float:left;" class="row1">\n                        <a style="text-decoration:none;font-weight:bold;color:#336699;" href="#">S9822215</a>\n                      </div>\n                      <div style="float:left;" class="row2">1199 West 25th St, Joplin</div>\n                      <div style="float:left;" class="row3">\n                        <div class="label red">Turn Off</div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="footer">\n                    <div>\n                      <div class="led state2"></div>\n                      <div class="timestamp">Last updated: 3 hours ago</div>\n                      <div class="socket"></div>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n          </div>\n        </div>\n          \n        </div>\n        \n    </div> \n    \n  </section>\n  \n  <section id="notifications">\n    <div class="left" style="width:400px;float:left;">\n      <h2 style="text-align:center;">Left</h2>\n    </div>\n    <div class="right" style="display: block;float: left;margin-left: 10px;width: 550px;">\n      <h2 style="text-align:center;">Right</h2>\n    </div>\n  </section>\n   \n</div>'})}),define("hbs!tpl/modals/action.sendmessage.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c4">\n	<div class="header">\n		<h3>Send a message:</h3>\n	</div>\n	<form id="form-c4" class="pure-form pure-form-aligned">\n	  <fieldset>\n	    <div class="pure-control-group">\n          <div id="title" style="font-size: 18px; text-align: center; margin-bottom: 12px;"></div>\n          <textarea name="message" id="message" style="width:100%;height:150px;"></textarea>\n      </div>\n    </fieldset>\n    <input name="id" value="message" type="hidden">\n    \n		<div class="clearfix" style="text-align: center;">\n      <button type="submit" class="pure-button pure-button-primary" data="submit-c4">Send Message</button>\n    </div>\n	</form>\n	<div class="loader" style="display:none;text-align:center;font-size:22px;padding:50px;">\n	  Please wait while we confirm receipt.\n	</div>\n</div>'})}),define("hbs!tpl/rows/device.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='\n  <li class="device unselectable" data="',(o=n.clientID)?o=o.call(t,{hash:{},data:i}):(o=t.clientID,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n    <div class="header">\n      <div class="deviceIcon" />\n      <div class="deviceTitle ellipsis">',(o=n.userID)?o=o.call(t,{hash:{},data:i}):(o=t.userID,o=typeof o===u?o.apply(t):o),s+=a(o)+'</div>\n      <div class="deviceCheckBox">\n        <label class="styled-checkbox">\n          <input type="checkbox" id="check-',(o=n.clientID)?o=o.call(t,{hash:{},data:i}):(o=t.clientID,o=typeof o===u?o.apply(t):o),s+=a(o)+'" action="toggleDeviceMark">\n          <span></span>\n        </label>\n      </div>\n    </div>\n    <div class="content">\n      <span style="text-align:center;">Loading status..</span>\n    </div>\n    <div class="footer">\n      <div>\n        <div class="led"></div>\n        <div class="timestamp">Last updated: 3 hours ago</div>\n        <div class="lifecycle-state green">Unknown</div>\n      </div>\n    </div>\n  </li>',s})}),function(e){e.fn.codemirror=function(t){var n=this,r=e.extend({mode:"javascript",lineNumbers:!1,runmode:!1},t);return r.runmode?this.each(function(){var t=e(this),n=[],i=[],s=0,o=function(e,t){e=="\n"?(n.push("<br>"),i.push("<pre>"+ ++s+"</pre>")):t?n.push('<span class="cm-'+CodeMirror.htmlEscape(t)+'">'+CodeMirror.htmlEscape(e)+"</span>"):n.push(CodeMirror.htmlEscape(e))};CodeMirror.runMode(t.val(),r.mode,o),e('<div class="CodeMirror">'+(r.lineNumbers?'<div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text">'+i.join("")+"</div></div>":"<!--gutter-->")+'<div class="CodeMirror-lines">'+(r.lineNumbers?'<div style="position: relative; margin-left: '+s.toString().length+'em;">':"<div>")+'<pre class="cm-s-default">'+n.join("")+"</pre></div></div></div>").insertAfter(t),t.hide()}):this.each(function(){n=CodeMirror.fromTextArea(this,r)}),n}}(jQuery),define("jquery.codemirror",function(){}),function(){if(!L)return!1;var e=L.Marker.prototype.onAdd,t=L.Marker.prototype.onRemove;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1e3,height:-1},bounceOnAddCallback:function(){}}),L.Marker.include({_toPoint:function(e){return this._map.latLngToContainerPoint(e)},_toLatLng:function(e){return this._map.containerPointToLatLng(e)},_motionStep:function(e){var t=this,n=new Date;t._intervalId=setInterval(function(){var r=new Date-n,i=r/e.duration;i>1&&(i=1);var s=e.delta(i);e.step(s),i===1&&(e.end(),clearInterval(t._intervalId))},e.delay||10)},_bounceMotion:function(e,t,n){var r=L.latLng(this._origLatlng),i=this._dropPoint.y,s=this._dropPoint.x,o=this._point.y-i,u=this;this._motionStep({delay:10,duration:t||1e3,delta:e,step:function(e){u._dropPoint.y=i+o*e-(u._map.project(u._map.getCenter()).y-u._origMapCenter.y),u._dropPoint.x=s-(u._map.project(u._map.getCenter()).x-u._origMapCenter.x),u.setLatLng(u._toLatLng(u._dropPoint))},end:function(){u.setLatLng(r),typeof n=="function"&&n()}})},_easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounce:function(e,t){this._origLatlng=this.getLatLng(),this._bounce(e,t)},_bounce:function(e,t){typeof e=="function"&&(t=e,e=null),e=e||{duration:1e3,height:-1},typeof e=="number"&&(e.duration=arguments[0],e.height=arguments[1]),this._origMapCenter=this._map.project(this._map.getCenter()),this._dropPoint=this._getDropPoint(e.height),this._bounceMotion(this._easeOutBounce,e.duration,t)},_getDropPoint:function(e){this._point=this._toPoint(this._origLatlng);var t;return e===undefined||e<0?t=this._toPoint(this._map.getBounds()._northEast).y:t=this._point.y-e,new L.Point(this._point.x,t)},onAdd:function(t){this._map=t,this._origLatlng=this._latlng,this.options.bounceOnAdd===!0&&(typeof this.options.bounceOnAddDuration!="undefined"&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),typeof this.options.bounceOnAddHeight!="undefined"&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),this._dropPoint=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._dropPoint))),e.call(this,t),this.options.bounceOnAdd===!0&&this._bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)},onRemove:function(e){clearInterval(this._intervalId),t.call(this,e)}})}(),define("leaflet.bouncemarker",function(){}),L.AnimatedMarker=L.Marker.extend({options:{distance:200,interval:1e3,autoStart:!0,onEnd:function(){},clickable:!1},initialize:function(e,t){L.DomUtil.TRANSITION?this._latlngs=e:(this._latlngs=this._chunk(e),this.options.distance=10,this.options.interval=30),L.Marker.prototype.initialize.call(this,e[0],t)},_chunk:function(e){var t,n=e.length,r=[];for(t=1;t<n;t++){var i=e[t-1],s=e[t],o=i.distanceTo(s),u=this.options.distance/o,a=u*(s.lat-i.lat),f=u*(s.lng-i.lng);if(o>this.options.distance)while(o>this.options.distance)i=new L.LatLng(i.lat+a,i.lng+f),o=i.distanceTo(s),r.push(i);else r.push(i)}return r},onAdd:function(e){L.Marker.prototype.onAdd.call(this,e),this.options.autoStart&&this.start()},animate:function(){var e=this,t=this._latlngs.length,n=this.options.interval;this._i<t&&(n=this._latlngs[this._i-1].distanceTo(this._latlngs[this._i])/this.options.distance*this.options.interval),L.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[L.DomUtil.TRANSITION]="all "+n+"ms linear"),this._shadow&&(this._shadow.style[L.DomUtil.TRANSITION]="all "+n+"ms linear")),this.setLatLng(this._latlngs[this._i]),this._i++,this._tid=setTimeout(function(){e._i===t?e.options.onEnd.apply(e,Array.prototype.slice.call(arguments)):e.animate()},n)},start:function(){this._i||(this._i=1),this.animate()},stop:function(){this._tid&&clearTimeout(this._tid)}}),L.animatedMarker=function(e,t){return new L.AnimatedMarker(e,t)},define("leaflet.animatedmarker",function(){}),function(e){if(!L)return!1;var t=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:""}),n=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:'<i class="pulse"></i>'}),r=L.divIcon({className:"leaflet-usermarker",iconSize:[18,18],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[11,-3],html:""}),i=L.divIcon({className:"leaflet-usermarker-small",iconSize:[18,18],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[11,-3],html:'<i class="pulse"></i>'}),s={stroke:!0,color:"#03f",weight:3,opacity:.5,fillOpacity:.15,clickable:!1};L.UserMarker=L.Marker.extend({options:{pulsing:!1,smallIcon:!1,accuracy:0},initialize:function(e,o){o=L.Util.setOptions(this,o),this.options.smallIcon?this.options.icon=o.pulsing?i:r:this.options.icon=o.pulsing?n:t,this._accMarker=L.circle(e,this.options.accuracy,s),L.Marker.prototype.initialize.call(this,e,this.options),this.on("move",function(){this._accMarker.setLatLng(this.getLatLng())}).on("remove",function(){this._map.removeLayer(this._accMarker)})},setPulsing:function(e){var s=!1;this._pulsing=e,this.options.smallIcon?s=e?i:r:s=e?n:t,this.setIcon(s)},setAccuracy:function(e){this._accuracy=e,this._accMarker?this._accMarker.setRadius(e):this._accMarker=L.circle(this._latlng,e,s).addTo(this._map)},onAdd:function(e){L.Marker.prototype.onAdd.call(this,e),this._accMarker.addTo(e)}}),L.userMarker=function(e,t){return new L.UserMarker(e,t)}}(window),define("leaflet.usermarker",function(){}),function(){if(!L)return!1;L.Map.mergeOptions({contextmenuItems:[]}),L.Map.ContextMenu=L.Handler.extend({statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(e){L.Handler.prototype.initialize.call(this,e),this._items=[],this._visible=!1;var t=this._container=L.DomUtil.create("div",L.Map.ContextMenu.BASE_CLS,e._container);t.style.zIndex=1e4,t.style.position="absolute",e.options.contextmenuWidth&&(t.style.width=e.options.contextmenuWidth+"px"),this._createItems(),L.DomEvent.on(t,"click",L.DomEvent.stop).on(t,"mousedown",L.DomEvent.stop).on(t,"dblclick",L.DomEvent.stop).on(t,"contextmenu",L.DomEvent.stop)},addHooks:function(){L.DomEvent.on(document,"keydown",this._onKeyDown,this),this._map.on({contextmenu:this._show,mouseout:this._hide,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){L.DomEvent.off(document,"keydown",this._onKeyDown,this),this._map.off({contextmenu:this._show,mouseout:this._hide,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(e,t){e instanceof L.LatLng&&(e=this._map.latLngToContainerPoint(e)),this._showAtPoint(e,t)},hide:function(){this._hide()},addItem:function(e){return this.insertItem(e)},insertItem:function(e,t){t=t!==undefined?t:this._items.length;var n=this._createItem(this._container,e,t);return this._items.push(n),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:n.el,index:t}),n.el},removeItem:function(e){var t=this._container;isNaN(e)||(e=t.children[e]),e&&(this._removeItem(L.Util.stamp(e)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:e}))},removeAllItems:function(){var e;while(this._container.children.length)e=this._container.children[0],this._removeItem(L.Util.stamp(e))},setDisabled:function(e,t){var n=this._container,r=L.Map.ContextMenu.BASE_CLS+"-item";isNaN(e)||(e=n.children[e]),e&&L.DomUtil.hasClass(e,r)&&(t?(L.DomUtil.addClass(e,r+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:e})):(L.DomUtil.removeClass(e,r+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:e})))},isVisible:function(){return this._visible},_createItems:function(){var e=this._map.options.contextmenuItems,t,n,r;for(n=0,r=e.length;n<r;n++)this._items.push(this._createItem(this._container,e[n]))},_createItem:function(e,t,n){if(t.separator||t==="-")return this._createSeparator(e,n);var r=L.Map.ContextMenu.BASE_CLS+"-item",i=t.disabled?r+" "+r+"-disabled":r,s=this._insertElementAt("a",i,e,n),o=this._createEventHandler(s,t.callback,t.context),u="";return t.icon?u='<img class="'+L.Map.ContextMenu.BASE_CLS+'-icon" src="'+t.icon+'"/>':t.iconCls&&(u='<span class="'+L.Map.ContextMenu.BASE_CLS+"-icon "+t.iconCls+'"></span>'),s.innerHTML=u+t.text,s.href="#",L.DomEvent.on(s,"click",L.DomEvent.stopPropagation).on(s,"mousedown",L.DomEvent.stopPropagation).on(s,"dblclick",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.preventDefault).on(s,"click",o),{id:L.Util.stamp(s),el:s,callback:o}},_removeItem:function(e){var t,n,r,i;for(r=0,i=this._items.length;r<i;r++){t=this._items[r];if(t.id===e)return n=t.el,callback=t.callback,callback&&L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,"click",t.callback),this._container.removeChild(n),this._items.splice(r,1),t}return null},_createSeparator:function(e,t){var n=this._insertElementAt("div",L.Map.ContextMenu.BASE_CLS+"-separator",e,t);return{id:L.Util.stamp(n),el:n}},_createEventHandler:function(e,t,n){var r=this,i=this._map,s=L.Map.ContextMenu.BASE_CLS+"-item-disabled";return function(o){if(L.DomUtil.hasClass(e,s))return;r._hide(),t.call(n||i,r._showLocation),r._map.fire("contextmenu:select",{contextmenu:r,el:e})}},_insertElementAt:function(e,t,n,r){var i,s=document.createElement(e);return s.className=t,r!==undefined&&(i=n.children[r]),i?n.insertBefore(s,i):n.appendChild(s),s},_show:function(e){this._showAtPoint(e.containerPoint)},_showAtPoint:function(e,t){if(!this._visible&&this._items.length){var n=this._map,r=n.containerPointToLayerPoint(e),i=n.layerPointToLatLng(r),s={contextmenu:this};t&&(s=L.extend(t,s)),this._showLocation={latlng:i,layerPoint:r,containerPoint:e},this._setPosition(e),this._container.style.display="block",this._visible=!0,this._map.fire("contextmenu.show",s)}},_hide:function(){this._visible&&(this._container.style.display="none",this._visible=!1,this._map.fire("contextmenu.hide",{contextmenu:this}))},_setPosition:function(e){var t=this._map.getSize(),n=this._container,r=this._getElementSize(n);n._leaflet_pos=e,e.x+r.x>t.x?(n.style.left="auto",n.style.right=t.x-e.x+"px"):(n.style.left=e.x+"px",n.style.right="auto"),e.y+r.y>t.y?(n.style.top="auto",n.style.bottom=t.y-e.y+"px"):(n.style.top=e.y+"px",n.style.bottom="auto")},_getElementSize:function(e){var t=this._size;if(!t||this._sizeChanged)t={},e.style.left="-999999px",e.style.right="auto",e.style.display="block",t.x=e.offsetWidth,t.y=e.offsetHeight,e.style.left="auto",e.style.display="none",this._sizeChanged=!1;return t},_onKeyDown:function(e){var t=e.keyCode;t===27&&this._visible&&this._hide()}}),L.Map.addInitHook("addHandler","contextmenu",L.Map.ContextMenu),L.Mixin.ContextMenu={_initContextMenu:function(){this._items=[],this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(e){var t,n,r,i;if(this._map.contextmenu){n=this._map.mouseEventToContainerPoint(e.originalEvent);for(r=0,i=this.options.contextmenuItems.length;r<i;r++)t=this.options.contextmenuItems[r],this._items.push(this._map.contextmenu.insertItem(t,t.index));this._map.once("contextmenu.hide",this._hideContextMenu,this),this._map.contextmenu.showAt(n,{relatedTarget:this})}},_hideContextMenu:function(){var e,t;for(e=0,t=this._items.length;e<t;e++)this._map.contextmenu.removeItem(this._items[e]);this._items.length=0}},L.Marker.mergeOptions({contextmenu:!1,contextmenuItems:[]}),L.Marker.addInitHook(function(){this.options.contextmenu&&this._initContextMenu()}),L.Marker.include(L.Mixin.ContextMenu)}(),define("leaflet.contextmenu",function(){}),function(e){if(!L)return!1;e.lvector={VERSION:"1.5.1",noConflict:function(){return e.lvector=this._originallvector,this},_originallvector:e.lvector}}(this),lvector.Layer=L.Class.extend({options:{fields:"",scaleRange:null,map:null,uniqueField:null,visibleAtScale:!0,dynamic:!1,autoUpdate:!1,autoUpdateInterval:null,popupTemplate:null,popupOptions:{},singlePopup:!1,symbology:null,showAll:!1},initialize:function(e){L.Util.setOptions(this,e)},setMap:function(e){if(!e||!this.options.map)if(e){this.options.map=e;if(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2){var e=this.options.map.getZoom(),t=this.options.scaleRange;this.options.visibleAtScale=e>=t[0]&&e<=t[1]}this._show()}else this.options.map&&(this._hide(),this.options.map=e)},getMap:function(){return this.options.map},setOptions:function(){},_show:function(){this._addIdleListener(),this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&this._addZoomChangeListener();if(this.options.visibleAtScale){if(this.options.autoUpdate&&this.options.autoUpdateInterval){var e=this;this._autoUpdateInterval=setInterval(function(){e._getFeatures()},this.options.autoUpdateInterval)}this.options.map.fire("moveend").fire("zoomend")}},_hide:function(){this._idleListener&&this.options.map.off("moveend",this._idleListener),this._zoomChangeListener&&this.options.map.off("zoomend",this._zoomChangeListener),this._autoUpdateInterval&&clearInterval(this._autoUpdateInterval),this._clearFeatures(),this._lastQueriedBounds=null,this._gotAll&&(this._gotAll=!1)},_hideVectors:function(){for(var e=0;e<this._vectors.length;e++){this._vectors[e].vector&&((this.options.map.removeLayer(this._vectors[e].vector),this._vectors[e].popup)?this.options.map.removeLayer(this._vectors[e].popup):this.popup&&this.popup.associatedFeature&&this.popup.associatedFeature==this._vectors[e]&&(this.options.map.removeLayer(this.popup),this.popup=null));if(this._vectors[e].vectors&&this._vectors[e].vectors.length)for(var t=0;t<this._vectors[e].vectors.length;t++)(this.options.map.removeLayer(this._vectors[e].vectors[t]),this._vectors[e].vectors[t].popup)?this.options.map.removeLayer(this._vectors[e].vectors[t].popup):this.popup&&this.popup.associatedFeature&&this.popup.associatedFeature==this._vectors[e]&&(this.options.map.removeLayer(this.popup),this.popup=null)}},_showVectors:function(){for(var e=0;e<this._vectors.length;e++)if(this._vectors[e].vector&&this.options.map.addLayer(this._vectors[e].vector),this._vectors[e].vectors&&this._vectors[e].vectors.length)for(var t=0;t<this._vectors[e].vectors.length;t++)this.options.map.addLayer(this._vectors[e].vectors[t])},_clearFeatures:function(){this._hideVectors(),this._vectors=[]},_addZoomChangeListener:function(){this._zoomChangeListener=this._zoomChangeListenerTemplate(),this.options.map.on("zoomend",this._zoomChangeListener,this)},_zoomChangeListenerTemplate:function(){var e=this;return function(){e._checkLayerVisibility()}},_idleListenerTemplate:function(){var e=this;return function(){e.options.visibleAtScale&&(e.options.showAll?e._gotAll||(e._getFeatures(),e._gotAll=!0):e._getFeatures())}},_addIdleListener:function(){this._idleListener=this._idleListenerTemplate(),this.options.map.on("moveend",this._idleListener,this)},_checkLayerVisibility:function(){var e=this.options.visibleAtScale,t=this.options.map.getZoom(),n=this.options.scaleRange;this.options.visibleAtScale=t>=n[0]&&t<=n[1],e!==this.options.visibleAtScale&&this[this.options.visibleAtScale?"_showVectors":"_hideVectors"]();if(e&&!this.options.visibleAtScale&&this._autoUpdateInterval)clearInterval(this._autoUpdateInterval);else if(!e&&this.options.autoUpdate&&this.options.autoUpdateInterval){var r=this;this._autoUpdateInterval=setInterval(function(){r._getFeatures()},this.options.autoUpdateInterval)}},_setPopupContent:function(e){var t=e.popupContent,n=e.attributes||e.properties,r;if(typeof this.options.popupTemplate=="string"){r=this.options.popupTemplate;for(var i in n)r=r.replace(RegExp("{"+i+"}","g"),n[i])}else{if(typeof this.options.popupTemplate!="function")return;r=this.options.popupTemplate(n)}e.popupContent=r,e.popup?e.popupContent!==t&&e.popup.setContent(e.popupContent):this.popup&&this.popup.associatedFeature==e&&e.popupContent!==t&&this.popup.setContent(e.popupContent)},_showPopup:function(e,t){var n=t.latlng;n||L.Util.extend(this.options.popupOptions,{offset:t.target.options.icon.options.popupAnchor});var r;this.options.singlePopup?(this.popup&&(this.options.map.removeLayer(this.popup),this.popup=null),this.popup=new L.Popup(this.options.popupOptions,e.vector),this.popup.associatedFeature=e,r=this):(e.popup=new L.Popup(this.options.popupOptions,e.vector),r=e),r.popup.setLatLng(n?t.latlng:t.target.getLatLng()),r.popup.setContent(e.popupContent),this.options.map.addLayer(r.popup)},_fireClickEvent:function(e,t){this.options.clickEvent(e,t)},_getFeatureVectorOptions:function(e){var t={},e=e.attributes||e.properties;if(this.options.symbology)switch(this.options.symbology.type){case"single":for(var n in this.options.symbology.vectorOptions)if(t[n]=this.options.symbology.vectorOptions[n],t.title)for(var r in e){var i=RegExp("{"+r+"}","g");t.title=t.title.replace(i,e[r])}break;case"unique":for(var s=this.options.symbology.property,o=0,u=this.options.symbology.values.length;o<u;o++)if(e[s]==this.options.symbology.values[o].value)for(n in this.options.symbology.values[o].vectorOptions)if(t[n]=this.options.symbology.values[o].vectorOptions[n],t.title)for(r in e)i=RegExp("{"+r+"}","g"),t.title=t.title.replace(i,e[r]);break;case"range":s=this.options.symbology.property,o=0;for(u=this.options.symbology.ranges.length;o<u;o++)if(e[s]>=this.options.symbology.ranges[o].range[0]&&e[s]<=this.options.symbology.ranges[o].range[1])for(n in this.options.symbology.ranges[o].vectorOptions)if(t[n]=this.options.symbology.ranges[o].vectorOptions[n],t.title)for(r in e)i=RegExp("{"+r+"}","g"),t.title=t.title.replace(i,e[r])}return t},_getPropertiesChanged:function(e,t){var n=!1,r;for(r in e)e[r]!=t[r]&&(n=!0);return n},_getPropertyChanged:function(e,t,n){return e[n]!=t[n]},_getGeometryChanged:function(e,t){var n=!1;return e.coordinates&&e.coordinates instanceof Array?e.coordinates[0]==t.coordinates[0]&&e.coordinates[1]==t.coordinates[1]||(n=!0):e.x==t.x&&e.y==t.y||(n=!0),n},_makeJsonpRequest:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)},_processFeatures:function(e){if(this.options.map){var t=this.options.map.getBounds();if(!this._lastQueriedBounds||!this._lastQueriedBounds.equals(t)||this.options.autoUpdate){this._lastQueriedBounds=t,featuresHaveIds=e.features&&e.features.length&&e.features[0].id?!0:!1,!this.options.uniqueField&&!featuresHaveIds&&this._clearFeatures();if(this instanceof lvector.PRWSF){e.features=e.rows,delete e.rows;for(var t=0,n=e.features.length;t<n;t++){e.features[t].type="Feature",e.features[t].properties={};for(var r in e.features[t].row)r=="geojson"?e.features[t].geometry=e.features[t].row.geojson:e.features[t].properties[r]=e.features[t].row[r];delete e.features[t].row}}if(this instanceof lvector.GISCloud){e.features=e.data,delete e.data,t=0;for(n=e.features.length;t<n;t++)e.features[t].type="Feature",e.features[t].properties=e.features[t].data,e.features[t].properties.id=e.features[t].__id,delete e.features[t].data,e.features[t].geometry=e.features[t].__geometry,delete e.features[t].__geometry}if(e&&e.features&&e.features.length)for(t=0;t<e.features.length;t++){this instanceof lvector.EsriJSONLayer&&(e.features[t].properties=e.features[t].attributes,delete e.features[t].attributes),r=!1,n=e.features[t].id?!0:!1;if(this.options.uniqueField||n)for(var i=0;i<this._vectors.length;i++){var s=this._vectors[i].id?!0:!1;if(n&&s&&e.features[t].id==this._vectors[i].id||this.options.uniqueField&&e.features[t].properties[this.options.uniqueField]==this._vectors[i].properties[this.options.uniqueField])if(r=!0,this.options.dynamic){this._getGeometryChanged(this._vectors[i].geometry,e.features[t].geometry)&&!isNaN(e.features[t].geometry.coordinates[0])&&!isNaN(e.features[t].geometry.coordinates[1])&&(this._vectors[i].geometry=e.features[t].geometry,this._vectors[i].vector.setLatLng(new L.LatLng(this._vectors[i].geometry.coordinates[1],this._vectors[i].geometry.coordinates[0])));if(this._getPropertiesChanged(this._vectors[i].properties,e.features[t].properties)&&(s=this._getPropertyChanged(this._vectors[i].properties,e.features[t].properties,this.options.symbology.property),this._vectors[i].properties=e.features[t].properties,this.options.popupTemplate&&this._setPopupContent(this._vectors[i]),this.options.symbology&&this.options.symbology.type!="single"&&s))if(this._vectors[i].vectors)for(var s=0,o=this._vectors[i].vectors.length;s<o;s++)this._vectors[i].vectors[s].setStyle?this._vectors[i].vectors[s].setStyle(this._getFeatureVectorOptions(this._vectors[i])):this._vectors[i].vectors[s].setIcon&&this._vectors[i].vectors[s].setIcon(this._getFeatureVectorOptions(this._vectors[i]).icon);else this._vectors[i].vector&&(this._vectors[i].vector.setStyle?this._vectors[i].vector.setStyle(this._getFeatureVectorOptions(this._vectors[i])):this._vectors[i].vector.setIcon&&this._vectors[i].vector.setIcon(this._getFeatureVectorOptions(this._vectors[i]).icon))}}if(!r){this instanceof lvector.GeoJSONLayer?(r=this._geoJsonGeometryToLeaflet(e.features[t].geometry,this._getFeatureVectorOptions(e.features[t])),e.features[t][r instanceof Array?"vectors":"vector"]=r):this instanceof lvector.EsriJSONLayer&&(r=this._esriJsonGeometryToLeaflet(e.features[t].geometry,this._getFeatureVectorOptions(e.features[t])),e.features[t][r instanceof Array?"vectors":"vector"]=r);if(e.features[t].vector)this.options.map.addLayer(e.features[t].vector);else if(e.features[t].vectors&&e.features[t].vectors.length)for(s=0;s<e.features[t].vectors.length;s++)this.options.map.addLayer(e.features[t].vectors[s]);this._vectors.push(e.features[t]);if(this.options.popupTemplate){var u=this;r=e.features[t],this._setPopupContent(r),function(e){if(e.vector)e.vector.on("click",function(t){u._showPopup(e,t)});else if(e.vectors)for(var t=0,n=e.vectors.length;t<n;t++)e.vectors[t].on("click",function(t){u._showPopup(e,t)})}(r)}this.options.clickEvent&&(u=this,r=e.features[t],function(e){if(e.vector)e.vector.on("click",function(t){u._fireClickEvent(e,t)});else if(e.vectors)for(var t=0,n=e.vectors.length;t<n;t++)e.vectors[t].on("click",function(t){u._fireClickEvent(e,t)})}(r))}}}}}}),lvector.GeoJSONLayer=lvector.Layer.extend({_geoJsonGeometryToLeaflet:function(e,t){var n,r;switch(e.type){case"Point":n=t.circleMarker?new L.CircleMarker(new L.LatLng(e.coordinates[1],e.coordinates[0]),t):new L.Marker(new L.LatLng(e.coordinates[1],e.coordinates[0]),t);break;case"MultiPoint":r=[];for(var i=0,s=e.coordinates.length;i<s;i++)r.push(new L.Marker(new L.LatLng(e.coordinates[i][1],e.coordinates[i][0]),t));break;case"LineString":for(var o=[],i=0,s=e.coordinates.length;i<s;i++)o.push(new L.LatLng(e.coordinates[i][1],e.coordinates[i][0]));n=new L.Polyline(o,t);break;case"MultiLineString":r=[],i=0;for(s=e.coordinates.length;i<s;i++){for(var o=[],u=0,a=e.coordinates[i].length;u<a;u++)o.push(new L.LatLng(e.coordinates[i][u][1],e.coordinates[i][u][0]));r.push(new L.Polyline(o,t))}break;case"Polygon":for(var f=[],i=0,s=e.coordinates.length;i<s;i++){o=[],u=0;for(a=e.coordinates[i].length;u<a;u++)o.push(new L.LatLng(e.coordinates[i][u][1],e.coordinates[i][u][0]));f.push(o)}n=new L.Polygon(f,t);break;case"MultiPolygon":r=[],i=0;for(s=e.coordinates.length;i<s;i++){f=[],u=0;for(a=e.coordinates[i].length;u<a;u++){for(var o=[],l=0,c=e.coordinates[i][u].length;l<c;l++)o.push(new L.LatLng(e.coordinates[i][u][l][1],e.coordinates[i][u][l][0]));f.push(o)}r.push(new L.Polygon(f,t))}break;case"GeometryCollection":r=[],i=0;for(s=e.geometries.length;i<s;i++)r.push(this._geoJsonGeometryToLeaflet(e.geometries[i],t))}return n||r}}),lvector.EsriJSONLayer=lvector.Layer.extend({_esriJsonGeometryToLeaflet:function(e,t){var n,r;if(e.x&&e.y)n=new L.Marker(new L.LatLng(e.y,e.x),t);else if(e.points){r=[];for(var i=0,s=e.points.length;i<s;i++)r.push(new L.Marker(new L.LatLng(e.points[i].y,e.points[i].x),t))}else if(e.paths)if(e.paths.length>1){r=[],i=0;for(s=e.paths.length;i<s;i++){for(var o=[],u=0,a=e.paths[i].length;u<a;u++)o.push(new L.LatLng(e.paths[i][u][1],e.paths[i][u][0]));r.push(new L.Polyline(o,t))}}else{o=[],i=0;for(s=e.paths[0].length;i<s;i++)o.push(new L.LatLng(e.paths[0][i][1],e.paths[0][i][0]));n=new L.Polyline(o,t)}else if(e.rings)if(e.rings.length>1){r=[],i=0;for(s=e.rings.length;i<s;i++){for(var f=[],o=[],u=0,a=e.rings[i].length;u<a;u++)o.push(new L.LatLng(e.rings[i][u][1],e.rings[i][u][0]));f.push(o),r.push(new L.Polygon(f,t))}}else{f=[],o=[],i=0;for(s=e.rings[0].length;i<s;i++)o.push(new L.LatLng(e.rings[0][i][1],e.rings[0][i][0]));f.push(o),n=new L.Polygon(f,t)}return n||r}}),lvector.AGS=lvector.EsriJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');this._globalPointer="AGS_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,e.url.substr(e.url.length-1,1)!=="/"&&(e.url+="/"),this._originalOptions=L.Util.extend({},e);if(e.esriOptions){if(typeof e.esriOptions!="object"){this._getEsriOptions();return}L.Util.extend(e,this._convertEsriOptions(e.esriOptions))}lvector.Layer.prototype.initialize.call(this,e),this.options.where&&(this.options.where=encodeURIComponent(this.options.where)),this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{where:"1=1",url:null,useEsriOptions:!1},_requiredParams:["url"],_convertEsriOptions:function(e){var t={};if(e.minScale!=void 0&&e.maxScale!=void 0){var n=this._scaleToLevel(e.minScale),r=this._scaleToLevel(e.maxScale);r==0&&(r=20),t.scaleRange=[n,r]}return e.drawingInfo&&e.drawingInfo.renderer&&(t.symbology=this._renderOptionsToSymbology(e.drawingInfo.renderer)),t},_getEsriOptions:function(){this._makeJsonpRequest(this._originalOptions.url+"?f=json&callback="+this._globalPointer+"._processEsriOptions")},_processEsriOptions:function(e){var t=this._originalOptions;t.esriOptions=e,this.initialize(t)},_scaleToLevel:function(e){var t=[591657527.591555,295828763.795777,147914381.897889,73957190.948944,36978595.474472,18489297.737236,9244648.868618,4622324.434309,2311162.217155,1155581.108577,577790.554289,288895.277144,144447.638572,72223.819286,36111.909643,18055.954822,9027.977411,4513.988705,2256.994353,1128.497176,564.248588,282.124294];if(e==0)return 0;for(var n=0,r=0;r<t.length-1;r++){var i=t[r+1];if(e<=t[r]&&e>i){n=r;break}}return n},_renderOptionsToSymbology:function(e){symbology={};switch(e.type){case"simple":symbology.type="single",symbology.vectorOptions=this._parseSymbology(e.symbol);break;case"uniqueValue":symbology.type="unique",symbology.property=e.field1;for(var t=[],n=0;n<e.uniqueValueInfos.length;n++){var r=e.uniqueValueInfos[n],i={};i.value=r.value,i.vectorOptions=this._parseSymbology(r.symbol),i.label=r.label,t.push(i)}symbology.values=t;break;case"classBreaks":symbology.type="range",symbology.property=rend.field,t=[],r=e.minValue;for(n=0;n<e.classBreakInfos.length;n++){var i=e.classBreakInfos[n],s={};s.range=[r,i.classMaxValue],r=i.classMaxValue,s.vectorOptions=this._parseSymbology(i.symbol),s.label=i.label,t.push(s)}symbology.ranges=t}return symbology},_parseSymbology:function(e){var t={};switch(e.type){case"esriSMS":case"esriPMS":e=L.icon({iconUrl:"data:"+e.contentType+";base64,"+e.imageData,shadowUrl:null,iconSize:new L.Point(e.width,e.height),iconAnchor:new L.Point(e.width/2+e.xoffset,e.height/2+e.yoffset),popupAnchor:new L.Point(0,-(e.height/2))}),t.icon=e;break;case"esriSLS":t.weight=e.width,t.color=this._parseColor(e.color),t.opacity=this._parseAlpha(e.color[3]);break;case"esriSFS":e.outline?(t.weight=e.outline.width,t.color=this._parseColor(e.outline.color),t.opacity=this._parseAlpha(e.outline.color[3])):(t.weight=0,t.color="#000000",t.opacity=0),e.style!="esriSFSNull"?(t.fillColor=this._parseColor(e.color),t.fillOpacity=this._parseAlpha(e.color[3])):(t.fillColor="#000000",t.fillOpacity=0)}return t},_parseColor:function(e){return red=this._normalize(e[0]),green=this._normalize(e[1]),blue=this._normalize(e[2]),"#"+this._pad(red.toString(16))+this._pad(green.toString(16))+this._pad(blue.toString(16))},_normalize:function(e){return e<1&&e>0?Math.floor(e*255):e},_pad:function(e){return e.length>1?e.toUpperCase():"0"+e.toUpperCase()},_parseAlpha:function(e){return e/255},_getFeatures:function(){var e=this.options.url+"query?returnGeometry=true&outSR=4326&f=json&outFields="+this.options.fields+"&where="+this.options.where+"&callback="+this._globalPointer+"._processFeatures";this.options.showAll||(e+="&inSR=4326&spatialRel=esriSpatialRelIntersects&geometryType=esriGeometryEnvelope&geometry="+this.options.map.getBounds().toBBoxString()),this._makeJsonpRequest(e)}}),lvector.A2E=lvector.AGS.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');this._globalPointer="A2E_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,e.url.substr(e.url.length-1,1)!=="/"&&(e.url+="/"),this._originalOptions=L.Util.extend({},e);if(e.esriOptions){if(typeof e.esriOptions!="object"){this._getEsriOptions();return}L.Util.extend(e,this._convertEsriOptions(e.esriOptions))}lvector.Layer.prototype.initialize.call(this,e),this.options.where&&(this.options.where=encodeURIComponent(this.options.where)),this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show());if(this.options.autoUpdate&&this.options.esriOptions.editFeedInfo){this._makeJsonpRequest("http://cdn.pubnub.com/pubnub-3.1.min.js");var r=this;this._pubNubScriptLoaderInterval=setInterval(function(){window.PUBNUB&&r._pubNubScriptLoaded()},200)}},_pubNubScriptLoaded:function(){clearInterval(this._pubNubScriptLoaderInterval),this.pubNub=PUBNUB.init({subscribe_key:this.options.esriOptions.editFeedInfo.pubnubSubscribeKey,ssl:!1,origin:"pubsub.pubnub.com"});var e=this;this.pubNub.subscribe({channel:this.options.esriOptions.editFeedInfo.pubnubChannel,callback:function(){e._getFeatures()},error:function(){}})}}),lvector.GeoIQ=lvector.GeoJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');lvector.Layer.prototype.initialize.call(this,e),this._globalPointer="GeoIQ_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{dataset:null},_requiredParams:["dataset"],_getFeatures:function(){var e="http://geocommons.com/datasets/"+this.options.dataset+"/features.json?geojson=1&callback="+this._globalPointer+"._processFeatures&limit=999";this.options.showAll||(e+="&bbox="+this.options.map.getBounds().toBBoxString()+"&intersect=full"),this._makeJsonpRequest(e)}}),lvector.CartoDB=lvector.GeoJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');lvector.Layer.prototype.initialize.call(this,e),this._globalPointer="CartoDB_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{version:1,user:null,table:null,fields:"*",where:null,limit:null,uniqueField:"cartodb_id"},_requiredParams:["user","table"],_getFeatures:function(){var e=this.options.where||"";if(!this.options.showAll)for(var t=this.options.map.getBounds(),n=t.getSouthWest(),t=t.getNorthEast(),r=this.options.table.split(",").length,i=0;i<r;i++)e+=(e.length?" AND ":"")+(r>1?this.options.table.split(",")[i].split(".")[0]+".the_geom":"the_geom")+" && st_setsrid(st_makebox2d(st_point("+n.lng+","+n.lat+"),st_point("+t.lng+","+t.lat+")),4326)";this.options.limit&&(e+=(e.length?" ":"")+"limit "+this.options.limit),e=e.length?" "+e:"",this._makeJsonpRequest("http://"+this.options.user+".cartodb.com/api/v"+this.options.version+"/sql?q="+encodeURIComponent("SELECT "+this.options.fields+" FROM "+this.options.table+(e.length?" WHERE "+e:""))+"&format=geojson&callback="+this._globalPointer+"._processFeatures")}}),lvector.PRWSF=lvector.GeoJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');e.url.substr(e.url.length-1,1)!=="/"&&(e.url+="/"),lvector.Layer.prototype.initialize.call(this,e),this._globalPointer="PRWSF_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{geotable:null,srid:null,geomFieldName:"the_geom",geomPrecision:"",fields:"",where:null,limit:null,uniqueField:null},_requiredParams:["url","geotable"],_getFeatures:function(){var e=this.options.where||"";if(!this.options.showAll){var t=this.options.map.getBounds(),n=t.getSouthWest(),t=t.getNorthEast();e+=e.length?" AND ":"",e+=this.options.srid?this.options.geomFieldName+" && transform(st_setsrid(st_makebox2d(st_point("+n.lng+","+n.lat+"),st_point("+t.lng+","+t.lat+")),4326),"+this.options.srid+")":"transform("+this.options.geomFieldName+",4326) && st_setsrid(st_makebox2d(st_point("+n.lng+","+n.lat+"),st_point("+t.lng+","+t.lat+")),4326)"}this.options.limit&&(e+=(e.length?" ":"")+"limit "+this.options.limit),n=(this.options.fields.length?this.options.fields+",":"")+"st_asgeojson(transform("+this.options.geomFieldName+",4326)"+(this.options.geomPrecision?","+this.options.geomPrecision:"")+") as geojson",this._makeJsonpRequest(this.options.url+"v1/ws_geo_attributequery.php?parameters="+encodeURIComponent(e)+"&geotable="+this.options.geotable+"&fields="+encodeURIComponent(n)+"&format=json&callback="+this._globalPointer+"._processFeatures")}}),lvector.GISCloud=lvector.GeoJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');lvector.Layer.prototype.initialize.call(this,e),this._globalPointer="GISCloud_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{mapID:null,layerID:null,uniqueField:"id"},_requiredParams:["mapID","layerID"],_getFeatures:function(){var e="http://api.giscloud.com/1/maps/"+this.options.mapID+"/layers/"+this.options.layerID+"/features.json?geometry=geojson&epsg=4326&callback="+this._globalPointer+"._processFeatures";this.options.showAll||(e+="&bounds="+this.options.map.getBounds().toBBoxString()),this.options.where&&(e+="&where="+encodeURIComponent(this.options.where)),this._makeJsonpRequest(e)}}),lvector.GitSpatial=lvector.GeoJSONLayer.extend({initialize:function(e){for(var t=0,n=this._requiredParams.length;t<n;t++)if(!e[this._requiredParams[t]])throw Error('No "'+this._requiredParams[t]+'" parameter found.');lvector.Layer.prototype.initialize.call(this,e),this._globalPointer="GitSpatial_"+Math.floor(Math.random()*1e5),window[this._globalPointer]=this,this._vectors=[],this.options.map&&(this.options.scaleRange&&this.options.scaleRange instanceof Array&&this.options.scaleRange.length===2&&(e=this.options.map.getZoom(),t=this.options.scaleRange,this.options.visibleAtScale=e>=t[0]&&e<=t[1]),this._show())},options:{},_requiredParams:["user","repo","featureSet"],_getFeatures:function(){var e="http://gitspatial.com/api/v1/"+this.options.user+"/"+this.options.repo+"/"+this.options.featureSet+"?callback="+this._globalPointer+"._processFeatures";this.options.showAll||(e+="&bbox="+this.options.map.getBounds().toBBoxString()),this._makeJsonpRequest(e)}}),define("lvector",function(){});var jsonlint=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[a-1];case 13:this.$={};break;case 14:this.$=o[a-1];break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[];break;case 19:this.$=o[a-1];break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,n){throw new Error(t)},parse:function(t){function d(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function v(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(m==null&&(m=v()),b=o[y]&&o[y][m]);if(typeof b=="undefined"||!b.length||!b[0]){if(!l){C=[];for(x in o[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");var k="";this.lexer.showPosition?k="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+this.terminals_[m]+"'":k="Parse error on line "+(a+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:C})}if(l==3){if(m==h)throw new Error(k||"Parsing halted.");f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,m=v()}for(;;){if(c.toString()in o[y])break;if(y==0)throw new Error(k||"Parsing halted.");d(1),y=r[r.length-1]}g=m,m=c,y=r[r.length-1],b=o[y]&&o[y][c],l=3}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(b[1]),m=null,g?(m=g,g=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:T=this.productions_[b[1]][1],S.$=i[i.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},E=this.performAction.call(S,u,f,a,this.yy,b[1],i,s);if(typeof E!="undefined")return E;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),s=s.slice(0,-1*T)),r.push(this.productions_[b[1]][0]),i.push(S.$),s.push(S._$),N=o[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/\n.*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:break;case 1:return 6;case 2:return n.yytext=n.yytext.substr(1,n.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},e.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],e.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},e}();return e.lexer=t,e}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=jsonlint,exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if(typeof process!="undefined")var n=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else var r=require("file").path(require("file").cwd()),n=r.join(t[1]).read({charset:"utf-8"});return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),define("jsonlint",function(e){return function(){var t,n;return t||e.jsonlint}}(this)),window.CodeMirror=function(){function x(e,n){if(!(this instanceof x))return new x(e,n);this.options=n=n||{};for(var r in er)!n.hasOwnProperty(r)&&er.hasOwnProperty(r)&&(n[r]=er[r]);H(n);var i=typeof n.value=="string"?0:n.value.first,s=this.display=T(e,i);s.wrapper.CodeMirror=this,_(this),n.autofocus&&!v&&It(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Qi},O(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var o=n.value;typeof o=="string"&&(o=new ui(n.value,n.mode)),Mt(this,ci)(this,o),t&&setTimeout(os(Ft,this,!0),20),Rt(this);var u;try{u=document.activeElement==s.input}catch(a){}u||n.autofocus&&!v?setTimeout(os(pn,this),20):dn(this),Mt(this,function(){for(var e in Zn)Zn.propertyIsEnumerable(e)&&Zn[e](this,n[e],nr);for(var t=0;t<or.length;++t)or[t](this)})()}function T(e,t){var r={},i=r.input=cs("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return s?i.style.width="1000px":i.setAttribute("wrap","off"),d&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),r.inputDiv=cs("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=cs("div",[cs("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=cs("div",[cs("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=cs("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=cs("div",null,"CodeMirror-gutter-filler"),r.lineDiv=cs("div",null,"CodeMirror-code"),r.selectionDiv=cs("div",null,null,"position: relative; z-index: 1"),r.cursor=cs("div","Â ","CodeMirror-cursor"),r.otherCursor=cs("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=cs("div",null,"CodeMirror-measure"),r.lineSpace=cs("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=cs("div",[cs("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=cs("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=cs("div",null,null,"position: absolute; height: "+Ji+"px; width: 1px;"),r.gutters=cs("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=cs("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=cs("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),n&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),d&&(i.style.width="0px"),s||(r.scroller.draggable=!0),l?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):n&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new Qi,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function N(e){e.doc.mode=x.getMode(e.options,e.doc.modeOption),e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,tt(e,100),e.state.modeGen++,e.curOp&&Pt(e)}function C(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),P(e)),L(e),Pt(e),vt(e),setTimeout(function(){B(e)},100)}function k(e){var t=Ct(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/kt(e.display)-3);return function(i){return Dr(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function L(e){var t=e.doc,n=k(e);t.iter(function(e){var t=n(e);t!=e.height&&vi(e,t)})}function A(e){var t=cr[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),e.state.disableInput=t.disableInput}function O(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),vt(e)}function M(e){_(e),Pt(e),setTimeout(function(){F(e)},20)}function _(e){var t=e.display.gutters,n=e.options.gutters;hs(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(cs("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function D(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=Or(i)){var s=r.find();i=hi(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Mr(i)){var s=r.find();n-=i.text.length-s.from.ch,i=hi(e,s.to.line),n+=i.text.length-s.to.ch}return n}function P(e){var t=e.display,n=e.doc;t.maxLine=hi(n,n.first),t.maxLineLength=D(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=D(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function H(e){var t=ns(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function B(e){var t=e.display,n=e.doc.height,r=n+ot(t);t.sizer.style.minHeight=t.heightForcer.style.top=r+"px",t.gutters.style.height=Math.max(r,t.scroller.clientHeight-Ji)+"px";var i=Math.max(r,t.scroller.scrollHeight),s=t.scroller.scrollWidth>t.scroller.clientWidth+1,o=i>t.scroller.clientHeight+1;o?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=s?bs(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=i-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):(t.scrollbarV.style.display="",t.scrollbarV.firstChild.style.height="0"),s?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=o?bs(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):(t.scrollbarH.style.display="",t.scrollbarH.firstChild.style.width="0"),s&&o?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=bs(t.measure)+"px"):t.scrollbarFiller.style.display="",s&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=bs(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",c&&bs(t.measure)===0&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=h?"18px":"12px",t.scrollbarV.style.pointerEvents=t.scrollbarH.style.pointerEvents="none")}function j(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-st(e));var s=Math.ceil(r+i);return{from:gi(t,r),to:gi(t,s)}}function F(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=R(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function I(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=q(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(cs("div",[cs("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function q(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function R(e){return vs(e.scroller).left-vs(e.sizer).left}function U(e,t,n,r){var i=e.display.showingFrom,s=e.display.showingTo,o,u=j(e.display,e.doc,n);for(var a=!0;;a=!1){var f=e.display.scroller.clientWidth;if(!z(e,t,u,r))break;o=!0,t=[],G(e),B(e);if(a&&e.options.lineWrapping&&f!=e.display.scroller.clientWidth){r=!0;continue}r=!1,n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,typeof n=="number"?n:n.top)),u=j(e.display,e.doc,n);if(u.from>=e.display.showingFrom&&u.to<=e.display.showingTo)break}return o&&(zi(e,"update",e),(e.display.showingFrom!=i||e.display.showingTo!=s)&&zi(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),o}function z(e,t,n,r){var i=e.display,s=e.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=s.first,i.viewOffset=0;return}if(!r&&t.length==0&&n.from>i.showingFrom&&n.to<i.showingTo)return;I(e)&&(t=[{from:s.first,to:s.first+s.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?o:"0";var u=Infinity;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)t[a].diff&&t[a].from<u&&(u=t[a].from);var f=s.first+s.size,l=Math.max(n.from-e.options.viewportMargin,s.first),c=Math.min(f,n.to+e.options.viewportMargin);i.showingFrom<l&&l-i.showingFrom<20&&(l=Math.max(s.first,i.showingFrom)),i.showingTo>c&&i.showingTo-c<20&&(c=Math.min(f,i.showingTo));if(S){l=mi(_r(s,hi(s,l)));while(c<f&&Dr(s,hi(s,c)))++c}var h=[{from:Math.max(i.showingFrom,s.first),to:Math.min(i.showingTo,f)}];h[0].from>=h[0].to?h=[]:h=V(h,t);if(S)for(var a=0;a<h.length;++a){var p=h[a],d;while(d=Mr(hi(s,p.to-1))){var v=d.find().from.line;if(!(v>p.from)){h.splice(a--,1);break}p.to=v}}var m=0;for(var a=0;a<h.length;++a){var p=h[a];p.from<l&&(p.from=l),p.to>c&&(p.to=c),p.from>=p.to?h.splice(a--,1):m+=p.to-p.from}if(!r&&m==c-l&&l==i.showingFrom&&c==i.showingTo){X(e);return}h.sort(function(e,t){return e.from-t.from});try{var g=document.activeElement}catch(y){}m<(c-l)*.7&&(i.lineDiv.style.display="none"),J(e,l,c,h,u),i.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();var b=l!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;return b&&(i.lastSizeC=i.wrapper.clientHeight,tt(e,400)),i.showingFrom=l,i.showingTo=c,W(e),X(e),!0}function W(e){var t=e.display,r=t.lineDiv.offsetTop;for(var i=t.lineDiv.firstChild,s;i;i=i.nextSibling)if(i.lineObj){if(n){var o=i.offsetTop+i.offsetHeight;s=o-r,r=o}else{var u=vs(i);s=u.bottom-u.top}var a=i.lineObj.height-s;s<2&&(s=Ct(t));if(a>.001||a<-0.001){vi(i.lineObj,s);var f=i.lineObj.widgets;if(f)for(var l=0;l<f.length;++l)f[l].height=f[l].node.offsetHeight}}}function X(e){var t=e.display.viewOffset=yi(e,hi(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function V(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function $(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:R(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function J(e,t,n,r,i){function c(t){var n=t.nextSibling;return s&&m&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=$(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!s||!e.display.currentWheelTarget)&&hs(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(Dr(e.doc,t)){t.height!=0&&vi(t,0);if(t.widgets&&l&&l.previousSibling)for(var n=0;n<t.widgets.length;++n){var s=t.widgets[n];if(s.showIfHidden){var u=l.previousSibling;if(/pre/i.test(u.nodeName)){var d=cs("div",null,null,"position: relative");u.parentNode.replaceChild(d,u),d.appendChild(u),u=d}var v=u.appendChild(cs("div",[s.node],"CodeMirror-linewidget"));s.handleMouseEvents||(v.ignoreEvents=!0),Q(s,v,u,o)}}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&i<=p&&l.lineNumber&&ds(l.lineNumber,q(e.options,p)),l=l.nextSibling}else{if(t.widgets)for(var m=0,g=l,y;g&&m<20;++m,g=g.nextSibling)if(g.lineObj==t&&/div/i.test(g.nodeName)){y=g;break}var b=K(e,t,p,o,y);if(b!=y)f.insertBefore(b,l);else{while(l!=y)l=c(l);l=l.nextSibling}b.lineObj=t}++p});while(l)l=c(l)}function K(e,t,r,i,s){var o=Qr(e,t),u=o.pre,a=t.gutterMarkers,f=e.display,l,c=o.bgClass?o.bgClass+" "+(t.bgClass||""):t.bgClass;if(!e.options.lineNumbers&&!a&&!c&&!t.wrapClass&&!t.widgets)return u;if(s){s.alignable=null;var h=!0,p=0,d=null;for(var v=s.firstChild,m;v;v=m){m=v.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(v.className))s.removeChild(v);else{for(var g=0;g<t.widgets.length;++g){var y=t.widgets[g];if(y.node==v.firstChild){!y.above&&!d&&(d=v),Q(y,v,s,i),++p;break}}if(g==t.widgets.length){h=!1;break}}}s.insertBefore(u,d),h&&p==t.widgets.length&&(l=s,s.className=t.wrapClass||"")}l||(l=cs("div",null,t.wrapClass,"position: relative"),l.appendChild(u)),c&&l.insertBefore(cs("div",null,c+" CodeMirror-linebackground"),l.firstChild);if(e.options.lineNumbers||a){var b=l.insertBefore(cs("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),l.firstChild);e.options.fixedGutter&&(l.alignable||(l.alignable=[])).push(b),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(l.lineNumber=b.appendChild(cs("div",q(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.lineNumInnerWidth+"px")));if(a)for(var w=0;w<e.options.gutters.length;++w){var E=e.options.gutters[w],S=a.hasOwnProperty(E)&&a[E];S&&b.appendChild(cs("div",[S],"CodeMirror-gutter-elt","left: "+i.gutterLeft[E]+"px; width: "+i.gutterWidth[E]+"px"))}}n&&(l.style.zIndex=2);if(t.widgets&&l!=s)for(var g=0,x=t.widgets;g<x.length;++g){var y=x[g],T=cs("div",[y.node],"CodeMirror-linewidget");y.handleMouseEvents||(T.ignoreEvents=!0),Q(y,T,l,i),y.above?l.insertBefore(T,e.options.lineNumbers&&t.height!=0?b:u):l.appendChild(T),zi(y,"redraw")}return l}function Q(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function G(e){var t=e.display,n=An(e.doc.sel.from,e.doc.sel.to);n||e.options.showCursorWhenSelecting?Y(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":Z(e);if(e.options.moveInputWithCursor){var r=Et(e,e.doc.sel.head,"div"),i=vs(t.wrapper),s=vs(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}}function Y(e){var t=e.display,n=Et(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function Z(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(cs("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i){function h(n,r){return wt(e,Ln(t,n),"div",a,r)}var a=hi(n,t),f=a.text.length,l,c;return Cs(bi(a),r||0,i==null?f:i,function(e,t,n){var a=h(e,"left"),p,d,v;if(e==t)p=a,d=v=a.left;else{p=h(t-1,"right");if(n=="rtl"){var m=a;a=p,p=m}d=a.left,v=p.right}r==null&&e==0&&(d=o),p.top-a.top>3&&(u(d,a.top,null,a.bottom),d=o,a.bottom<p.top&&u(d,a.bottom,null,p.top)),i==null&&t==f&&(v=s);if(!l||a.top<l.top||a.top==l.top&&a.left<l.left)l=a;if(!c||p.bottom>c.bottom||p.bottom==c.bottom&&p.right>c.right)c=p;d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),{start:l,end:c}}var t=e.display,n=e.doc,r=e.doc.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=ut(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=hi(n,r.from.line),l=hi(n,r.to.line),c=_r(n,f)==_r(n,l),h=a(r.from.line,r.from.ch,c?f.text.length:null).end,p=a(r.to.line,c?0:null,r.to.ch).start;c&&(h.top<p.top-2?(u(h.right,h.top,null,h.bottom),u(o,p.top,p.left,p.bottom)):u(h.right,h.top,p.left-h.right,h.bottom)),h.bottom<p.top&&u(o,h.bottom,null,p.top)}ps(t.selectionDiv,i),t.selectionDiv.style.display=""}function et(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}function tt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,os(nt,e))}function nt(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.showingTo)return;var n=+(new Date)+e.options.workTime,r=ar(t.mode,it(e,t.frontier)),i=[],s;t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(o){if(t.frontier>=e.display.showingFrom){var u=o.styles;o.styles=Xr(e,o,r,!0);var a=!u||u.length!=o.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=o.styles[f];a&&(s&&s.end==t.frontier?s.end++:i.push(s={start:t.frontier,end:t.frontier+1})),o.stateAfter=ar(t.mode,r)}else $r(e,o.text,r),o.stateAfter=t.frontier%5==0?ar(t.mode,r):null;++t.frontier;if(+(new Date)>n)return tt(e,e.options.workDelay),!0}),i.length&&Mt(e,function(){for(var e=0;e<i.length;++e)Pt(this,i[e].start,i[e].end)})()}function rt(e,t,n){var r,i,s=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var u=t;u>o;--u){if(u<=s.first)return s.first;var a=hi(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=Gi(a.text,null,e.options.tabSize);if(i==null||r>f)i=u-1,r=f}return i}function it(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=rt(e,t,n),o=s>r.first&&hi(r,s-1).stateAfter;return o?o=ar(r.mode,o):o=fr(r.mode),r.iter(s,t,function(n){$r(e,n.text,o);var u=s==t-1||s%5==0||s>=i.showingFrom&&s<i.showingTo;n.stateAfter=u?ar(r.mode,o):null,++s}),n&&(r.frontier=s),o}function st(e){return e.lineSpace.offsetTop}function ot(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ut(e){var t=ps(e.measure,cs("pre",null,null,"text-align: left")).appendChild(cs("span","x"));return t.offsetLeft}function at(e,t,n,r,i){var s=-1;r=r||ct(e,t);if(r.crude){var o=r.left+n*r.width;return{left:o,right:o+r.width,top:r.top,bottom:r.bottom}}for(var u=n;;u+=s){var a=r[u];if(a)break;s<0&&u==0&&(s=1)}return i=u>n?"left":u<n?"right":i,i=="left"&&a.leftSide?a=a.leftSide:i=="right"&&a.rightSide&&(a=a.rightSide),{left:u<n?a.right:a.left,right:u>n?a.left:a.right,top:a.top,bottom:a.bottom}}function ft(e,t){var n=e.display.measureLineCache;for(var r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.wrapClass)return i}}function lt(e,t){var n=ft(e,t);n&&(n.text=n.measure=n.markedSpans=null)}function ct(e,t){var n=ft(e,t);if(n)return n.measure;var r=ht(e,t),i=e.display.measureLineCache,s={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:r,classes:t.textClass+"|"+t.wrapClass};return i.length==16?i[++e.display.measureLineCachePos%16]=s:i.push(s),r}function ht(e,i){function b(e){var t=e.top-v.top,n=e.bottom-v.top;n>y&&(n=y),t<0&&(t=0);for(var r=m.length-2;r>=0;r-=2){var i=m[r],s=m[r+1];if(i>n||s<t)continue;if(i<=t&&s>=n||t<=i&&n>=s||Math.min(n,s)-Math.max(t,i)>=n-t>>1){m[r]=Math.min(t,i),m[r+1]=Math.max(n,s);break}}return r<0&&(r=m.length,m.push(t,n)),{left:e.left-v.left,right:e.right-v.left,top:r,bottom:null}}function w(e){e.bottom=m[e.top+1],e.top=m[e.top]}if(!e.options.lineWrapping&&i.text.length>=e.options.crudeMeasuringFrom)return pt(e,i);var s=e.display,o=ss(i.text.length),u=Qr(e,i,o,!0).pre;if(t&&!n&&!e.options.lineWrapping&&u.childNodes.length>100){var a=document.createDocumentFragment(),f=10,l=u.childNodes.length;for(var c=0,h=Math.ceil(l/f);c<h;++c){var p=cs("div",null,null,"display: inline-block");for(var d=0;d<f&&l;++d)p.appendChild(u.firstChild),--l;a.appendChild(p)}u.appendChild(a)}ps(s.measure,u);var v=vs(s.lineDiv),m=[],g=ss(i.text.length),y=u.offsetHeight;r&&s.measure.first!=u&&ps(s.measure,u);for(var c=0,E;c<o.length;++c)if(E=o[c]){var S=E,x=null;if(/\bCodeMirror-widget\b/.test(E.className)&&E.getClientRects){E.firstChild.nodeType==1&&(S=E.firstChild);var T=S.getClientRects();T.length>1&&(x=g[c]=b(T[0]),x.rightSide=b(T[T.length-1]))}x||(x=g[c]=b(vs(S))),E.measureRight&&(x.right=vs(E.measureRight).left),E.leftSide&&(x.leftSide=b(vs(E.leftSide)))}hs(e.display.measure);for(var c=0,E;c<g.length;++c)if(E=g[c])w(E),E.leftSide&&w(E.leftSide),E.rightSide&&w(E.rightSide);return g}function pt(e,t){var n=new Rr(t.text.slice(0,100),null);t.textClass&&(n.textClass=t.textClass);var r=ht(e,n),i=at(e,n,0,r,"left"),s=at(e,n,99,r,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(s.right-i.left)/100}}function dt(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];i.collapsed&&(i.to==null||i.to==t.text.length)&&(n=!0)}var s=!n&&ft(e,t);if(s||t.text.length>=e.options.crudeMeasuringFrom)return at(e,t,t.text.length,s&&s.measure,"right").right;var o=Qr(e,t,null,!0).pre,u=o.appendChild(Es(e.display.measure));return ps(e.display.measure,o),vs(u).right-vs(e.display.lineDiv).left}function vt(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function mt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function yt(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=Ir(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=yi(e,t);r=="local"?o+=st(e.display):o-=e.display.viewOffset;if(r=="page"||r=="window"){var u=vs(e.display.lineSpace);o+=u.top+(r=="window"?0:gt());var a=u.left+(r=="window"?0:mt());n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function bt(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=mt(),i-=gt();else if(n=="local"||!n){var s=vs(e.display.sizer);r+=s.left,i+=s.top}var o=vs(e.display.lineSpace);return{left:r-o.left,top:i-o.top}}function wt(e,t,n,r,i){return r||(r=hi(e.doc,t.line)),yt(e,r,at(e,r,t.ch,null,i),n)}function Et(e,t,n,r,i){function s(t,s){var o=at(e,r,t,i,s?"right":"left");return s?o.left=o.right:o.right=o.left,yt(e,r,o,n)}function o(e,t){var n=u[t],r=n.level%2;return e==ks(n)&&t&&n.level<u[t-1].level?(n=u[--t],e=Ls(n)-(n.level%2?0:1),r=!0):e==Ls(n)&&t<u.length-1&&n.level<u[t+1].level&&(n=u[++t],e=ks(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?s(e-1):s(e,r)}r=r||hi(e.doc,t.line),i||(i=ct(e,r));var u=bi(r),a=t.ch;if(!u)return s(a);var f=Hs(u,a),l=o(a,f);return Ps!=null&&(l.other=o(a,Ps)),l}function St(e,t,n,r){var i=new Ln(e,t);return i.xRel=r,n&&(i.outside=!0),i}function xt(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return St(r.first,0,!0,-1);var i=gi(r,n),s=r.first+r.size-1;if(i>s)return St(r.first+r.size-1,hi(r,s).text.length,!0,1);t<0&&(t=0);for(;;){var o=hi(r,i),u=Tt(e,o,i,t,n),a=Mr(o),f=a&&a.find();if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=f.to.line}}function Tt(e,t,n,r,i){function f(r){var i=Et(e,Ln(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-yi(e,t),o=!1,u=2*e.display.wrapper.clientWidth,a=ct(e,t),l=bi(t),c=t.text.length,h=As(t),p=Os(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return St(n,p,g,1);for(;;){if(l?p==h||p==js(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=r-(y==h?d:m);while(ls.test(t.text.charAt(y)))++y;var w=St(n,y,y==h?v:g,b<0?-1:b?1:0);return w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=js(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function Ct(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Nt==null){Nt=cs("pre");for(var t=0;t<49;++t)Nt.appendChild(document.createTextNode("x")),Nt.appendChild(cs("br"));Nt.appendChild(document.createTextNode("x"))}ps(e.measure,Nt);var n=Nt.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),hs(e.measure),n||1}function kt(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=cs("span","x"),n=cs("pre",[t]);ps(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function At(e){e.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Lt},Ui++||(Ri=[])}function Ot(e){var t=e.curOp,n=e.doc,r=e.display;e.curOp=null,t.updateMaxLine&&P(e);if(r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=dt(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+Ji)+"px",r.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&!t.updateScrollPos&&en(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.updateScrollPos)o=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var a=Et(e,n.sel.head);o=Wn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||t.forceUpdate||o&&o.scrollTop!=null)u=U(e,t.changes,o&&o.scrollTop,t.forceUpdate),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop);!u&&t.selectionChanged&&G(e);if(t.updateScrollPos){var f=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,o.scrollTop)),l=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,o.scrollLeft));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=f,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=l,F(e),t.scrollToPos&&Un(e,Dn(e.doc,t.scrollToPos.from),Dn(e.doc,t.scrollToPos.to),t.scrollToPos.margin)}else o&&Rn(e);t.selectionChanged&&et(e),e.state.focused&&t.updateInput&&Ft(e,t.userSelChange);var c=t.maybeHiddenMarkers,h=t.maybeUnhiddenMarkers;if(c)for(var p=0;p<c.length;++p)c[p].lines.length||qi(c[p],"hide");if(h)for(var p=0;p<h.length;++p)h[p].lines.length&&qi(h[p],"unhide");var d;--Ui||(d=Ri,Ri=null),t.textChanged&&qi(e,"change",e,t.textChanged),t.cursorActivity&&qi(e,"cursorActivity",e);if(d)for(var p=0;p<d.length;++p)d[p]()}function Mt(e,t){return function(){var n=e||this,r=!n.curOp;r&&At(n);try{var i=t.apply(n,arguments)}finally{r&&Ot(n)}return i}}function _t(e){return function(){var t=this.cm&&!this.cm.curOp,n;t&&At(this.cm);try{n=e.apply(this,arguments)}finally{t&&Ot(this.cm)}return n}}function Dt(e,t){var n=!e.curOp,r;n&&At(e);try{r=t()}finally{n&&Ot(e)}return r}function Pt(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function Ht(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){jt(e),e.state.focused&&Ht(e)})}function Bt(e){function n(){var r=jt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,Ht(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function jt(e){var n=e.display.input,i=e.display.prevInput,s=e.doc,o=s.sel;if(!e.state.focused||xs(n)||qt(e)||e.state.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(n.value=n.value.substring(0,n.value.length-1),e.state.fakedLastChar=!1);var u=n.value;if(u==i&&An(o.from,o.to))return!1;if(t&&!r&&e.display.inputHasSelection===u)return Ft(e,!0),!1;var a=!e.curOp;a&&At(e),o.shift=!1;var f=0,l=Math.min(i.length,u.length);while(f<l&&i.charCodeAt(f)==u.charCodeAt(f))++f;var c=o.from,h=o.to;f<i.length?c=Ln(c.line,c.ch-(i.length-f)):e.state.overwrite&&An(c,h)&&!e.state.pasteIncoming&&(h=Ln(h.line,Math.min(hi(s,h.line).text.length,h.ch+(u.length-f))));var p=e.curOp.updateInput,d={from:c,to:h,text:Ss(u.slice(f)),origin:e.state.pasteIncoming?"paste":"+input"};return En(e.doc,d,"end"),e.curOp.updateInput=p,zi(e,"inputRead",e,d),u.length>1e3||u.indexOf("\n")>-1?n.value=e.display.prevInput="":e.display.prevInput=u,a&&Ot(e),e.state.pasteIncoming=!1,!0}function Ft(e,n){var i,s,o=e.doc;if(!An(o.sel.from,o.sel.to)){e.display.prevInput="",i=Ts&&(o.sel.to.line-o.sel.from.line>100||(s=e.getSelection()).length>1e3);var u=i?"-":s||e.getSelection();e.display.input.value=u,e.state.focused&&ts(e.display.input),t&&!r&&(e.display.inputHasSelection=u)}else n&&(e.display.prevInput=e.display.input.value="",t&&!r&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function It(e){e.options.readOnly!="nocursor"&&(!v||document.activeElement!=e.display.input)&&e.display.input.focus()}function qt(e){return e.options.readOnly||e.doc.cantEdit}function Rt(e){function i(){e.state.focused&&setTimeout(os(It,e),0)}function u(){o==null&&(o=setTimeout(function(){o=null,n.cachedCharWidth=n.cachedTextHeight=ys=null,vt(e),Dt(e,os(Pt,e))},100))}function a(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(a,5e3):Ii(window,"resize",u)}function f(t){if(Wi(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Mi(t)))return;Hi(t)}function c(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=e.getSelection(),ts(n.input))}var n=e.display;Fi(n.scroller,"mousedown",Mt(e,Vt)),t?Fi(n.scroller,"dblclick",Mt(e,function(t){if(Wi(e,t))return;var n=zt(e,t);if(!n||Kt(e,t)||Ut(e.display,t))return;_i(t);var r=Gn(hi(e.doc,n.line).text,n);Bn(e.doc,r.from,r.to)})):Fi(n.scroller,"dblclick",function(t){Wi(e,t)||_i(t)}),Fi(n.lineSpace,"selectstart",function(e){Ut(n,e)||_i(e)}),w||Fi(n.scroller,"contextmenu",function(t){mn(e,t)}),Fi(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Zt(e,n.scroller.scrollTop),en(e,n.scroller.scrollLeft,!0),qi(e,"scroll",e))}),Fi(n.scrollbarV,"scroll",function(){n.scroller.clientHeight&&Zt(e,n.scrollbarV.scrollTop)}),Fi(n.scrollbarH,"scroll",function(){n.scroller.clientHeight&&en(e,n.scrollbarH.scrollLeft)}),Fi(n.scroller,"mousewheel",function(t){rn(e,t)}),Fi(n.scroller,"DOMMouseScroll",function(t){rn(e,t)}),Fi(n.scrollbarH,"mousedown",i),Fi(n.scrollbarV,"mousedown",i),Fi(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0});var o;Fi(window,"resize",u),setTimeout(a,5e3),Fi(n.input,"keyup",Mt(e,function(t){if(Wi(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Mi(t)))return;t.keyCode==16&&(e.doc.sel.shift=!1)})),Fi(n.input,"input",function(){t&&!r&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Bt(e)}),Fi(n.input,"keydown",Mt(e,cn)),Fi(n.input,"keypress",Mt(e,hn)),Fi(n.input,"focus",os(pn,e)),Fi(n.input,"blur",os(dn,e)),e.options.dragDrop&&(Fi(n.scroller,"dragstart",function(t){Yt(e,t)}),Fi(n.scroller,"dragenter",f),Fi(n.scroller,"dragover",f),Fi(n.scroller,"drop",Mt(e,Gt))),Fi(n.scroller,"paste",function(t){if(Ut(n,t))return;It(e),Bt(e)}),Fi(n.input,"paste",function(){if(s&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=n.input.selectionStart,r=n.input.selectionEnd;n.input.value+="$",n.input.selectionStart=t,n.input.selectionEnd=r,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Bt(e)}),Fi(n.input,"cut",c),Fi(n.input,"copy",c),l&&Fi(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),It(e)})}function Ut(e,t){for(var n=Bi(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function zt(e,t,n){var r=e.display;if(!n){var i=Bi(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller||i==r.gutterFiller)return null}var s,o,u=vs(r.lineSpace);try{s=t.clientX,o=t.clientY}catch(t){return null}return xt(e,s-u.left,o-u.top)}function Vt(e){function m(e){if(An(v,e))return;v=e;if(f=="single"){Bn(n.doc,Dn(i,u),e);return}p=Dn(i,p),d=Dn(i,d);if(f=="double"){var t=Gn(hi(i,e.line).text,e);On(e,p)?Bn(n.doc,t.from,d):Bn(n.doc,p,t.to)}else f=="triple"&&(On(e,p)?Bn(n.doc,d,Dn(i,Ln(e.line,0))):Bn(n.doc,p,Dn(i,Ln(e.line+1,0))))}function b(e){var t=++y,s=zt(n,e,!0);if(!s)return;if(!An(s,c)){n.state.focused||pn(n),c=s,m(s);var o=j(r,i);(s.line>=o.to||s.line<o.from)&&setTimeout(Mt(n,function(){y==t&&b(e)}),150)}else{var u=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;u&&setTimeout(Mt(n,function(){if(y!=t)return;r.scroller.scrollTop+=u,b(e)}),50)}}function E(e){y=Infinity,_i(e),It(n),Ii(document,"mousemove",S),Ii(document,"mouseup",x)}if(Wi(this,e))return;var n=this,r=n.display,i=n.doc,o=i.sel;o.shift=e.shiftKey;if(Ut(r,e)){s||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(Kt(n,e))return;var u=zt(n,e);switch(ji(e)){case 3:w&&mn.call(n,n,e);return;case 2:s&&(n.state.lastMiddleDown=+(new Date)),u&&Bn(n.doc,u),setTimeout(os(It,n),20),_i(e);return}if(!u){Bi(e)==r.scroller&&_i(e);return}n.state.focused||pn(n);var a=+(new Date),f="single";if(Xt&&Xt.time>a-400&&An(Xt.pos,u))f="triple",_i(e),setTimeout(os(It,n),20),Yn(n,u.line);else if(Wt&&Wt.time>a-400&&An(Wt.pos,u)){f="double",Xt={time:a,pos:u},_i(e);var l=Gn(hi(i,u.line).text,u);Bn(n.doc,l.from,l.to)}else Wt={time:a,pos:u};var c=u;if(n.options.dragDrop&&ms&&!qt(n)&&!An(o.from,o.to)&&!On(u,o.from)&&!On(o.to,u)&&f=="single"){var h=Mt(n,function(t){s&&(r.scroller.draggable=!1),n.state.draggingText=!1,Ii(document,"mouseup",h),Ii(r.scroller,"drop",h),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(_i(t),Bn(n.doc,u),It(n))});s&&(r.scroller.draggable=!0),n.state.draggingText=h,r.scroller.dragDrop&&r.scroller.dragDrop(),Fi(document,"mouseup",h),Fi(r.scroller,"drop",h);return}_i(e),f=="single"&&Bn(n.doc,Dn(i,u));var p=o.from,d=o.to,v=u,g=vs(r.wrapper),y=0,S=Mt(n,function(e){!t&&!ji(e)?E(e):b(e)}),x=Mt(n,E);Fi(document,"mousemove",S),Fi(document,"mouseup",x)}function $t(e,t,n,r,i){try{var s=t.clientX,o=t.clientY}catch(t){return!1}if(s>=Math.floor(vs(e.display.gutters).right))return!1;r&&_i(t);var u=e.display,a=vs(u.lineDiv);if(o>a.bottom||!Vi(e,n))return Pi(t);o-=a.top-u.viewOffset;for(var f=0;f<e.options.gutters.length;++f){var l=u.gutters.childNodes[f];if(l&&vs(l).right>=s){var c=gi(e.doc,o),h=e.options.gutters[f];return i(e,n,e,c,h,t),Pi(t)}}}function Jt(e,t){return Vi(e,"gutterContextMenu")?$t(e,t,"gutterContextMenu",!1,qi):!1}function Kt(e,t){return $t(e,t,"gutterClick",!0,zi)}function Gt(e){var n=this;if(Wi(n,e)||Ut(n.display,e)||n.options.onDragEvent&&n.options.onDragEvent(n,Mi(e)))return;_i(e),t&&(Qt=+(new Date));var r=zt(n,e,!0),i=e.dataTransfer.files;if(!r||qt(n))return;if(i&&i.length&&window.FileReader&&window.File){var s=i.length,o=Array(s),u=0,a=function(e,t){var i=new FileReader;i.onload=function(){o[t]=i.result,++u==s&&(r=Dn(n.doc,r),En(n.doc,{from:r,to:r,text:Ss(o.join("\n")),origin:"paste"},"around"))},i.readAsText(e)};for(var f=0;f<s;++f)a(i[f],f)}else{if(n.state.draggingText&&!On(r,n.doc.sel.from)&&!On(n.doc.sel.to,r)){n.state.draggingText(e),setTimeout(os(It,n),20);return}try{var o=e.dataTransfer.getData("Text");if(o){var l=n.doc.sel.from,c=n.doc.sel.to;Fn(n.doc,r,r),n.state.draggingText&&kn(n.doc,"",l,c,"paste"),n.replaceSelection(o,null,"paste"),It(n)}}catch(e){}}}function Yt(e,n){if(t&&(!e.state.draggingText||+(new Date)-Qt<100)){Hi(n);return}if(Wi(e,n)||Ut(e.display,n))return;var r=e.getSelection();n.dataTransfer.setData("Text",r);if(n.dataTransfer.setDragImage&&!f){var i=cs("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),n.dataTransfer.setDragImage(i,0,0),a&&i.parentNode.removeChild(i)}}function Zt(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||U(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&U(t,[]),tt(t,100)}function en(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,F(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function rn(t,n){var r=n.wheelDeltaX,i=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),i==null&&n.detail&&n.axis==n.VERTICAL_AXIS?i=n.detail:i==null&&(i=n.wheelDelta);var o=t.display,u=o.scroller;if(!(r&&u.scrollWidth>u.clientWidth||i&&u.scrollHeight>u.clientHeight))return;if(i&&m&&s)for(var f=n.target;f!=u;f=f.parentNode)if(f.lineObj){t.display.currentWheelTarget=f;break}if(r&&!e&&!a&&nn!=null){i&&Zt(t,Math.max(0,Math.min(u.scrollTop+i*nn,u.scrollHeight-u.clientHeight))),en(t,Math.max(0,Math.min(u.scrollLeft+r*nn,u.scrollWidth-u.clientWidth))),_i(n),o.wheelStartX=null;return}if(i&&nn!=null){var l=i*nn,c=t.doc.scrollTop,h=c+o.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.doc.height,h+l+50),U(t,[],{top:c,bottom:h})}tn<20&&(o.wheelStartX==null?(o.wheelStartX=u.scrollLeft,o.wheelStartY=u.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(o.wheelStartX==null)return;var e=u.scrollLeft-o.wheelStartX,t=u.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;nn=(nn*tn+n)/(tn+1),++tn},200)):(o.wheelDX+=r,o.wheelDY+=i))}function sn(e,t,n){if(typeof t=="string"){t=lr[t];if(!t)return!1}e.display.pollingFast&&jt(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,s=!1;try{qt(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),s=t(e)!=Ki}finally{r.sel.shift=i,e.state.suppressEdits=!1}return s}function on(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function an(e,t){var n=hr(e.options.keyMap),i=n.auto;clearTimeout(un),i&&!dr(t)&&(un=setTimeout(function(){hr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i,A(e))},50));var s=vr(t,!0),o=!1;if(!s)return!1;var u=on(e);return t.shiftKey?o=pr("Shift-"+s,u,function(t){return sn(e,t,!0)})||pr(s,u,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return sn(e,t)}):o=pr(s,u,function(t){return sn(e,t)}),o&&(_i(t),et(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0),zi(e,"keyHandled",e,s,t)),o}function fn(e,t,n){var r=pr("'"+n+"'",on(e),function(t){return sn(e,t,!0)});return r&&(_i(t),et(e),zi(e,"keyHandled",e,"'"+n+"'",t)),r}function cn(e){var n=this;n.state.focused||pn(n);if(Wi(n,e)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Mi(e)))return;t&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;n.doc.sel.shift=r==16||e.shiftKey;var i=an(n,e);a&&(ln=i?r:null,!i&&r==88&&!Ts&&(m?e.metaKey:e.ctrlKey)&&n.replaceSelection(""))}function hn(e){var n=this;if(Wi(n,e)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Mi(e)))return;var i=e.keyCode,s=e.charCode;if(a&&i==ln){ln=null,_i(e);return}if((a&&(!e.which||e.which<10)||l)&&an(n,e))return;var o=String.fromCharCode(s==null?i:s);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!qt(this)&&this.doc.mode.electricChars.indexOf(o)>-1&&setTimeout(Mt(n,function(){$n(n,n.doc.sel.to.line,"smart")}),75);if(fn(n,e,o))return;t&&!r&&(n.display.inputHasSelection=null),Bt(n)}function pn(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(qi(e,"focus",e),e.state.focused=!0,e.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.wrapper.className+=" CodeMirror-focused"),e.curOp||(Ft(e,!0),s&&setTimeout(os(Ft,e,!0),0))),Ht(e),et(e)}function dn(e){e.state.focused&&(qi(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function mn(e,n){function c(){if(i.input.selectionStart!=null){var e=i.input.value="â"+(An(s.from,s.to)?"":i.input.value);i.prevInput="â",i.input.selectionStart=1,i.input.selectionEnd=e.length}}function h(){i.inputDiv.style.position="relative",i.input.style.cssText=l,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=u),Ht(e);if(i.input.selectionStart!=null){(!t||r)&&c(),clearTimeout(vn);var n=0,s=function(){i.prevInput==" "&&i.input.selectionStart==0?Mt(e,lr.selectAll)(e):n++<10?vn=setTimeout(s,500):Ft(e)};vn=setTimeout(s,200)}}if(Wi(e,n,"contextmenu"))return;var i=e.display,s=e.doc.sel;if(Ut(i,n)||Jt(e,n))return;var o=zt(e,n),u=i.scroller.scrollTop;if(!o||a)return;var f=e.options.resetSelectionOnContextMenu;f&&(An(s.from,s.to)||On(o,s.from)||!On(o,s.to))&&Mt(e,Fn)(e.doc,o,o);var l=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",It(e),Ft(e,!0),An(s.from,s.to)&&(i.input.value=i.prevInput=" "),t&&!r&&c();if(w){Hi(n);var p=function(){Ii(window,"mouseup",p),setTimeout(h,20)};Fi(window,"mouseup",p)}else setTimeout(h,50)}function yn(e,t,n){if(!On(t.from,n))return Dn(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,s=e.first+e.size-1;return i>s?Ln(s,hi(e,s).text.length):Pn(n,hi(e,i).text.length)}if(n.line==t.to.line+r)return Pn(n,es(t.text).length+(t.text.length==1?t.from.ch:0)+hi(e,t.to.line).text.length-t.to.ch);var o=n.line-t.from.line;return Pn(n,t.text[o].length+(o?0:t.from.ch))}function bn(e,t,n){if(n&&typeof n=="object")return{anchor:yn(e,t,n.anchor),head:yn(e,t,n.head)};if(n=="start")return{anchor:t.from,head:t.from};var r=gn(t);if(n=="around")return{anchor:t.from,head:r};if(n=="end")return{anchor:r,head:r};var i=function(e){if(On(e,t.from))return e;if(!On(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),Ln(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function wn(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Dn(e,t)),n&&(this.to=Dn(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),qi(e,"beforeChange",e,r),e.cm&&qi(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function En(e,t,n,r){if(e.cm){if(!e.cm.curOp)return Mt(e.cm,En)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(Vi(e,"beforeChange")||e.cm&&Vi(e.cm,"beforeChange")){t=wn(e,t,!0);if(!t)return}var i=E&&!r&&Lr(e,t.from,t.to);if(i){for(var s=i.length-1;s>=1;--s)Sn(e,{from:i[s].from,to:i[s].to,text:[""]});i.length&&Sn(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else Sn(e,t,n)}function Sn(e,t,n){if(t.text.length==1&&t.text[0]==""&&An(t.from,t.to))return;var r=bn(e,t,n);xi(e,t,r,e.cm?e.cm.curOp.id:NaN),Nn(e,t,r,Cr(e,t));var i=[];li(e,function(e,n){!n&&ns(i,e.history)==-1&&(Ai(e.history,t),i.push(e.history)),Nn(e,t,null,Cr(e,t))})}function xn(e,t){if(e.cm&&e.cm.state.suppressEdits)return;var n=e.history,r=(t=="undo"?n.done:n.undone).pop();if(!r)return;var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore,generation:n.generation};(t=="undo"?n.undone:n.done).push(i),n.generation=r.generation||++n.maxGeneration;var s=Vi(e,"beforeChange")||e.cm&&Vi(e.cm,"beforeChange");for(var o=r.changes.length-1;o>=0;--o){var u=r.changes[o];u.origin=t;if(s&&!wn(e,u,!1)){(t=="undo"?n.done:n.undone).length=0;return}i.changes.push(Si(e,u));var a=o?bn(e,u,null):{anchor:r.anchorBefore,head:r.headBefore};Nn(e,u,a,kr(e,u));var f=[];li(e,function(e,t){!t&&ns(f,e.history)==-1&&(Ai(e.history,u),f.push(e.history)),Nn(e,u,null,kr(e,u))})}}function Tn(e,t){function n(e){return Ln(e.line+t,e.ch)}e.first+=t,e.cm&&Pt(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function Nn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Mt(e.cm,Nn)(e,t,n,r);if(t.to.line<e.first){Tn(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Tn(e,i),t={from:Ln(e.first,0),to:Ln(t.to.line+i,t.to.ch),text:[es(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:Ln(s,hi(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=pi(e,t.from,t.to),n||(n=bn(e,t,null)),e.cm?Cn(e.cm,t,r,n):ri(e,t,r,n)}function Cn(e,t,n,r){var i=e.doc,s=e.display,o=t.from,u=t.to,a=!1,f=o.line;e.options.lineWrapping||(f=mi(_r(i,hi(i,o.line))),i.iter(f,u.line+1,function(e){if(e==s.maxLine)return a=!0,!0})),!On(i.sel.head,t.from)&&!On(t.to,i.sel.head)&&(e.curOp.cursorActivity=!0),ri(i,t,n,r,k(e)),e.options.lineWrapping||(i.iter(f,o.line+t.text.length,function(e){var t=D(i,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),tt(e,400);var l=t.text.length-(u.line-o.line)-1;Pt(e,o.line,u.line+1,l);if(Vi(e,"change")){var c={from:o,to:u,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var h=e.curOp.textChanged;h.next;h=h.next);h.next=c}else e.curOp.textChanged=c}}function kn(e,t,n,r,i){r||(r=n);if(On(r,n)){var s=r;r=n,n=s}typeof t=="string"&&(t=Ss(t)),En(e,{from:n,to:r,text:t,origin:i},null)}function Ln(e,t){if(!(this instanceof Ln))return new Ln(e,t);this.line=e,this.ch=t}function An(e,t){return e.line==t.line&&e.ch==t.ch}function On(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Mn(e){return Ln(e.line,e.ch)}function _n(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Dn(e,t){if(t.line<e.first)return Ln(e.first,0);var n=e.first+e.size-1;return t.line>n?Ln(n,hi(e,n).text.length):Pn(t,hi(e,t.line).text.length)}function Pn(e,t){var n=e.ch;return n==null||n>t?Ln(e.line,t):n<0?Ln(e.line,0):e}function Hn(e,t){return t>=e.first&&t<e.first+e.size}function Bn(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var s=On(t,i);s!=On(n,i)?(i=t,t=n):s!=On(t,n)&&(t=n)}Fn(e,i,t,r)}else Fn(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function jn(e,t,n){var r={anchor:t,head:n};return qi(e,"beforeSelectionChange",e,r),e.cm&&qi(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Dn(e,r.anchor),r.head=Dn(e,r.head),r}function Fn(e,t,n,r,i){if(!i&&Vi(e,"beforeSelectionChange")||e.cm&&Vi(e.cm,"beforeSelectionChange")){var s=jn(e,t,n);n=s.head,t=s.anchor}var o=e.sel;o.goalColumn=null,r==null&&(r=On(n,o.head)?-1:1);if(i||!An(t,o.anchor))t=qn(e,t,r,i!="push");if(i||!An(n,o.head))n=qn(e,n,r,i!="push");if(An(o.anchor,t)&&An(o.head,n))return;o.anchor=t,o.head=n;var u=On(n,t);o.from=u?n:t,o.to=u?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),zi(e,"cursorActivity",e)}function In(e){Fn(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function qn(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=hi(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){qi(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find()[o<0?"from":"to"];if(An(c,s)){c.ch+=o,c.ch<0?c.line>e.first?c=Dn(e,Ln(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=Ln(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,Ln(e.first,0)):qn(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function Rn(e){var t=Un(e,e.doc.sel.head,null,e.options.cursorScrollMargin);if(!e.state.focused)return;var n=e.display,r=vs(n.sizer),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!p){var s=n.cursor.style.display=="none";s&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),s&&(n.cursor.style.display="none")}}function Un(e,t,n,r){r==null&&(r=0);for(;;){var i=!1,s=Et(e,t),o=!n||n==t?s:Et(e,n),u=Wn(e,Math.min(s.left,o.left),Math.min(s.top,o.top)-r,Math.max(s.left,o.left),Math.max(s.bottom,o.bottom)+r),a=e.doc.scrollTop,f=e.doc.scrollLeft;u.scrollTop!=null&&(Zt(e,u.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),u.scrollLeft!=null&&(en(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(i=!0));if(!i)return s}}function zn(e,t,n,r,i){var s=Wn(e,t,n,r,i);s.scrollTop!=null&&Zt(e,s.scrollTop),s.scrollLeft!=null&&en(e,s.scrollLeft)}function Wn(e,t,n,r,i){var s=e.display,o=Ct(e.display);n<0&&(n=0);var u=s.scroller.clientHeight-Ji,a=s.scroller.scrollTop,f={},l=e.doc.height+ot(s),c=n<o,h=i>l-o;if(n<a)f.scrollTop=c?0:n;else if(i>a+u){var p=Math.min(n,(h?l:i)-u);p!=a&&(f.scrollTop=p)}var d=s.scroller.clientWidth-Ji,v=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var m=s.gutters.offsetWidth,g=t<m+10;return t<v+m||g?(g&&(t=0),f.scrollLeft=Math.max(0,t-10-m)):r>d+v-3&&(f.scrollLeft=r+10-d),f}function Xn(e,t,n){e.curOp.updateScrollPos={scrollLeft:t==null?e.doc.scrollLeft:t,scrollTop:n==null?e.doc.scrollTop:n}}function Vn(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function $n(e,t,n,r){var i=e.doc;n==null&&(n="add");if(n=="smart")if(!e.doc.mode.indent)n="prev";else var s=it(e,t);var o=e.options.tabSize,u=hi(i,t),a=Gi(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.doc.mode.indent(s,u.text.slice(f.length),u.text);if(l==Ki){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=Gi(hi(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"?l=a-e.options.indentUnit:typeof n=="number"&&(l=a+n),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Zi(l-h)),c!=f?kn(e.doc,c,Ln(t,0),Ln(t,f.length),"+input"):i.sel.head.line==t&&i.sel.head.ch<f.length&&Fn(i,Ln(t,f.length),Ln(t,f.length),1),u.stateAfter=null}function Jn(e,t,n){var r=t,i=t,s=e.doc;return typeof t=="number"?i=hi(s,_n(s,t)):r=mi(t),r==null?null:n(i,r)?(Pt(e,r,r+1),i):null}function Kn(e,t,n,r,i){function l(){var t=s+n;return t<e.first||t>=e.first+e.size?f=!1:(s=t,a=hi(e,t))}function c(e){var t=(i?js:Fs)(a,o,n,!0);if(t==null){if(!!e||!l())return f=!1;i?o=(n<0?Os:As)(a):o=n<0?a.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=n,a=hi(e,s),f=!0;if(r=="char")c();else if(r=="column")c(!0);else if(r=="word"||r=="group"){var h=null,p=r=="group";for(var d=!0;;d=!1){if(n<0&&!c(!d))break;var v=a.text.charAt(o)||"\n",m=as(v)?"w":p?/\s/.test(v)?null:"p":null;if(h&&h!=m){n<0&&(n=1,c());break}m&&(h=m);if(n>0&&!c(!d))break}}var g=qn(e,Ln(s,o),u,!0);return f||(g.hitSide=!0),g}function Qn(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*Ct(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=xt(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function Gn(e,t){var n=t.ch,r=t.ch;if(e){(t.xRel<0||r==e.length)&&n?--n:++r;var i=e.charAt(n),s=as(i)?as:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!as(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:Ln(t.line,n),to:Ln(t.line,r)}}function Yn(e,t){Bn(e.doc,Ln(t,0),Dn(e.doc,Ln(t+1,0)))}function tr(e,t,n,r){x.defaults[e]=t,n&&(Zn[e]=r?function(e,t,r){r!=nr&&n(e,t,r)}:n)}function ar(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function fr(e,t,n){return e.startState?e.startState(t,n):!0}function hr(e){return typeof e=="string"?cr[e]:e}function pr(e,t,n){function r(t){t=hr(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0,u=s.length;o<u;++o){var a=r(s[o]);if(a)return a}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s!="stop"}}function dr(e){var t=Ns[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function vr(e,t){if(a&&e.keyCode==34&&e["char"])return!1;var n=Ns[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(b?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(b?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n}function mr(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function gr(e,t){this.lines=[],this.type=t,this.doc=e}function yr(e,t,n,r,i){if(r&&r.shared)return wr(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Mt(e.cm,yr)(e,t,n,r,i);var s=new gr(e,i);if(On(n,t)||An(t,n)&&i=="range"&&(!r.inclusiveLeft||!r.inclusiveRight))return s;r&&is(r,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=cs("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(s.replacedWith.ignoreEvents=!0)),s.collapsed&&(S=!0),s.addToHistory&&xi(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},NaN);var o=t.line,u=0,a,f,l=e.cm,c;e.iter(o,n.line+1,function(r){l&&s.collapsed&&!l.options.lineWrapping&&_r(e,r)==l.display.maxLine&&(c=!0);var i={from:null,to:null,marker:s};u+=r.text.length,o==t.line&&(i.from=t.ch,u-=t.ch),o==n.line&&(i.to=n.ch,u-=r.text.length-n.ch),s.collapsed&&(o==n.line&&(f=Ar(r,n.ch)),o==t.line?a=Ar(r,t.ch):vi(r,0)),xr(r,i),++o}),s.collapsed&&e.iter(t.line,n.line+1,function(t){Dr(e,t)&&vi(t,0)}),s.clearOnEnter&&Fi(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(E=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory());if(s.collapsed){if(a!=f)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=u,s.atomic=!0}return l&&(c&&(l.curOp.updateMaxLine=!0),(s.className||s.title||s.startStyle||s.endStyle||s.collapsed)&&Pt(l,t.line,n.line+1),s.atomic&&In(l)),s}function br(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,Fi(e[n],"clear",function(){r.clear()})}function wr(e,t,n,r,i){r=is(r),r.shared=!1;var s=[yr(e,t,n,r,i)],o=s[0],u=r.replacedWith;return li(e,function(e){u&&(r.replacedWith=u.cloneNode(!0)),s.push(yr(e,Dn(e,t),Dn(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=es(s)}),new br(s,o)}function Er(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function xr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Tr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||(o.inclusiveLeft&&o.inclusiveRight||o.type=="bookmark")&&s.from==t&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function Nr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||o.type=="bookmark"&&s.from==t&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push({from:a?null:s.from-t,to:s.to==null?null:s.to-t,marker:o})}}return i}function Cr(e,t){var n=Hn(e,t.from.line)&&hi(e,t.from.line).markedSpans,r=Hn(e,t.to.line)&&hi(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=An(t.from,t.to),u=Tr(n,i,o),a=Nr(r,s,o),f=t.text.length==1,l=es(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=Er(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=Er(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}if(f&&u){for(var c=0;c<u.length;++c)u[c].from!=null&&u[c].from==u[c].to&&u[c].marker.type!="bookmark"&&u.splice(c--,1);u.length||(u=null)}var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push({from:null,to:null,marker:u[c].marker});for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function kr(e,t){var n=Ni(e,t),r=Cr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function Lr(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||ns(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find();for(var a=0;a<i.length;++a){var f=i[a];if(On(f.to,u.from)||On(u.to,f.from))continue;var l=[a,1];(On(f.from,u.from)||!o.inclusiveLeft&&An(f.from,u.from))&&l.push({from:f.from,to:u.from}),(On(u.to,f.to)||!o.inclusiveRight&&An(f.to,u.to))&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Ar(e,t){var n=S&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function Or(e){return Ar(e,-1)}function Mr(e){return Ar(e,e.text.length+1)}function _r(e,t){var n;while(n=Or(t))t=hi(e,n.find().from.line);return t}function Dr(e,t){var n=S&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.marker.replacedWith)continue;if(r.from==0&&r.marker.inclusiveLeft&&Pr(e,t,r))return!0}}function Pr(e,t,n){if(n.to==null){var r=n.marker.find().to,i=hi(e,r.line);return Pr(e,i,Er(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o){s=t.markedSpans[o];if(s.marker.collapsed&&!s.marker.replacedWith&&s.from==n.to&&(s.marker.inclusiveLeft||n.marker.inclusiveRight)&&Pr(e,t,s))return!0}}function Hr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Br(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Fr(e){return function(){var t=!this.cm.curOp;t&&At(this.cm);try{var n=e.apply(this,arguments)}finally{t&&Ot(this.cm)}return n}}function Ir(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&ps(e.cm.display.measure,cs("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function qr(e,t,n,r){var i=new jr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),Jn(e,t,function(t){var n=t.widgets||(t.widgets=[]);i.insertAt==null?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t;if(!Dr(e.doc,t)||i.showIfHidden){var r=yi(e,t)<e.doc.scrollTop;vi(t,t.height+Ir(i)),r&&Vn(e,0,i.height)}return!0}),i}function Ur(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Hr(e),Br(e,n);var i=r?r(e):1;i!=e.height&&vi(e,i)}function zr(e){e.parent=null,Hr(e)}function Wr(e,t,n,r,i,s){var o=n.flattenSpans;o==null&&(o=e.options.flattenSpans);var u=0,a=null,f=new mr(t,e.options.tabSize),l;t==""&&n.blankLine&&n.blankLine(r);while(!f.eol()){f.pos>e.options.maxHighlightLength?(o=!1,s&&$r(e,t,r,f.pos),f.pos=t.length,l=null):l=n.token(f,r);if(!o||a!=l)u<f.start&&i(f.start,a),u=f.start,a=l;f.start=f.pos}while(u<f.pos){var c=Math.min(f.pos,u+5e4);i(c,a),u=c}}function Xr(e,t,n,r){var i=[e.state.modeGen];Wr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},r);for(var s=0;s<e.state.overlays.length;++s){var o=e.state.overlays[s],u=1,a=0;Wr(e,t.text,o.mode,!0,function(e,t){var n=u;while(a<e){var r=i[u];r>e&&i.splice(u,1,e,i[u+1],r),u+=2,a=Math.min(e,r)}if(!t)return;if(o.opaque)i.splice(n,u-n,e,t),u=n+2;else for(;n<u;n+=2){var s=i[n+1];i[n+1]=s?s+" "+t:t}})}return i}function Vr(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen)t.styles=Xr(e,t,t.stateAfter=it(e,mi(t)));return t.styles}function $r(e,t,n,r){var i=e.doc.mode,s=new mr(t,e.options.tabSize);s.start=s.pos=r||0,t==""&&i.blankLine&&i.blankLine(n);while(!s.eol()&&s.pos<=e.options.maxHighlightLength)i.token(s,n),s.start=s.pos}function Kr(e,t){if(!e)return null;for(;;){var n=e.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return Jr[e]||(Jr[e]="cm-"+e.replace(/ +/g," cm-"))}function Qr(e,n,r,o){var u,a=n,f=!0;while(u=Or(a))a=hi(e.doc,u.find().from.line);var l={pre:cs("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:e,copyWidgets:o};do{a.text&&(f=!1),l.measure=a==n&&r,l.pos=0,l.addToken=l.measure?Zr:Yr,(t||s)&&e.getOption("lineWrapping")&&(l.addToken=ei(l.addToken));var c=ni(a,l,Vr(e,a));r&&a==n&&!l.measuredSomething&&(r[0]=l.pre.appendChild(Es(e.display.measure)),l.measuredSomething=!0),c&&(a=hi(e.doc,c.to.line))}while(c);r&&!l.measuredSomething&&!r[0]&&(r[0]=l.pre.appendChild(f?cs("span","Â "):Es(e.display.measure))),!l.pre.firstChild&&!Dr(e.doc,n)&&l.pre.appendChild(document.createTextNode("Â "));var h;if(r&&(t||i)&&(h=bi(a))){var p=h.length-1;h[p].from==h[p].to&&--p;var d=h[p],v=h[p-1];if(d.from+1==d.to&&v&&d.level<v.level){var m=r[l.pos-1];m&&m.parentNode.insertBefore(m.measureRight=Es(e.display.measure),m.nextSibling)}}var g=l.textClass?l.textClass+" "+(n.textClass||""):n.textClass;return g&&(l.pre.className=g),qi(e,"renderLine",e,n,l.pre),l}function Gr(e){var t=cs("span","â¢","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function Yr(e,t,n,r,i,s){if(!t)return;var o=e.cm.options.specialChars;if(!o.test(t)){e.col+=t.length;var u=document.createTextNode(t)}else{var u=document.createDocumentFragment(),a=0;for(;;){o.lastIndex=a;var f=o.exec(t),l=f?f.index-a:t.length-a;l&&(u.appendChild(document.createTextNode(t.slice(a,a+l))),e.col+=l);if(!f)break;a+=l+1;if(f[0]=="	"){var c=e.cm.options.tabSize,h=c-e.col%c;u.appendChild(cs("span",Zi(h),"cm-tab")),e.col+=h}else{var p=e.cm.options.specialCharPlaceholder(f[0]);u.appendChild(p),e.col+=1}}}if(n||r||i||e.measure){var d=n||"";r&&(d+=r),i&&(d+=i);var p=cs("span",[u],d);return s&&(p.title=s),e.pre.appendChild(p)}e.pre.appendChild(u)}function Zr(e,n,r,i,s){var o=e.cm.options.lineWrapping;for(var u=0;u<n.length;++u){var a=n.charAt(u),f=u==0;a>="í "&&a<"í¯¿"&&u<n.length-1?(a=n.slice(u,u+2),++u):u&&o&&gs(n,u)&&e.pre.appendChild(cs("wbr"));var l=e.measure[e.pos],c=e.measure[e.pos]=Yr(e,a,r,f&&i,u==n.length-1&&s);l&&(c.leftSide=l.leftSide||l),t&&o&&a==" "&&u&&!/\s/.test(n.charAt(u-1))&&u<n.length-1&&!/\s/.test(n.charAt(u+1))&&(c.style.whiteSpace="normal"),e.pos+=a.length}n.length&&(e.measuredSomething=!0)}function ei(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":"Â ";return t+=" ",t}return function(n,r,i,s,o,u){return e(n,r.replace(/ {3,}/g,t),i,s,o,u)}}function ti(e,t,n,r){var i=!r&&n.replacedWith;if(i){e.copyWidgets&&(i=i.cloneNode(!0)),e.pre.appendChild(i);if(e.measure){if(t)e.measure[e.pos]=i;else{var s=Es(e.cm.display.measure);if(n.type=="bookmark"&&!n.insertLeft)e.measure[e.pos]=e.pre.appendChild(s);else{if(e.measure[e.pos])return;e.measure[e.pos]=e.pre.insertBefore(s,i)}}e.measuredSomething=!0}}e.pos+=t}function ni(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(s,s=n[o]),Kr(n[o+1],t));return}var u=i.length,a=0,o=1,f="",l,c=0,h,p,d,v,m;for(;;){if(c==a){h=p=d=v="",m=null,c=Infinity;var g=[];for(var y=0;y<r.length;++y){var b=r[y],w=b.marker;b.from<=a&&(b.to==null||b.to>a)?(b.to!=null&&c>b.to&&(c=b.to,p=""),w.className&&(h+=" "+w.className),w.startStyle&&b.from==a&&(d+=" "+w.startStyle),w.endStyle&&b.to==c&&(p+=" "+w.endStyle),w.title&&!v&&(v=w.title),w.collapsed&&(!m||m.marker.size<w.size)&&(m=b)):b.from>a&&c>b.from&&(c=b.from),w.type=="bookmark"&&b.from==a&&w.replacedWith&&g.push(w)}if(m&&(m.from||0)==a){ti(t,(m.to==null?u:m.to)-a,m.marker,m.from==null);if(m.to==null)return m.marker.find()}if(!m&&g.length)for(var y=0;y<g.length;++y)ti(t,0,g[y])}if(a>=u)break;var E=Math.min(u,c);for(;;){if(f){var S=a+f.length;if(!m){var x=S>E?f.slice(0,E-a):f;t.addToken(t,x,l?l+h:h,d,a+x.length==c?p:"",v)}if(S>=E){f=f.slice(E-a),a=E;break}a=S,d=""}f=i.slice(s,s=n[o++]),l=Kr(n[o++],t)}}}function ri(e,t,n,r,i){function s(e){return n?n[e]:null}function o(e,n,r){Ur(e,n,r,i),zi(e,"change",e,t)}var u=t.from,a=t.to,f=t.text,l=hi(e,u.line),c=hi(e,a.line),h=es(f),p=s(f.length-1),d=a.line-u.line;if(u.ch==0&&a.ch==0&&h==""){for(var v=0,m=f.length-1,g=[];v<m;++v)g.push(new Rr(f[v],s(v),i));o(c,c.text,p),d&&e.remove(u.line,d),g.length&&e.insert(u.line,g)}else if(l==c)if(f.length==1)o(l,l.text.slice(0,u.ch)+h+l.text.slice(a.ch),p);else{for(var g=[],v=1,m=f.length-1;v<m;++v)g.push(new Rr(f[v],s(v),i));g.push(new Rr(h+l.text.slice(a.ch),p,i)),o(l,l.text.slice(0,u.ch)+f[0],s(0)),e.insert(u.line+1,g)}else if(f.length==1)o(l,l.text.slice(0,u.ch)+f[0]+c.text.slice(a.ch),s(0)),e.remove(u.line+1,d);else{o(l,l.text.slice(0,u.ch)+f[0],s(0)),o(c,h+c.text.slice(a.ch),p);for(var v=1,m=f.length-1,g=[];v<m;++v)g.push(new Rr(f[v],s(v),i));d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,g)}zi(e,"change",e,t),Fn(e,r.anchor,r.head,null,!0)}function ii(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function si(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function li(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function ci(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,L(e),N(e),e.options.lineWrapping||P(e),e.options.mode=t.modeOption,Pt(e)}function hi(e,t){t-=e.first;while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function pi(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function di(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function vi(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function mi(e){if(e.parent==null)return null;var t=e.parent,n=ns(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function gi(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function yi(e,t){t=_r(e.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function bi(e){var t=e.order;return t==null&&(t=e.order=Is(e.text)),t}function wi(e){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function Ei(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function Si(e,t){var n={line:t.from.line,ch:t.from.ch},r={from:n,to:gn(t),text:pi(e,t.from,t.to)};return Ei(e,r,t.from.line,t.to.line+1),li(e,function(e){Ei(e,r,t.from.line,t.to.line+1)},!0),r}function xi(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o=es(i.done);if(o&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))){var u=es(o.changes);An(t.from,t.to)&&An(t.from,u.to)?u.to=gn(t):o.changes.push(Si(e,t)),o.anchorAfter=n.anchor,o.headAfter=n.head}else{o={changes:[Si(e,t)],generation:i.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(o),i.generation=++i.maxGeneration;while(i.done.length>i.undoDepth)i.done.shift()}i.lastTime=s,i.lastOp=r,i.lastOrigin=t.origin}function Ti(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function Ni(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Ti(n[r]));return i}function Ci(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],s=i.changes,o=[];r.push({changes:o,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var u=0;u<s.length;++u){var a=s[u],f;o.push({from:a.from,to:a.to,text:a.text});if(t)for(var l in a)(f=l.match(/^spans_(\d+)$/))&&ns(t,Number(f[1]))>-1&&(es(o)[l]=a[l],delete a[l])}}return r}function ki(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Li(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;for(var u=0;u<s.changes.length;++u){var a=s.changes[u];s.copied||(a.from=Mn(a.from),a.to=Mn(a.to));if(n<a.from.line)a.from.line+=r,a.to.line+=r;else if(t<=a.to.line){o=!1;break}}s.copied||(s.anchorBefore=Mn(s.anchorBefore),s.headBefore=Mn(s.headBefore),s.anchorAfter=Mn(s.anchorAfter),s.readAfter=Mn(s.headAfter),s.copied=!0),o?(ki(s.anchorBefore),ki(s.headBefore),ki(s.anchorAfter),ki(s.headAfter)):(e.splice(0,i+1),i=0)}}function Ai(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Li(e.done,n,r,i),Li(e.undone,n,r,i)}function Oi(){Hi(this)}function Mi(e){return e.stop||(e.stop=Oi),e}function _i(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Di(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Pi(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function Hi(e){_i(e),Di(e)}function Bi(e){return e.target||e.srcElement}function ji(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),m&&e.ctrlKey&&t==1&&(t=3),t}function Fi(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Ii(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function qi(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function zi(e,t){function i(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);Ri||(++Ui,Ri=[],setTimeout(Xi,0));for(var s=0;s<n.length;++s)Ri.push(i(n[s]))}function Wi(e,t,n){return qi(e,n||t.type,e,t),Pi(t)||t.codemirrorIgnore}function Xi(){--Ui;var e=Ri;Ri=null;for(var t=0;t<e.length;++t)e[t]()}function Vi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function $i(e){e.prototype.on=function(e,t){Fi(this,e,t)},e.prototype.off=function(e,t){Ii(this,e,t)}}function Qi(){this.id=null}function Gi(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;s<t;++s)e.charAt(s)=="	"?o+=n-o%n:++o;return o}function Zi(e){while(Yi.length<=e)Yi.push(es(Yi)+" ");return Yi[e]}function es(e){return e[e.length-1]}function ts(e){if(d)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function ns(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function rs(e,t){function n(){}n.prototype=e;var r=new n;return t&&is(t,r),r}function is(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ss(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function os(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function as(e){return/\w/.test(e)||e>"Â"&&(e.toUpperCase()!=e.toLowerCase()||us.test(e))}function fs(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function cs(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")ds(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function hs(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ps(e,t){return hs(e).appendChild(t)}function ds(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function vs(e){return e.getBoundingClientRect()}function gs(){return!1}function bs(e){if(ys!=null)return ys;var t=cs("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ps(e,t),t.offsetWidth&&(ys=t.offsetHeight-t.clientHeight),ys||0}function Es(e){if(ws==null){var t=cs("span","â");ps(e,cs("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ws=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return ws?cs("span","â"):cs("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Cs(e,t,n,r){if(!e)return r(t,n,"ltr");var i=!1;for(var s=0;s<e.length;++s){var o=e[s];if(o.from<n&&o.to>t||t==n&&o.to==t)r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?"rtl":"ltr"),i=!0}i||r(t,n,"ltr")}function ks(e){return e.level%2?e.to:e.from}function Ls(e){return e.level%2?e.from:e.to}function As(e){var t=bi(e);return t?ks(t[0]):0}function Os(e){var t=bi(e);return t?Ls(es(t)):e.text.length}function Ms(e,t){var n=hi(e.doc,t),r=_r(e.doc,n);r!=n&&(t=mi(r));var i=bi(r),s=i?i[0].level%2?Os(r):As(r):0;return Ln(t,s)}function _s(e,t){var n,r;while(n=Mr(r=hi(e.doc,t)))t=n.find().to.line;var i=bi(r),s=i?i[0].level%2?As(r):Os(r):r.text.length;return Ln(t,s)}function Ds(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:t<n}function Hs(e,t){for(var n=0,r;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return Ps=null,n;if(i.from==t||i.to==t){if(r!=null)return Ds(e,i.level,e[r].level)?(Ps=r,n):(Ps=n,r);r=n}}return Ps=null,r}function Bs(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&ls.test(e.text.charAt(t)));return t}function js(e,t,n,r){var i=bi(e);if(!i)return Fs(e,t,n,r);var s=Hs(i,t),o=i[s],u=Bs(e,t,o.level%2?-n:n,r);for(;;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return Hs(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);o=i[s+=n];if(!o)return null;n>0==o.level%2?u=Bs(e,o.to,-1,r):u=Bs(e,o.from,1,r)}}function Fs(e,t,n,r){var i=t+n;if(r)while(i>0&&ls.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/Trident\/([7-9]|\d{2,})\./,s=/WebKit\//.test(navigator.userAgent),o=s&&/Qt\/\d+\.\d+/.test(navigator.userAgent),u=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),f=/Apple Computer/.test(navigator.vendor),l=/KHTML\//.test(navigator.userAgent),c=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),p=/PhantomJS/.test(navigator.userAgent),d=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),v=d||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),m=d||/Mac/.test(navigator.platform),g=/win/i.test(navigator.platform),y=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);y&&(y=Number(y[1])),y&&y>=15&&(a=!1,s=!0);var b=m&&(o||a&&(y==null||y<12.11)),w=e||t&&!r,E=!1,S=!1,Nt,Lt=0,Wt,Xt,Qt=0,tn=0,nn=null;t?nn=-0.53:e?nn=15:u?nn=-0.7:f&&(nn=-1/3);var un,ln=null,vn,gn=x.changeEnd=function(e){return e.text?Ln(e.from.line+e.text.length-1,es(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};x.Pos=Ln,x.prototype={constructor:x,focus:function(){window.focus(),It(this),Bt(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,Zn.hasOwnProperty(e)&&Mt(this,Zn[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||typeof t[n]!="string"&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Mt(null,function(e,t){var n=e.token?e:x.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Pt(this)}),removeOverlay:Mt(null,function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e=="string"&&r.name==e){t.splice(n,1),this.state.modeGen++,Pt(this);return}}}),indentLine:Mt(null,function(e,t,n){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Hn(this.doc,e)&&$n(this,e,t,n)}),indentSelection:Mt(null,function(e){var t=this.doc.sel;if(An(t.from,t.to))return $n(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)$n(this,r,e)}),getTokenAt:function(e,t){var n=this.doc;e=Dn(n,e);var r=it(this,e.line,t),i=this.doc.mode,s=hi(n,e.line),o=new mr(s.text,this.options.tabSize);while(o.pos<e.ch&&!o.eol()){o.start=o.pos;var u=i.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:u||null,type:u||null,state:r}},getTokenTypeAt:function(e){e=Dn(this.doc,e);var t=Vr(this,hi(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch;if(i==0)return t[2];for(;;){var s=n+r>>1;if((s?t[s*2-1]:0)>=i)r=s;else{if(!(t[s*2+1]<i))return t[s*2+2];n=s+1}}},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?x.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){if(!ur.hasOwnProperty(t))return;var n=ur[t],r=this.getModeAt(e);return r[t]&&n[r[t]]||r.helperType&&n[r.helperType]||n[r.name]},getStateAfter:function(e,t){var n=this.doc;return e=_n(n,e==null?n.first+n.size-1:e),it(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel;return e==null?n=r.head:typeof e=="object"?n=Dn(this.doc,e):n=e?r.from:r.to,Et(this,n,t||"page")},charCoords:function(e,t){return wt(this,Dn(this.doc,e),t||"page")},coordsChar:function(e,t){return e=bt(this,e,t||"page"),xt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=bt(this,{top:e,left:0},t||"page").top,gi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=hi(this.doc,e);return yt(this,hi(this.doc,e),{top:0,left:0},t||"page").top+(n?i.height:0)},defaultTextHeight:function(){return Ct(this.display)},defaultCharWidth:function(){return kt(this.display)},setGutterMarker:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&fs(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Mt(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Pt(t,r,r+1),fs(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("(?:^|\\s)"+n+"(?:$|\\s)")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;e[r]=i.slice(0,s.index)+(!s.index||o==i.length?"":" ")+i.slice(o)||null}return!0})}),addLineWidget:Mt(null,function(e,t,n){return qr(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Hn(this.doc,e))return null;var t=e;e=hi(this.doc,e);if(!e)return null}else{var t=mi(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=Et(this,Dn(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&zn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Mt(null,cn),execCommand:function(e){return lr[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=Dn(this.doc,e);s<t;++s){o=Kn(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Mt(null,function(e,t){var n=this.doc.sel,r;n.shift||n.extend||An(n.from,n.to)?r=Kn(this.doc,n.head,e,t,this.options.rtlMoveVisually):r=e<0?n.from:n.to,Bn(this.doc,r,r,e)}),deleteH:Mt(null,function(e,t){var n=this.doc.sel;An(n.from,n.to)?kn(this.doc,"",n.from,Kn(this.doc,n.head,e,t,!1),"+delete"):kn(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=Dn(this.doc,e);o<t;++o){var a=Et(this,u,"div");s==null?s=a.left:a.left=s,u=Qn(this,a,i,n);if(u.hitSide)break}return u},moveV:Mt(null,function(e,t){var n=this.doc.sel,r=Et(this,n.head,"div");n.goalColumn!=null&&(r.left=n.goalColumn);var i=Qn(this,r,e,t);t=="page"&&Vn(this,0,wt(this,i,"div").top-r.top),Bn(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:Mt(null,function(e,t){Xn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=Ji;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Mt(null,function(e,t){e==null?e={from:this.doc.sel.head,to:null}:typeof e=="number"?e={from:Ln(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),t||(t=0);var n=e;e.from.line!=null&&(this.curOp.scrollToPos={from:e.from,to:e.to,margin:t},n={from:Et(this,e.from),to:Et(this,e.to)});var r=Wn(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-t,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+t);Xn(this,r.scrollLeft,r.scrollTop)}),setSize:Mt(null,function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(e){return Dt(this,e)},refresh:Mt(null,function(){var e=this.display.cachedTextHeight==null;vt(this),Xn(this,this.doc.scrollLeft,this.doc.scrollTop),Pt(this),e&&L(this)}),swapDoc:Mt(null,function(e){var t=this.doc;return t.cm=null,ci(this,e),vt(this),Ft(this,!0),Xn(this,e.scrollLeft,e.scrollTop),zi(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},$i(x);var Zn=x.optionHandlers={},er=x.defaults={},nr=x.Init={toString:function(){return"CodeMirror.Init"}};tr("value","",function(e,t){e.setValue(t)},!0),tr("mode",null,function(e,t){e.doc.modeOption=t,N(e)},!0),tr("indentUnit",2,N,!0),tr("indentWithTabs",!1),tr("smartIndent",!0),tr("tabSize",4,function(e){N(e),vt(e),Pt(e)},!0),tr("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),tr("specialCharPlaceholder",Gr,function(e){e.refresh()},!0),tr("electricChars",!0),tr("rtlMoveVisually",!g),tr("theme","default",function(e){O(e),M(e)},!0),tr("keyMap","default",A),tr("extraKeys",null),tr("onKeyEvent",null),tr("onDragEvent",null),tr("lineWrapping",!1,C,!0),tr("gutters",[],function(e){H(e.options),M(e)},!0),tr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?R(e.display)+"px":"0",e.refresh()},!0),tr("coverGutterNextToScrollbar",!1,B,!0),tr("lineNumbers",!1,function(e){H(e.options),M(e)},!0),tr("firstLineNumber",1,M,!0),tr("lineNumberFormatter",function(e){return e},M,!0),tr("showCursorWhenSelecting",!1,G,!0),tr("resetSelectionOnContextMenu",!0),tr("readOnly",!1,function(e,t){t=="nocursor"?(dn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Ft(e,!0))}),tr("dragDrop",!0),tr("cursorBlinkRate",530),tr("cursorScrollMargin",0),tr("cursorHeight",1),tr("workTime",100),tr("workDelay",100),tr("flattenSpans",!0),tr("pollInterval",100),tr("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),tr("historyEventDelay",500),tr("viewportMargin",10,function(e){e.refresh()},!0),tr("maxHighlightLength",1e4,function(e){N(e),e.refresh()},!0),tr("crudeMeasuringFrom",1e4),tr("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),tr("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),tr("autofocus",null);var rr=x.modes={},ir=x.mimeModes={};x.defineMode=function(e,t){!x.defaults.mode&&e!="null"&&(x.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}rr[e]=t},x.defineMIME=function(e,t){ir[e]=t},x.resolveMode=function(e){if(typeof e=="string"&&ir.hasOwnProperty(e))e=ir[e];else if(e&&typeof e.name=="string"&&ir.hasOwnProperty(e.name)){var t=ir[e.name];e=rs(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return x.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},x.getMode=function(e,t){var t=x.resolveMode(t),n=rr[t.name];if(!n)return x.getMode(e,"text/plain");var r=n(e,t);if(sr.hasOwnProperty(t.name)){var i=sr[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},x.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),x.defineMIME("text/plain","null");var sr=x.modeExtensions={};x.extendMode=function(e,t){var n=sr.hasOwnProperty(e)?sr[e]:sr[e]={};is(t,n)},x.defineExtension=function(e,t){x.prototype[e]=t},x.defineDocExtension=function(e,t){ui.prototype[e]=t},x.defineOption=tr;var or=[];x.defineInitHook=function(e){or.push(e)};var ur=x.helpers={};x.registerHelper=function(e,t,n){ur.hasOwnProperty(e)||(ur[e]=x[e]={}),ur[e][t]=n},x.isWordChar=as,x.copyState=ar,x.startState=fr,x.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var lr=x.commands={selectAll:function(e){e.setSelection(Ln(e.firstLine(),0),Ln(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!An(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,Ln(t.line+1,0),"+delete"):e.replaceRange("",t,r?n:Ln(t.line),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Ln(t,0),Ln(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Ln(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Ln(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ln(e.lastLine()))},goLineStart:function(e){e.extendSelection(Ms(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=Ms(e,t.line),r=e.getLineHandle(n.line),i=bi(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection(Ln(n.line,o?0:s))}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(_s(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Ln(t.line,t.ch-1),Ln(t.line,t.ch+1))},newlineAndIndent:function(e){Mt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},cr=x.keyMap={};cr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},cr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},cr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},cr["default"]=m?cr.macDefault:cr.pcDefault,cr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},x.lookupKey=pr,x.isModifierKey=dr,x.keyName=vr,x.fromTextArea=function(e,t){function i(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){Fi(e.form,"submit",i);if(!t.leaveSubmitMethodAlone){var s=e.form,o=s.submit;try{var u=s.submit=function(){i(),s.submit=o,s.submit(),s.submit=u}}catch(r){}}}e.style.display="none";var a=x(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(Ii(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},a},mr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Gi(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},x.StringStream=mr,x.TextMarker=gr,$i(gr),gr.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&At(e);if(Vi(this,"clear")){var n=this.find();n&&zi(this,"clear",n.from,n.to)}var r=null,i=null;for(var s=0;s<this.lines.length;++s){var o=this.lines[s],u=Er(o.markedSpans,this);u.to!=null&&(i=mi(o)),o.markedSpans=Sr(o.markedSpans,u),u.from!=null?r=mi(o):this.collapsed&&!Dr(this.doc,o)&&e&&vi(o,Ct(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var a=_r(e.doc,this.lines[s]),f=D(e.doc,a);f>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}r!=null&&e&&Pt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&In(e)),t&&Ot(e)},gr.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=Er(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=mi(r);i.from!=null&&(e=Ln(s,i.from)),i.to!=null&&(t=Ln(s,i.to))}}return this.type=="bookmark"?e:e&&{from:e,to:t}},gr.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(!e||!t)return;this.type!="bookmark"&&(e=e.from);var n=hi(this.doc,e.line);lt(t,n);if(e.line>=t.display.showingFrom&&e.line<t.display.showingTo){for(var r=t.display.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj==n){r.offsetHeight!=n.height&&vi(n,r.offsetHeight);break}Dt(t,function(){t.curOp.selectionChanged=t.curOp.forceUpdate=t.curOp.updateMaxLine=!0})}},gr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ns(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},gr.prototype.detachLine=function(e){this.lines.splice(ns(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},x.SharedTextMarker=br,$i(br),br.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();zi(this,"clear")},br.prototype.find=function(){return this.primary.find()};var jr=x.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};$i(jr),jr.prototype.clear=Fr(function(){var e=this.line.widgets,t=mi(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null);var r=yi(this.cm,this.line)<this.cm.doc.scrollTop;vi(this.line,Math.max(0,this.line.height-Ir(this))),r&&Vn(this.cm,0,-this.height),Pt(this.cm,t,t+1)}),jr.prototype.changed=Fr(function(){var e=this.height;this.height=null;var t=Ir(this)-e;if(!t)return;vi(this.line,this.line.height+t);var n=mi(this.line);Pt(this.cm,n,n+1)});var Rr=x.Line=function(e,t,n){this.text=e,Br(this,t),this.height=n?n(this):1};$i(Rr);var Jr={};ii.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,zr(i),zi(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},si.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25){var u=[];this.collapse(u),this.children=[new ii(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertInner(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new ii(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new si(t);if(!e.parent){var r=new si(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=ns(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}};var oi=0,ui=x.Doc=function(e,t,n){if(!(this instanceof ui))return new ui(e,t,n);n==null&&(n=0),si.call(this,[new ii([new Rr("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=wi(),this.cleanGeneration=1,this.frontier=n;var r=Ln(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++oi,this.modeOption=t,typeof e=="string"&&(e=Ss(e)),ri(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};ui.prototype=rs(si.prototype,{constructor:ui,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=di(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Ln(this.first,0),n=this.first+this.size-1;En(this,{from:t,to:Ln(n,hi(this,n).text.length),text:Ss(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Dn(this,t),n=n?Dn(this,n):t,kn(this,e,t,n,r)},getRange:function(e,t,n){var r=pi(this,Dn(this,e),Dn(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Hn(this,e)&&kn(this,t,Ln(e,0),Dn(this,Ln(e)))},removeLine:function(e){e?kn(this,"",Dn(this,Ln(e-1)),Dn(this,Ln(e))):kn(this,"",Ln(0,0),Dn(this,Ln(1,0)))},getLineHandle:function(e){if(Hn(this,e))return hi(this,e)},getLineNumber:function(e){return mi(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=hi(this,e)),_r(this,e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Dn(this,e)},getCursor:function(e){var t=this.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,Mn(n)},somethingSelected:function(){return!An(this.sel.head,this.sel.anchor)},setCursor:_t(function(e,t,n){var r=Dn(this,typeof e=="number"?Ln(e,t||0):e);n?Bn(this,r):Fn(this,r,r)}),setSelection:_t(function(e,t,n){Fn(this,Dn(this,e),Dn(this,t||e),n)}),extendSelection:_t(function(e,t,n){Bn(this,Dn(this,e),t&&Dn(this,t),n)}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){En(this,{from:this.sel.from,to:this.sel.to,text:Ss(e),origin:n},t||"around")},undo:_t(function(){xn(this,"undo")}),redo:_t(function(){xn(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=wi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ci(this.history.done),undone:Ci(this.history.undone)}},setHistory:function(e){var t=this.history=wi(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return yr(this,Dn(this,e),Dn(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft};return e=Dn(this,e),yr(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Dn(this,e);var t=[],n=hi(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),Dn(this,Ln(n,t))},indexFromPos:function(e){e=Dn(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ui(di(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new ui(di(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(e){e instanceof x&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this);break}if(e.history==this.history){var r=[e.id];li(e,function(e){r.push(e.id)},!0),e.history=wi(),e.history.done=Ci(this.history.done,r),e.history.undone=Ci(this.history.undone,r)}},iterLinkedDocs:function(e){li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ui.prototype.eachLine=ui.prototype.iter;var ai="iter insert remove copy getEditor".split(" ");for(var fi in ui.prototype)ui.prototype.hasOwnProperty(fi)&&ns(ai,fi)<0&&(x.prototype[fi]=function(e){return function(){return e.apply(this.doc,arguments)}}(ui.prototype[fi]));$i(ui),x.e_stop=Hi,x.e_preventDefault=_i,x.e_stopPropagation=Di;var Ri,Ui=0;x.on=Fi,x.off=Ii,x.signal=qi;var Ji=30,Ki=x.Pass={toString:function(){return"CodeMirror.Pass"}};Qi.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},x.countColumn=Gi;var Yi=[""],us=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ls=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0â\u1DFF\u20D0â\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20â\uFE2F]/;x.replaceGetRect=function(e){vs=e};var ms=function(){if(r)return!1;var e=cs("div");return"draggable"in e||"dragDrop"in e}();e?gs=function(e,t){return e.charCodeAt(t-1)==36&&e.charCodeAt(t)==39}:f&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?gs=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:s&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?gs=function(e,t){var n=e.charCodeAt(t-1);return n>=8208&&n<=8212}:s&&(gs=function(e,t){if(t>1&&e.charCodeAt(t-1)==45){if(/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t)))return!0;if(t>2&&/[\d\.,]/.test(e.charAt(t-2))&&/[\d\.,]/.test(e.charAt(t)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|â¦[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var ys,ws,Ss="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};x.splitLines=Ss;var xs=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Ts=function(){var e=cs("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Ns={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};x.keyNames=Ns,function(){for(var e=0;e<10;e++)Ns[e+48]=String(e);for(var e=65;e<=90;e++)Ns[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Ns[e+111]=Ns[e+63235]="F"+e}();var Ps,Is=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,f=[];for(var l=0,c;l<t;++l)f.push(c=n(e.charCodeAt(l)));for(var l=0,h=a;l<t;++l){var c=f[l];c=="m"?f[l]=h:h=c}for(var l=0,p=a;l<t;++l){var c=f[l];c=="1"&&p=="r"?f[l]="n":s.test(c)&&(p=c,c=="r"&&(f[l]="R"))}for(var l=1,h=f[0];l<t-1;++l){var c=f[l];c=="+"&&h=="1"&&f[l+1]=="1"?f[l]="1":c==","&&h==f[l+1]&&(h=="1"||h=="n")&&(f[l]=h),h=c}for(var l=0;l<t;++l){var c=f[l];if(c==",")f[l]="N";else if(c=="%"){for(var d=l+1;d<t&&f[d]=="%";++d);var v=l&&f[l-1]=="!"||d<t-1&&f[d]=="1"?"1":"N";for(var m=l;m<d;++m)f[m]=v;l=d-1}}for(var l=0,p=a;l<t;++l){var c=f[l];p=="L"&&c=="1"?f[l]="L":s.test(c)&&(p=c)}for(var l=0;l<t;++l)if(i.test(f[l])){for(var d=l+1;d<t&&i.test(f[d]);++d);var g=(l?f[l-1]:a)=="L",y=(d<t-1?f[d]:a)=="L",v=g||y?"L":"R";for(var m=l;m<d;++m)f[m]=v;l=d-1}var b=[],w;for(var l=0;l<t;)if(o.test(f[l])){var E=l;for(++l;l<t&&o.test(f[l]);++l);b.push({from:E,to:l,level:0})}else{var S=l,x=b.length;for(++l;l<t&&f[l]!="L";++l);for(var m=S;m<l;)if(u.test(f[m])){S<m&&b.splice(x,0,{from:S,to:m,level:1});var T=m;for(++m;m<l&&u.test(f[m]);++m);b.splice(x,0,{from:T,to:m,level:2}),S=m}else++m;S<l&&b.splice(x,0,{from:S,to:l,level:1})}return b[0].level==1&&(w=e.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),es(b).level==1&&(w=e.match(/\s+$/))&&(es(b).to-=w[0].length,b.push({from:t-w[0].length,to:t,level:0})),b[0].level!=es(b).level&&b.push({from:t,to:t,level:b[0].level}),b}}();return x.version="3.19.1",x}(),define("codemirror",function(e){return function(){var t,n;return t||e.CodeMirror}}(this)),CodeMirror.defineMode("javascript",function(e,t){function a(e,t,n){return t.tokenize=n,n(e,t)}function f(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function h(e,t,n){return l=e,c=n,t}function p(e,t){var n=e.next();if(n=='"'||n=="'")return a(e,t,d(n));if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return h("number","number");if(/[\[\]{}\(\),;\:\.]/.test(n))return h(n);if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),h("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),h("number","number");if(n=="/")return e.eat("*")?a(e,t,v):e.eat("/")?(e.skipToEnd(),h("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(t.lastType)?(f(e,"/"),e.eatWhile(/[gimy]/),h("regexp","string-2")):(e.eatWhile(u),h("operator",null,e.current()));if(n=="#")return e.skipToEnd(),h("error","error");if(u.test(n))return e.eatWhile(u),h("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=o.propertyIsEnumerable(r)&&o[r];return i&&t.lastType!="."?h(i.type,i.style,r):h("variable","variable",r)}function d(e){return function(t,n){return f(t,e)||(n.tokenize=p),h("string","string")}}function v(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=p;break}n=r=="*"}return h("comment","comment")}function g(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function y(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function b(e,t,n,r,s){var o=e.cc;w.state=e,w.stream=s,w.marked=null,w.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():i?M:O;if(u(n,r)){while(o.length&&o[o.length-1].lex)o.pop()();return w.marked?w.marked:n=="variable"&&y(e,r)?"variable-2":t}}}function E(){for(var e=arguments.length-1;e>=0;e--)w.cc.push(arguments[e])}function S(){return E.apply(null,arguments),!0}function x(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=w.state;if(n.context){w.marked="def";if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;n.globalVars={name:e,next:n.globalVars}}}function N(){w.state.context={prev:w.state.context,vars:w.state.localVars},w.state.localVars=T}function C(){w.state.localVars=w.state.context.vars,w.state.context=w.state.context.prev}function k(e,t){var n=function(){var n=w.state,r=n.indented;n.lexical.type=="stat"&&(r=n.lexical.indented),n.lexical=new g(r,w.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function L(){var e=w.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function A(e){return function(t){return t==e?S():e==";"?E():S(arguments.callee)}}function O(e){return e=="var"?S(k("vardef"),V,A(";"),L):e=="keyword a"?S(k("form"),M,O,L):e=="keyword b"?S(k("form"),O,L):e=="{"?S(k("}"),z,L):e==";"?S():e=="if"?S(k("form"),M,O,L,J):e=="function"?S(Z):e=="for"?S(k("form"),A("("),k(")"),K,A(")"),L,O,L):e=="variable"?S(k("stat"),F):e=="switch"?S(k("form"),M,k("}","switch"),A("{"),z,L,L):e=="case"?S(M,A(":")):e=="default"?S(A(":")):e=="catch"?S(k("form"),N,A("("),et,A(")"),O,L,C):E(k("stat"),M,A(";"),L)}function M(e){return D(e,!1)}function _(e){return D(e,!0)}function D(e,t){var n=t?j:B;return m.hasOwnProperty(e)?S(n):e=="function"?S(Z):e=="keyword c"?S(t?H:P):e=="("?S(k(")"),P,A(")"),L,n):e=="operator"?S(t?_:M):e=="["?S(k("]"),U(_,"]"),L,n):e=="{"?S(k("}"),U(q,"}"),L,n):S()}function P(e){return e.match(/[;\}\)\],]/)?E():E(M)}function H(e){return e.match(/[;\}\)\],]/)?E():E(_)}function B(e,t){return e==","?S(M):j(e,t,!1)}function j(e,t,n){var r=n==0?B:j,i=n==0?M:_;if(e=="operator")return/\+\+|--/.test(t)?S(r):t=="?"?S(M,A(":"),i):S(i);if(e==";")return;if(e=="(")return S(k(")","call"),U(_,")"),L,r);if(e==".")return S(I,r);if(e=="[")return S(k("]"),P,A("]"),L,r)}function F(e){return e==":"?S(L,O):E(B,A(";"),L)}function I(e){if(e=="variable")return w.marked="property",S()}function q(e,t){if(e=="variable"){w.marked="property";if(t=="get"||t=="set")return S(R)}else if(e=="number"||e=="string")w.marked=e+" property";if(m.hasOwnProperty(e))return S(A(":"),_)}function R(e){return e==":"?S(M):e!="variable"?S(A(":"),M):(w.marked="property",S(Z))}function U(e,t){function n(r){if(r==","){var i=w.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),S(e,n)}return r==t?S():S(A(t))}return function(r){return r==t?S():E(e,n)}}function z(e){return e=="}"?S():E(O,z)}function W(e){return e==":"?S(X):E()}function X(e){return e=="variable"?(w.marked="variable-3",S()):E()}function V(e,t){return e=="variable"?(x(t),s?S(W,$):S($)):E()}function $(e,t){if(t=="=")return S(_,$);if(e==",")return S(V)}function J(e,t){if(e=="keyword b"&&t=="else")return S(k("form"),O,L)}function K(e){return e=="var"?S(V,A(";"),G):e==";"?S(G):e=="variable"?S(Q):E(M,A(";"),G)}function Q(e,t){return t=="in"?S(M):S(B,G)}function G(e,t){return e==";"?S(Y):t=="in"?S(M):E(M,A(";"),Y)}function Y(e){e!=")"&&S(M)}function Z(e,t){if(e=="variable")return x(t),S(Z);if(e=="(")return S(k(")"),N,U(et,")"),L,O,C)}function et(e,t){if(e=="variable")return x(t),s?S(W):S()}var n=e.indentUnit,r=t.statementIndent,i=t.json,s=t.typescript,o=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},u={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o,"this":e("this")};if(s){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"class":e("class"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),"super":e("super"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),u=/[+\-*&%=<>!?|~^]/,l,c,m={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},w={state:null,column:null,marked:null,cc:null},T={name:"this",next:{name:"arguments"}};return L.lex=!0,{startState:function(e){return{tokenize:p,lastType:null,cc:[],lexical:new g((e||0)-n,0,"block",!1),localVars:t.localVars,globalVars:t.globalVars,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation());if(t.tokenize!=v&&e.eatSpace())return null;var n=t.tokenize(e,t);return l=="comment"?n:(t.lastType=l!="operator"||c!="++"&&c!="--"?l:"incdec",b(t,n,l,c,e))},indent:function(e,i){if(e.tokenize==v)return CodeMirror.Pass;if(e.tokenize!=p)return 0;var s=i&&i.charAt(0),o=e.lexical;for(var u=e.cc.length-1;u>=0;--u){var a=e.cc[u];if(a==L)o=o.prev;else if(a!=J||/^else\b/.test(i))break}o.type=="stat"&&s=="}"&&(o=o.prev),r&&o.type==")"&&o.prev.type=="stat"&&(o=o.prev);var f=o.type,l=s==f;return f=="vardef"?o.indented+(e.lastType=="operator"||e.lastType==","?4:0):f=="form"&&s=="{"?o.indented:f=="form"?o.indented+n:f=="stat"?o.indented+(e.lastType=="operator"||e.lastType==","?r||n:0):o.info=="switch"&&!l&&t.doubleIndentSwitch!=0?o.indented+(/^(?:case|default)\b/.test(i)?n:2*n):o.align?o.column+(l?0:1):o.indented+(l?0:n)},electricChars:":{}",blockCommentStart:i?null:"/*",blockCommentEnd:i?null:"*/",lineComment:i?null:"//",fold:"brace",helperType:i?"json":"javascript",jsonMode:i}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),define("codemirror.mode.javascript",function(){}),define("views/devices",["jquery","underscore","Leaflet","Pusher","handlebars","moment","form2js","js2form","hbs!tpl/tabs/devices.html","hbs!tpl/modals/app.new.html","hbs!tpl/modals/devices.map.settings.html","hbs!tpl/modals/device.settings.html","hbs!tpl/modals/action.sendmessage.html","hbs!tpl/rows/device.html","jquery.codemirror","leaflet.bouncemarker","leaflet.animatedmarker","leaflet.usermarker","leaflet.contextmenu","lvector","jsonlint","codemirror","codemirror.mode.javascript"],function($,_,L,Pusher,Handlebars,moment,form2js,js2form,tmpl_DT,tpl_1,tpl_2,tpl_Settings,tpl_3,tpl_RowDevice){console.log("initializing app::devices");var $=$||$(function(e){e=e});return CodeMirror.registerHelper("lint","json",function(e){var t=[];jsonlint.parseError=function(e,n){var r=n.loc;t.push({from:CodeMirror.Pos(r.first_line-1,r.first_column),to:CodeMirror.Pos(r.last_line-1,r.last_column),message:e})};try{jsonlint.parse(e)}catch(n){}return t}),CodeMirror.jsonValidator=CodeMirror.lint.json,Handlebars.registerHelper("key_value",function(e,t){var n="",r;for(r in e)e.hasOwnProperty(r)&&(n+=t.fn({key:r,value:e[r]}));return n}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),SP.Tab.Devices={MAP:!1,Settings:{},mapShowOptions:function(){js2form(document.getElementById("form-c3"),SP.Tab.Devices.Settings),$(".modal.c3").trigger("openModal"),console.log(SP.Tab.Devices.Settings)},setMarkerIdleState:function(e){var t=1,n=Math.round((new Date).getTime()/1e3);return console.log((new Date).getTime()),console.log("elapsed: "+(n-e._timestamp)),console.log("idleTimeout is set to "+SP.Tab.Devices.Settings.idleTimeout*60+" seconds"),n-e._timestamp>=SP.Tab.Devices.Settings.idleTimeout*60&&(t=2),t},setDeviceIdleState:function(e,t){$(".device-list ul li.device").each(function(n){$(this).attr("data")==e&&(console.log("Changing idlestate to "+t+" for index: "+n),$(".device-list ul li.device").eq(n).find("div.led").first().removeClass("state state1 state2").addClass("state"+t))})}},getUTF8Length=function(e){var t=0;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r>127&&r<2048?t+=2:t+=3}return t},http_online=function(){$("body").removeClass().addClass("status-bar-active online"),$("#status-bar p").text("Online"),setTimeout(function(){$("body").removeClass("status-bar-active")},2e3)},http_offline=function(){$("body").removeClass().addClass("status-bar-active offline"),$("#status-bar p").text("SparkDash is offline")},pushConnectionEvt_state_change=function(e){switch(e.current){case"unavailable":pushClient_unavailable();break;case"connecting":pushClient_connecting();break;case"connected":pushClient_connected();break;case"disconnected":pushClient_disconnected();break;case"failed":pushClient_failed()}},pushClient_initialized=function(){console.log("pusher: initialized"),$("body").removeClass().addClass("status-bar-active"),$("#status-bar p").text("Initializing")},pushClient_connecting=function(){console.log("pusher: connecting"),$("body").removeClass().addClass("status-bar-active pause"),$("#status-bar p").text("Connecting")},pushClient_connected=function(){console.log("pusher: connected"),SP.Tab.Devices.MAP&&($("body").removeClass().addClass("status-bar-active online"),$("#status-bar p").text("Connected!"),setTimeout(function(){$("body").removeClass("status-bar-active")},2e3))},pushClient_unavailable=function(){console.log("pusher: unavailable"),$("body").removeClass().addClass("status-bar-active offline"),$("#status-bar p").text("SparkDash is offline")},pushClient_failed=function(e){console.log("pusher: failed"),$("#status-bar p").text(e||"SparkDash is not supported by the browser."),$("body").removeClass().addClass("status-bar-active offline")},pushClient_disconnected=function(){console.log("pusher: disconnected"),$("#status-bar p").text("SparkDash is not supported by the browser."),$("body").removeClass().addClass("status-bar-active")},pushClient_connecting_in=function(e){console.log("pusher: connecting_in"),$("#status-bar p").text("SparkDash is unable to connect.  I will try again in "+e+" seconds.")},pushChannel_subscription_error=function(e){console.log("pusher: failed to subscribe"),$("body").removeClass().addClass("status-bar-active pause"),e==408||e==503?$("#status-bar p").text("SparkDash could not connect to the main channel. Retry?"):$("#status-bar p").text("SparkDash failed to subscribe to the main channel. Error: "+e)},showOfflineBanner=function(){$("#main-container").append('<p style="text-align:center;margin-top:100px;"><h1 style="text-align:center;">You are offline.</h1><h3 style="text-align:center;">Refresh to try again</h3></p>')},modal_Message_open=function(e){$(".modal.c4 form").show(),$(".modal.c4 .header").show(),$(".modal.c4 .loader").hide().text("Please wait while we confirm receipt."),$(e).find("#title").html('<i style="background-color:#ffff33;padding:3px;border-radius:3px;">'+SP.DB.devices.countMarked()+"</i> devices selected")},modal_Message_close=function(e){$(e).find("#title").text(""),$(e).find("textarea#message").val("")},modal_Message_validate=function(){console.log(" Bytes: "+getUTF8Length($(this).val()))},modal_Settings_open=function(e){SP.UI.FF.StatusCode=CodeMirror.fromTextArea($(".expression-preview-code")[0],{mode:"javascript",_hasChanged:!1,lineNumbers:!0,lineWrapping:!0,gutters:["CodeMirror-lint-markers"],lint:!0}),SP.UI.FF.StatusCode.on("change",modal_Settings_device_preview),SP.UI.FF.StatusData=CodeMirror.fromTextArea($(".expression-preview-data")[0],{mode:"application/json",_hasChanged:!1,lineNumbers:!0,lineWrapping:!0,smartIndent:!1,fixedGutter:!1,gutters:["CodeMirror-lint-markers"],lint:!0}),SP.UI.FF.StatusData.on("change",modal_Settings_device_preview),SP.UI.FF.MarkerCode=CodeMirror.fromTextArea($(".marker-preview-code")[0],{mode:"javascript",_hasChanged:!1,lineNumbers:!0,lineWrapping:!0,smartIndent:!1,fixedGutter:!1,gutters:["CodeMirror-lint-markers"],lint:!0}),SP.UI.FF.MarkerCode.on("change",modal_Settings_device_preview)},modal_Settings_device_preview=function(e){e._hasChanged=!0;var t=$(".device-preview li[data='ffedit-preview-ef12155c-a286-3253-bfb1-24dbe403a1fa']").find(".content"),n=evalFunction(SP.UI.FF.StatusCode.getValue());if(!n.errorMessage)try{var r=SP.UI.FF.StatusData.getValue();!r&&!SP.UI.FF.StatusData._hasChanged?r={name:"Bob"}:r=JSON.parse(r),t.html(n.call(this,SP.UI.tmp.device.first().asJSON(),r))}catch(e){t.html(e+"")}else t.html(n.errorMessage)},modal_Settings_close=function(e){$(".modal.settings .CodeMirror.CodeMirror-wrap").remove(),$(".modal.settings section").removeClass().first().addClass("active"),$(".modal.settings .header ul li").removeClass(),SP.UI.FF.StatusCode=null,SP.UI.FF.StatusData=null},modal_Settings_click_main_tabs=function(){$(".modal.settings section").removeClass(),$(".modal.settings .header ul li").removeClass(),$(this).addClass("pure-menu-selected");var e=$(".modal.settings section")[$(this).index()];$(e).addClass("active");switch($(e).attr("id")){case"map":SP.UI.FF.MarkerCode._hasChanged||SP.UI.FF.MarkerCode.setValue('function(device, payload) {\n    return "Hello " + payload.name;\n}');break;case"devices":SP.UI.FF.StatusCode._hasChanged||SP.UI.FF.StatusCode.setValue('function(device, payload) {\n    return "Hello " + payload.name;\n}'),SP.UI.FF.StatusData._hasChanged||SP.UI.FF.StatusData.setValue('{\n	"name" : "Bob"\n}')}},modal_Settings_click_devices_tabs=function(){$(".modal.settings section#devices .container #panel").removeClass(),$(".modal.settings section#devices .right .pure-menu ul li").removeClass();var e=$(".modal.settings section#devices .container #panel")[$(this).index()];$(e).addClass("active"),SP.UI.FFEditorData.setValue(SP.UI.FFEditorData.getValue())},logPusher=function(e){SP.Terminal.echo(e+"\n",{finalize:function(e){e.css("color","white")}})},createMarkerBubble=function(e){var t=moment.unix(e.timestamp).format("MMM-Do hh:mm");return'<div style="font-size:22px;">'+e.userID+'</div><div style="font-size:12px;">Device: '+e.device+'</div><div style="font-size:12px;">Last Active: '+t+"</div>"},createMarker=function(e){var t=new L.userMarker([e.data.latitude,e.data.longitude],{clientID:e.clientID,bounceOnAdd:!0,pulsing:!0,accuracy:10,smallIcon:!0,contextmenu:!0,contextmenuWidth:140,contextmenuItems:[{text:"Set Idle Filter",callback:function(){alert("hi")}},{separator:!0,index:1}]});t._timestamp=e.timestamp,t.addTo(SP.Tab.Devices.MAP);var n=SP.Tab.Devices.setMarkerIdleState(t);return SP.Tab.Devices.setDeviceIdleState(t.options.clientID,n),n==2&&(t.setPulsing(!1),$(t._icon).toggleClass("idle")),t.bindPopup(createMarkerBubble(e)),t},createClient=function(e){typeof e.clientID=="object"&&(e.clientID=e.clientID[0]),typeof e.userID=="object"&&(e.userID=e.userID[0]);var t=new SP.DB.devices(e);t.bind("set:status",setClientStatus);var n=!1;e.hasOwnProperty("data")&&e.data.hasOwnProperty("latitude")&&e.data.hasOwnProperty("longitude")&&(n=createMarker(e),t.attr({_marker:n})),t.save(),SP.incrementTabIcon(1)},removeClient=function(e){typeof e.clientID=="object"&&(e.clientID=e.clientID[0]),typeof e.userID=="object"&&(e.userID=e.userID[0]),console.log("Removing client: "+e.clientID);var t=$(".device-list li[data='"+e.clientID+"']"),n=SP.DB.devices.find_by_ID(e.clientID);n&&(n.attr("_marker")&&SP.Tab.Devices.MAP.removeLayer(n.attr("_marker")),SP.DB.devices.remove(n),SP.incrementTabIcon(1)),t.remove()},updateClient=function(e){typeof e.clientID=="object"&&(e.clientID=e.clientID[0]),typeof e.userID=="object"&&(e.userID=e.userID[0]);var t=SP.DB.devices.find_by_ID(e.clientID);t?(e.hasOwnProperty("data")&&e.data.hasOwnProperty("latitude")&&e.data.hasOwnProperty("longitude")&&(t.attr("_marker")||(marker=createMarker(e),t.attr({_marker:marker}).save())),t.merge($.extend(!0,t.asJSON(),e)),t.trigger("set:status"),SP.incrementTabIcon(1),t.attr("_marker")&&t.updateMarker()):createClient(e)},messageEvt=function(e){e.data.nonce&&(console.log(e.data.nonce+" = "+$(".modal.c4 form").attr("nonce")),e.data.nonce==$(".modal.c4 form").attr("nonce")&&($(".modal.c4 .loader").text("Message successfully sent"),$(".modal.c4 form").attr("nonce",""),setTimeout(function(){$(".modal.c4").trigger("closeModal")},2e3),SP.incrementTabIcon(1)))},setClientStatus=function(){console.log("Updating device status for clientID: "+this.attr("clientID"));var e="Device "+this.attr("clientID"),t=this.getLifecycleState(),n="",r=this.attr("data");r.status&&(r.status.hasOwnProperty("id")&&typeof SP.UI.filter[r.status.id]=="function"&&(n='<div style="padding: 6px;width: 100%;">'+SP.UI.filter[r.status.id].call(this,this.asJSON())+"</div>"),r.status.hasOwnProperty("html")&&(n='<div style="padding: 6px;width: 100%;">'+r.status.html+"</div>")),this.attr("userID")&&this.attr("userID")!="*"&&(e="<b>"+this.attr("userID")+"</div>");var i=$(".device-list li[data='"+this.attr("clientID")+"']");i.find(".deviceTitle").html(e),i.find(".content").html(n),i.find(".lifecycle-state").removeClass().addClass("lifecycle-state "+t.toLowerCase()).text(t)},evalFunction=function(fnString){try{eval("var fn = "+fnString+";")}catch(e){return{errorMessage:e+""}}return fn},doDocClick=function(e){var t=$(e.target).attr("action");switch(t){case"toggleDeviceMark":var n=$(e.target).closest("li"),r=$(e.target).closest("input").attr("checked")?!0:!1,i=SP.DB.devices.find_by_ID(n.attr("data"));i.attr("marked",r),n.removeClass("selected").toggleClass("checked");break;case"selectAll":SP.DB.devices.each(function(){this.attr("marked",!0),$("input#check-"+this.attr("clientID")).prop("checked",!0),$("li.device[data='"+this.attr("clientID")+"']").removeClass("selected").addClass("checked")});break;case"selectNone":SP.DB.devices.each(function(){this.attr("marked",!1),$("input#check-"+this.attr("clientID")).prop("checked",!1),$("li.device[data='"+this.attr("clientID")+"']").removeClass("selected").removeClass("checked")});break;case"selectAction":SP.DB.devices.countMarked()?$(".modal.c4").trigger("openModal",{foo:"bar"}):alert("Mark a device before taking action.");break;case"sendMessageToDevice":alert("Not implemented. Use the /api/messages endpoint instead");break;case"openSettings":$(".modal.settings").trigger("openModal",{foo:"bar"});break;case"test_FFEdit":console.log(evalFunction(SP.UI.FF.StatusCode.getValue()))}},doFormSubmit=function(){if($(this).attr("data")=="submit-c3"){var e=form2js("form-c3",".",!0,function(e){});SP.Tab.Devices.Settings=e,SP.Network.http({url:"/_db",type:"POST",dataType:"json",data:e}).done(function(e){$(".modal.c3").trigger("closeModal"),console.log(SP.Tab.Devices.Settings)})}if($(this).attr("data")=="submit-c4"){var e=form2js("form-c4",".",!0,function(e){var t=!1;console.log(e);if(typeof e.querySelector=="function"){var e=e.querySelector('textarea[id="message"]');if(e)try{t={name:"message",value:JSON.parse(e.value)}}catch(n){t={name:"message",value:e.value}}}return t});e.nonce=(new Date).getTime()*Math.floor(Math.random()*3+1),e.devices=[],SP.DB.devices.getMarked().each(function(){e.devices.push({clientID:this.attr("clientID")})}),$(".modal.c4 form").attr("nonce",e.nonce),SP.Network.http({url:"/"+ID+"/messages",type:"POST",headers:{Authorization:"test","Content-Type":"application/json"},dataType:"json",data:JSON.stringify(e)}).done(function(e){e.status==200?($(".modal.c4 form").hide(),$(".modal.c4 .header").hide(),$(".modal.c4 .loader").show()):alert("["+e.status+"] "+e.message)})}},doDeviceClick=function(){$(".device-list ul li.device").each(function(){$(this).removeClass("selected")}),$(this).addClass("selected");var e=SP.DB.devices.find_by_ID($(this).attr("data"));if(e){var t=e.attr("_marker");t?(t.openPopup(),SP.Tab.Devices.MAP.panTo(new L.LatLng(t._latlng.lat,t._latlng.lng),{animate:!0})):console.log("This device does not have a marker")}},stopSubmit=function(e){return e.preventDefault(),!1},DB_addEvt=function(e){$(".left-panel .device-list ul").append(tpl_RowDevice(e.asJSON(),{partials:{}})),e.trigger("set:status")},setupMap=function(e){SP.Tab.Devices.Settings={id:"map",idleTimeout:"2"},SP.Tab.Devices.MAP=new L.Map("devices-map",{center:new L.LatLng(37.11,-94.48),zoom:14,scrollWheelZoom:!1,layers:[new L.TileLayer("http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",{maxZoom:18,subdomains:["otile1","otile2","otile3","otile4"],attribution:'SparkDash v1.0 - Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>. Map data (c) <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> contributors, CC-BY-SA.'})],contextmenu:!0,contextmenuWidth:140,contextmenuItems:[{text:"Show coordinates",callback:function(){alert("hi")}}]}),L.Control.Command=L.Control.extend({options:{position:"topleft"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-control-command");L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation).addListener(t,"click",L.DomEvent.preventDefault).addListener(t,"click",function(){SP.Tab.Devices.mapShowOptions()});var n=L.DomUtil.create("div","leaflet-control-command-interior",t);return n.title="Map Commands",t}}),L.control.command=function(e){return new L.Control.Command(e)};var t=new L.Control.Command({});SP.Tab.Devices.MAP.addControl(t),SP.Tab.Devices.MAP.on("popupopen",function(e){var t=e.popup._source;$(".device-list ul li.device").each(function(){$(this).removeClass("selected");var e=$(this).attr("data");e==t.options.clientID&&($(this).addClass("selected"),$("html,body").animate({scrollTop:$(this).position().top-10},500))})}),SP.Network.http({url:"/"+ID+"/_devices"}).done(populateMap)},populateMap=function(e){console.log(e),console.log("response.error: "+e.error),$(".device-list .loading_dots").fadeTo("fast",0,function(){$(this).remove()});if(e.status!=200){alert(e.message);return}_.each(e.message,createClient)},{render:function(){Offline.on("up",http_online),Offline.on("down",http_offline),SP.DB.devices.bind("add",DB_addEvt),$("#modals:first").append(tpl_1({},{partials:{}})),$("#modals:first").append(tpl_2({},{partials:{}})),$("#modals:first").append(tpl_3({},{partials:{}})),$("#modals:first").append(tpl_Settings({},{partials:{}})),$(".modal.c1").easyModal({top:200,overlay:.2}),$(".modal.c3").easyModal({top:200,overlay:.2}),$(".modal.c4").easyModal({top:200,overlay:.2,onOpen:modal_Message_open,onClose:modal_Message_close}),$(".modal.settings").easyModal({overlay:.2,onOpen:modal_Settings_open,onClose:modal_Settings_close}),$(".modal.c4").on("input propertychange","textarea",modal_Message_validate),$(".modal.settings").on("click",".header ul li",modal_Settings_click_main_tabs),$(".modal.settings").on("click","section#devices ul li",modal_Settings_click_devices_tabs),SP.render("#main-container",tmpl_DT({height:$(document).height()-$("body").offset().top-65+"px"},{partials:{}}));if(!Pusher)pushClient_failed("Pusher is not loaded. Verify that Pusher is accessible.");else{Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:"/js/sparkdash/p/2.1/",cdn_https:"/js/sparkdash/p/2.1/",version:Pusher.VERSION,suffix:Pusher.dependency_suffix});var e=new Pusher(SP.WS.key);e.connection.bind("error",function(e){e.data.code===4004&&console.log(">>> detected limit error")}),e.connection.bind("state_change",pushConnectionEvt_state_change);var t=e.subscribe(SP.WS.channel);t.bind("pusher:subscription_error",pushChannel_subscription_error),t.bind("new_client@beacon",createClient),t.bind("update_client@beacon",updateClient),t.bind("startapp@beacon",updateClient),t.bind("stopapp@beacon",updateClient),t.bind("status@main",updateClient),t.bind("remove_client@beacon",removeClient),t.bind("message@main",messageEvt)}$(document).on("click",doDocClick),$("form button").on("click",doFormSubmit),$(".device-list ul").on("click","li.device",doDeviceClick),$("form").submit(stopSubmit),SP.Network.http({url:"/test?id=map",type:"GET",dataType:"json"}).done(setupMap)}}}),define("hbs!tpl/tabs/fsm.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="left-panel">\n  <div style="width:100%;overflow-y: auto;height: 100%;">\n    <ul>\n      <li>\n        <div class="main-item device"></div>\n      </li>\n      <li>\n        <div class="main-item device"></div>\n      </li>\n      <li>\n        <div class="main-item device"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n      <li>\n        <div class="main-item"></div>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<div class="map-container">\n  <div id="map-container-1" class="map" style="height:100%;display: block;z-index: 1;"></div>\n  <i class="map-top"></i>\n  <i class="map-right"></i>\n  <i class="map-bottom"></i>\n  <i class="map-left"></i>\n</div>\n<div class="layer-buttons" style="position:relative;bottom:30;">\n    <div class="row layer-button-row"><a href="javascript:cartodb_sewer_line.setMap(map1);" class="btn success">Sewer Line On</a> <a href="javascript:cartodb_sewer_line.setMap(null);" class="btn danger">Sewer Line Off</a></div>\n</div>'})}),define("views/fsm",["jquery","underscore","handlebars","hbs!tpl/tabs/fsm.html"],function(e,t,n,r){function i(t,n){var i=r(n,{partials:{}});if(t instanceof jQuery)var s=t;else var s=e(t+":first");n.append?s.append(i):s.html(i)}if(e("body").attr("mm-controller")!="dash")return!1;console.log("initializing app::fsm");var e=e||e(function(e){e=e});return n.registerHelper("key_value",function(e,t){var n="",r;for(r in e)e.hasOwnProperty(r)&&(n+=t.fn({key:r,value:e[r]}));return n}),{render:function(){console.log("Rendering map.."),i("#main-container",{});var e=new L.Map("map-container-1",{center:new L.LatLng(35.05642206622684,-80.66948943389895),zoom:17,layers:[new L.TileLayer("http://{s}.mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png",{maxZoom:18,subdomains:["otile1","otile2","otile3","otile4"],attribution:'SparkDash v1.0 - Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>. Map data (c) <a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> contributors, CC-BY-SA.'})]});cartodb_sewer_line=new lvector.CartoDB({user:"geojason",table:"sewer_line",scaleRange:[15,20],symbology:{type:"range",property:"pipe_dia",ranges:[{range:[0,8],vectorOptions:{weight:4,color:"#46461f",opacity:.8}},{range:[8.00001,100],vectorOptions:{weight:8,color:"#ff7800",opacity:.8}}]},popupTemplate:'<div class="iw-content"><h3>Sewer Line</h3><table class="condensed-table"><tr><th>Diameter</th><td>{pipe_dia} in.</td></tr><tr><th>Material</th><td>{pipe_mat}</td></tr><tr><th>Flows To</th><td>{wwtp} WWTP</td></tr></table></div>',singlePopup:!0}),setTimeout(function(){cartodb_sewer_line.setMap(e),console.log("done lvector")},500)}}}),define("hbs!tpl/tabs/tasks.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="pure-u-1">\n  <ul>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n    <li>\n      <div class="main-item"></div>\n    </li>\n  </ul>\n</div>'})}),define("views/tasks",["jquery","underscore","handlebars","hbs!tpl/tabs/tasks.html"],function(e,t,n,r){function i(t,n){var i=r(n,{partials:{}});if(t instanceof jQuery)var s=t;else var s=e(t+":first");n.append?s.append(i):s.html(i)}if(e("body").attr("mm-controller")!="dash")return!1;console.log("initializing app::tasks");var e=e||e(function(e){e=e});return n.registerHelper("key_value",function(e,t){var n="",r;for(r in e)e.hasOwnProperty(r)&&(n+=t.fn({key:r,value:e[r]}));return n}),{render:function(e){i("#main-container",{rows:e.rows})}}}),define("hbs!tpl/main.menu.right.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<nav>\n  <ul>\n    <li class="beacon" action="showBeaconTabbadgeMenu">\n      <div class="tabbadge" action="showBeaconTabbadgeMenu">0</div>\n    </li>\n  </ul>\n</nav>\n<div class="beacon dropdown">\n  <ul>\n    <li class=""action="">\n      Line 1\n    </li>\n    <li class="" action="">\n      Line 2\n    </li>   \n    <li class="" action="">\n      Line 3\n    </li>\n  </ul>\n          \n</div>\n'})}),define("hbs!tpl/modals/alerts.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div class="modal c0">\n	<div class="header">\n		<h3>Alerts</h3>\n	</div>\n  <div>\n      <div class="appPackage"></div>\n  </div>\n</div>'})}),define("hbs!tpl/tabs.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<nav>\n  <header class="devices">\n    <a href="#/devices" action="tab.devices"><div>Devices</div></a>\n  </header>\n</nav>\n\n<nav>\n  <header class="fsm">\n    <a href="#/fsm" action="tab.fsm"><div>FSM</div></a>\n  </header>\n</nav>\n\n<nav>\n  <header class="tasks">\n    <a href="#/tasks" action="tab.tasks"><div>Tasks</div></a>\n  </header>\n</nav>'})}),function(e){var t={init:function(t){var n={top:"auto",autoOpen:!1,overlayOpacity:.5,overlayColor:"#000",overlayClose:!0,overlayParent:"body",closeOnEscape:!0,closeButtonClass:".close",onOpen:!1,onClose:!1,zIndex:function(){return 1+Math.max.apply(Math,e("*").map(function(){return e(this).css("z-index")}).filter(function(){return e.isNumeric(this)}).map(function(){return parseInt(this,10)}))},updateZIndexOnOpen:!0};return t=e.extend(n,t),this.each(function(){var n=t,r=e('<div class="lean-overlay"></div>'),i=e(this);r.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex(),top:0,left:0,height:"100%",width:"100%",background:n.overlayColor,opacity:n.overlayOpacity,overflow:"auto"}).appendTo(n.overlayParent),i.css({display:"none",position:"fixed","z-index":n.updateZIndexOnOpen?0:n.zIndex()+1,left:"50%",top:parseInt(n.top,10)>-1?n.top+"px":"50%"}),i.bind("openModal",function(){var e=n.updateZIndexOnOpen?n.zIndex():parseInt(r.css("z-index"),10),t=e+1;i.css({display:"block","margin-left":-(i.outerWidth()/2)+"px","margin-top":(parseInt(n.top,10)>-1?0:-(i.outerHeight()/2))+"px","z-index":t}),r.css({"z-index":e,display:"block"}),n.onOpen&&typeof n.onOpen=="function"&&n.onOpen(i[0])}),i.bind("closeModal",function(){i.css("display","none"),r.css("display","none"),n.onClose&&typeof n.onClose=="function"&&n.onClose(i[0])}),r.click(function(){n.overlayClose&&i.trigger("closeModal")}),e(document).keydown(function(e){n.closeOnEscape&&e.keyCode===27&&i.trigger("closeModal")}),i.on("click",n.closeButtonClass,function(e){i.trigger("closeModal"),e.preventDefault()}),n.autoOpen&&i.trigger("openModal")})}};e.fn.easyModal=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.easyModal")}}(jQuery),define("jquery.easyModal",function(){}),function(e,t){function r(e,t){var n;if(typeof e=="string"&&typeof t=="string")return localStorage[e]=t,!0;if(typeof e=="object"&&typeof t=="undefined"){for(n in e)e.hasOwnProperty(n)&&(localStorage[n]=e[n]);return!0}return!1}function i(e,t){var n,r,i;n=new Date,n.setTime(n.getTime()+31536e6),r="; expires="+n.toGMTString();if(typeof e=="string"&&typeof t=="string")return document.cookie=e+"="+t+r+"; path=/",!0;if(typeof e=="object"&&typeof t=="undefined"){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function s(e){return localStorage[e]}function o(e){var t,n,r,i;t=e+"=",n=document.cookie.split(";");for(r=0;r<n.length;r++){i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null}function u(e){return delete localStorage[e]}function a(e){return i(e,"",-1)}function f(e,t){var n=[],r=e.length;if(r<t)return[e];for(var i=0;i<r;i+=t)n.push(e.substring(i,i+t));return n}function l(t){var n=t?[t]:[],r=0;e.extend(this,{get:function(){return n},rotate:function(){return n.length===1?n[0]:(r===n.length-1?r=0:++r,n[r])},length:function(){return n.length},set:function(e){for(var t=n.length;t--;)if(n[t]===e){r=t;return}this.append(e)},front:function(){return n[r]},append:function(e){n.push(e)}})}function c(t){var n=t?[t]:[];e.extend(this,{size:function(){return n.length},pop:function(){if(n.length===0)return null;var e=n[n.length-1];return n=n.slice(0,n.length-1),e},push:function(e){return n=n.concat([e]),e},top:function(){return n.length>0?n[n.length-1]:null}})}function h(t,n){var r=!0;typeof t=="string"&&t!==""&&(t+="_");var i=e.Storage.get(t+"commands");i=i?(new Function("return "+i+";"))():[];var s=i.length-1;e.extend(this,{append:function(o){r&&i[i.length-1]!==o&&(i.push(o),s=i.length-1,n&&i.length>n&&(i=i.slice(-n)),e.Storage.set(t+"commands",e.json_stringify(i)))},data:function(){return i},next:function(){s<i.length-1&&++s;if(s!==-1)return i[s]},reset:function(){s=i.length-1},last:function(){return i[length-1]},end:function(){return s===i.length-1},position:function(){return s},previous:function(){var e=s;s>0&&--s;if(e!==-1)return i[e]},clear:function(){i=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(t+"commands")},disable:function(){r=!1}})}function p(t){return e("<div>"+e.terminal.strip(t)+"</div>").text().length}function d(e){return e.length-p(e)}function v(e,t){var n=e.split(/(\s+)/);return{name:n[0],args:t(n.slice(2).join(""))}}function C(t){var n=e(window).scrollTop(),r=n+e(window).height(),i=e(t).offset().top,s=i+e(t).height();return s>=n&&i<=r}function k(t){var n=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),r=n.find("span").width();n.remove();var i=Math.floor(t.width()/r);if(L(t)){var s=20,o=t.innerWidth()-t.width();i-=Math.ceil((s-o/2)/(r-1))}return i}function L(e){return e.get(0).scrollHeight>e.innerHeight()}e.omap=function(t,n){var r={};return e.each(t,function(e,i){r[e]=n.call(t,e,i)}),r};var n=typeof window.localStorage!="undefined";e.extend({Storage:{set:n?r:i,get:n?s:o,remove:n?u:a}}),jQuery.fn.extend({everyTime:function(e,t,n,r,i){return this.each(function(){jQuery.timer.add(this,e,t,n,r,i)})},oneTime:function(e,t,n){return this.each(function(){jQuery.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){jQuery.timer.remove(this,e,t)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===t||e===null)return null;var n=this.regex.exec(jQuery.trim(e.toString()));if(n[2]){var r=parseInt(n[1],10),i=this.powers[n[2]]||1;return r*i}return e},add:function(e,t,n,r,i,s){var o=0;jQuery.isFunction(n)&&(i||(i=r),r=n,n=t),t=jQuery.timer.timeParse(t);if(typeof t!="number"||isNaN(t)||t<=0)return;i&&i.constructor!==Number&&(s=!!i,i=0),i=i||0,s=s||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),r.$timerID=r.$timerID||this.guid++;var u=function(){if(s&&u.inProgress)return;u.inProgress=!0,(++o>i&&i!==0||r.call(e,o)===!1)&&jQuery.timer.remove(e,n,r),u.inProgress=!1};u.$timerID=r.$timerID,e.$timers[n][r.$timerID]||(e.$timers[n][r.$timerID]=window.setInterval(u,t)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)},remove:function(e,t,n){var r=e.$timers,i;if(r){if(!t)for(var s in r)r.hasOwnProperty(s)&&this.remove(e,s,n);else if(r[t]){if(n)n.$timerID&&(window.clearInterval(r[t][n.$timerID]),delete r[t][n.$timerID]);else for(var o in r[t])r[t].hasOwnProperty(o)&&(window.clearInterval(r[t][o]),delete r[t][o]);for(i in r[t])if(r[t].hasOwnProperty(i))break;i||(i=null,delete r[t])}for(i in r)if(r.hasOwnProperty(i))break;i||(e.$timers=null)}}}}),(jQuery.browser&&jQuery.browser.msie||/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase()))&&jQuery(window).one("unload",function(){var e=jQuery.timer.global;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],r=n.length;while(--r)jQuery.timer.remove(n[r],t)}}),function(e){if(!String.prototype.split.toString().match(/\[native/))return;var t=String.prototype.split,n=/()??/.exec("")[1]===e,r;return r=function(r,i,s){if(Object.prototype.toString.call(i)!=="[object RegExp]")return t.call(r,i,s);var o=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),a=0,f,l,c,h;i=new RegExp(i.source,u+"g"),r+="",n||(f=new RegExp("^"+i.source+"$(?!\\s)",u)),s=s===e?-1>>>0:s>>>0;while(l=i.exec(r)){c=l.index+l[0].length;if(c>a){o.push(r.slice(a,l.index)),!n&&l.length>1&&l[0].replace(f,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(l[t]=e)}),l.length>1&&l.index<r.length&&Array.prototype.push.apply(o,l.slice(1)),h=l[0].length,a=c;if(o.length>=s)break}i.lastIndex===l.index&&i.lastIndex++}return a===r.length?(h||!i.test(""))&&o.push(""):o.push(r.slice(a)),o.length>s?o.slice(0,s):o},String.prototype.split=function(e,t){return r(this,e,t)},r}(),e.json_stringify=function(n,r){var i="",s;r=r===t?1:r;var o=typeof n;switch(o){case"function":i+=n;break;case"boolean":i+=n?"true":"false";break;case"object":if(n===null)i+="null";else if(n instanceof Array){i+="[";var u=n.length;for(s=0;s<u-1;++s)i+=e.json_stringify(n[s],r+1);i+=e.json_stringify(n[u-1],r+1)+"]"}else{i+="{";for(var a in n)n.hasOwnProperty(a)&&(i+='"'+a+'":'+e.json_stringify(n[a],r+1));i+="}"}break;case"string":var f=n,l={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(s in l)l.hasOwnProperty(s)&&(f=f.replace(new RegExp(s,"g"),l[s]));i+='"'+f+'"';break;case"number":i+=String(n)}return i+=r>1?",":"",r===1&&(i=i.replace(/,([\]}])/g,"$1")),i.replace(/([\[{]),/g,"$1")},e.fn.cmd=function(n){function T(e){x.toggleClass("inverted")}function N(){y="(reverse-i-search)`"+l+"': ",D()}function C(){y=d,a=!1,c=null,l=""}function k(e){var t=S.data(),n,i=t.length;e&&c>0&&(i-=c);if(l.length>0)for(var s=l.length;s>0;s--){n=new RegExp("^"+l.substring(0,s));for(var o=i;o--;)if(n.test(t[o])){c=t.length-o,g=0,r.set(t[o],!0),M(),l.length!==s&&(l=l.substring(0,s),N());return}}}function L(){var e=r.width(),t=x.innerWidth();o=Math.floor(e/t)}function A(e,t){var n="";for(var r=t;r--;)n+=e;return n}function O(e){var t=e.substring(0,o-u),n=e.substring(o-u);return[t].concat(f(n,o))}function P(){s.focus(),r.oneTime(1,function(){r.insert(s.val()),s.blur().val("")})}function B(e){var i,s,o;if(typeof n.keydown=="function"){i=n.keydown(e);if(i!==t)return i}if(b){e.which!==38&&(e.which!==80||!e.ctrlKey)&&(H=!0);if(!a||e.which!==35&&e.which!==36&&e.which!==37&&e.which!==38&&e.which!==39&&e.which!==40&&e.which!==13&&e.which!==27){if(e.altKey)return e.which===68?(r.set(m.slice(0,g)+m.slice(g).replace(/[^ ]+ |[^ ]+$/,""),!0),!1):!0;if(e.keyCode===13){S&&m&&(n.historyFilter&&n.historyFilter(m)||!n.historyFilter)&&S.append(m);var u=m;S.reset(),r.set(""),n.commands&&n.commands(u),typeof y=="function"&&D()}else if(e.which===8)a?(l=l.slice(0,-1),N()):m!==""&&g>0&&(m=m.slice(0,g-1)+m.slice(g,m.length),--g,M());else if(e.which===9&&!e.ctrlKey&&!e.altKey)r.insert("	");else{if(e.which===46)return m!==""&&g<m.length&&(m=m.slice(0,g)+m.slice(g+1,m.length),M()),!0;if(S&&e.which===38||e.which===80&&e.ctrlKey)H&&(_=m),H=!1,r.set(S.previous());else if(S&&e.which===40||e.which===78&&e.ctrlKey)r.set(S.end()?_:S.next());else if(e.which===37||e.which===66&&e.ctrlKey)if(e.ctrlKey&&e.which!==66){o=g-1,s=0,m[o]===" "&&--o;for(var f=o;f>0;--f){if(m[f]===" "&&m[f+1]!==" "){s=f+1;break}if(m[f]==="\n"&&m[f+1]!=="\n"){s=f;break}}r.position(s)}else g>0&&(--g,M());else if(e.which===82&&e.ctrlKey)a?k(!0):(d=y,N(),_=m,m="",M(),a=!0);else if(e.which==71&&e.ctrlKey)a&&(y=d,D(),m=_,M(),a=!1);else if(e.which===39||e.which===70&&e.ctrlKey)if(e.ctrlKey&&e.which!==70){m[g]===" "&&++g;var c=m.slice(g).match(/\S[\n\s]{2,}|[\n\s]+\S?/);!c||c[0].match(/^\s+$/)?g=m.length:c[0][0]!==" "?g+=c.index+1:(g+=c.index+c[0].length-1,c[0][c[0].length-1]!==" "&&--g),M()}else g<m.length&&(++g,M());else{if(e.which===123)return!0;if(e.which===36)r.position(0);else if(e.which===35)r.position(m.length);else{if(e.shiftKey&&e.which==45)return P(),!0;if(!e.ctrlKey&&!e.metaKey)return!0;if(e.which===192)return!0;if(e.metaKey){if(e.which===82)return!0;if(e.which===76)return!0}if(e.shiftKey){if(e.which===84)return!0}else{if(e.which===87){if(m!==""){var h=m.slice(0,g),p=m.slice(g+1),v=h.match(/([^ ]+ *$)/);g=h.length-v[0].length,m=h.slice(0,g)+p,M()}return!1}if(e.which===72)return m!==""&&g>0&&(m=m.slice(0,--g),g<m.length-1&&(m+=m.slice(g)),M()),!1;if(e.which===65)r.position(0);else if(e.which===69)r.position(m.length);else{if(e.which===88||e.which===67||e.which===84)return!0;if(e.which===86)return P(),!0;if(e.which===75)g===0?r.set(""):g!==m.length&&r.set(m.slice(0,g));else if(e.which===85)r.set(m.slice(g,m.length)),r.position(0);else if(e.which===17)return!1}}}}}}else C(),D(),e.which===27&&(m=""),M(),B.call(this,e);return!1}}var r=this,i=r.data("cmd");if(i)return i;r.addClass("cmd"),r.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var s=e("<textarea/>").addClass("clipboard").appendTo(r);n.width&&r.width(n.width);var o,u,a=!1,l="",c=null,d,v=n.mask||!1,m="",g=0,y,b=n.enabled,w=n.historySize||60,E,S,x=r.find(".cursor"),M=function(t){function i(t,i){var s=t.length;if(i===s)n.html(e.terminal.encode(t,!0)),x.html("&nbsp;"),r.html("");else if(i===0)n.html(""),x.html(e.terminal.encode(t.slice(0,1),!0)),r.html(e.terminal.encode(t.slice(1),!0));else{var o=e.terminal.encode(t.slice(0,i),!0);n.html(o);var u=t.slice(i,i+1);x.html(u===" "?"&nbsp;":e.terminal.encode(u,!0)),i===t.length-1?r.html(""):r.html(e.terminal.encode(t.slice(i+1),!0))}}function s(t){return"<div>"+e.terminal.encode(t,!0)+"</div>"}function a(t){var n=r;e.each(t,function(t,r){n=e(s(r)).insertAfter(n).addClass("clear")})}function l(t){e.each(t,function(e,t){n.before(s(t))})}var n=x.prev(),r=x.next(),c=0;return function(){var c=v?m.replace(/./g,"*"):m,h,p;t.find("div").remove(),n.html("");if(c.length>o-u-1||c.match(/\n/)){var d,y=c.match(/\t/g),b=y?y.length*3:0;y&&(c=c.replace(/\t/g,"\0\0\0\0"));if(c.match(/\n/)){var w=c.split("\n");p=o-u-1;for(h=0;h<w.length-1;++h)w[h]+=" ";w[0].length>p?(d=[w[0].substring(0,p)],d=d.concat(f(w[0].substring(p),o))):d=[w[0]];for(h=1;h<w.length;++h)w[h].length>o?d=d.concat(f(w[h],o)):d.push(w[h])}else d=O(c);y&&(d=e.map(d,function(e){return e.replace(/\x00\x00\x00\x00/g,"	")})),p=d[0].length;if(p!==0||d.length!==1)if(g<p)i(d[0],g),a(d.slice(1));else if(g===p)n.before(s(d[0])),i(d[1],0),a(d.slice(2));else{var E=d.length,S=0;if(g<p)i(d[0],g),a(d.slice(1));else if(g===p)n.before(s(d[0])),i(d[1],0),a(d.slice(2));else{var T=d.slice(-1)[0],N=c.length-g,C=T.length,k=0;if(N<=C)l(d.slice(0,-1)),k=C===N?0:C-N,i(T,k+b);else if(E===3)n.before("<div>"+e.terminal.encode(d[0],!0)+"</div>"),i(d[1],g-p-1),r.after('<div class="clear">'+e.terminal.encode(d[2],!0)+"</div>");else{var L,A;k=g;for(h=0;h<d.length;++h){var M=d[h].length;if(!(k>M))break;k-=M}A=d[h],L=h,k===A.length&&(k=0,A=d[++L]),i(A,k),l(d.slice(0,L)),a(d.slice(L+1))}}}}else c===""?(n.html(""),x.html("&nbsp;"),r.html("")):i(c,g)}}(r),_,D=function(){function n(n){u=p(n),t.html(e.terminal.format(e.terminal.encode(n)))}var t=r.find(".prompt");return function(){switch(typeof y){case"string":n(y);break;case"function":y(n)}}}(),H=!0,j=[];e.extend(r,{name:function(e){if(e!==t){E=e,S=new h(e,w);var n=j.length;return n&&!j[n-1].enabled()&&S.disable(),j.push(S),r}return E},purge:function(){for(var e=j.length;e--;)j[e].purge();return j=[],r},history:function(){return S},set:function(e,i){return e!==t&&(m=e,i||(g=m.length),M(),typeof n.onCommandChange=="function"&&n.onCommandChange(m)),r},insert:function(e,t){return g===m.length?m+=e:g===0?m=e+m:m=m.slice(0,g)+e+m.slice(g),t||(g+=e.length),M(),typeof n.onCommandChange=="function"&&n.onCommandChange(m),r},get:function(){return m},commands:function(e){return e?(n.commands=e,r):e},destroy:function(){return e(document.documentElement||window).unbind(".cmd"),r.stopTime("blink",T),r.find(".cursor").next().remove().end().prev().remove().end().remove(),r.find(".prompt, .clipboard").remove(),r.removeClass("cmd").removeData("cmd"),r},prompt:function(e){if(e===t)return y;if(typeof e!="string"&&typeof e!="function")throw"prompt must be a function or string";return y=e,D(),M(),r},position:function(e){return typeof e=="number"?(g=e<0?0:e>m.length?m.length:e,M(),r):g},visible:function(){var e=r.visible;return function(){e.apply(r,[]),M(),D()}}(),show:function(){var e=r.show;return function(){e.apply(r,[]),M(),D()}}(),resize:function(e){return e?o=e:L(),M(),r},enable:function(){return b||(x.addClass("inverted"),r.everyTime(500,"blink",T),b=!0),r},isenabled:function(){return b},disable:function(){return b&&(r.stopTime("blink",T),x.removeClass("inverted"),b=!1),r},mask:function(e){return typeof e=="boolean"?(v=e,M(),r):v}}),r.name(n.name||n.prompt||""),y=n.prompt||"> ",D(),(n.enabled===t||n.enabled===!0)&&r.enable();var F;return e(document.documentElement||window).bind("keypress.cmd",function(i){var s;if(i.ctrlKey&&i.which===99)return!0;!a&&typeof n.keypress=="function"&&(s=n.keypress(i));if(s!==t&&!s)return s;if(b){if(e.inArray(i.which,[38,13,0,8])>-1&&i.keyCode!==123&&(i.which!==38||!i.shiftKey))return!1;if(!i.ctrlKey&&(!i.altKey||i.which!==100)||i.altKey)return a?(l+=String.fromCharCode(i.which),k(),N()):r.insert(String.fromCharCode(i.which)),!1}}).bind("keydown.cmd",B),r.data("cmd",r),r};var m=/(\[\[[gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/,g=/\[\[([gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/g,y=/\[\[([gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,b=/#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})/,w=/https?:\/\/(?:(?!&[^;]+;)[^\s:"'<>)])+/g,E=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,S=/('[^']*'|"(\\"|[^"])*"|\/(\\\/|[^\/])*\/|(\\ |[^ ])+|[\w-]+)/g,x=/(\[\[[gbiuso]*;[^;]*;[^\]]*\])/,T=/\[\[[gbiuso]*;[^;]*;[^\]]*\]?$/;e.terminal={split_equal:function(e,t){var n=!1,r=!1,i=0,s="",o=[],u=e.replace(y,function(e,t,n){var r=t.match(/;/g).length;return r==2?r=";;":r==3?r=";":r="","[["+t+r+n.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n")+"]"+n+"]"}).split(/\n/g);for(var a=0,f=u.length;a<f;++a){if(u[a]===""){o.push("");continue}var l=u[a],c=0,h=0;for(var p=0,d=l.length;p<d;++p){if(l[p]==="["&&l[p+1]==="[")n=!0;else if(n&&l[p]==="]")r?(n=!1,r=!1):r=!0;else if(n&&r||!n){if(l[p]==="&"){var v=l.substring(p).match(/^(&[^;]+;)/);if(!v)throw"Unclosed html entity in line "+(a+1)+" at char "+(p+1);p+=v[1].length-2,p===d-1&&o.push(m+v[1]);continue}l[p]==="]"&&l[p-1]==="\\"?--h:++h}if(h===t||p===d-1){var m=l.substring(c,p+1);s&&(m=s+m,m.match("]")&&(s="")),c=p+1,h=0;var g=m.match(y);if(g){var b=g[g.length-1];if(b[b.length-1]!=="]")s=b.match(x)[1],m+="]";else if(m.match(T)){var w=m.length,E=w-b[b.length-1].length;m=m.replace(T,""),s=b.match(x)[1]}}o.push(m)}}}return o},encode:function(e,t){return t?e=e.replace(/&(?![^=]+=)/g,"&amp;"):e=e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;|[^= "]+=[^=])/g,"&amp;"),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},format:function(t,n){var r=e.extend({},{linksNoReferrer:!1},n||{});if(typeof t=="string"){var i=t.split(m);return i&&i.length>1&&(t=e.map(i,function(e){return e===""?e:e.substring(0,1)==="["?e.replace(g,function(e,t,n,r,i,s,o){if(o==="")return"";o=o.replace(/\\]/g,"]");var u="";t.indexOf("b")!==-1&&(u+="font-weight:bold;");var a=[];t.indexOf("u")!==-1&&a.push("underline"),t.indexOf("s")!==-1&&a.push("line-through"),t.indexOf("o")!==-1&&a.push("overline"),a.length&&(u+="text-decoration:"+a.join(" ")+";"),t.indexOf("i")!==-1&&(u+="font-style:italic;"),n.match(b)&&(u+="color:"+n+";",t.indexOf("g")!==-1&&(u+="text-shadow:0 0 5px "+n+";")),r.match(b)&&(u+="background-color:"+r);var f='<span style="'+u+'"'+(i!==""?' class="'+i+'"':"")+' data-text="'+(s===""?o:s.replace(/&#93;/g,"]")).replace('"',"&quote;")+'">'+o+"</span>";return f}):"<span>"+e+"</span>"}).join("")),e.map(t.split(/(<\/?span[^>]*>)/g),function(e){return e.match(/span/)?e:e.replace(w,function(e){var t=e.match(/\.$/);return e=e.replace(/\.$/,""),'<a target="_blank" '+(r.linksNoReferer?' rel="noreferrer" ':"")+'href="'+e+'">'+e+"</a>"+(t?".":"")}).replace(E,'<a href="mailto:$1">$1</a>')}).join("").replace(/<span><br\/?><\/span>/g,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(g,"$6")},active:function(){return H.front()},from_ntroff:function(e){return e.replace(/((?:_\x08.|.\x08_)+)/g,function(e,t){return"[[u;;]"+e.replace(/_x08|\x08_|_\u0008|\u0008_/g,"")+"]"}).replace(/((?:.\x08.)+)/g,function(e,t){return"[[b;#fff;]"+e.replace(/(.)(?:\x08|\u0008)(.)/g,function(e,t,n){return n})+"]"})},ansi_colors:{normal:{black:"#000",red:"#A00",green:"#008400",yellow:"#A50",blue:"#00A",magenta:"#A0A",cyan:"#0AA",white:"#AAA"},faited:{black:"#000",red:"#640000",green:"#006100",yellow:"#737300",blue:"#000087",magenta:"#650065",cyan:"#008787",white:"#818181"},bold:{black:"#000",red:"#F55",green:"#44D544",yellow:"#FF5",blue:"#55F",magenta:"#F5F",cyan:"#5FF",white:"#FFF"},palette:["#000000","#AA0000","#00AA00","#AA5500","#0000AA","#AA00AA","#00AAAA","#AAAAAA","#555555","#FF5555","#55FF55","#FFFF55","#5555FF","#FF55FF","#55FFFF","#FFFFFF","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]},from_ansi:function(){function r(r){var i=r.split(";"),s,o=!1,u=!1,a=!1,f=[],l="",c="",h=!1,p=!1,d=!1,v=e.terminal.ansi_colors.palette;for(var m in i){s=parseInt(i[m],10);switch(s){case 1:f.push("b"),a=!0,o=!1;break;case 4:f.push("u");break;case 3:f.push("i");break;case 5:d=!0;break;case 38:h=!0;break;case 48:p=!0;break;case 2:o=!0,a=!1;break;case 7:u=!0;break;default:h&&d&&v[s-1]?l=v[s-1]:t[s]&&(l=t[s]),p&&d&&v[s-1]?c=v[s-1]:n[s]&&(c=n[s])}s!==5&&(d=!1)}if(u)if(l&&c){var g=c;c=l,l=g}else l="black",c="white";var y,b;return a?y=b=e.terminal.ansi_colors.bold:o?y=b=e.terminal.ansi_colors.faited:y=b=e.terminal.ansi_colors.normal,[f.join(""),h?l:y[l],p?c:b[c]]}var t={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"white"},n={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"black"};return function(e){var t=e.split(/(\x1B\[[0-9;]*[A-Za-z])/g);if(t.length==1)return e;var n=[];t.length>3&&t.slice(0,3).join("")=="[0m"&&(t=t.slice(3));var i=!1,s,o,u,a,f;for(var l=0;l<t.length;++l){f=t[l].match(/^\x1B\[([0-9;]*)([A-Za-z])$/);if(f)switch(f[2]){case"m":if(f[1]==="")continue;f[1]!=="0"?a=r(f[1]):a=["",""],i?(n.push("]"),f[1]=="0"?(i=!1,o=u=""):(a[1]=a[1]||o,a[2]=a[2]||u,n.push("[["+a.join(";")+"]"),a[1]&&(o=a[1]),a[2]&&(u=a[2]))):(i=!0,n.push("[["+a.join(";")+"]"),a[1]&&(o=a[1]),a[2]&&(u=a[2]))}else n.push(t[l])}return i&&n.push("]"),n.join("")}}(),parseArguments:function(t){return e.map(t.match(S)||[],function(e){return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==='"'&&e[e.length-1]==='"'?(e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"),e.replace(/\\\\|\\t|\\n/g,function(e){return e[1]==="t"?"	":e[1]==="n"?"\n":"\\"}).replace(/\\x([0-9a-f]+)/gi,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/\\0([0-7]+)/g,function(e,t){return String.fromCharCode(parseInt(t,8))})):e[0]==="/"&&e[e.length-1]=="/"?new RegExp(e.replace(/^\/|\/$/g,"")):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/)?parseFloat(e):e.replace(/\\ /g," ")})},splitArguments:function(t){return e.map(t.match(S)||[],function(e){return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==='"'&&e[e.length-1]==='"'?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e[0]==="/"&&e[e.length-1]=="/"?e:e.replace(/\\ /g," ")})},parseCommand:function(t){return v(t,e.terminal.parseArguments)},splitCommand:function(t){return v(t,e.terminal.splitArguments)},test:function(){function s(e,n){t.echo(n+" &#91;"+(e?"[[b;#44D544;]PASS]":"[[b;#FF5555;]FAIL]")+"&#93;")}var t=e.terminal.active();if(!t){t=e("body").terminal(e.noop).css("margin",0);var n=t.outerHeight()-t.height(),r=e(window);function i(){t.css("height",e(window).height()-20)}r.resize(i).resize()}t.echo("Testing...");var o='name "foo bar" baz /^asd [x]/ str\\ str 10 1e10',u=e.terminal.splitCommand(o);s(u.name==="name"&&u.args[0]==="foo bar"&&u.args[1]==="baz"&&u.args[2]==="/^asd [x]/"&&u.args[3]==="str str"&&u.args[4]==="10"&&u.args[5]==="1e10","$.terminal.splitCommand"),u=e.terminal.parseCommand(o),s(u.name==="name"&&u.args[0]==="foo bar"&&u.args[1]==="baz"&&e.type(u.args[2])==="regexp"&&u.args[2].source==="^asd [x]"&&u.args[3]==="str str"&&u.args[4]===10&&u.args[5]===1e10,"$.terminal.parseCommand"),o="[2;31;46mFoo[1;3;4;32;45mBar[0m[7mBaz",s(e.terminal.from_ansi(o)==="[[;#640000;#008787]Foo][[biu;#44D544;#F5F]Bar][[;#000;#AAA]Baz]","$.terminal.from_ansi"),o="[[biugs;#fff;#000]Foo][[i;;;foo]Bar][[ous;;]Baz]",t.echo("$.terminal.format"),s(e.terminal.format(o)==='<span style="font-weight:bold;text-decoration:underline line-through;font-style:italic;color:#fff;text-shadow:0 0 5px #fff;background-color:#000" data-text="Foo">Foo</span><span style="font-style:italic;" class="foo" data-text="Bar">Bar</span><span style="text-decoration:underline line-through overline;" data-text="Baz">Baz</span>',"	formatting"),o="http://terminal.jcubic.pl/examples.php https://www.google.com/?q=jquery%20terminal",s(e.terminal.format(o)==='<a target="_blank" href="http://terminal.jcubic.pl/examples.php">http://terminal.jcubic.pl/examples.php</a> <a target="_blank" href="https://www.google.com/?q=jquery%20terminal">https://www.google.com/?q=jquery%20terminal</a>',"	urls"),o="foo@bar.com baz.quux@example.com",s(e.terminal.format(o)==='<a href="mailto:foo@bar.com">foo@bar.com</a> <a href="mailto:baz.quux@example.com">baz.quux@example.com</a>',"	emails"),o="-_-[[biugs;#fff;#000]Foo]-_-[[i;;;foo]Bar]-_-[[ous;;]Baz]-_-",s(e.terminal.strip(o)==="-_-Foo-_-Bar-_-Baz-_-","$.terminal.strip"),o="[[bui;#fff;]Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed dolor nisl, in suscipit justo. Donec a enim et est porttitor semper at vitae augue. Proin at nulla at dui mattis mattis. Nam a volutpat ante. Aliquam consequat dui eu sem convallis ullamcorper. Nulla suscipit, massa vitae suscipit ornare, tellus] est [[b;;#f00]consequat nunc, quis blandit elit odio eu arcu. Nam a urna nec nisl varius sodales. Mauris iaculis tincidunt orci id commodo. Aliquam] non magna quis [[i;;]tortor malesuada aliquam] eget ut lacus. Nam ut vestibulum est. Praesent volutpat tellus in eros dapibus elementum. Nam laoreet risus non nulla mollis ac luctus [[ub;#fff;]felis dapibus. Pellentesque mattis elementum augue non sollicitudin. Nullam lobortis fermentum elit ac mollis. Nam ac varius risus. Cras faucibus euismod nulla, ac auctor diam rutrum sit amet. Nulla vel odio erat], ac mattis enim.",t.echo("$.terminal.split_equal");var a=[10,40,60,400];for(var f=a.length;f--;){var l=e.terminal.split_equal(o,a[f]),c=!0;for(var h=0;h<l.length;++h)if(e.terminal.strip(l[h]).length>a[f]){c=!1;break}s(c,"	split "+a[f])}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var N=0;e.jrpc=function(t,n,r,i,s){var o=e.json_stringify({jsonrpc:"2.0",method:n,params:r,id:++N});return e.ajax({url:t,data:o,success:i,error:s,contentType:"application/json",dataType:"json",async:!0,cache:!1,type:"POST"})};var A="{{VER}}",O="Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>",M="version "+A,_=new RegExp(" {"+M.length+"}$"),D=[["jQuery Terminal","(c) 2011-2013 jcubic"],["jQuery Terminal Emulator v. "+A,O.replace(/ *<.*>/,"")],["jQuery Terminal Emulator version "+M,O.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(_,"")+M,O],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(_,"")+M,O]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,checkArity:!0,displayExceptions:!0,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,login:null,outputLimit:-1,tabcompletion:null,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop};var P=[],H=new l;e.fn.terminal=function(n,r){function i(t){return typeof Q.processArguments=="function"?v(t,Q.processArguments):Q.processArguments?e.terminal.parseCommand(t):e.terminal.splitCommand(t)}function s(t){typeof t=="string"?_.echo(t):t instanceof Array?_.echo(e.map(t,function(t){return e.json_stringify(t)}).join(" ")):typeof t=="object"?_.echo(e.json_stringify(t)):_.echo(t)}function o(t){var n=function(n,r){_.pause(),e.jrpc(t,n,r,function(e){e.error?_.error("&#91;RPC&#93; "+e.error.message):s(e.result),_.resume()},function(e,t,n){t!=="abort"&&_.error("&#91;AJAX&#93; "+t+" - Server reponse is: \n"+e.responseText),_.resume()})};return function(e,t){if(e==="")return;e=i(e);if(!Q.login||e.name==="help")n(e.name,e.args);else{var r=t.token();r?n(e.name,[r].concat(e.args)):t.error("&#91;AUTH&#93; Access denied (no token)")}}}function u(n,r){return function(s,o){if(s==="")return;s=i(s);var a=n[s.name],f=e.type(a);if(f==="function"){if(!r||a.length===s.args.length)return a.apply(_,s.args);_.error("&#91;Arity&#93; wrong number of arguments. Function '"+s.name+"' expect "+a.length+" got "+s.args.length)}else if(f==="object"||f==="string"){var l=[];if(f==="object"){for(var c in a)a.hasOwnProperty(c)&&l.push(c);a=u(a,r)}o.push(a,{prompt:s.name+"> ",name:s.name,completion:f==="object"?function(e,t,n){n(l)}:t})}else o.error("Command '"+s.name+"' Not Found")}}function a(t,n){n=n||e.noop;var r=e.type(t),i={};if(r==="string")_.pause(),e.jrpc(t,"system.describe",[],function(r){var a=[];if(r.procs){var f={};e.each(r.procs,function(n,r){a.push(r.name),f[r.name]=function(){var n=Array.prototype.slice.call(arguments);Q.checkArity&&r.params&&r.params.length!==n.length?_.error("&#91;Arity&#93; wrong number of arguments.Function '"+r.name+"' expect "+r.params.length+" got "+n.length):(_.pause(),e.jrpc(t,r.name,n,function(e){e.error?_.error("&#91;RPC&#93; "+e.error.message):s(e.result),_.resume()},function(e,t,n){t!=="abort"&&_.error("&#91;AJAX&#93; "+t+" - Server reponse is: \n"+e.responseText),_.resume()}))}}),i.interpreter=u(f,!1),i.completion=function(e,t,n){n(a)}}else i.interpreter=o(t),i.completion=Q.completion;_.resume(),n(i)},function(){i.completion=Q.completion,i.interpreter=o(t),n(i)});else if(r==="object"){var a=[];for(var f in t)a.push(f);i.interpreter=u(t,!0),i.completion=function(e,t,n){n(a)},n(i)}else{if(r!=="function")throw r+" is invalid interpreter value";n({interpreter:t,completion:Q.completion})}}function f(e){return typeof e=="string"?e:typeof e.fileName=="string"?e.fileName+": "+e.message:e.message}function l(t,n){if(Q.displayExceptions){var r=f(t);_.error("&#91;"+n+"&#93;: "+r),typeof t.fileName=="string"&&(_.pause(),e.get(t.fileName,function(e){_.resume();var n=t.lineNumber-1,r=e.split("\n")[n];r&&_.error("&#91;"+t.lineNumber+"&#93;: "+r)})),t.stack&&_.error(t.stack)}}function h(){var e=j.prop?j.prop("scrollHeight"):j.attr("scrollHeight");j.scrollTop(e)}function p(e,t){try{if(typeof t=="function")t(function(){});else if(typeof t!="string"){var n=e+" must be string or function";throw n}}catch(r){return l(r,e.toUpperCase()),!1}return!0}function g(t,n){try{var r=e.extend({raw:!1,finalize:e.noop},n||{});t=e.type(t)==="function"?t():t,t=e.type(t)==="string"?t:String(t);var i,s;r.raw||(t=e.terminal.encode(t)),t=e.terminal.from_ntroff(t),t=e.terminal.from_ansi(t),d.push(m);if(!r.raw&&(t.length>z||t.match(/\n/))){var o=e.terminal.split_equal(t,z);for(i=0,s=o.length;i<s;++i)o[i]===""||o[i]==="\r"?d.push("&nbsp"):r.raw?d.push(o[i]):d.push(e.terminal.format(o[i],{linksNoReferer:Q.linksNoReferer}))}else r.raw||(t=e.terminal.format(t,{linksNoReferer:Q.linksNoReferer})),d.push(t);d.push(r.finalize)}catch(u){d=[],console.log("Internal Exception(draw_line):"+f(u)+"\n"+u.stack)}}function y(){try{var t;if(Q.outputLimit>=0){var n=_.rows(),r=Q.outputLimit===0?n:Q.outputLimit,i=0,s,o=e("<div/>");for(var u=d.length;u--;)if(typeof d[u]=="function")s=d[u],t=e("<div/>");else if(d[u]===m){t.prependTo(o);try{s(t)}catch(a){l(a,"USER:echo(finalize)")}}else{t.prepend("<div>"+d[u]+"</div>");if(++i===r){if(d[u-1]!==m)try{s(t)}catch(a){l(a,"USER:echo(finalize)")}break}}o.children().appendTo(R)}else e.each(d,function(n,r){if(r===m)t=e("<div></div>");else if(typeof r=="function"){t.appendTo(R);try{r(t)}catch(i){l(i,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(t).width("100%")});h(),d=[]}catch(a){alert("flush "+f(a)+"\n"+a.stack)}}function b(){Q.greetings===t?_.echo(_.signature):Q.greetings&&_.echo(Q.greetings)}function w(t){t=e.terminal.escape_brackets(e.terminal.encode(t,!0));var n=tt.prompt();tt.mask()&&(t=t.replace(/./g,"*")),typeof n=="function"?n(function(e){_.echo(e+t)}):_.echo(n+t)}function E(e,n){try{F=e;var r=et.top();if(e==="exit"&&Q.exit)if(et.size()===1)if(Q.login)x();else{var i="You can't exit from main interpeter";n||w(e),_.echo(i)}else _.pop("exit");else{n||w(e);var s=q.length-1;if(e==="clear"&&Q.clear)_.clear();else{var o=r.interpreter(e,_);o!==t&&(s===q.length-1?(q.pop(),o!==!1&&_.echo(o)):o===!1?q=q.slice(0,s).concat(q.slice(s+1)):q=q.slice(0,s).concat([o]).concat(q.slice(s+1)),_.resize())}}}catch(u){throw l(u,"USER"),_.resume(),u}}function S(){var t=null;tt.prompt("login: "),Q.history&&tt.history().disable(),tt.commands(function(n){try{w(n);if(!t)t=n,tt.prompt("password: "),tt.mask(!0);else{tt.mask(!1),_.pause();if(typeof Q.login!="function")throw"Value of login property must be a function";var r=n;Q.login(t,r,function(n){if(n){var r=Q.name;r=(r?r+"_":"")+U+"_",e.Storage.set(r+"token",n),e.Storage.set(r+"login",t),tt.commands(E),O()}else _.error("Wrong password try again"),tt.prompt("login: "),t=null;_.resume()},_)}}catch(i){throw l(i,"LOGIN",_),i}})}function x(){if(typeof Q.onBeforelogout=="function")try{if(Q.onBeforelogout(_)===!1)return}catch(t){throw l(t,"onBeforelogout"),t}var n=(Q.name?Q.name+"_":"")+U+"_";e.Storage.remove(n+"token"),e.Storage.remove(n+"login"),Q.history&&tt.history().disable(),S();if(typeof Q.onAfterlogout=="function")try{Q.onAfterlogout(_)}catch(t){throw l(t,"onAfterlogout"),t}}function T(t){var n=(Q.name?Q.name+"_":"")+U+"_interpreters",r=e.Storage.get(n);r?r=(new Function("return "+r+";"))():r=[],e.inArray(t,r)==-1&&(r.push(t),e.Storage.set(n,e.json_stringify(r)))}function N(){var e=et.top(),t=(Q.name?Q.name+"_":"")+U+(B.length?"_"+B.join("_"):"");T(t),tt.name(t),typeof e.prompt=="function"?tt.prompt(function(t){e.prompt(t,_)}):tt.prompt(e.prompt),tt.set(""),typeof e.onStart=="function"&&e.onStart(_)}function O(){N(),Q.history&&tt.history().enable(),b();if(typeof Q.onInit=="function")try{Q.onInit(_)}catch(e){throw l(e,"OnInit"),e}}function M(n){var r,i,s=et.top();if(e.type(s.keydown)==="function"){r=s.keydown(n,_);if(r!==t)return r}_.oneTime(10,function(){Y()});if(e.type(Q.keydown)==="function"){r=Q.keydown(n,_);if(r!==t)return r}if(!_.paused()){n.which!==9&&(I=0);if(n.which===68&&n.ctrlKey)return tt.get()===""?et.size()>1||Q.login!==t?_.pop(""):(_.resume(),_.echo("")):_.set_command(""),!1;if(Q.tabcompletion&&n.which===9){++I;var o=tt.get().substring(0,tt.position()),u=o.split(" "),a;if(u.length==1)a=u[0];else{a=u[u.length-1];for(i=u.length-1;i>0;i--){if(u[i-1][u[i-1].length-1]!="\\")break;a=u[i-1]+" "+a}}var f=/([\^\$\[\]\(\)\+\*\.\|])/g,l=a.replace(f,"\\$1"),c=new RegExp("^"+l);return et.top().completion(_,a,function(e){var t=tt.get().substring(0,tt.position());if(t!==o)return;var n=[];for(i=e.length;i--;)c.test(e[i])&&n.push(e[i]);if(n.length===1)_.insert(n[0].replace(c,""));else if(n.length>1)if(I>=2)w(o),_.echo(n.join("	")),I=0;else{var r=!1;e:for(var s=a.length;s<n[0].length;++s){for(i=1;i<n.length;++i)if(n[0].charAt(s)!==n[i].charAt(s))break e;r=!0}r&&_.insert(n[0].slice(0,s).replace(c,""))}}),!1}if(n.which===86&&n.ctrlKey){_.oneTime(1,function(){h()});return}if(n.which===9&&n.ctrlKey){if(H.length()>1)return _.focus(!1),!1}else n.which===34?_.scroll(_.height()):n.which===33?_.scroll(-_.height()):_.attr({scrollTop:_.attr("scrollHeight")})}else if(n.which===68&&n.ctrlKey){if(P.length){for(i=P.length;i--;){var p=P[i];if(4!==p.readyState)try{p.abort()}catch(d){_.error("error in aborting ajax")}}P=[],_.resume()}return!1}}var d=[],m=1,_=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),n,e.extend({name:_.selector},r))});if(_.data("terminal"))return _.data("terminal");if(_.length===0)throw'Sorry, but terminal said that "'+_.selector+'" is not valid selector!';var B=[],j,F,I=0,q=[],R,U=H.length(),z,W=[],X,V,J,K=[],Q=e.extend({},e.terminal.defaults,{name:_.selector},r||{}),G=!Q.enabled;e.extend(_,e.omap({clear:function(){R.html(""),tt.set(""),q=[];try{Q.onClear(_)}catch(e){throw l(e,"onClear"),e}return _.attr({scrollTop:0}),_},export_view:function(){return{prompt:_.get_prompt(),command:_.get_command(),position:tt.position(),lines:q.slice(0)}},import_view:function(e){return _.set_prompt(e.prompt),_.set_command(e.command),tt.position(e.position),q=e.lines,_.resize(),_},exec:function(e,t){return G?K.push([e,t]):E(e,t),_},commands:function(){return et.top().interpreter},greetings:function(){return b(),_},paused:function(){return G},pause:function(){return tt&&(G=!0,_.disable(),tt.hidden()),_},resume:function(){if(tt){_.enable();var e=K;K=[];while(e.length){var t=e.shift();_.exec.apply(_,t)}tt.visible(),h()}return _},cols:function(){return z},rows:function(){var t=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),n=Math.floor(_.height()/t.height());return t.remove(),n},history:function(){return tt.history()},next:function(){if(H.length()===1)return _;var t=_.offset().top,n=_.height(),r=_.scrollTop();if(!C(_))return _.enable(),e("html,body").animate({scrollTop:t-50},500),_;H.front().disable();var i=H.rotate().enable(),s=i.offset().top-50;e("html,body").animate({scrollTop:s},500);try{Q.onTerminalChange(i)}catch(o){throw l(o,"onTerminalChange"),o}return i},focus:function(e,t){return _.oneTime(1,function(){if(H.length()===1)if(e===!1)try{!t&&Q.onBlur(_)!==!1&&_.disable()}catch(n){throw l(n,"onBlur"),n}else try{!t&&Q.onFocus(_)!==!1&&_.enable()}catch(n){throw l(n,"onFocus"),n}else if(e===!1)_.next();else{var r=H.front();if(r!=_){r.disable();if(!t)try{Q.onTerminalChange(_)}catch(n){throw l(n,"onTerminalChange"),n}}H.set(_),_.enable()}}),_},enable:function(){return z===t&&_.resize(),G&&tt&&(tt.enable(),G=!1),_},disable:function(){return tt&&(G=!0,tt.disable()),_},enabled:function(){return G},signature:function(){var e=_.cols(),t=e<15?null:e<35?0:e<55?1:e<64?2:e<75?3:4;return t!==null?D[t].join("\n")+"\n":""},version:function(){return A},get_command:function(){return tt.get()},insert:function(e){if(typeof e=="string")return tt.insert(e),_;throw"insert function argument is not a string"},set_prompt:function(e){return p("prompt",e)&&(typeof e=="function"?tt.prompt(function(t){e(t,_)}):tt.prompt(e),et.top().prompt=e),_},get_prompt:function(){return et.top().prompt},set_command:function(e){return tt.set(e),_},set_mask:function(e){return tt.mask(e),_},get_output:function(t){return t?q:e.map(q,function(e){return typeof e[0]=="function"?e[0]():e[0]}).join("\n")},resize:function(t,n){t&&n&&(_.width(t),_.height(n)),t=_.width(),n=_.height();var r=k(_);if(r!==z){z=r,tt.resize(z);var i=R.empty().detach();e.each(q,function(e,t){g.apply(null,t)}),tt.before(i),y(),typeof Q.onResize=="function"&&(J!==n||V!==t)&&Q.onResize(_);if(J!==n||V!==t)J=n,V=t}return _},flush:function(){y()},echo:function(t,n){try{var r=e.extend({flush:!0,raw:!1,finalize:e.noop},n||{});d=[],g(t,r),r.flush&&y(),q.push([t,r]);if(r.outputLimit>=0){var i=r.outputLimit===0?_.rows():r.outputLimit,s=R.find("div div");s.length>i&&s.slice(0,q.length-i+1).remove()}Y()}catch(o){alert("terminal.echo "+f(o)+"\n"+o.stack)}return _},error:function(t,n){return _.echo("[[;#f00;]"+e.terminal.escape_brackets(t).replace(/\\$/,"&#92;")+"]",n)},scroll:function(e){var t;return e=Math.round(e),j.prop?(e>j.prop("scrollTop")&&e>0&&j.prop("scrollTop",0),t=j.prop("scrollTop"),j.scrollTop(t+e),_):(e>j.attr("scrollTop")&&e>0&&j.attr("scrollTop",0),t=j.attr("scrollTop"),j.scrollTop(t+e),_)},logout:Q.login?function(){while(et.size()>1)et.pop();return x(),_}:function(){throw"You don't have login function"},token:Q.login?function(){var t=Q.name;return e.Storage.get((t?t+"_":"")+U+"_token")}:e.noop,login_name:Q.login?function(){var t=Q.name;return e.Storage.get((t?t+"_":"")+U+"_login")}:e.noop,name:function(){return et.top().name},push:function(t,n){if(n&&(!n.prompt||p("prompt",n.prompt))||!n){n=n||{},n.name=n.name||F,n.prompt=n.prompt||n.name+" ",B.push(n.name);var r=et.top();r&&(r.mask=tt.mask()),a(t,function(t){et.push(e.extend({},t,n)),N()})}return _},pop:function(n){n!==t&&w(n),B.pop();if(et.top().name===Q.name){if(Q.login){x();if(e.type(Q.onExit)==="function")try{Q.onExit(_)}catch(r){throw l(r,"onExit"),r}}}else{var i=et.pop();N();if(e.type(i.onExit)==="function")try{i.onExit(_)}catch(r){throw l(r,"onExit"),r}_.set_mask(et.top().mask)}return _},level:function(){return et.size()},reset:function(){_.clear();while(et.size()>1)et.pop();return O(),_},purge:function(){var t=(Q.name?Q.name+"_":"")+U+"_",n=e.Storage.get(t+"interpreters");return e.each((new Function("return "+n+";"))(),function(t,n){e.Storage.remove(n+"_commands")}),e.Storage.remove(t+"interpreters"),e.Storage.remove(t+"token"),e.Storage.remove(t+"login"),_},destroy:function(){return tt.destroy().remove(),R.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),_.unbind("click, mousewheel"),_.removeData("terminal").removeClass("terminal"),Q.width&&_.css("width",""),Q.height&&_.css("height",""),_}},function(e,t){return function(){try{return t.apply(this,Array.prototype.slice.apply(arguments))}catch(n){throw e!=="exec"&&l(n,"TERMINAL"),n}}}));var Y=function(){var e=L(_);return function(){e!==L(_)&&(_.resize(),e=L(_))}}();Q.width&&_.width(Q.width),Q.height&&_.height(Q.height),!navigator.userAgent.toLowerCase().match(/(webkit)[ \/]([\w.]+)/)&&_[0].tagName.toLowerCase()=="body"?j=e("html"):j=_,e(document).bind("ajaxSend.terminal",function(e,t,n){P.push(t)}),e("<div>").addClass("terminal-header").appendTo(_),R=e("<div>").addClass("terminal-output").appendTo(_),_.addClass("terminal");if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)_.click(function(){_.find("textarea").focus()}),_.find("textarea").focus();if(Q.login&&typeof Q.onBeforeLogin=="function")try{Q.onBeforeLogin(_)}catch(Z){throw l(Z,"onBeforeLogin"),Z}typeof n=="string"&&(typeof Q.login=="string"||Q.login)&&(Q.login=function(t){return function(r,i,s,o){_.pause(),e.jrpc(n,t,[r,i],function(e){_.resume(),!e.error&&e.result?s(e.result):s(null)},function(e,t,n){_.resume(),_.error("&#91;AJAX&#92; Response: "+t+"\n"+e.responseText)})}}(e.type(Q.login)==="boolean"?"login":Q.login));if(p("prompt",Q.prompt)){var et,tt;a(n,function(n){et=new c(e.extend({name:Q.name,prompt:Q.prompt,greetings:Q.greetings},n)),tt=e("<div/>").appendTo(_).cmd({prompt:Q.prompt,history:Q.history,historyFilter:Q.historyFilter,historySize:Q.historySize,width:"100%",keydown:M,keypress:Q.keypress?function(e){return Q.keypress(e,_)}:null,onCommandChange:function(t){if(e.type(Q.onCommandChange)==="function")try{Q.onCommandChange(t,_)}catch(n){throw l(n,"onCommandChange"),n}h()},commands:E}),H.append(_),Q.enabled===!0?_.focus(t,!0):_.disable(),e(document).bind("click.terminal",function(t){!e(t.target).parents().hasClass("terminal")&&Q.onBlur(_)!==!1&&_.disable()}),_.click(function(){_.focus()}),Q.login&&_.token&&!_.token()&&_.login_name&&!_.login_name()?S():O(),z=k(_),tt.resize(z),_.oneTime(100,function(){e(window).bind("resize.terminal",function(){if(_.is(":visible")){var e=_.width(),t=_.height();(J!==t||V!==e)&&_.resize()}})}),e.type(e.fn.init.prototype.mousewheel)==="function"&&_.mousewheel(function(e,t){return t>0?_.scroll(-40):_.scroll(40),!1},!0)})}return _.data("terminal",_),_}}(jQuery),define("jquery.terminal",function(){}),function(e){typeof define=="function"&&define.amd?define("jquery.ui.widget",["jquery"],e):e(jQuery)}(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})});var Model=function(e,t){var n=function(t){this.attributes=Model.Utils.extend({},t),this.changes={},this.errors=new Model.Errors(this),this.uid=[e,Model.UID.generate()].join("-"),Model.Utils.isFunction(this.initialize)&&this.initialize()};return Model.Module.extend.call(n,Model.Module),n._name=e,n.collection=[],n.unique_key="id",n.extend(Model.Callbacks).extend(Model.ClassMethods),n.prototype=new Model.Base,n.prototype.constructor=n,Model.Utils.isFunction(t)&&t.call(n,n,n.prototype),n};Model.Callbacks={bind:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},trigger:function(e,t){this.callbacks=this.callbacks||{};var n=this.callbacks[e];if(n)for(var r=0;r<n.length;r++)n[r].apply(this,t||[]);return this},unbind:function(e,t){this.callbacks=this.callbacks||{};if(t)for(var n=this.callbacks[e]||[],r=0;r<n.length;r++)n[r]===t&&this.callbacks[e].splice(r,1);else delete this.callbacks[e];return this}},Model.ClassMethods={add:function(e){var t=e.id();return Model.Utils.inArray(this.collection,e)===-1&&(!t||!this.find(t))&&(this.collection.push(e),this.trigger("add",[e])),this},all:function(){return this.collection.slice()},chain:function(e){return Model.Utils.extend({},this,{collection:e||[]})},count:function(){return this.all().length},detect:function(e){for(var t=this.all(),n,r=0,i=t.length;r<i;r++){n=t[r];if(e.call(n,n,r))return n}},each:function(e,t){for(var n=this.all(),r=0,i=n.length;r<i;r++)e.call(t||n[r],n[r],r,n);return this},find:function(e){return this.detect(function(){return this.id()==e})},first:function(){return this.all()[0]},load:function(e){if(this._persistence){var t=this;this._persistence.read(function(n){for(var r=0,i=n.length;r<i;r++)t.add(n[r]);e&&e.call(t,n)})}return this},last:function(){var e=this.all();return e[e.length-1]},map:function(e,t){for(var n=this.all(),r=[],i=0,s=n.length;i<s;i++)r.push(e.call(t||n[i],n[i],i,n));return r},persistence:function(e){if(arguments.length==0)return this._persistence;var t=Array.prototype.slice.call(arguments,1);return t.unshift(this),this._persistence=e.apply(e,t),this},pluck:function(e){for(var t=this.all(),n=[],r=0,i=t.length;r<i;r++)n.push(t[r].attr(e));return n},remove:function(e){for(var t,n=0,r=this.collection.length;n<r;n++)if(this.collection[n]===e){t=n;break}return t!=undefined?(this.collection.splice(t,1),this.trigger("remove",[e]),!0):!1},reverse:function(){return this.chain(this.all().reverse())},select:function(e,t){for(var n=this.all(),r=[],i,s=0,o=n.length;s<o;s++)i=n[s],e.call(t||i,i,s,n)&&r.push(i);return this.chain(r)},sort:function(e){return this.chain(this.all().sort(e))},sortBy:function(e){var t=Model.Utils.isFunction(e);return this.sort(function(n,r){var i=t?e.call(n):n.attr(e),s=t?e.call(r):r.attr(e);return i<s?-1:i>s?1:0})},use:function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(this),e.apply(this,t),this}},Model.Errors=function(e){this.errors={},this.model=e},Model.Errors.prototype={add:function(e,t){return this.errors[e]||(this.errors[e]=[]),this.errors[e].push(t),this},all:function(){return this.errors},clear:function(){return this.errors={},this},each:function(e){for(var t in this.errors)for(var n=0;n<this.errors[t].length;n++)e.call(this,t,this.errors[t][n]);return this},on:function(e){return this.errors[e]||[]},size:function(){var e=0;return this.each(function(){e++}),e}},Model.InstanceMethods={asJSON:function(){return this.attr()},attr:function(e,t){if(arguments.length===0)return Model.Utils.extend({},this.attributes,this.changes);if(arguments.length===2)return this.attributes[e]===t?delete this.changes[e]:this.changes[e]=t,this.trigger("change:"+e,[this]),this;if(typeof e=="object"){for(var n in e)this.attr(n,e[n]);return this.trigger("change",[this]),this}return e in this.changes?this.changes[e]:this.attributes[e]},callPersistMethod:function(e,t){var n=this,r=function(r){r&&(n.merge(n.changes).reset(),e==="destroy"?n.constructor.remove(n):n.constructor.add(n),n.trigger(e));var i;return t&&(i=t.apply(n,arguments)),i};this.constructor._persistence?this.constructor._persistence[e](this,r):r.call(this,!0)},destroy:function(e){return this.callPersistMethod("destroy",e),this},id:function(){return this.attributes[this.constructor.unique_key]},merge:function(e){return Model.Utils.extend(this.attributes,e),this},newRecord:function(){return this.id()===undefined},reset:function(){return this.errors.clear(),this.changes={},this},save:function(e){return this.valid()?this.callPersistMethod(this.newRecord()?"create":"update",e):e&&e(!1),this},valid:function(){return this.errors.clear(),this.validate(),this.errors.size()===0},validate:function(){return this}},Model.localStorage=function(e){if(!window.localStorage)return{create:function(e,t){t(!0)},destroy:function(e,t){t(!0)},read:function(e){e([])},update:function(e,t){t(!0)}};var t=[e._name,"collection"].join("-"),n=function(){var e=localStorage[t];return e?JSON.parse(e):[]},r=function(e){localStorage.setItem(e.uid,JSON.stringify(e.asJSON())),e=e.uid;var r=n();Model.Utils.inArray(r,e)===-1&&(r.push(e),localStorage.setItem(t,JSON.stringify(r)))};return{create:function(e,t){r(e),t(!0)},destroy:function(e,r){localStorage.removeItem(e.uid);var i=e.uid,s=n();i=Model.Utils.inArray(s,i),i>-1&&(s.splice(i,1),localStorage.setItem(t,JSON.stringify(s))),r(!0)},read:function(t){if(!t)return!1;for(var r=e.map(function(){return this.uid}),i=n(),s=[],o,u,f=0,l=i.length;f<l;f++)u=i[f],Model.Utils.inArray(r,u)==-1&&(o=JSON.parse(localStorage[u]),o=new e(o),o.uid=u,s.push(o));t(s)},update:function(e,t){r(e),t(!0)}}},Model.Log=function(){window.console&&window.console.log.apply(window.console,arguments)},Model.Module={extend:function(e){return Model.Utils.extend(this,e),this},include:function(e){return Model.Utils.extend(this.prototype,e),this}},Model.REST=function(e,t,n){var r=/:([\w\d]+)/g,i=function(){for(var e=[],n;(n=r.exec(t))!==null;)e.push(n[1]);return e}();return Model.Utils.extend({path:function(e){var n=t;return jQuery.each(i,function(t,r){n=n.replace(":"+r,e.attributes[r])}),n},create:function(e,t){return this.xhr("POST",this.create_path(e),e,t)},create_path:function(e){return this.path(e)},destroy:function(e,t){return this.xhr("DELETE",this.destroy_path(e),e,t)},destroy_path:function(e){return this.update_path(e)},params:function(e){var t;if(e){var n=e.asJSON();delete n[e.constructor.unique_key],t={},t[e.constructor._name.toLowerCase()]=n}else t=null;return jQuery.ajaxSettings.data&&(t=Model.Utils.extend({},jQuery.ajaxSettings.data,t)),JSON.stringify(t)},read:function(t){return this.xhr("GET",this.read_path(),null,function(n,r,i){i=jQuery.makeArray(i),n=[],r=0;for(var s=i.length;r<s;r++)n.push(new e(i[r]));t(n)})},read_path:function(){return t},update:function(e,t){return this.xhr("PUT",this.update_path(e),e,t)},update_path:function(e){return[this.path(e),e.id()].join("/")},xhr:function(e,t,n,r){var i=this,s=e=="GET"?undefined:this.params(n);return jQuery.ajax({type:e,url:t,contentType:"application/json",dataType:"json",data:s,dataFilter:function(e){return/\S/.test(e)?e:undefined},complete:function(e,t){i.xhrComplete(e,t,n,r)}})},xhrComplete:function(e,t,n,r){var i=Model.REST["handle"+e.status];i&&i.call(this,e,t,n),t=t==="success",i=Model.REST.parseResponseData(e),t&&n&&i&&n.attr(i),r&&r.call(n,t,e,i)}},n)},Model.RestPersistence=Model.REST,Model.REST.handle422=function(e,t,n){if(e=Model.REST.parseResponseData(e)){n.errors.clear();for(var r in e)for(t=0;t<e[r].length;t++)n.errors.add(r,e[r][t])}},Model.REST.parseResponseData=function(e){try{return/\S/.test(e.responseText)?jQuery.parseJSON(e.responseText):undefined}catch(t){Model.Log(t)}},Model.UID={counter:0,generate:function(){return[(new Date).valueOf(),this.counter++].join("-")},reset:function(){return this.counter=0,this}},Model.Utils={extend:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0,r=t.length;n<r;n++)for(var i in t[n])e[i]=t[n][i];return e},inArray:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},isFunction:function(e){return Object.prototype.toString.call(e)==="[object Function]"}},Model.VERSION="0.11.0",Model.Base=function(){function e(){}return e.prototype=Model.Utils.extend({},Model.Callbacks,Model.InstanceMethods),e}(),define("jsmodel",function(){}),define("controllers/dash",["jquery","sammy","faye","jspdf","views/devices","views/fsm","views/tasks","hbs!tpl/main.menu.right.html","hbs!tpl/modals/alerts.html","hbs!tpl/tabs.html","jquery.easyModal","jquery.terminal","jquery.ui.widget","jsmodel"],function(e,t,n,r,i,s,o,u,a,f){function l(t){e("#menu nav a").each(function(){e(this).attr("data")&&(this.href="/#/"+t+"/"+e(this).attr("data"))})}console.log("Loaded dash");var e=e||e(function(e){e=e});return showOfflineBanner=function(){e("#main-container").append('<p style="text-align:center;margin-top:100px;"><h1 style="text-align:center;">You are offline.</h1><h3 style="text-align:center;">Refresh to try again</h3></p>')},{start:function(){console.log("starting dash on channel: "+SP.WS.channel);if(!navigator.onLine){showOfflineBanner();return}SP.Terminal=e("#terminal").terminal({},{enabled:!1,greetings:"Ready.",onFocus:function(){return!1},onBlur:function(){return!0}}),e("#terminal .terminal-header").html('<div style="float:right;"><a href="#" style="color:#fff;" action="log2PDF">Download</a></div>'),e("#modals:first").append(a({},{partials:{}})),e("#menu-right:first").append(u({},{partials:{}})),e("#menu #app_tabs:first").append(f({},{partials:{}})),e(".modal.c0").easyModal({top:200,overlay:.2}),e(".modal.c2").easyModal({top:200,overlay:.2});var n=t(function(){e(document).on("click",function(t){console.log(e(t.target)),console.log("Action : "+e(t.target).attr("action"));var r=e(t.target).attr("action");e(t.target).is("#main-menu-login ul li")||e("div.account_dropdown").hide(),e(t.target).is("#main-menu-header ul li")||e("div.app_dropdown").hide(),e(t.target).is("#menu-right li.beacon")||e("#menu-right div.beacon.dropdown").hide();switch(r){case"showNewApp":e(".modal.c1").trigger("openModal"),e("div.app_dropdown").hide();break;case"user.logout":e("div.account_dropdown").hide(),n.setLocation("#/logout");break;case"openDashboard":window.location.href="/apps";break;case"openConsole":e("#terminal").toggle();break;case"log2PDF":var i=new jsPDF,s={"#editor":function(e,t){return!0}};i.fromHTML(e("#terminal .terminal-output").html(),15,15,{width:800,elementHandlers:s}),i.save("log.pdf");break;case"showBeaconTabbadgeMenu":SP.incrementTabIcon(),e("#menu-right div.beacon.dropdown").css({display:"inline-block"})}}),e("button").on("click",function(){e(this).attr("data")=="submit-c1"&&e(".modal.c1").trigger("closeModal")}),e("form").submit(function(e){return e.preventDefault(),!1}),this.get("/:appid/sparkdash/#/devices",function(){e("header").each(function(){e(this).removeClass("active")}),e("header.devices").toggleClass("active"),e("div.app_dropdown").hide(),SP.Tab.Devices.MAP||i.render()}),this.get("/:appid/sparkdash/#/fsm",function(){console.log("Sammy says: fsm"),e("header").each(function(){e(this).removeClass("active")}),e("header.fsm").toggleClass("active"),e("div.app_dropdown").hide(),s.render()}),this.get("/:appid/sparkdash/#/tasks",function(){console.log("Sammy says: tasks"),e("header").each(function(){e(this).removeClass("active")}),e("header.tasks").toggleClass("active"),e("div.app_dropdown").hide(),o.render({foo:"bar"})}),this.get("#/account",function(){}),this.get("#/logout",function(){e("#layout #main").animate({opacity:0},200,"linear",function(){e("#main-menu-container").css({top:"-75px"}),e("#menu").css({left:0}),window.location.href="/logout"})}),this.get("#/login",function(){e("#main-menu-container").css({top:0}),e("#menu").css({left:"75px"})}),this.get("/:appid/sparkdash",function(){console.log("initalizing app "+this.params.appid),l(this.params.appid),n.setLocation("/"+this.params.appid+"/sparkdash/#/devices")})});return n.run(),!0}}}),define("controllers/login",["jquery"],function(e){console.log("Loaded login");var e=e||e(function(e){e=e});return{start:function(){return console.log("starting login"),!0}}}),define("hbs!tpl/modals/app.settings.html",["handlebars"],function(e){return e.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,i=i||{},'<div id="options" class="avgrund-popup">\n    <div id="list">\n      <ul>\n        <li class="active"><i class="icon-dashboard"></i>System</li>\n        <li><i class="icon-table"></i>Layout</li>\n        <li><i class="icon-magic"></i>Style</li>\n        <li><i class="icon-hand-right"></i>Credits</li>\n      </ul>\n    </div>\n  <div id="view">\n    <div class="settings show">\n      <h1>System</h1>\n      <form>\n        <section>\n          <h2>Temperature</h2>\n          <div>\n            <input name="unitType" type="radio" value="f" id="fahrenheit" checked/>\n            <label for="fahrenheit">Fahrenheit</label>\n          </div>\n          <div>\n            <input name="unitType" type="radio" value="c" id="celsius"/>\n            <label for="celsius">Celsius</label>\n          </div>\n        </section>\n        <section>\n          <h2>Hours</h2>\n          <div>\n            <input name="clock" type="radio" value="12" id="time12" checked/>\n            <label for="time12">12</label>\n          </div>\n          <div>\n            <input name="clock" type="radio" value="24" id="time24"/>\n            <label for="time24">24</label>\n          </div>\n        </section>\n        <section>\n          <h2>Choose Your Language</h2>\n          <div>\n              <select name="lang" id="lang">\n                <option value="AF">Afrikaans</option>\n                <option value="AL">Albanian</option>\n                <option value="AR">Arabic</option>\n                <option value="HY">Armenian</option>\n                <option value="AZ">Azerbaijani</option>\n                <option value="EU">Basque</option>\n                <option value="BY">Belarusian</option>\n                <option value="BU">Bulgarian</option>\n                <option value="LI">British English</option>\n                <option value="MY">Burmese</option>\n                <option value="CA">Catalan</option>\n                <option value="CN">Chinese - Simplified</option>\n                <option value="TW">Chinese - Traditional</option>\n                <option value="CR">Croatian</option>\n                <option value="CZ">Czech</option>\n                <option value="DK">Danish</option>\n                <option value="DV">Dhivehi</option>\n                <option value="NL">Dutch</option>\n                <option value="EN" selected="selected">English</option>\n                <option value="EO">Esperanto</option>\n                <option value="ET">Estonian</option>\n                <option value="FA">Farsi</option>\n                <option value="FI">Finnish</option>\n                <option value="FR">French</option>\n                <option value="FC">French Canadian</option>\n                <option value="GZ">Galician</option>\n                <option value="DL">German</option>\n                <option value="KA">Georgian</option>\n                <option value="GR">Greek</option>\n                <option value="GU">Gujarati</option>\n                <option value="HT">Haitian Creole</option>\n                <option value="IL">Hebrew</option>\n                <option value="HI">Hindi</option>\n                <option value="HU">Hungarian</option>\n                <option value="IS">Icelandic</option>\n                <option value="IO">Ido</option>\n                <option value="ID">Indonesian</option>\n                <option value="IR">Irish Gaelic</option>\n                <option value="IT">Italian</option>\n                <option value="JP">Japanese</option>\n                <option value="JW">Javanese</option>\n                <option value="KM">Khmer</option>\n                <option value="KR">Korean</option>\n                <option value="KU">Kurdish</option>\n                <option value="LA">Latin</option>\n                <option value="LV">Latvian</option>\n                <option value="LT">Lithuanian</option>\n                <option value="ND">Low German</option>\n                <option value="MK">Macedonian</option>\n                <option value="MT">Maltese</option>\n                <option value="GM">Mandinka</option>\n                <option value="MI">Maori</option>\n                <option value="MR">Marathi</option>\n                <option value="MN">Mongolian</option>\n                <option value="NO">Norwegian</option>\n                <option value="OC">Occitan</option>\n                <option value="PS">Pashto</option>\n                <option value="GN">Plautdietsch</option>\n                <option value="PL">Polish</option>\n                <option value="BR">Portuguese</option>\n                <option value="PA">Punjabi</option>\n                <option value="RO">Romanian</option>\n                <option value="RU">Russian</option>\n                <option value="SR">Serbian</option>\n                <option value="SK">Slovak</option>\n                <option value="SL">Slovenian</option>\n                <option value="SP">Spanish</option>\n                <option value="SI">Swahili</option>\n                <option value="SW">Swedish</option>\n                <option value="CH">Swiss</option>\n                <option value="TL">Tagalog</option>\n                <option value="TT">Tatarish</option>\n                <option value="TH">Thai</option>\n                <option value="TR">Turkish</option>\n                <option value="TK">Turkmen</option>\n                <option value="UA">Ukrainian</option>\n                <option value="UZ">Uzbek</option>\n                <option value="VU">Vietnamese</option>\n                <option value="CY">Welsh</option>\n                <option value="SN">Wolof</option>\n                <option value="JI">Yiddish - transliterated</option>\n                <option value="YI">Yiddish - unicode</option>\n              </select>\n            </div>\n          </section>\n        <section>\n          <h2>Location Address <i>(optional)</i></h2>\n          <div>\n            <input type="text" name="address" id="address" placeholder="Boulder, CO, 80305, USA" />\n          </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Layout</h1>\n      <form>\n        <section>\n          <h2>Animation Toggle</h2>\n          <div>\n            <input type="radio" name="animation" id="animation-on" value="true" checked/>\n            <label for="animation-on">On</label>\n          </div>\n          <div>\n            <input type="radio" name="animation" id="animation-off" value="false"/>\n            <label for="animation-off">Off</label>\n          </div>\n        </section>\n        <section>\n          <h2>Seconds Toggle</h2>\n          <div>\n            <input name="seconds" type="radio" value="true" id="show-seconds" checked/>\n            <label for="show-seconds">On</label>\n          </div>\n          <div>\n            <input name="seconds" type="radio" value="false" id="hide-seconds"/>\n            <label for="hide-seconds">Off</label>\n          </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Style</h1>\n      <form>\n      <section>\n          <h2>Text Color</h2>\n          <div>\n            <input name="textColor" type="radio" value="dark-text" id="dark-text"/>\n            <label for="dark">Dark</label>\n          </div>\n          <div>\n            <input name="textColor" type="radio" value="light-text" id="light-text" checked/>\n            <label for="light">Light</label>\n          </div>\n        </section>\n        <section>\n          <h2>Background Color</h2>\n          <div id="color-pick">\n            <ul>\n              <li class="dark-bg active"><i class="icon-ok"></i></li>\n              <li class="light-bg"><i class="icon-ok"></i></li>\n              <li class="mint-bg"><i class="icon-ok"></i></li>\n              <li class="blue-bg"><i class="icon-ok"></i></li>\n              <li class="red-bg"><i class="icon-ok"></i></li>\n              <li class="orange-bg"><i class="icon-ok"></i></li>\n              <li class="green-bg"><i class="icon-ok"></i></li>\n              <li class="purple-bg"><i class="icon-ok"></i></li>\n              <li class="aqua-bg"><i class="icon-ok"></i></li>\n            </ul>\n            <input type="hidden" name="color" value="">\n            <div id="preview" class="dark-bg light-text">\n              <i>1</i>\n            </div>\n        </div>\n        </section>\n        <button type="submit">SAVE</button>\n      </form>\n    </div>\n    <div class="settings">\n      <h1>Credits</h1>\n      <form>\n        <section>\n          <h2>Weather Icons</h2>\n          <div>\n            <a href="https://twitter.com/adamwhitcroft" target="_blank">Adam Whitcroft</a>\n          </div>\n        </section>\n        <section>\n          <h2>jQuery</h2>\n          <div>\n            <a href="http://jquery.com/" target="_blank">Homepage</a>\n          </div>\n        </section>\n        <section>\n          <h2>underscore.js</h2>\n          <div>\n            <a href="http://underscorejs.org/" target="_blank">Homepage</a>\n          </div>\n        </section>\n        <section>\n          <h2>Avgrund</h2>\n          <div>\n            <a href="https://twitter.com/hakimel" target="_blank">Hakim El Hattab</a>\n          </div>\n        </section>\n        <section>\n          <h2>Tipsy</h2>\n          <div>\n            <a href="https://github.com/jaz303/tipsy" target="_blank">Github</a>\n          </div>\n        </section>\n        <section>\n          <h2>Q.js</h2>\n          <div>\n            <a href="https://github.com/kriskowal/q" target="_blank">Github</a>\n          </div>\n        </section>\n        <section>\n          <h2>Geolib</h2>\n          <div>\n            <a href="https://github.com/manuelbieh/Geolib" target="_blank">Github</a>\n          </div>\n        </section>\n      </form>\n    </div>\n    <div class="promo">\n      <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ERRMQGDQL9SZA" target="_blank" id="gift">\n        <i class="icon-gift"></i>\n        <p>Think we\'ve done a good job?</p>\n        <p><b>Buy us a beer!</b></p>\n      </a>\n      <a href="https://twitter.com/share?text=Loving+the+new+updates+to+currently+http%3A%2F%2Fbit.ly%2FPMawVf+%23currently+%23chrome+by+%40vitaly_babiy+and+%40henrymodis" target="_blank" id="share"><i class="icon-twitter"></i>Share Currently</a>\n      <a href="https://twitter.com/vitaly_babiy" target="_blank" class="who vitaly"><b>Hacker:</b> @Vitaly</a>\n      <a href="https://twitter.com/henrymodis" target="_blank" class="who henry"><b>Designer:</b> @Henry</a>\n      <a class="normal" href="http://rainfalldesign.tumblr.com/">Updates</a>\n      <a class="normal" href="http://chromecurrently.uservoice.com" target="_blank" id="support">Support</a>\n    </div>\n  </div>\n  <a href="#" id="close"><i class="icon-remove"></i></a>\n</div>'})}),define("controllers/register",["jquery","hbs!tpl/modals/app.settings.html"],function(e,t){console.log("Loaded register");var e=e||e(function(e){e=e});return{start:function(n){return console.log("starting register"),e("#settings:first").append(t({},{partials:{}})),e("#btn-settings").on("click",function(){console.log("click"),e("#options #list li:not(#options .active)").each(function(t){e(this).css("-webkit-animation-delay",80*t+"ms").addClass("animated fadeInLeft")})}),e("#options #list li").click(function(){var t=e(this);e("#options #list li.active").removeClass("active"),t.addClass("active"),e(".settings.show").fadeOut(0).removeClass("show");var n=e(this).index();e(settings[n]).fadeIn(100).addClass("show")}),!0}}}),L_PREFER_CANVAS=!0;var SP={Controller:"init",Network:{http:function(e){var t={headers:{accept:"application/json"},type:"GET",timeout:6e4,async:!0,url:"/"},n=function(e){if(e){_.isArray(e)&&e.length>0&&(e=e[0]);if(e.error)return errors[e.error]}},r=$.extend({},t,e),i=$.Deferred();return console.log("------ Requesting URL: "+e.url),$.ajax(r).then(function(e){var t=n(e);t&&Emitter.emit(t,"error"),i.resolve(e)},function(e){Emitter.emit(e,"notify")}),i.promise()}},WS:{key:"212c3181292b80f4e1a9",channel:typeof DOMAIN!=undefined?DOMAIN+"_"+PKG:!1},Tab:{},logout:function(){$("#layout #main").animate({opacity:0},200,"linear",function(){$("#main-menu-container").css({top:"-75px"}),$("#menu").css({left:0}),window.location.href="/logout"})},incrementTabIcon:function(e){e?(val=parseInt($(".beacon .tabbadge").text()),$(".beacon .tabbadge").text(e+val),$(".beacon .tabbadge").show(),$(".beacon .tabbadge").toggleClass("bounceIn")):($(".beacon .tabbadge").hide(),$(".beacon .tabbadge").text(0),$(".beacon .tabbadge").toggleClass("bounceIn"))},render:function(e,t,n){if(e instanceof jQuery)var r=e;else var r=$(e+":first");n?r.append(t):r.html(t)},Terminal:!1,UI:{filter:[],FF:{},tmp:{device:Model("devicePreview"),marker:Model("markerPreview")}},DB:{apps:Model("apps",function(){var e=this;this.extend({find_by_ID:function(t){return e.detect(function(){return this.attr("_id")==t})}})}),devices:Model("devices",function(){var e=this;this.extend({find_by_ID:function(t){return console.log("Finding id: "+t),e.detect(function(){return this.attr("clientID")==t})},countMarked:function(){var t=0;return e.each(function(){console.log("marked: "+this.attr("marked")),this.attr("marked")&&t++}),t},getMarked:function(){return e.select(function(){if(this.attr("marked"))return this})},getMarkedSocketIDs:function(){return e.select(function(){if(this.attr("marked")&&this.attr("socketID"))return this.attr("socketID")})}}),this.include({getLifecycleState:function(){var e="UNKNOWN",t=[{name:"UNKNOWN",value:-1},{name:"STOP",value:0},{name:"START",value:1},{name:"LOGOUT",value:2},{name:"LOGON",value:3},{name:"LOCATION",value:4},{name:"IDLE",value:10}];for(x in t)t[x].value==this.attr("lifecycle_state")&&(e=t[x].name);return e},updateMarker:function(){if(!SP.Tab.Devices.MAP)return console.log("SP.Tab.Devices.MAP is missing. Stopping updateMarker"),!1;var e=this.attr("data");if(!e.latitude||!e.longitude)return console.log("This updateMarker request doesnt have lat/lng coordinates. Stopping."),!1;var t=this.attr("_marker"),n=new L.LatLng(t._latlng.lat,t._latlng.lng),r=new L.LatLng(e.latitude,e.longitude),i=[n,r],s=new L.Polyline(i),o=L.icon({iconUrl:"/img/sparkdash/bluedot.path.png",iconSize:[18,18],iconAnchor:[9,9],shadowUrl:null}),u=new L.animatedMarker(s.getLatLngs(),{icon:o,autoStart:!1,distance:600,interval:800,onEnd:function(){$(this._icon).fadeOut(1e3,function(){SP.Tab.Devices.MAP.removeLayer(this)})}});SP.Tab.Devices.MAP.addLayer(u),$(u._icon).hide().fadeIn(300,function(){u.start()}),t.setPulsing(!0),SP.Tab.Devices.setDeviceIdleState(this.attr("clientID"),1),t.setLatLng(new L.LatLng(e.latitude,e.longitude)),t._timestamp=this.attr("timestamp"),t.options._idletimestamp=(new Date).getTime()+SP.Tab.Devices.Settings.idleTimeout*60*1e3,setTimeout(function(){console.log(t.options._idletimestamp+" - "+(new Date).getTime()),t.options._idletimestamp-(new Date).getTime()<=0&&(console.log("SHOULD IDLE"),t.setPulsing(!1),$(t._icon).toggleClass("idle"),SP.Tab.Devices.setDeviceIdleState(t.options.clientID,2))},SP.Tab.Devices.Settings.idleTimeout*60*1e3)}})}),markedDevices:[]}},MicroEvent=function(){};MicroEvent.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},clear:function(e,t){this._events=this._events||{};if(e in this._events==0)return;this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){this._events=this._events||{};if(e in this._events==0)return;for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(e){var t=["on","clear","trigger"];for(var n=0;n<t.length;n++)e.prototype[t[n]]=MicroEvent.prototype[t[n]]};var Emitter=registerEmitter();Emitter.on("error",function(e){alert(e)}),function(){var e,t,n,r,i,s,o;r=function(e,t){var n,r,i,s;s=[];for(r in t.prototype)try{i=t.prototype[r],e[r]==null&&typeof i!="function"?s.push(e[r]=i):s.push(void 0)}catch(o){n=o}return s},e={},e.options==null&&(e.options={}),n={checks:{xhr:{url:function(){return"/offline-test-request/"+Math.floor(Math.random()*1e9)}},image:{url:function(){return"http://dqakt69vkj09v.cloudfront.net/are-we-online.gif?_="+Math.floor(Math.random()*1e9)}},active:"image"},checkOnLoad:!1,interceptRequests:!0},i=function(e,t){var n,r,i,s,o,u;n=e,u=t.split(".");for(r=s=0,o=u.length;s<o;r=++s){i=u[r],n=n[i];if(typeof n!="object")break}return n},e.getOption=function(t){var r,s;return r=(s=i(e.options,t))!=null?s:i(n,t),typeof r=="function"?r():r},typeof window.addEventListener=="function"&&window.addEventListener("online",function(){return setTimeout(e.confirmUp,100)},!1),typeof window.addEventListener=="function"&&window.addEventListener("offline",function(){return e.confirmDown()},!1),e.state="up",e.markUp=function(){e.trigger("confirmed-up");if(e.state==="up")return;return e.state="up",e.trigger("up")},e.markDown=function(){e.trigger("confirmed-down");if(e.state==="down")return;return e.state="down",e.trigger("down")},s={},e.on=function(t,n,r){var i,o,u,a,f;o=t.split(" ");if(o.length>1){f=[];for(u=0,a=o.length;u<a;u++)i=o[u],f.push(e.on(i,n,r));return f}return s[t]==null&&(s[t]=[]),s[t].push([r,n])},e.off=function(e,t){var n,r,i,o,u;if(s[e]==null)return;if(!t)return s[e]=[];r=0,u=[];while(r<s[e].length)o=s[e][r],n=o[0],i=o[1],i===t?u.push(s[e].splice(r,1)):u.push(r++);return u},e.trigger=function(e){var t,n,r,i,o,u,a;if(s[e]!=null){o=s[e],a=[];for(r=0,i=o.length;r<i;r++)u=o[r],t=u[0],n=u[1],a.push(n.call(t));return a}},t=function(e,t,n){var r,i;return r=function(){return e.status&&e.status<12e3?t():n()},e.onprogress===null?(e.addEventListener("error",n,!1),e.addEventListener("timeout",n,!1),e.addEventListener("load",r,!1)):(i=e.onreadystatechange,e.onreadystatechange=function(){return e.readyState===4?r():e.readyState===0&&n(),typeof i=="function"?i.apply(null,arguments):void 0})},e.checks={},e.checks.xhr=function(){var n,r;r=new XMLHttpRequest,r.offline=!1,r.open("HEAD",e.getOption("checks.xhr.url"),!0),t(r,e.markUp,e.markDown);try{r.send()}catch(i){n=i,e.markDown()}return r},e.checks.image=function(){var t;return t=document.createElement("img"),t.onerror=e.markDown,t.onload=e.markUp,t.src=e.getOption("checks.image.url"),void 0},e.check=function(){return e.trigger("checking"),e.checks[e.getOption("checks.active")]()},e.confirmUp=e.confirmDown=e.check,e.onXHR=function(e){var t,n,i;t=function(t,n){var r;return r=t.open,t.open=function(i,s,o,u,a){return e({type:i,url:s,async:o,flags:n,user:u,password:a,xhr:t}),r.apply(t,arguments)}},i=window.XMLHttpRequest,window.XMLHttpRequest=function(e){var n,r,s;return n=new i(e),t(n,e),s=n.setRequestHeader,n.headers={},n.setRequestHeader=function(e,t){return n.headers[e]=t,s.call(n,e,t)},r=n.overrideMimeType,n.overrideMimeType=function(e){return n.mimeType=e,r.call(n,e)},n},r(window.XMLHttpRequest,i);if(window.XDomainRequest!=null)return n=window.XDomainRequest,window.XDomainRequest=function(){var e;return e=new n,t(e),e},r(window.XDomainRequest,n)},o=function(){e.getOption("interceptRequests")&&e.onXHR(function(n){var r;r=n.xhr;if(r.offline!==!1)return t(r,e.confirmUp,e.confirmDown)});if(e.getOption("checkOnLoad"))return e.check()},setTimeout(o,0),window.Offline=e}.call(this),function(){var e,t,n,r,i,s,o,u,a;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");r={},s=null,i=function(){var e;return r.state!=null&&Offline.trigger("reconnect:stopped"),r.state="inactive",r.remaining=r.delay=(e=Offline.getOption("reconnect.initialDelay"))!=null?e:3},t=function(){var e,t;return e=(t=Offline.getOption("reconnect.delay"))!=null?t:Math.min(Math.ceil(r.delay*1.5),3600),r.remaining=r.delay=e},o=function(){if(r.state==="connecting")return;r.remaining-=1,Offline.trigger("reconnect:tick");if(r.remaining===0)return u()},u=function(){if(r.state!=="waiting")return;return Offline.trigger("reconnect:connecting"),r.state="connecting",Offline.check()},e=function(){return r.state="waiting",Offline.trigger("reconnect:started"),s=setInterval(o,1e3)},a=function(){return clearInterval(s),i()},n=function(){if(r.state==="connecting")return Offline.trigger("reconnect:failure"),r.state="waiting",t()},r.tryNow=u,setTimeout(function(){if(Offline.getOption("reconnect")!==!1)return i(),Offline.on("down",e),Offline.on("confirmed-down",n),Offline.on("up",a),Offline.reconnect=r},0)}.call(this),require(["jquery","controllers/dash","controllers/login","controllers/register","jsonlint","codemirror"],function($,dash,login,register){SP.UI.filter[200]=function(e){return console.log(e),"Click This: <b>"+e.status.data.fname+"</b>!"},SP.UI.filter[201]=function(e){var t=new Date(e.status.data.timein*1e3);return"Clocked in at <b>"+t.toUTCString()+"</b>!"},SP.UI.filter.logout=function(e){return setTimeout(function(){SP.logout()},2e3),"Logging out..."},SP.UI.filter[100]=function(e){var t=e.status.data.image,n=e.status.data.jobNum,r=e.status.data.address,i=e.status.data.labelText,s=e.status.data.labelColor;return'<div style="width:50px;height:50px;margin-top: 3px;float:left;"><img src="'+t+'" width="50"></div><div style="float:left;margin-left: 17px;"><div class="row1" style="float:left;"><a href="#" style="text-decoration:none;font-weight:bold;color:#336699;">'+n+'</a></div><div class="row2" style="float:left;">'+r+'</div><div class="row3" style="float:left;"><div class="label '+s+'">'+i+"</div></div></div>"};var tmpDevice=new SP.UI.tmp.device({longitude:"-94.486894",enabled:"true",userID:"TZMartin",clientID:"TZ-ef12155c-a286-3253-bfb1-24dbe403a1fa",latitude:"37.1122284",appPackage:"com.test.app",geohash:"9ysg1uhdruc3",device:"iPhone+4S",expires:"123456870",status:{id:100,title:"Service Trip",data:{image:"https://www.monosnap.com/image/6jaPgaE3d0i2wq3umYzixoz7y.png",jobNum:"S9822215",address:"1199 West 25th St, Joplin",labelText:"Turn Off",labelColor:"red"},timestamp:1384165084},timestamp:1380741478});tmpDevice.save(),$(function($){console.log("Starting app"),SP.Controller=eval($("body").attr("controller")),typeof SP.Controller=="object"?SP.Controller.start():alert("No controller available")})}),define("../app",function(){});